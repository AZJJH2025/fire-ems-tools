import{g as st,a as it,r as w,u as lt,j as m,s as se,c as pe,d as X,b as ct,m as me,e as Ke,K as Lt,f as zt,b5 as Ee,M as jt,a7 as ft,a8 as gt,h as mt,b6 as Dt,l as ne,al as dt,B as de,aa as Te,ag as pt,k as He,b7 as Fe,b8 as Ft,b9 as ve,ah as Ne,ae as Nt,R as Ot,aI as rt,an as Bt}from"./index-CpWrjgNa.js";import{P as qe,b as St,u as Pt,f as at,j as yt,c as ut,T as ce}from"./Button-C2IyuXGa.js";import{s as Vt,H as Ut,V as Zt,W as Ct,N as ht,X as _t,O as Wt,b as Oe,Q as Yt,d as Xt,w as Ye,Y as nt,Z as Xe,u as be,C as Be}from"./Settings-9DFaGUct.js";import{v as Gt,L as N,l as Et}from"./leaflet-D67jbgwn.js";function Kt(e){return st("MuiAppBar",e)}it("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Ht=e=>{const{color:t,position:o,classes:r}=e,d={root:["root",`color${X(t)}`,`position${X(o)}`]};return ct(d,Kt,r)},bt=(e,t)=>e?`${e==null?void 0:e.replace(")","")}, ${t})`:t,qt=se(qe,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`position${X(o.position)}`],t[`color${X(o.color)}`]]}})(me(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter(Ke(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:t=>t.enableColorOnDark===!0&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:t=>t.enableColorOnDark===!1&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?bt(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?bt(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),Uo=w.forwardRef(function(t,o){const r=lt({props:t,name:"MuiAppBar"}),{className:d,color:L="primary",enableColorOnDark:b=!1,position:s="fixed",...i}=r,u={...r,color:L,position:s,enableColorOnDark:b},p=Ht(u);return m.jsx(qt,{square:!0,component:"header",ownerState:u,elevation:4,className:pe(p.root,d,s==="fixed"&&"mui-fixed"),ref:o,...i})});function Jt(e,t,o){const r=t.getBoundingClientRect(),d=o&&o.getBoundingClientRect(),L=Ct(t);let b;if(t.fakeTransform)b=t.fakeTransform;else{const u=L.getComputedStyle(t);b=u.getPropertyValue("-webkit-transform")||u.getPropertyValue("transform")}let s=0,i=0;if(b&&b!=="none"&&typeof b=="string"){const u=b.split("(")[1].split(")")[0].split(",");s=parseInt(u[4],10),i=parseInt(u[5],10)}return e==="left"?d?`translateX(${d.right+s-r.left}px)`:`translateX(${L.innerWidth+s-r.left}px)`:e==="right"?d?`translateX(-${r.right-d.left-s}px)`:`translateX(-${r.left+r.width-s}px)`:e==="up"?d?`translateY(${d.bottom+i-r.top}px)`:`translateY(${L.innerHeight+i-r.top}px)`:d?`translateY(-${r.top-d.top+r.height-i}px)`:`translateY(-${r.top+r.height-i}px)`}function Qt(e){return typeof e=="function"?e():e}function Ve(e,t,o){const r=Qt(o),d=Jt(e,t,r);d&&(t.style.webkitTransform=d,t.style.transform=d)}const eo=w.forwardRef(function(t,o){const r=St(),d={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},L={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:b,appear:s=!0,children:i,container:u,direction:p="down",easing:a=d,in:c,onEnter:n,onEntered:g,onEntering:v,onExit:I,onExited:y,onExiting:S,style:E,timeout:C=L,TransitionComponent:M=Vt,...B}=t,O=w.useRef(null),J=Pt(Ut(i),O,o),Z=h=>z=>{h&&(z===void 0?h(O.current):h(O.current,z))},Q=Z((h,z)=>{Ve(p,h,u),_t(h),n&&n(h,z)}),G=Z((h,z)=>{const W=ht({timeout:C,style:E,easing:a},{mode:"enter"});h.style.webkitTransition=r.transitions.create("-webkit-transform",{...W}),h.style.transition=r.transitions.create("transform",{...W}),h.style.webkitTransform="none",h.style.transform="none",v&&v(h,z)}),$=Z(g),P=Z(S),D=Z(h=>{const z=ht({timeout:C,style:E,easing:a},{mode:"exit"});h.style.webkitTransition=r.transitions.create("-webkit-transform",z),h.style.transition=r.transitions.create("transform",z),Ve(p,h,u),I&&I(h)}),te=Z(h=>{h.style.webkitTransition="",h.style.transition="",y&&y(h)}),j=h=>{b&&b(O.current,h)},oe=w.useCallback(()=>{O.current&&Ve(p,O.current,u)},[p,u]);return w.useEffect(()=>{if(c||p==="down"||p==="right")return;const h=Zt(()=>{O.current&&Ve(p,O.current,u)}),z=Ct(O.current);return z.addEventListener("resize",h),()=>{h.clear(),z.removeEventListener("resize",h)}},[p,c,u]),w.useEffect(()=>{c||oe()},[c,oe]),m.jsx(M,{nodeRef:O,onEnter:Q,onEntered:$,onEntering:G,onExit:D,onExited:te,onExiting:P,addEndListener:j,appear:s,in:c,timeout:C,...B,children:(h,{ownerState:z,...W})=>w.cloneElement(i,{ref:J,style:{visibility:h==="exited"&&!c?"hidden":void 0,...E,...i.props.style},...W})})});function to(e){return st("MuiDrawer",e)}it("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const Tt=(e,t)=>{const{ownerState:o}=e;return[t.root,(o.variant==="permanent"||o.variant==="persistent")&&t.docked,t.modal]},oo=e=>{const{classes:t,anchor:o,variant:r}=e,d={root:["root",`anchor${X(o)}`],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${X(o)}`,r!=="temporary"&&`paperAnchorDocked${X(o)}`]};return ct(d,to,t)},ro=se(Yt,{name:"MuiDrawer",slot:"Root",overridesResolver:Tt})(me(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),ao=se("div",{shouldForwardProp:zt,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:Tt})({flex:"0 0 auto"}),no=se(qe,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.paper,t[`paperAnchor${X(o.anchor)}`],o.variant!=="temporary"&&t[`paperAnchorDocked${X(o.anchor)}`]]}})(me(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:t})=>t.anchor==="left"&&t.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="top"&&t.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="right"&&t.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="bottom"&&t.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),Mt={left:"right",right:"left",top:"down",bottom:"up"};function so(e){return["left","right"].includes(e)}function io({direction:e},t){return e==="rtl"&&so(t)?Mt[t]:t}const Zo=w.forwardRef(function(t,o){const r=lt({props:t,name:"MuiDrawer"}),d=St(),L=Lt(),b={enter:d.transitions.duration.enteringScreen,exit:d.transitions.duration.leavingScreen},{anchor:s="left",BackdropProps:i,children:u,className:p,elevation:a=16,hideBackdrop:c=!1,ModalProps:{BackdropProps:n,...g}={},onClose:v,open:I=!1,PaperProps:y={},SlideProps:S,TransitionComponent:E,transitionDuration:C=b,variant:M="temporary",slots:B={},slotProps:O={},...J}=r,Z=w.useRef(!1);w.useEffect(()=>{Z.current=!0},[]);const Q=io({direction:L?"rtl":"ltr"},s),$={...r,anchor:s,elevation:a,open:I,variant:M,...J},P=oo($),D={slots:{transition:E,...B},slotProps:{paper:y,transition:S,...O,backdrop:Wt(O.backdrop||{...i,...n},{transitionDuration:C})}},[te,j]=Oe("root",{ref:o,elementType:ro,className:pe(P.root,P.modal,p),shouldForwardComponentProp:!0,ownerState:$,externalForwardedProps:{...D,...J,...g},additionalProps:{open:I,onClose:v,hideBackdrop:c,slots:{backdrop:D.slots.backdrop},slotProps:{backdrop:D.slotProps.backdrop}}}),[oe,h]=Oe("paper",{elementType:no,shouldForwardComponentProp:!0,className:pe(P.paper,y.className),ownerState:$,externalForwardedProps:D,additionalProps:{elevation:M==="temporary"?a:0,square:!0}}),[z,W]=Oe("docked",{elementType:ao,ref:o,className:pe(P.root,P.docked,p),ownerState:$,externalForwardedProps:D,additionalProps:J}),[A,R]=Oe("transition",{elementType:eo,ownerState:$,externalForwardedProps:D,additionalProps:{in:I,direction:Mt[Q],timeout:C,appear:Z.current}}),ie=m.jsx(oe,{...h,children:u});if(M==="permanent")return m.jsx(z,{...W,children:ie});const ee=m.jsx(A,{...R,children:ie});return M==="persistent"?m.jsx(z,{...W,children:ee}):m.jsx(te,{...j,children:ee})});function lo(e,t,o=(r,d)=>r===d){return e.length===t.length&&e.every((r,d)=>o(r,t[d]))}const co=2;function De(e,t,o,r,d){return o===1?Math.min(e+t,d):Math.max(e-t,r)}function It(e,t){return e-t}function vt(e,t){const{index:o}=e.reduce((r,d,L)=>{const b=Math.abs(t-d);return r===null||b<r.distance||b===r.distance?{distance:b,index:L}:r},null)??{};return o}function Ue(e,t){if(t.current!==void 0&&e.changedTouches){const o=e;for(let r=0;r<o.changedTouches.length;r+=1){const d=o.changedTouches[r];if(d.identifier===t.current)return{x:d.clientX,y:d.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Ge(e,t,o){return(e-t)*100/(o-t)}function po(e,t,o){return(o-t)*e+t}function uo(e){if(Math.abs(e)<1){const o=e.toExponential().split("e-"),r=o[0].split(".")[1];return(r?r.length:0)+parseInt(o[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function fo(e,t,o){const r=Math.round((e-o)/t)*t+o;return Number(r.toFixed(uo(t)))}function wt({values:e,newValue:t,index:o}){const r=e.slice();return r[o]=t,r.sort(It)}function Ze({sliderRef:e,activeIndex:t,setActive:o}){var d,L,b;const r=Ye(e.current);(!((d=e.current)!=null&&d.contains(r.activeElement))||Number((L=r==null?void 0:r.activeElement)==null?void 0:L.getAttribute("data-index"))!==t)&&((b=e.current)==null||b.querySelector(`[type="range"][data-index="${t}"]`).focus()),o&&o(t)}function _e(e,t){return typeof e=="number"&&typeof t=="number"?e===t:typeof e=="object"&&typeof t=="object"?lo(e,t):!1}const go={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},mo=e=>e;let We;function xt(){return We===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?We=CSS.supports("touch-action","none"):We=!0),We}function yo(e){const{"aria-labelledby":t,defaultValue:o,disabled:r=!1,disableSwap:d=!1,isRtl:L=!1,marks:b=!1,max:s=100,min:i=0,name:u,onChange:p,onChangeCommitted:a,orientation:c="horizontal",rootRef:n,scale:g=mo,step:v=1,shiftStep:I=10,tabIndex:y,value:S}=e,E=w.useRef(void 0),[C,M]=w.useState(-1),[B,O]=w.useState(-1),[J,Z]=w.useState(!1),Q=w.useRef(0),G=w.useRef(null),[$,P]=Xt({controlled:S,default:o??i,name:"Slider"}),D=p&&((l,f,x)=>{const T=l.nativeEvent||l,F=new T.constructor(T.type,T);Object.defineProperty(F,"target",{writable:!0,value:{value:f,name:u}}),G.current=f,p(F,f,x)}),te=Array.isArray($);let j=te?$.slice().sort(It):[$];j=j.map(l=>l==null?i:Ee(l,i,s));const oe=b===!0&&v!==null?[...Array(Math.floor((s-i)/v)+1)].map((l,f)=>({value:i+v*f})):b||[],h=oe.map(l=>l.value),[z,W]=w.useState(-1),A=w.useRef(null),R=Pt(n,A),ie=l=>f=>{var T;const x=Number(f.currentTarget.getAttribute("data-index"));yt(f.target)&&W(x),O(x),(T=l==null?void 0:l.onFocus)==null||T.call(l,f)},ee=l=>f=>{var x;yt(f.target)||W(-1),O(-1),(x=l==null?void 0:l.onBlur)==null||x.call(l,f)},ue=(l,f)=>{const x=Number(l.currentTarget.getAttribute("data-index")),T=j[x],F=h.indexOf(T);let k=f;if(oe&&v==null){const _=h[h.length-1];k>=_?k=_:k<=h[0]?k=h[0]:k=k<T?h[F-1]:h[F+1]}if(k=Ee(k,i,s),te){d&&(k=Ee(k,j[x-1]||-1/0,j[x+1]||1/0));const _=k;k=wt({values:j,newValue:k,index:x});let q=x;d||(q=k.indexOf(_)),Ze({sliderRef:A,activeIndex:q})}P(k),W(x),D&&!_e(k,$)&&D(l,k,x),a&&a(l,G.current??k)},ye=l=>f=>{var x;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(f.key)){f.preventDefault();const T=Number(f.currentTarget.getAttribute("data-index")),F=j[T];let k=null;if(v!=null){const _=f.shiftKey?I:v;switch(f.key){case"ArrowUp":k=De(F,_,1,i,s);break;case"ArrowRight":k=De(F,_,L?-1:1,i,s);break;case"ArrowDown":k=De(F,_,-1,i,s);break;case"ArrowLeft":k=De(F,_,L?1:-1,i,s);break;case"PageUp":k=De(F,I,1,i,s);break;case"PageDown":k=De(F,I,-1,i,s);break;case"Home":k=i;break;case"End":k=s;break}}else if(oe){const _=h[h.length-1],q=h.indexOf(F),U=[L?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],re=[L?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];U.includes(f.key)?q===0?k=h[0]:k=h[q-1]:re.includes(f.key)&&(q===h.length-1?k=_:k=h[q+1])}k!=null&&ue(f,k)}(x=l==null?void 0:l.onKeyDown)==null||x.call(l,f)};jt(()=>{var l;r&&A.current.contains(document.activeElement)&&((l=document.activeElement)==null||l.blur())},[r]),r&&C!==-1&&M(-1),r&&z!==-1&&W(-1);const Se=l=>f=>{var x;(x=l.onChange)==null||x.call(l,f),ue(f,f.target.valueAsNumber)},he=w.useRef(void 0);let fe=c;L&&c==="horizontal"&&(fe+="-reverse");const we=({finger:l,move:f=!1})=>{const{current:x}=A,{width:T,height:F,bottom:k,left:_}=x.getBoundingClientRect();let q;fe.startsWith("vertical")?q=(k-l.y)/F:q=(l.x-_)/T,fe.includes("-reverse")&&(q=1-q);let U;if(U=po(q,i,s),v)U=fo(U,v,i);else{const Ce=vt(h,U);U=h[Ce]}U=Ee(U,i,s);let re=0;if(te){f?re=he.current:re=vt(j,U),d&&(U=Ee(U,j[re-1]||-1/0,j[re+1]||1/0));const Ce=U;U=wt({values:j,newValue:U,index:re}),d&&f||(re=U.indexOf(Ce),he.current=re)}return{newValue:U,activeIndex:re}},xe=at(l=>{const f=Ue(l,E);if(!f)return;if(Q.current+=1,l.type==="mousemove"&&l.buttons===0){le(l);return}const{newValue:x,activeIndex:T}=we({finger:f,move:!0});Ze({sliderRef:A,activeIndex:T,setActive:M}),P(x),!J&&Q.current>co&&Z(!0),D&&!_e(x,$)&&D(l,x,T)}),le=at(l=>{const f=Ue(l,E);if(Z(!1),!f)return;const{newValue:x}=we({finger:f,move:!0});M(-1),l.type==="touchend"&&O(-1),a&&a(l,G.current??x),E.current=void 0,ke()}),K=at(l=>{if(r)return;xt()||l.preventDefault();const f=l.changedTouches[0];f!=null&&(E.current=f.identifier);const x=Ue(l,E);if(x!==!1){const{newValue:F,activeIndex:k}=we({finger:x});Ze({sliderRef:A,activeIndex:k,setActive:M}),P(F),D&&!_e(F,$)&&D(l,F,k)}Q.current=0;const T=Ye(A.current);T.addEventListener("touchmove",xe,{passive:!0}),T.addEventListener("touchend",le,{passive:!0})}),ke=w.useCallback(()=>{const l=Ye(A.current);l.removeEventListener("mousemove",xe),l.removeEventListener("mouseup",le),l.removeEventListener("touchmove",xe),l.removeEventListener("touchend",le)},[le,xe]);w.useEffect(()=>{const{current:l}=A;return l.addEventListener("touchstart",K,{passive:xt()}),()=>{l.removeEventListener("touchstart",K),ke()}},[ke,K]),w.useEffect(()=>{r&&ke()},[r,ke]);const Je=l=>f=>{var F;if((F=l.onMouseDown)==null||F.call(l,f),r||f.defaultPrevented||f.button!==0)return;f.preventDefault();const x=Ue(f,E);if(x!==!1){const{newValue:k,activeIndex:_}=we({finger:x});Ze({sliderRef:A,activeIndex:_,setActive:M}),P(k),D&&!_e(k,$)&&D(f,k,_)}Q.current=0;const T=Ye(A.current);T.addEventListener("mousemove",xe,{passive:!0}),T.addEventListener("mouseup",le)},Me=Ge(te?j[0]:i,i,s),H=Ge(j[j.length-1],i,s)-Me,Pe=(l={})=>{const f=nt(l),x={onMouseDown:Je(f||{})},T={...f,...x};return{...l,ref:R,...T}},Ie=l=>f=>{var T;(T=l.onMouseOver)==null||T.call(l,f);const x=Number(f.currentTarget.getAttribute("data-index"));O(x)},Ae=l=>f=>{var x;(x=l.onMouseLeave)==null||x.call(l,f),O(-1)},Re=(l={})=>{const f=nt(l),x={onMouseOver:Ie(f||{}),onMouseLeave:Ae(f||{})};return{...l,...f,...x}},$e=l=>({pointerEvents:C!==-1&&C!==l?"none":void 0});let Le;return c==="vertical"&&(Le=L?"vertical-rl":"vertical-lr"),{active:C,axis:fe,axisProps:go,dragging:J,focusedThumbIndex:z,getHiddenInputProps:(l={})=>{const f=nt(l),x={onChange:Se(f||{}),onFocus:ie(f||{}),onBlur:ee(f||{}),onKeyDown:ye(f||{})},T={...f,...x};return{tabIndex:y,"aria-labelledby":t,"aria-orientation":c,"aria-valuemax":g(s),"aria-valuemin":g(i),name:u,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:r,...l,...T,style:{...Gt,direction:L?"rtl":"ltr",width:"100%",height:"100%",writingMode:Le}}},getRootProps:Pe,getThumbProps:Re,marks:oe,open:B,range:te,rootRef:R,trackLeap:H,trackOffset:Me,values:j,getThumbStyle:$e}}const ho=e=>!e||!Xe(e);function bo(e){return st("MuiSlider",e)}const ae=it("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),vo=e=>{const{open:t}=e;return{offset:pe(t&&ae.valueLabelOpen),circle:ae.valueLabelCircle,label:ae.valueLabelLabel}};function wo(e){const{children:t,className:o,value:r}=e,d=vo(e);return t?w.cloneElement(t,{className:pe(t.props.className)},m.jsxs(w.Fragment,{children:[t.props.children,m.jsx("span",{className:pe(d.offset,o),"aria-hidden":!0,children:m.jsx("span",{className:d.circle,children:m.jsx("span",{className:d.label,children:r})})})]})):null}function kt(e){return e}const xo=se("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`color${X(o.color)}`],o.size!=="medium"&&t[`size${X(o.size)}`],o.marked&&t.marked,o.orientation==="vertical"&&t.vertical,o.track==="inverted"&&t.trackInverted,o.track===!1&&t.trackFalse]}})(me(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${ae.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${ae.dragging}`]:{[`& .${ae.thumb}, & .${ae.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(Ke()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),ko=se("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Lo=se("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})(me(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(Ke()).map(([t])=>({props:{color:t,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${t}Track`],borderColor:e.vars.palette.Slider[`${t}Track`]}:{backgroundColor:ft(e.palette[t].main,.62),borderColor:ft(e.palette[t].main,.62),...e.applyStyles("dark",{backgroundColor:gt(e.palette[t].main,.5)}),...e.applyStyles("dark",{borderColor:gt(e.palette[t].main,.5)})}}}))]}))),Do=se("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.thumb,t[`thumbColor${X(o.color)}`],o.size!=="medium"&&t[`thumbSize${X(o.size)}`]]}})(me(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${ae.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(Ke()).map(([t])=>({props:{color:t},style:{[`&:hover, &.${ae.focusVisible}`]:{...e.vars?{boxShadow:`0px 0px 0px 8px rgba(${e.vars.palette[t].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${mt(e.palette[t].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${ae.active}`]:{...e.vars?{boxShadow:`0px 0px 0px 14px rgba(${e.vars.palette[t].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${mt(e.palette[t].main,.16)}`}}}}))]}))),So=se(wo,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})(me(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${ae.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${ae.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),Po=se("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>Dt(e)&&e!=="markActive",overridesResolver:(e,t)=>{const{markActive:o}=e;return[t.mark,o&&t.markActive]}})(me(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),Co=se("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>Dt(e)&&e!=="markLabelActive",overridesResolver:(e,t)=>t.markLabel})(me(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),Eo=e=>{const{disabled:t,dragging:o,marked:r,orientation:d,track:L,classes:b,color:s,size:i}=e,u={root:["root",t&&"disabled",o&&"dragging",r&&"marked",d==="vertical"&&"vertical",L==="inverted"&&"trackInverted",L===!1&&"trackFalse",s&&`color${X(s)}`,i&&`size${X(i)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",i&&`thumbSize${X(i)}`,s&&`thumbColor${X(s)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return ct(u,bo,b)},To=({children:e})=>e,_o=w.forwardRef(function(t,o){const r=lt({props:t,name:"MuiSlider"}),d=Lt(),{"aria-label":L,"aria-valuetext":b,"aria-labelledby":s,component:i="span",components:u={},componentsProps:p={},color:a="primary",classes:c,className:n,disableSwap:g=!1,disabled:v=!1,getAriaLabel:I,getAriaValueText:y,marks:S=!1,max:E=100,min:C=0,name:M,onChange:B,onChangeCommitted:O,orientation:J="horizontal",shiftStep:Z=10,size:Q="medium",step:G=1,scale:$=kt,slotProps:P,slots:D,tabIndex:te,track:j="normal",value:oe,valueLabelDisplay:h="off",valueLabelFormat:z=kt,...W}=r,A={...r,isRtl:d,max:E,min:C,classes:c,disabled:v,disableSwap:g,orientation:J,marks:S,color:a,size:Q,step:G,shiftStep:Z,scale:$,track:j,valueLabelDisplay:h,valueLabelFormat:z},{axisProps:R,getRootProps:ie,getHiddenInputProps:ee,getThumbProps:ue,open:ye,active:Se,axis:he,focusedThumbIndex:fe,range:we,dragging:xe,marks:le,values:K,trackOffset:ke,trackLeap:Je,getThumbStyle:Me}=yo({...A,rootRef:o});A.marked=le.length>0&&le.some(V=>V.label),A.dragging=xe,A.focusedThumbIndex=fe;const H=Eo(A),Pe=(D==null?void 0:D.root)??u.Root??xo,Ie=(D==null?void 0:D.rail)??u.Rail??ko,Ae=(D==null?void 0:D.track)??u.Track??Lo,Re=(D==null?void 0:D.thumb)??u.Thumb??Do,$e=(D==null?void 0:D.valueLabel)??u.ValueLabel??So,Le=(D==null?void 0:D.mark)??u.Mark??Po,ze=(D==null?void 0:D.markLabel)??u.MarkLabel??Co,l=(D==null?void 0:D.input)??u.Input??"input",f=(P==null?void 0:P.root)??p.root,x=(P==null?void 0:P.rail)??p.rail,T=(P==null?void 0:P.track)??p.track,F=(P==null?void 0:P.thumb)??p.thumb,k=(P==null?void 0:P.valueLabel)??p.valueLabel,_=(P==null?void 0:P.mark)??p.mark,q=(P==null?void 0:P.markLabel)??p.markLabel,U=(P==null?void 0:P.input)??p.input,re=be({elementType:Pe,getSlotProps:ie,externalSlotProps:f,externalForwardedProps:W,additionalProps:{...ho(Pe)&&{as:i}},ownerState:{...A,...f==null?void 0:f.ownerState},className:[H.root,n]}),Ce=be({elementType:Ie,externalSlotProps:x,ownerState:A,className:H.rail}),At=be({elementType:Ae,externalSlotProps:T,additionalProps:{style:{...R[he].offset(ke),...R[he].leap(Je)}},ownerState:{...A,...T==null?void 0:T.ownerState},className:H.track}),Qe=be({elementType:Re,getSlotProps:ue,externalSlotProps:F,ownerState:{...A,...F==null?void 0:F.ownerState},className:H.thumb}),Rt=be({elementType:$e,externalSlotProps:k,ownerState:{...A,...k==null?void 0:k.ownerState},className:H.valueLabel}),et=be({elementType:Le,externalSlotProps:_,ownerState:A,className:H.mark}),tt=be({elementType:ze,externalSlotProps:q,ownerState:A,className:H.markLabel}),$t=be({elementType:l,getSlotProps:ee,externalSlotProps:U,ownerState:A});return m.jsxs(Pe,{...re,children:[m.jsx(Ie,{...Ce}),m.jsx(Ae,{...At}),le.filter(V=>V.value>=C&&V.value<=E).map((V,Y)=>{const ot=Ge(V.value,C,E),je=R[he].offset(ot);let ge;return j===!1?ge=K.includes(V.value):ge=j==="normal"&&(we?V.value>=K[0]&&V.value<=K[K.length-1]:V.value<=K[0])||j==="inverted"&&(we?V.value<=K[0]||V.value>=K[K.length-1]:V.value>=K[0]),m.jsxs(w.Fragment,{children:[m.jsx(Le,{"data-index":Y,...et,...!Xe(Le)&&{markActive:ge},style:{...je,...et.style},className:pe(et.className,ge&&H.markActive)}),V.label!=null?m.jsx(ze,{"aria-hidden":!0,"data-index":Y,...tt,...!Xe(ze)&&{markLabelActive:ge},style:{...je,...tt.style},className:pe(H.markLabel,tt.className,ge&&H.markLabelActive),children:V.label}):null]},Y)}),K.map((V,Y)=>{const ot=Ge(V,C,E),je=R[he].offset(ot),ge=h==="off"?To:$e;return m.jsx(ge,{...!Xe(ge)&&{valueLabelFormat:z,valueLabelDisplay:h,value:typeof z=="function"?z($(V),Y):z,index:Y,open:ye===Y||Se===Y||h==="on",disabled:v},...Rt,children:m.jsx(Re,{"data-index":Y,...Qe,className:pe(H.thumb,Qe.className,Se===Y&&H.active,fe===Y&&H.focusVisible),style:{...je,...Me(Y),...Qe.style},children:m.jsx(l,{"data-index":Y,"aria-label":I?I(Y):L,"aria-valuenow":$(V),"aria-labelledby":s,"aria-valuetext":y?y($(V),Y):b,value:K[Y],...$t})})},Y)})]})}),Wo=ut(m.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"})),Yo=ut(m.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"})),Mo=ut(m.jsx("path",{d:"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v4h2V8h2z"})),Io=({mouseCoords:e})=>{const t=ne(dt),o=(r,d=5)=>r.toFixed(d);return m.jsx(qe,{elevation:2,sx:{position:"absolute",bottom:16,left:16,right:16,zIndex:1e3,p:1,bgcolor:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(4px)"},children:m.jsxs(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsxs(de,{children:[m.jsx(ce,{variant:"caption",color:"text.secondary",children:"Mouse:"}),e?m.jsxs(ce,{variant:"caption",sx:{ml:1,fontFamily:"monospace"},children:[o(e.lat),", ",o(e.lng)]}):m.jsx(ce,{variant:"caption",sx:{ml:1,color:"text.disabled"},children:"Move mouse over map"})]}),m.jsxs(de,{children:[m.jsx(ce,{variant:"caption",color:"text.secondary",children:"Center:"}),m.jsxs(ce,{variant:"caption",sx:{ml:1,fontFamily:"monospace"},children:[o(t.view.center.latitude),", ",o(t.view.center.longitude)]})]}),m.jsxs(de,{children:[m.jsx(ce,{variant:"caption",color:"text.secondary",children:"Zoom:"}),m.jsx(ce,{variant:"caption",sx:{ml:1,fontFamily:"monospace"},children:t.view.zoom.toFixed(1)})]})]})})},Ao=()=>{const e=ne(Te),t={totalFeatures:0,totalMarkers:0,totalLines:0,totalPolygons:0};return e.forEach(o=>{o.visible&&(t.totalFeatures+=o.features.length,o.features.forEach(r=>{switch(r.type){case"marker":t.totalMarkers++;break;case"polyline":t.totalLines++;break;case"polygon":t.totalPolygons++;break}}))}),t.totalFeatures===0?null:m.jsxs(qe,{elevation:2,sx:{position:"absolute",top:16,left:16,zIndex:1e3,p:2,bgcolor:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(4px)",minWidth:200},children:[m.jsxs(ce,{variant:"subtitle2",sx:{mb:1,display:"flex",alignItems:"center",gap:1},children:[m.jsx(Mo,{fontSize:"small"}),"Features"]}),m.jsx(de,{sx:{display:"flex",flexDirection:"column",gap:1},children:m.jsxs(de,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[m.jsx(Be,{size:"small",label:`${t.totalFeatures} total`,color:"primary",variant:"outlined"}),t.totalMarkers>0&&m.jsx(Be,{size:"small",label:`${t.totalMarkers} markers`,variant:"outlined"}),t.totalLines>0&&m.jsx(Be,{size:"small",label:`${t.totalLines} lines`,variant:"outlined"}),t.totalPolygons>0&&m.jsx(Be,{size:"small",label:`${t.totalPolygons} polygons`,variant:"outlined"})]})})]})},Ro=({onMapReady:e,children:t})=>{const o=w.useRef(null),r=w.useRef(null),d=w.useRef(null),L=w.useRef(!1),b=w.useRef(!1),s=ne(pt),i=ne(dt),u=w.useCallback(e||(()=>{}),[e]);return w.useEffect(()=>{if(!o.current||r.current||L.current)return;L.current=!0,console.log("[PureLeaflet] Creating pure Leaflet map...");const p=!!s.mode,a=N.map(o.current,{center:[39.8283,-98.5795],zoom:6,zoomControl:!0,attributionControl:!0,scrollWheelZoom:!0,doubleClickZoom:!p,boxZoom:!p,keyboard:!0,dragging:!p,touchZoom:!0}),c=i.baseMaps.find(g=>g.id===i.activeBaseMap),n=N.tileLayer((c==null?void 0:c.url)||"https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:(c==null?void 0:c.attribution)||"© OpenStreetMap contributors",maxZoom:(c==null?void 0:c.maxZoom)||19,minZoom:(c==null?void 0:c.minZoom)||1,tileSize:256,opacity:1});return d.current=n,n.addTo(a),n.on("tileload",g=>{console.log("[PureLeaflet] Tile loaded:",g.coords)}),n.on("tileerror",g=>{console.error("[PureLeaflet] Tile error:",g)}),n.on("loading",()=>{console.log("[PureLeaflet] Started loading tiles")}),n.on("load",()=>{console.log("[PureLeaflet] Finished loading all visible tiles")}),a.on("moveend",()=>{const g=a.getCenter(),v=a.getZoom();console.log(`[PureLeaflet] Map moved to: ${g.lat}, ${g.lng} at zoom ${v}`)}),setTimeout(()=>{a.getContainer()&&(a.invalidateSize(),console.log("[PureLeaflet] Map size invalidated"))},100),r.current=a,a.whenReady(()=>{if(console.log("[PureLeaflet] ✓ Map panes and coordinate system ready"),typeof window<"u"&&(window.pureLeafletMap=a,console.log("[PureLeaflet] ✓ Map exposed as window.pureLeafletMap")),!a._size||!a.getPixelOrigin()||!a.getPanes().mapPane){console.error("[PureLeaflet] Map coordinate system not properly initialized");return}L.current=!1,o.current&&u(a,o.current)}),()=>{if(r.current&&!b.current){b.current=!0,console.log("[PureLeaflet] Map cleaned up");try{r.current.remove()}catch(g){console.warn("[PureLeaflet] Error during cleanup:",g)}r.current=null,L.current=!1,b.current=!1}}},[]),w.useEffect(()=>{console.log("[PureLeafletMap] Drawing effect triggered with mode:",s.mode);const p=r.current;if(!p){console.log("[PureLeafletMap] No map instance, skipping drawing effect");return}const a=!!s.mode;console.log("[PureLeafletMap] isDrawing calculated as:",a),a?(p.doubleClickZoom.disable(),p.boxZoom.disable(),console.log("[PureLeaflet] Zoom interactions disabled for drawing mode:",s.mode)):(p.doubleClickZoom.enable(),p.boxZoom.enable(),console.log("[PureLeaflet] All map interactions enabled - drawing mode off"))},[s.mode]),w.useEffect(()=>{const p=r.current;if(!p)return;const a=i.baseMaps.find(n=>n.id===i.activeBaseMap);if(!a)return;d.current&&(p.removeLayer(d.current),console.log("[PureLeaflet] Removed old tile layer"));const c=N.tileLayer(a.url,{attribution:a.attribution,maxZoom:a.maxZoom||19,minZoom:a.minZoom||1,tileSize:256,opacity:1});c.on("tileload",n=>{console.log("[PureLeaflet] Tile loaded:",n.coords)}),c.on("tileerror",n=>{console.error("[PureLeaflet] Tile error:",n)}),c.on("loading",()=>{console.log("[PureLeaflet] Started loading tiles")}),c.on("load",()=>{console.log("[PureLeaflet] Finished loading all visible tiles")}),d.current=c,c.addTo(p),console.log(`[PureLeaflet] Switched to base map: ${a.name}`)},[i.activeBaseMap,i.baseMaps]),m.jsxs(m.Fragment,{children:[m.jsx("div",{ref:o,style:{width:"100%",height:"100%",minHeight:"500px",background:"transparent"},className:"pure-leaflet-map"}),t]})},$o=({map:e})=>{const t=He(),o=ne(Te),r=w.useRef(new Map),d=s=>{try{const u=s.style.icon;if(!u)return N.icon({iconUrl:'data:image/svg+xml,%3Csvg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"%3E%3Ccircle cx="12" cy="12" r="10" fill="%23666666"/%3E%3C/svg%3E',iconSize:[24,24],iconAnchor:[12,24],popupAnchor:[0,-24]});const p={small:[20,20],medium:[30,30],large:[40,40],"extra-large":[50,50]},a=p[u.size]||p.medium;return u.url?N.icon({iconUrl:u.url,iconSize:a,iconAnchor:u.anchor?u.anchor:[a[0]/2,a[1]],popupAnchor:u.popupAnchor?u.popupAnchor:[0,-a[1]]}):(console.warn(`[LayerManager] Icon missing URL for feature ${s.id}`),null)}catch(i){return console.warn(`[LayerManager] Error creating icon for feature ${s.id}:`,i),null}},L=s=>{let i='<div class="fire-map-popup">';return i+=`<h3>${s.title}</h3>`,i+=`<p>${s.description}</p>`,s.properties&&Object.keys(s.properties).length>0&&(i+='<div class="feature-properties">',Object.entries(s.properties).forEach(([u,p])=>{const a=u.replace(/([A-Z])/g," $1").replace(/^./,c=>c.toUpperCase());i+=`<div><strong>${a}:</strong> ${p}</div>`}),i+="</div>"),i+="</div>",i},b=s=>{try{const i=s.style;switch(s.type){case"marker":{const[u,p]=s.coordinates;if(isNaN(p)||isNaN(u))return console.warn(`[LayerManager] Invalid coordinates for feature ${s.id}: [${u}, ${p}]`),null;const a=d(s);if(!a)return console.warn(`[LayerManager] Failed to create icon for feature ${s.id}`),null;const c=N.marker([p,u],{icon:a});try{c.bindPopup(L(s)),c.bindTooltip(s.title,{sticky:!0}),c.on("click",()=>{console.log("Feature clicked:",s.id),t(Fe(s.id))})}catch(n){console.warn(`[LayerManager] Error binding popup/tooltip for feature ${s.id}:`,n)}return c}case"polygon":{const u=s.coordinates[0].map(([a,c])=>[c,a]),p=N.polygon(u,{color:i.color||"#3388ff",fillColor:i.fillColor||i.color||"#3388ff",fillOpacity:i.fillOpacity||.2,weight:i.weight||3,opacity:i.opacity||1});return p.bindPopup(L(s)),p.bindTooltip(s.title,{sticky:!0}),p.on("click",()=>{console.log("Feature clicked:",s.id),t(Fe(s.id))}),p}case"polyline":{const u=s.coordinates.map(([a,c])=>[c,a]),p=N.polyline(u,{color:i.color||"#3388ff",weight:i.weight||3,opacity:i.opacity||1});return p.bindPopup(L(s)),p.bindTooltip(s.title,{sticky:!0}),p.on("click",()=>{console.log("Feature clicked:",s.id),t(Fe(s.id))}),p}case"circle":{const[u,p,a]=s.coordinates,c=N.circle([p,u],{radius:a,color:i.color||"#3388ff",fillColor:i.fillColor||i.color||"#3388ff",fillOpacity:i.fillOpacity||.2,weight:i.weight||3,opacity:i.opacity||1});return c.bindPopup(L(s)),c.bindTooltip(s.title,{sticky:!0}),c.on("click",()=>{console.log("Feature clicked:",s.id),t(Fe(s.id))}),c}default:return console.warn(`[LayerManager] Unknown feature type: ${s.type}`),null}}catch(i){return console.error(`[LayerManager] Error creating feature layer for ${s.id}:`,i),null}};return w.useEffect(()=>{if(!e||!e.getContainer()){console.warn("[LayerManager] Map or container not ready, skipping layer update");return}const s=()=>{try{const i=e.getContainer();if(!i||!i.parentNode||!document.body.contains(i)){console.warn("[LayerManager] Map container not properly attached to DOM, skipping update");return}const u=e.getPanes();if(!u||!u.markerPane||!e._size||!e._pixelOrigin){console.warn("[LayerManager] Map panes or coordinate system not ready, skipping update");return}console.log("[LayerManager] Updating layers with",o.length,"layers"),[...o].sort((a,c)=>a.zIndex-c.zIndex).forEach(a=>{const c=r.current.get(a.id);if(c)try{e.removeLayer(c),r.current.delete(a.id)}catch(n){console.warn(`[LayerManager] Error removing existing layer ${a.id}:`,n)}if(a.visible&&a.features.length>0)try{const n=e.getContainer();if(!n||!n.parentNode||!document.body.contains(n)){console.warn(`[LayerManager] Map container not ready for layer ${a.id}`);return}const g=e.getPanes();if(!g||!g.markerPane){console.warn(`[LayerManager] Map panes not ready for layer ${a.id}`);return}const v=N.layerGroup();let I=0;a.features.forEach(y=>{try{const S=b(y);S&&(v.addLayer(S),I++)}catch(S){console.warn(`[LayerManager] Error creating feature ${y.id}:`,S)}}),a.opacity!==void 0&&a.opacity!==1&&v.eachLayer(y=>{try{y instanceof N.Marker?y.setOpacity(a.opacity):y instanceof N.Path&&y.setStyle({opacity:a.opacity})}catch(S){console.warn("[LayerManager] Error setting opacity:",S)}}),I>0&&e.getContainer()&&(v.addTo(e),r.current.set(a.id,v),console.log(`[LayerManager] Added layer "${a.name}" with ${I}/${a.features.length} features`))}catch(n){console.error(`[LayerManager] Error creating layer ${a.id}:`,n)}})}catch(i){console.error("[LayerManager] Critical error during layer update:",i)}};e._loaded&&e.getPanes()&&e._size?s():e.whenReady(s)},[e,o,t]),w.useEffect(()=>()=>{e&&(r.current.forEach((s,i)=>{e.removeLayer(s),console.log(`[LayerManager] Cleaned up layer: ${i}`)}),r.current.clear())},[e]),null},zo=({map:e})=>{const t=He(),o=ne(pt),r=ne(Te),d=w.useRef(null),L=w.useRef([]),b=r.find(a=>a.type==="feature"),s=w.useCallback((a,c)=>{e&&(console.log("[PureLeafletDrawTools] Adding event handler:",a),e.on(a,c),L.current.push({event:a,handler:c}))},[e]),i=w.useCallback(()=>{e&&(console.log("[PureLeafletDrawTools] Clearing all event handlers"),L.current.forEach(({event:a,handler:c})=>{e.off(a,c)}),L.current=[],e.dragging.enable(),e.doubleClickZoom.enable(),e.boxZoom.enable(),e.getContainer().style.cursor="")},[e]),u=()=>`feature_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,p=(a,c)=>{var g,v,I,y,S;let n=[];switch(c){case"marker":const C=a.getLatLng();n=[C.lng,C.lat];break;case"circle":const M=a,B=M.getLatLng(),O=M.getRadius();n=[B.lng,B.lat,O];break;case"polygon":n=[a.getLatLngs()[0].map($=>[$.lng,$.lat])];break;case"polyline":n=a.getLatLngs().map($=>[$.lng,$.lat]);break;case"rectangle":const G=a.getBounds();n=[[G.getSouthWest().lng,G.getSouthWest().lat],[G.getNorthEast().lng,G.getNorthEast().lat]];break}return{id:u(),type:c,title:`${c.charAt(0).toUpperCase()+c.slice(1)} Feature`,description:`Drawing created at ${new Date().toLocaleTimeString()}`,coordinates:n,style:{color:(g=o.options.style)==null?void 0:g.color,fillColor:(v=o.options.style)==null?void 0:v.fillColor,fillOpacity:(I=o.options.style)==null?void 0:I.fillOpacity,weight:(y=o.options.style)==null?void 0:y.weight,opacity:(S=o.options.style)==null?void 0:S.opacity},properties:{created:new Date().toISOString(),drawingMode:c},layerId:"user-drawings",created:new Date,modified:new Date}};return w.useEffect(()=>{if(!e)return;console.log("[PureLeafletDrawTools] Initializing simple drawing");const a=new N.FeatureGroup;return e.addLayer(a),d.current=a,console.log("[PureLeafletDrawTools] Feature group created and added to map:",a),console.log("[PureLeafletDrawTools] Feature group attached to map:",e.hasLayer(a)),console.log("[PureLeafletDrawTools] Map has feature group in layers:",e.hasLayer(a)),()=>{e&&d.current&&(console.log("[PureLeafletDrawTools] Removing feature group from map"),e.removeLayer(d.current)),d.current=null}},[e,t]),w.useEffect(()=>{if(!(!e||!e.getContainer())){if(console.log("[PureLeafletDrawTools] Drawing mode changed to:",o.mode),i(),o.mode==="edit")console.log("[PureLeafletDrawTools] Activating edit mode"),e.getContainer().style.cursor="pointer",s("click",c=>{const n=c.originalEvent.target;n&&n.classList.contains("leaflet-interactive")&&(console.log("[PureLeafletDrawTools] Edit click on feature:",n),alert("Edit functionality - feature clicked! (Can be enhanced to show edit dialog)"))});else if(o.mode==="delete")console.log("[PureLeafletDrawTools] Activating delete mode"),e.getContainer().style.cursor="crosshair",s("click",c=>{const n=c.originalEvent.target;n&&n.classList.contains("leaflet-interactive")&&(console.log("[PureLeafletDrawTools] Delete click on feature:",n),e.eachLayer(g=>{if(g.getElement&&g.getElement()===n){console.log("[PureLeafletDrawTools] Deleting layer:",g);const v=g._fireEmsFeatureId;v&&(console.log("[PureLeafletDrawTools] Found feature ID for deletion:",v),t(Ft(v)),console.log("[PureLeafletDrawTools] Feature deleted from Redux store")),e.removeLayer(g),console.log("[PureLeafletDrawTools] Layer removed from map")}}))});else if(o.mode){console.log("[PureLeafletDrawTools] Activating simple drawing mode:",o.mode);let a=!1,c=null,n=null;const g=y=>{var S,E,C,M,B,O,J,Z,Q,G,$,P,D,te,j,oe,h,z,W,A;if(N.DomEvent.stopPropagation(y.originalEvent),N.DomEvent.preventDefault(y.originalEvent),console.log("[PureLeafletDrawTools] Drawing click detected:",o.mode,y.latlng),console.log("[PureLeafletDrawTools] Current drawing options:",o.options),console.log("[PureLeafletDrawTools] Current style options:",o.options.style),o.mode==="marker"){const R=((S=o.options.style)==null?void 0:S.color)||"#3388ff";console.log("[PureLeafletDrawTools] Creating marker with color:",R);const ie=N.divIcon({className:"colored-marker",html:`<div style="
              background-color: ${R};
              width: 25px;
              height: 25px;
              border-radius: 50% 50% 50% 0;
              border: 2px solid white;
              transform: rotate(-45deg);
              box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            "></div>`,iconSize:[25,25],iconAnchor:[12,24],popupAnchor:[1,-24]}),ee=N.marker(y.latlng,{draggable:!0,icon:ie});if(ee.addTo(e),console.log("[PureLeafletDrawTools] Colored marker added DIRECTLY to map:",ee),d.current&&d.current.addLayer(ee),!b)return;const ue=p(ee,"marker"),{id:ye,created:Se,modified:he,...fe}=ue;t(ve({layerId:b.id,feature:fe})),ee._fireEmsFeatureId=ue.id,t(Ne(null))}else if(!a&&o.mode==="circle"){a=!0,c=y.latlng,console.log("[PureLeafletDrawTools] Starting circle drawing at:",y.latlng);const R={radius:100,color:((E=o.options.style)==null?void 0:E.color)||"#3388ff",fillColor:((C=o.options.style)==null?void 0:C.fillColor)||"#3388ff",fillOpacity:((M=o.options.style)==null?void 0:M.fillOpacity)||.2,weight:((B=o.options.style)==null?void 0:B.weight)||3,opacity:((O=o.options.style)==null?void 0:O.opacity)||1};console.log("[PureLeafletDrawTools] Circle options:",R),console.log("[PureLeafletDrawTools] Fill color value:",(J=o.options.style)==null?void 0:J.fillColor),n=N.circle(y.latlng,R),n.addTo(e),console.log("[PureLeafletDrawTools] Circle started, added DIRECTLY to map:",n)}else if(a&&o.mode==="circle"){if(console.log("[PureLeafletDrawTools] Finishing circle drawing"),n){if(!b)return;const R=p(n,"circle");console.log("[PureLeafletDrawTools] Circle feature created:",R);const{id:ie,created:ee,modified:ue,...ye}=R;t(ve({layerId:b.id,feature:ye})),n._fireEmsFeatureId=R.id,console.log("[PureLeafletDrawTools] Circle feature dispatched to Redux")}t(Ne(null))}else if(!a&&o.mode==="rectangle")a=!0,c=y.latlng,console.log("[PureLeafletDrawTools] Starting rectangle drawing"),n=N.rectangle([[y.latlng.lat,y.latlng.lng],[y.latlng.lat,y.latlng.lng]],{color:((Z=o.options.style)==null?void 0:Z.color)||"#3388ff",fillColor:((Q=o.options.style)==null?void 0:Q.fillColor)||"#3388ff",fillOpacity:((G=o.options.style)==null?void 0:G.fillOpacity)||.2,weight:(($=o.options.style)==null?void 0:$.weight)||3,opacity:((P=o.options.style)==null?void 0:P.opacity)||1}),n.addTo(e),console.log("[PureLeafletDrawTools] Rectangle started, added DIRECTLY to map:",n);else if(a&&o.mode==="rectangle"){if(console.log("[PureLeafletDrawTools] Finishing rectangle drawing"),n){if(!b)return;const R=p(n,"rectangle");console.log("[PureLeafletDrawTools] Rectangle feature created:",R);const{id:ie,created:ee,modified:ue,...ye}=R;t(ve({layerId:b.id,feature:ye})),n._fireEmsFeatureId=R.id,console.log("[PureLeafletDrawTools] Rectangle feature dispatched to Redux")}t(Ne(null))}else if(!a&&(o.mode==="polygon"||o.mode==="polyline"))if(n){const R=o.mode==="polygon"?n.getLatLngs()[0]:n.getLatLngs();R.push(y.latlng),o.mode,n.setLatLngs(R),console.log(`[PureLeafletDrawTools] Added point to ${o.mode}:`,y.latlng)}else{const R=[y.latlng];o.mode==="polygon"?n=N.polygon(R,{color:((D=o.options.style)==null?void 0:D.color)||"#3388ff",fillColor:((te=o.options.style)==null?void 0:te.fillColor)||"#3388ff",fillOpacity:((j=o.options.style)==null?void 0:j.fillOpacity)||.2,weight:((oe=o.options.style)==null?void 0:oe.weight)||3,opacity:((h=o.options.style)==null?void 0:h.opacity)||1}):n=N.polyline(R,{color:((z=o.options.style)==null?void 0:z.color)||"#3388ff",weight:((W=o.options.style)==null?void 0:W.weight)||3,opacity:((A=o.options.style)==null?void 0:A.opacity)||1}),n.addTo(e),console.log(`[PureLeafletDrawTools] ${o.mode} started:`,n)}},v=y=>{if(!(!a||!n||!c))switch(N.DomEvent.stopPropagation(y.originalEvent),o.mode){case"circle":const S=c.distanceTo(y.latlng);n.setRadius(S);break;case"rectangle":const E=N.latLngBounds([c,y.latlng]);n.setBounds(E);break}};e.dragging.disable(),e.doubleClickZoom.disable(),e.boxZoom.disable(),console.log("[PureLeafletDrawTools] Map interactions disabled for drawing");const I=y=>{if((o.mode==="polygon"||o.mode==="polyline")&&(N.DomEvent.stopPropagation(y.originalEvent),N.DomEvent.preventDefault(y.originalEvent),n)){if(console.log(`[PureLeafletDrawTools] Finishing ${o.mode} with double-click`),!b)return;const S=p(n,o.mode);console.log(`[PureLeafletDrawTools] ${o.mode} feature created:`,S);const{id:E,created:C,modified:M,...B}=S;t(ve({layerId:b.id,feature:B})),n._fireEmsFeatureId=S.id,console.log(`[PureLeafletDrawTools] ${o.mode} feature dispatched to Redux`),t(Ne(null))}};s("click",g),s("mousemove",v),s("dblclick",I),e.getContainer().style.cursor="crosshair"}return()=>{i()}}},[o.mode,e,t,i,s]),w.useEffect(()=>()=>{i()},[i]),null},jo=({map:e,mapContainer:t})=>{const o=He(),r=ne(Te),d=()=>`dropped_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return w.useEffect(()=>{if(!e||!t||!e.getContainer()){console.warn("[DragDrop] Map or container not ready for drag/drop setup");return}const L=setTimeout(()=>{const b=e.getContainer();if(!b||!b.parentNode||!document.body.contains(b)){console.warn("[DragDrop] Map container not properly attached, skipping setup");return}if(!e.getPanes()){console.warn("[DragDrop] Map panes not ready, skipping setup");return}console.log("[DragDrop] Setting up drag and drop handlers");const i=p=>{p.preventDefault(),p.dataTransfer.dropEffect="copy"},u=p=>{var a;p.preventDefault();try{const c=p.dataTransfer.getData("application/json");if(!c){console.warn("[DragDrop] No icon data found in drop event");return}const n=JSON.parse(c);console.log("[DragDrop] Dropped icon:",n);let g;try{const y=e.getContainer();if(!y||!y.parentNode)throw new Error("Map container not available or not attached");const S=e.getPanes();if(!S||!e._loaded)throw new Error("Map not fully loaded");if(!e._size||!e._pixelOrigin||!S.mapPane)throw new Error("Map coordinate system not ready - missing _size, _pixelOrigin, or mapPane");const E=y.getBoundingClientRect(),C=p.clientX-E.left,M=p.clientY-E.top;if(C<0||M<0||C>E.width||M>E.height)throw new Error("Drop coordinates are outside map bounds");try{console.log("[DragDrop] Using legacy containerPointToLatLng method");const B=N.point(C,M);g=e.containerPointToLatLng(B),console.log("[DragDrop] Legacy coordinate conversion:",{x:C,y:M,point:{x:B.x,y:B.y},latlng:{lat:g.lat,lng:g.lng}})}catch(B){console.error("[DragDrop] Legacy conversion failed, falling back:",B),g=N.latLng(39.8283,-98.5795)}if(!g||isNaN(g.lat)||isNaN(g.lng))throw new Error("Invalid coordinates calculated");if(Math.abs(g.lat)>90||Math.abs(g.lng)>180)throw new Error("Coordinates outside valid geographic bounds")}catch(y){console.error("[DragDrop] Error calculating coordinates:",y);try{if(g=e.getCenter(),!g||isNaN(g.lat)||isNaN(g.lng))throw new Error("Map center is invalid")}catch(S){console.error("[DragDrop] Error getting map center:",S),g={lat:39.8283,lng:-98.5795}}}console.log("[DragDrop] Icon data received:",{id:n.id,name:n.name,url:n.url?n.url.substring(0,100)+"...":"NO URL",urlLength:n.url?n.url.length:0,category:n.category,size:n.size,color:n.color});let v=r.find(y=>y.type==="feature"&&y.visible);const I={id:d(),type:"marker",title:n.name||"Dropped Icon",description:`${n.name} placed at ${new Date().toLocaleTimeString()}`,coordinates:[g.lng,g.lat],layerId:(v==null?void 0:v.id)||"pending",style:{color:n.color||"#666666",icon:{id:n.id,name:n.name,category:n.category||"custom",url:n.url,size:n.size||"medium",color:n.color||"#666666",anchor:n.anchor||[16,32],popupAnchor:n.popupAnchor||[0,-32]}},properties:{droppedAt:new Date().toISOString(),iconSource:"library",originalIcon:n},created:new Date,modified:new Date};if(console.log("[DragDrop] Created feature with icon URL:",(a=I.style.icon)!=null&&a.url?"PRESENT":"MISSING"),v)console.log("[DragDrop] Adding feature to existing layer:",v.id,v.name),o(ve({layerId:v.id,feature:I}));else{console.log('[DragDrop] No suitable layer found. Creating "Dropped Icons" layer. Available layers:',r.map(S=>({id:S.id,name:S.name,type:S.type,visible:S.visible})));const y={name:"Dropped Icons",type:"feature",visible:!0,opacity:1,zIndex:r.length,features:[],style:{defaultStyle:{color:"#DC2626",fillColor:"#DC2626",fillOpacity:.3,weight:2,opacity:1}},metadata:{description:"Icons dropped from the icon library",source:"user-interaction",created:new Date,featureCount:0}};o(Nt(y)),setTimeout(()=>{const S=r,E=S.find(C=>C.name==="Dropped Icons");if(E)console.log("[DragDrop] Adding feature to newly created layer:",E.id),I.layerId=E.id,o(ve({layerId:E.id,feature:I}));else{const C=S.find(M=>M.type==="feature");C?(console.log("[DragDrop] Using first available feature layer:",C.id),o(ve({layerId:C.id,feature:I}))):console.error("[DragDrop] Failed to create or find any feature layer")}},300)}console.log("[DragDrop] Successfully created feature from dropped icon:",I.id)}catch(c){console.error("[DragDrop] Error handling drop event:",c)}};return t.addEventListener("dragover",i),t.addEventListener("drop",u),console.log("[DragDrop] Successfully set up drag and drop handlers"),()=>{t.removeEventListener("dragover",i),t.removeEventListener("drop",u),console.log("[DragDrop] Cleaned up drag and drop handlers")}},100);return()=>{clearTimeout(L)}},[e,t,o,r]),null},Fo=Et.icon({iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});Et.Marker.prototype.options.icon=Fo;const Xo=()=>{const e=He(),t=ne(dt),o=ne(pt),r=ne(Te),[d,L]=w.useState(!1),[b]=w.useState(null),[s,i]=w.useState(null),u=w.useRef(null),p=t.baseMaps.find(g=>g.id===t.activeBaseMap),a=w.useCallback((g,v)=>{u.current=g,i(v),L(!0),typeof window<"u"&&(window.fireMapProInstance=g,console.log("✓ Pure Leaflet map exposed as window.fireMapProInstance"))},[]);if(Ot.useEffect(()=>{e(rt(null))},[t.activeBaseMap,e]),!p)return m.jsx(de,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",bgcolor:"grey.100"},children:m.jsx(ce,{variant:"h6",color:"text.secondary",children:"No base map configured"})});const c=g=>{g.preventDefault();try{const v=JSON.parse(g.dataTransfer.getData("application/json")),y=g.currentTarget.getBoundingClientRect(),S=g.clientX-y.left,E=g.clientY-y.top;if(u.current&&v){const C=u.current.containerPointToLatLng([S,E]),M=r.find(B=>B.type==="feature");if(M){const B={type:"marker",title:v.name,description:`${v.name} - Click to edit`,coordinates:[C.lng,C.lat],style:{...v,icon:v},properties:{iconCategory:v.category,droppedFrom:"icon-library"},layerId:M.id};e(ve({layerId:M.id,feature:B})),console.log("Icon placed successfully:",v.name,"at",C)}else e(rt("Please create a feature layer first to place icons"))}}catch(v){console.error("Error handling icon drop:",v),e(rt("Error placing icon on map"))}},n=g=>{g.preventDefault(),g.dataTransfer.dropEffect="copy"};return m.jsxs(de,{sx:{height:"100%",width:"100%",position:"relative",minHeight:"500px","& .leaflet-container":{height:"100% !important",width:"100% !important",position:"relative !important"}},onDrop:c,onDragOver:n,children:[m.jsxs(Ro,{onMapReady:a,children:[d&&u.current&&s&&m.jsx($o,{map:u.current}),d&&u.current&&s&&m.jsx(zo,{map:u.current}),d&&u.current&&s&&m.jsx(jo,{map:u.current,mapContainer:s}),d&&u.current&&!1]}),t.showCoordinates&&m.jsx(Io,{mouseCoords:b}),o.options.showMeasurements&&m.jsx(Ao,{}),!1,t.showGrid&&m.jsx(de,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",backgroundImage:`
              linear-gradient(rgba(0,0,0,0.1) 1px, transparent 1px),
              linear-gradient(90deg, rgba(0,0,0,0.1) 1px, transparent 1px)
            `,backgroundSize:"50px 50px",zIndex:1e3}}),!d&&m.jsx(de,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(255, 255, 255, 0.9)",zIndex:2e3},children:m.jsx(ce,{variant:"h6",color:"text.secondary",children:"Loading map..."})})]})},Go=({children:e})=>{const t=ne(Bt);return w.useEffect(()=>{const o=document.getElementById("root");o&&(o.removeAttribute("aria-hidden"),o.setAttribute("aria-label","Fire Map Pro - Emergency Management Mapping System"),o.getAttribute("role")||o.setAttribute("role","application"));const r=()=>{document.querySelectorAll('[aria-hidden="true"]').forEach(b=>{(b.id==="root"||b.closest("#root"))&&b.removeAttribute("aria-hidden")})};r();const d=new MutationObserver(r);return d.observe(document.body,{attributes:!0,attributeFilter:["aria-hidden"],subtree:!0}),()=>{d.disconnect()}},[t.sidebarOpen]),m.jsx(m.Fragment,{children:e})};export{Go as A,Zo as D,Wo as E,Yo as M,_o as S,Uo as a,Xo as b};
