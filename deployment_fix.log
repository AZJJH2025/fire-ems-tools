2025-04-06 08:13:20,113 - __main__ - INFO - Running diagnostics only...
2025-04-06 08:13:20,114 - __main__ - INFO - Running all diagnostics...
2025-04-06 08:13:20,114 - __main__ - INFO - Checking environment...
2025-04-06 08:13:20,114 - __main__ - INFO - Python version: 3.12.5
2025-04-06 08:13:20,291 - __main__ - INFO - Operating System: macOS-15.2-arm64-arm-64bit
2025-04-06 08:13:20,292 - __main__ - INFO - Memory check only supported on Linux
2025-04-06 08:13:20,292 - __main__ - WARNING - Could not check installed packages: No module named 'pkg_resources'
2025-04-06 08:13:20,564 - __main__ - INFO - Database module imported successfully
2025-04-06 08:13:20,943 - fix_deployment - INFO - Applying emergency deployment fixes...
2025-04-06 08:13:20,944 - fix_deployment - INFO - Added get_json_field helper function to global namespace
2025-04-06 08:13:20,944 - fix_deployment - INFO - All fixes have been applied successfully!
2025-04-06 08:13:20,958 - __main__ - ERROR - Database connection failed: name 'app' is not defined
2025-04-06 08:13:20,958 - __main__ - INFO - Checking app configuration...
2025-04-06 08:13:20,959 - fix_deployment - INFO - Applying emergency deployment fixes...
2025-04-06 08:13:20,959 - fix_deployment - INFO - Added get_json_field helper function to global namespace
2025-04-06 08:13:20,959 - fix_deployment - INFO - All fixes have been applied successfully!
2025-04-06 08:13:20,960 - __main__ - ERROR - Error checking app configuration: name 'app' is not defined
2025-04-06 08:13:20,961 - __main__ - ERROR - Traceback (most recent call last):
  File "/Users/josephhester/Documents/fire-ems-tools/deployment_fix.py", line 109, in check_app_configuration
    from app import app
  File "/Users/josephhester/Documents/fire-ems-tools/app.py", line 5493, in <module>
    @app.route('/call-volume-forecaster')
     ^^^
NameError: name 'app' is not defined

2025-04-06 08:13:20,961 - __main__ - INFO - Checking template compatibility...
2025-04-06 08:13:20,961 - __main__ - INFO - Found 15 templates: ['medical-test.html', 'index.html', 'data-formatter.html', 'direct-test.html', 'call-density-heatmap.html', 'coverage-gap-finder.html', 'css-test.html', 'quick-stats.html', 'fire-ems-dashboard.html', 'fire-map-pro.html', 'call-volume-forecaster.html', 'test-dashboard.html', 'isochrone-map.html', 'station-overview.html', 'incident-logger.html']
2025-04-06 08:13:20,966 - __main__ - INFO - Checking JS compatibility...
2025-04-06 08:13:20,966 - __main__ - INFO - Found 32 JS files
2025-04-06 08:13:20,966 - __main__ - INFO - Checking static/debug-medical-sections.js
2025-04-06 08:13:20,966 - __main__ - INFO - Checking static/call-volume-forecaster.js
2025-04-06 08:13:20,967 - __main__ - WARNING - static/call-volume-forecaster.js: Direct DOM manipulation might need cleanup
2025-04-06 08:13:20,967 - __main__ - INFO - Checking static/debug-session-storage.js
2025-04-06 08:13:20,967 - __main__ - WARNING - static/debug-session-storage.js: User agent sniffing might cause issues on certain browsers
2025-04-06 08:13:20,967 - __main__ - WARNING - static/debug-session-storage.js: Direct DOM manipulation might need cleanup
2025-04-06 08:13:20,967 - __main__ - INFO - Checking static/coverage-gap-finder.js
2025-04-06 08:13:20,967 - __main__ - WARNING - static/coverage-gap-finder.js: HTML2Canvas usage might need additional configuration
2025-04-06 08:13:20,967 - __main__ - WARNING - static/coverage-gap-finder.js: Direct DOM manipulation might need cleanup
2025-04-06 08:13:20,967 - __main__ - INFO - Checking static/quick-stats.js
2025-04-06 08:13:20,968 - __main__ - WARNING - static/quick-stats.js: Direct DOM manipulation might need cleanup
2025-04-06 08:13:20,968 - __main__ - INFO - Checking static/incident-logger.js
2025-04-06 08:13:20,968 - __main__ - INFO - Checking static/emergency-points.js
2025-04-06 08:13:20,968 - __main__ - INFO - Checking static/fire-map-pro.js
2025-04-06 08:13:20,969 - __main__ - WARNING - static/fire-map-pro.js: HTML2Canvas usage might need additional configuration
2025-04-06 08:13:20,969 - __main__ - WARNING - static/fire-map-pro.js: Direct DOM manipulation might need cleanup
2025-04-06 08:13:20,969 - __main__ - INFO - Found exportAsPNG function in fire-map-pro.js
2025-04-06 08:13:20,969 - __main__ - INFO - exportAsPNG function includes tile loading tracking
2025-04-06 08:13:20,969 - __main__ - INFO - Checking static/call-density-heatmap.js
2025-04-06 08:13:20,970 - __main__ - WARNING - static/call-density-heatmap.js: HTML2Canvas usage might need additional configuration
2025-04-06 08:13:20,970 - __main__ - INFO - Checking static/add-medical-sections.js
2025-04-06 08:13:20,970 - __main__ - INFO - Checking static/test-coverage-gap-finder.js
2025-04-06 08:13:20,970 - __main__ - INFO - Checking static/step-fix.js
2025-04-06 08:13:20,970 - __main__ - INFO - Checking static/test-dashboard.js
2025-04-06 08:13:20,971 - __main__ - INFO - Checking static/test-incident-data-script.js
2025-04-06 08:13:20,971 - __main__ - WARNING - static/test-incident-data-script.js: Direct DOM manipulation might need cleanup
2025-04-06 08:13:20,971 - __main__ - INFO - Checking static/test-algorithm-visualization.js
2025-04-06 08:13:20,971 - __main__ - INFO - Checking static/data-formatter.js
2025-04-06 08:13:20,971 - __main__ - WARNING - static/data-formatter.js: User agent sniffing might cause issues on certain browsers
2025-04-06 08:13:20,971 - __main__ - WARNING - static/data-formatter.js: Direct DOM manipulation might need cleanup
2025-04-06 08:13:20,971 - __main__ - INFO - Checking static/isochrone-map.js
2025-04-06 08:13:20,972 - __main__ - WARNING - static/isochrone-map.js: HTML2Canvas usage might need additional configuration
2025-04-06 08:13:20,972 - __main__ - WARNING - static/isochrone-map.js: Direct DOM manipulation might need cleanup
2025-04-06 08:13:20,972 - __main__ - INFO - Checking static/station-overview.js
2025-04-06 08:13:20,972 - __main__ - WARNING - static/station-overview.js: Direct DOM manipulation might need cleanup
2025-04-06 08:13:20,972 - __main__ - INFO - Checking static/data-formatter-fix.js
2025-04-06 08:13:20,973 - __main__ - WARNING - static/data-formatter-fix.js: User agent sniffing might cause issues on certain browsers
2025-04-06 08:13:20,973 - __main__ - INFO - Checking static/fire-ems-dashboard.js
2025-04-06 08:13:20,973 - __main__ - INFO - Checking static/db-adapter.js
2025-04-06 08:13:20,973 - __main__ - INFO - Checking static/js/nfirs/nfirs-validator.js
2025-04-06 08:13:20,974 - __main__ - INFO - Checking static/js/nfirs/nfirs-ui.js
2025-04-06 08:13:20,974 - __main__ - INFO - Checking static/js/nfirs/nfirs-codes.js
2025-04-06 08:13:20,974 - __main__ - INFO - Checking static/js/nfirs/nfirs-export.js
2025-04-06 08:13:20,974 - __main__ - INFO - Checking static/js/components/incident-list.js
2025-04-06 08:13:20,975 - __main__ - INFO - Checking static/js/components/incident-export.js
2025-04-06 08:13:20,975 - __main__ - WARNING - static/js/components/incident-export.js: HTML2Canvas usage might need additional configuration
2025-04-06 08:13:20,975 - __main__ - WARNING - static/js/components/incident-export.js: Direct DOM manipulation might need cleanup
2025-04-06 08:13:20,975 - __main__ - INFO - Checking static/js/components/cad-integration.js
2025-04-06 08:13:20,975 - __main__ - INFO - Checking static/js/components/incident-form.js
2025-04-06 08:13:20,975 - __main__ - INFO - Checking static/js/components/incident-map.js
2025-04-06 08:13:20,976 - __main__ - INFO - Checking static/js/components/incident-validator.js
2025-04-06 08:13:20,976 - __main__ - INFO - Checking static/js/components/hipaa-compliance.js
2025-04-06 08:13:20,976 - __main__ - INFO - Checking Flask routes...
2025-04-06 08:13:20,977 - fix_deployment - INFO - Applying emergency deployment fixes...
2025-04-06 08:13:20,977 - fix_deployment - INFO - Added get_json_field helper function to global namespace
2025-04-06 08:13:20,977 - fix_deployment - INFO - All fixes have been applied successfully!
2025-04-06 08:13:20,977 - __main__ - ERROR - Error checking routes: name 'app' is not defined
2025-04-06 08:13:20,978 - __main__ - ERROR - Traceback (most recent call last):
  File "/Users/josephhester/Documents/fire-ems-tools/deployment_fix.py", line 256, in check_routes
    from app import app
  File "/Users/josephhester/Documents/fire-ems-tools/app.py", line 5493, in <module>
    @app.route('/call-volume-forecaster')
     ^^^
NameError: name 'app' is not defined

2025-04-06 08:13:20,978 - __main__ - INFO - Checking static files...
2025-04-06 08:13:20,980 - __main__ - WARNING - Could not determine MIME type for static/.DS_Store
2025-04-06 08:13:20,982 - __main__ - INFO - Diagnostic results: {
  "environment": true,
  "app_configuration": true,
  "templates": true,
  "js_files": true,
  "routes": true,
  "static_files": true
}
2025-04-06 08:13:20,982 - __main__ - INFO - Deployment fix tool completed
