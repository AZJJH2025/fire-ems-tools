/*! For license information please see data-formatter.5f80d6903c30464e3664.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("ReactDOM"),require("MaterialUI"),require("ReactBeautifulDnD")):"function"==typeof define&&define.amd?define("DataFormatterUI",["React","ReactDOM","MaterialUI","ReactBeautifulDnD"],t):"object"==typeof exports?exports.DataFormatterUI=t(require("React"),require("ReactDOM"),require("MaterialUI"),require("ReactBeautifulDnD")):e.DataFormatterUI=t(e.React,e.ReactDOM,e.MaterialUI,e.ReactBeautifulDnD)}(this,((e,t,r,n)=>(()=>{"use strict";var o,a={184:(e,t,r)=>{r.r(t),r.d(t,{mount:()=>re,unmount:()=>ne});var n=r(883),o=r.n(n),a=r(845),i=r.n(a),l=r(280),c=r(429),u=r(232),s=r(627);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function d(){d=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),l=new M(n||[]);return o(i,"_invoke",{value:I(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",y="suspendedYield",g="executing",h="completed",v={};function b(){}function E(){}function w(){}var x={};u(x,i,(function(){return this}));var S=Object.getPrototypeOf,D=S&&S(S(A([])));D&&D!==r&&n.call(D,i)&&(x=D);var O=w.prototype=b.prototype=Object.create(x);function C(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function F(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==m(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function I(t,r,n){var o=p;return function(a,i){if(o===g)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?h:y,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=h,n.method="throw",n.arg=u.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(m(t)+" is not iterable")}return E.prototype=w,o(O,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:E,configurable:!0}),E.displayName=u(w,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},C(F.prototype),u(F.prototype,l,(function(){return this})),t.AsyncIterator=F,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new F(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function f(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function p(e,t){if(e){if("string"==typeof e)return y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return(t=function(e){var t=function(e){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b={sourceColumns:[],sampleData:[],selectedTool:null,fileId:null,mappings:[],isLoading:!1,error:null,schema:null,targetFields:[],expandedCategories:{timestamp:!0,location:!0,incident:!0,nfirs:!1,other:!1}},E="ADD_MAPPING",w="REMOVE_MAPPING",x="UPDATE_MAPPING",S="TOGGLE_CATEGORY",D="SET_LOADING",O="SET_ERROR",C="SET_SCHEMA",F="SET_TARGET_FIELDS";function I(e,t){switch(t.type){case"SET_SOURCE_DATA":return h(h({},e),{},{sourceColumns:t.payload.sourceColumns||e.sourceColumns,sampleData:t.payload.sampleData||e.sampleData});case"SET_SELECTED_TOOL":return h(h({},e),{},{selectedTool:t.payload});case"SET_FILE_ID":return h(h({},e),{},{fileId:t.payload});case E:return h(h({},e),{},{mappings:[].concat((r=e.mappings,function(e){if(Array.isArray(e))return y(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||p(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[t.payload])});case w:return h(h({},e),{},{mappings:e.mappings.filter((function(e){return e.targetField!==t.payload.targetField}))});case x:return h(h({},e),{},{mappings:e.mappings.map((function(e){return e.targetField===t.payload.targetField?h(h({},e),t.payload):e}))});case S:return h(h({},e),{},{expandedCategories:h(h({},e.expandedCategories),{},v({},t.payload,!e.expandedCategories[t.payload]))});case D:return h(h({},e),{},{isLoading:t.payload});case O:return h(h({},e),{},{error:t.payload});case C:return h(h({},e),{},{schema:t.payload});case F:return h(h({},e),{},{targetFields:t.payload});case"RESET_STATE":return b;default:return e}var r}var T=(0,n.createContext)(),j=function(e){var t,r,a=e.children,i=e.initialData,l=void 0===i?{}:i,c=h(h({},b),{},{sourceColumns:l.sourceColumns||[],sampleData:l.sampleData||[],selectedTool:l.selectedTool||null,fileId:l.fileId||null}),u=(t=(0,n.useReducer)(I,c),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,r)||p(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=u[0],m=u[1];(0,n.useEffect)((function(){var e=function(){var e,t=(e=d().mark((function e(){var t,r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m({type:D,payload:!0}),e.prev=1,e.next=4,fetch("/static/standardized_incident_record_schema.json");case 4:if((t=e.sent).ok){e.next=7;break}throw new Error("Failed to load schema: ".concat(t.status));case 7:return e.next=9,t.json();case 9:r=e.sent,m({type:C,payload:r}),n=y(r),m({type:F,payload:n}),m({type:D,payload:!1}),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(1),console.error("Error loading schema:",e.t0),m({type:O,payload:e.t0.message}),m({type:D,payload:!1});case 21:case"end":return e.stop()}}),e,null,[[1,16]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){f(a,n,o,i,l,"next",e)}function l(e){f(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();e()}),[]);var y=function(e){var t=[];return"3.0"===e.schemaVersion?(e.requiredFields&&Array.isArray(e.requiredFields)&&e.requiredFields.forEach((function(e){t.push({name:e.fieldName,id:e.fieldName.toLowerCase().replace(/\s+/g,"_"),type:e.dataType,description:e.formatNotes,required:!0,category:e.category||g(e.fieldName)})})),e.optionalFields&&Array.isArray(e.optionalFields)&&e.optionalFields.forEach((function(e){t.push({name:e.fieldName,id:e.fieldName.toLowerCase().replace(/\s+/g,"_"),type:e.dataType,description:e.formatNotes,required:!1,category:e.category||g(e.fieldName)})}))):(e.requiredFields&&Array.isArray(e.requiredFields)&&e.requiredFields.forEach((function(e){t.push(h(h({},e),{},{id:e.name.replace(/\s+/g,"_").toLowerCase(),required:!0,category:e.category||g(e.name)}))})),e.optionalFields&&Array.isArray(e.optionalFields)&&e.optionalFields.forEach((function(e){t.push(h(h({},e),{},{id:e.name.replace(/\s+/g,"_").toLowerCase(),required:!1,category:e.category||g(e.name)}))}))),t.sort((function(e,t){return e.category!==t.category?e.category.localeCompare(t.category):e.required!==t.required?e.required?-1:1:e.name.localeCompare(t.name)}))},g=function(e){var t=e.toLowerCase();return t.includes("time")||t.includes("date")||t.includes("timestamp")?"timestamp":t.includes("address")||t.includes("location")||t.includes("latitude")||t.includes("longitude")||t.includes("geo")||t.includes("coordinates")?"location":t.includes("nfirs")||t.includes("fdid")?"nfirs":t.includes("incident")||t.includes("call")||t.includes("emergency")||t.includes("response")||t.includes("dispatch")||t.includes("unit")||t.includes("type")?"incident":"other"},v={state:s,dispatch:m};return o().createElement(T.Provider,{value:v},a)},P=function(){var e=(0,n.useContext)(T);if(!e)throw new Error("useData must be used within a DataProvider");return e},M=r(353),A=r(549),R=r(120),L=r(315),Y=r(821),k=r(668);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e,t,r){return(t=function(e){var t=function(e){if("object"!=_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const G=function(e){var t,r,a=e.open,i=e.fieldConfig,l=e.onClose,c=e.onSave,u=(t=(0,n.useState)({}),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?U(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=u[0],d=u[1];(0,n.useEffect)((function(){i&&i.config&&d(i.config)}),[i]);var f=function(e,t){d((function(r){return N(N({},r),{},q({},e,t))}))};if(!i||!i.field)return null;var p=i.field,y="Configure ".concat(p.name," Transformation");return o().createElement(s.Dialog,{open:a,onClose:l,"aria-labelledby":"transform-config-dialog-title",maxWidth:"sm",fullWidth:!0},o().createElement(s.DialogTitle,{id:"transform-config-dialog-title"},y),o().createElement(s.DialogContent,{dividers:!0},function(){switch(p.type){case"date":case"datetime":return o().createElement(s.Box,{p:1},o().createElement(s.Typography,{variant:"subtitle1",gutterBottom:!0},"Date Format Configuration"),o().createElement(s.FormControl,{fullWidth:!0,margin:"normal",size:"small"},o().createElement(s.InputLabel,null,"Source Format"),o().createElement(s.Select,{value:m.sourceFormat||"auto",onChange:function(e){return f("sourceFormat",e.target.value)}},o().createElement(s.MenuItem,{value:"auto"},"Auto-detect"),o().createElement(s.MenuItem,{value:"MM/DD/YYYY"},"MM/DD/YYYY"),o().createElement(s.MenuItem,{value:"DD/MM/YYYY"},"DD/MM/YYYY"),o().createElement(s.MenuItem,{value:"YYYY-MM-DD"},"YYYY-MM-DD"),o().createElement(s.MenuItem,{value:"MM-DD-YYYY"},"MM-DD-YYYY"),o().createElement(s.MenuItem,{value:"DD-MM-YYYY"},"DD-MM-YYYY"),o().createElement(s.MenuItem,{value:"custom"},"Custom..."))),"custom"===m.sourceFormat&&o().createElement(s.TextField,{fullWidth:!0,margin:"normal",size:"small",label:"Custom Format",value:m.customFormat||"",onChange:function(e){return f("customFormat",e.target.value)},helperText:"Use: YYYY=year, MM=month, DD=day, HH=hour, mm=minute, ss=second"}),o().createElement(s.FormControl,{fullWidth:!0,margin:"normal",size:"small"},o().createElement(s.InputLabel,null,"Target Format"),o().createElement(s.Select,{value:m.targetFormat||"ISO8601",onChange:function(e){return f("targetFormat",e.target.value)}},o().createElement(s.MenuItem,{value:"ISO8601"},"ISO8601 (YYYY-MM-DD)"),o().createElement(s.MenuItem,{value:"MM/DD/YYYY"},"MM/DD/YYYY"),o().createElement(s.MenuItem,{value:"DD/MM/YYYY"},"DD/MM/YYYY"))));case"coordinates":return o().createElement(s.Box,{p:1},o().createElement(s.Typography,{variant:"subtitle1",gutterBottom:!0},"Coordinate Format Configuration"),o().createElement(s.FormControl,{fullWidth:!0,component:"fieldset",margin:"normal"},o().createElement(s.RadioGroup,{value:m.format||"decimal",onChange:function(e){return f("format",e.target.value)}},o().createElement(s.FormControlLabel,{value:"decimal",control:o().createElement(s.Radio,{color:"primary"}),label:"Decimal Degrees (e.g., 40.7128, -74.0060)"}),o().createElement(s.FormControlLabel,{value:"dms",control:o().createElement(s.Radio,{color:"primary"}),label:"Degrees Minutes Seconds (e.g., 40Â°42â€²46â€³N, 74Â°00â€²21â€³W)"}))));default:return o().createElement(s.Box,{p:1},o().createElement(s.Typography,{variant:"subtitle1",gutterBottom:!0},"Text Transformation"),o().createElement(s.FormControl,{fullWidth:!0,component:"fieldset",margin:"normal"},o().createElement(s.RadioGroup,{value:m.textTransform||"none",onChange:function(e){return f("textTransform",e.target.value)}},o().createElement(s.FormControlLabel,{value:"none",control:o().createElement(s.Radio,{color:"primary"}),label:"None (keep original)"}),o().createElement(s.FormControlLabel,{value:"uppercase",control:o().createElement(s.Radio,{color:"primary"}),label:"UPPERCASE"}),o().createElement(s.FormControlLabel,{value:"lowercase",control:o().createElement(s.Radio,{color:"primary"}),label:"lowercase"}),o().createElement(s.FormControlLabel,{value:"capitalize",control:o().createElement(s.Radio,{color:"primary"}),label:"Capitalize First Letter"}),o().createElement(s.FormControlLabel,{value:"trim",control:o().createElement(s.Radio,{color:"primary"}),label:"Trim Whitespace"}))))}}(),p.description&&o().createElement(s.Box,{mt:2,p:1,bgcolor:"#f5f5f5",borderRadius:1},o().createElement(s.Typography,{variant:"body2",color:"textSecondary"},o().createElement("strong",null,"Field description:")," ",p.description))),o().createElement(s.DialogActions,null,o().createElement(s.Button,{onClick:l,color:"default"},"Cancel"),o().createElement(s.Button,{onClick:function(){c(m)},color:"primary",variant:"contained"},"Save Configuration")))};function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W.apply(null,arguments)}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){V(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function V(e,t,r){return(t=function(e){var t=function(e){if("object"!=z(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==z(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?X(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const K=function(e){var t=e.onMappingComplete,r=P(),a=r.state,i=r.dispatch,l=a.sourceColumns,c=a.sampleData,u=a.targetFields,m=a.expandedCategories,d=a.mappings,f=a.selectedTool,p=a.fileId;console.log("ColumnMappingUI rendered with:",{sourceColumnsLength:(null==l?void 0:l.length)||0,sampleDataLength:(null==c?void 0:c.length)||0,targetFieldsLength:(null==u?void 0:u.length)||0,mappingsLength:(null==d?void 0:d.length)||0,selectedTool:f,fileId:p});var y=$((0,n.useState)(!1),2),g=y[0],h=y[1],v=$((0,n.useState)(null),2),b=v[0],D=v[1],O=$((0,n.useState)({}),2),C=O[0],F=O[1],I=$((0,n.useState)(!1),2),T=I[0],j=I[1],_=$((0,n.useState)(null),2),B=_[0],N=_[1],q=$((0,n.useState)({}),2),U=q[0],H=q[1],X=u.reduce((function(e,t){return e[t.category]||(e[t.category]=[]),e[t.category].push(t),e}),{}),K=function(e){var t=e.source,r=e.destination,n=e.draggableId;if(r&&(r.droppableId!==t.droppableId||r.index!==t.index)&&"source-columns"===t.droppableId&&r.droppableId.startsWith("target-field-")){var o=r.droppableId.replace("target-field-",""),a=l[parseInt(n.replace("source-column-",""))],c=u.find((function(e){return e.id===o}));if(c&&a){var s={sourceField:a,targetField:c.name,required:c.required,transformConfig:Q(c),splitRule:null},m=d.find((function(e){return e.targetField===c.name}));i(m?{type:x,payload:s}:{type:E,payload:s}),F((function(e){return J(J({},e),{},V({},o,Q(c)))}))}}},Q=function(e){if(!e)return{};switch(e.type){case"date":case"datetime":return{type:"date",sourceFormat:"auto",targetFormat:"ISO8601"};case"coordinates":return{type:"coordinates",format:"decimal"};default:return{type:"text",textTransform:"none"}}},Z=function(){var e=u.filter((function(e){return e.required}));if(0===e.length)return 100;var t=e.filter((function(e){return d.some((function(t){return t.targetField===e.name}))}));return Math.round(t.length/e.length*100)};return o().createElement(s.Grid,{container:!0,spacing:3},o().createElement(s.Grid,{item:!0,xs:12,md:5},o().createElement(s.Paper,{elevation:2,style:{padding:16,height:"100%"}},o().createElement(s.Typography,{variant:"h6",gutterBottom:!0},"Source Columns"),o().createElement(k.DragDropContext,{onDragEnd:K},o().createElement(k.Droppable,{droppableId:"source-columns"},(function(e,t){return o().createElement(s.Box,W({},e.droppableProps,{ref:e.innerRef,bgcolor:t.isDraggingOver?"rgba(0, 0, 0, 0.05)":"transparent",p:1,minHeight:400,maxHeight:500,overflow:"auto",border:"1px solid #e0e0e0",borderRadius:4}),l.map((function(e,t){var r=function(e){var t=l[e];return d.some((function(e){return e.sourceField===t}))}(t),n=r?function(e){var t=l[e],r=d.find((function(e){return e.sourceField===t}));if(r){var n=u.find((function(e){return e.name===r.targetField}));return n?n.name:null}return null}(t):null;return o().createElement(k.Draggable,{key:"source-column-".concat(t),draggableId:"source-column-".concat(t),index:t,isDragDisabled:r},(function(t,a){return o().createElement(s.Box,W({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{mb:1,p:1.5,display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:r?"#e3f2fd":"white",border:"1px solid ".concat(r?"#90caf9":"#e0e0e0"),borderRadius:1,boxShadow:a.isDragging?2:0,opacity:a.isDragging?.7:1}),o().createElement(s.Box,{display:"flex",alignItems:"center"},o().createElement(M.A,{color:"action",style:{marginRight:8,opacity:.6}}),o().createElement(s.Typography,{variant:"body2"},e)),r&&o().createElement(s.Tooltip,{title:"Mapped to ".concat(n||"a field")},o().createElement(s.Chip,{label:"Mapped",size:"small",color:"primary",variant:"outlined"})))}))})),e.placeholder,0===l.length&&o().createElement(s.Box,{p:2,textAlign:"center",color:"text.secondary"},o().createElement(s.Typography,{variant:"body2"},"No source columns available")))}))),o().createElement(s.Box,{mt:2},o().createElement(s.Typography,{variant:"subtitle1",gutterBottom:!0},"Sample Data"),o().createElement(s.Box,{border:"1px solid #e0e0e0",borderRadius:1,overflow:"auto",maxHeight:200},c&&c.length>0?o().createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},o().createElement("thead",null,o().createElement("tr",{style:{backgroundColor:"#f5f5f5"}},Object.keys(c[0]).map((function(e,t){return o().createElement("th",{key:t,style:{padding:8,textAlign:"left",borderBottom:"1px solid #e0e0e0"}},e)})))),o().createElement("tbody",null,c.slice(0,3).map((function(e,t){return o().createElement("tr",{key:t},Object.values(e).map((function(e,t){return o().createElement("td",{key:t,style:{padding:8,borderBottom:"1px solid #e0e0e0"}},"object"===z(e)?JSON.stringify(e):String(e||""))})))})))):o().createElement(s.Box,{p:2,textAlign:"center",color:"text.secondary"},o().createElement(s.Typography,{variant:"body2"},"No sample data available")))))),o().createElement(s.Grid,{item:!0,xs:12,md:7},o().createElement(s.Paper,{elevation:2,style:{padding:16}},o().createElement(s.Typography,{variant:"h6",gutterBottom:!0},"Target Fields for ",f?f.replace("-"," "):"Selected Tool"),o().createElement(s.Box,{mb:2},o().createElement(s.Box,{display:"flex",justifyContent:"space-between",alignItems:"center"},o().createElement(s.Typography,{variant:"body2"},"Required Fields Mapped: ",Z(),"%"),o().createElement(s.Typography,{variant:"body2"},d.filter((function(e){return e.required})).length," of ",u.filter((function(e){return e.required})).length)),o().createElement(s.LinearProgress,{variant:"determinate",value:Z(),color:"primary",style:{backgroundColor:100===Z()?"#e8f5e9":"#fff3cd"}})),o().createElement(s.Box,{maxHeight:500,overflow:"auto",pb:2},o().createElement(k.DragDropContext,{onDragEnd:K},[{id:"timestamp",label:"Timestamp Fields",icon:"access_time"},{id:"location",label:"Location Fields",icon:"place"},{id:"incident",label:"Incident Fields",icon:"local_fire_department"},{id:"nfirs",label:"NFIRS Fields",icon:"assignment"},{id:"other",label:"Other Fields",icon:"more_horiz"}].map((function(e){var t=X[e.id]||[];return 0===t.length?null:o().createElement(s.Accordion,{key:e.id,expanded:m[e.id]||!1,onChange:function(){return t=e.id,void i({type:S,payload:t});var t},style:{marginBottom:8}},o().createElement(s.AccordionSummary,{expandIcon:o().createElement(A.A,null),"aria-controls":"".concat(e.id,"-content"),id:"".concat(e.id,"-header")},o().createElement(s.Typography,{variant:"subtitle1"},o().createElement(s.Box,{component:"span",mr:1},o().createElement("i",{className:"material-icons"},e.icon)),e.label," (",t.length,")")),o().createElement(s.AccordionDetails,{style:{display:"block"}},t.map((function(e){var t=d.find((function(t){return t.targetField===e.name})),r=!!C[e.id];return o().createElement(s.Box,{mb:2,key:e.id},o().createElement(s.Paper,{elevation:1,style:{padding:12,backgroundColor:t?"#e8f5e9":"#f9f9f9",borderLeft:e.required?"4px solid ".concat(t?"#4caf50":"#ff9800"):"none"}},o().createElement(s.Grid,{container:!0,alignItems:"center",justifyContent:"space-between"},o().createElement(s.Grid,{item:!0,xs:5},o().createElement(s.Typography,{variant:"body1"},e.name,e.required&&o().createElement(s.Tooltip,{title:"Recommended field for full functionality"},o().createElement("span",{style:{color:t?"#4caf50":"#ff9800",marginLeft:"4px"}},"*"))),o().createElement(s.Box,{display:"flex",alignItems:"center",mt:.5},o().createElement(s.Chip,{label:e.type||"text",size:"small",style:{marginRight:8,backgroundColor:"#e0e0e0"}}),e.description&&o().createElement(s.Tooltip,{title:e.description},o().createElement(R.A,{fontSize:"small",color:"primary"})))),o().createElement(s.Grid,{item:!0,xs:7},o().createElement(k.Droppable,{droppableId:"target-field-".concat(e.id),isDropDisabled:!!t},(function(n,a){return o().createElement(s.Box,W({ref:n.innerRef},n.droppableProps,{p:t?0:1,border:t?"none":"1px dashed #ccc",borderRadius:1,bgcolor:a.isDraggingOver?"#e3f2fd":"transparent",minHeight:t?"auto":36,display:"flex",alignItems:"center",justifyContent:t?"flex-start":"center"}),t?o().createElement(s.Box,{display:"flex",alignItems:"center"},o().createElement(s.Chip,{label:t.sourceField,color:"primary",onDelete:function(){return t=e.id,void((r=u.find((function(e){return e.id===t})))&&(i({type:w,payload:{targetField:r.name}}),F((function(e){var r=J({},e);return delete r[t],r}))));var t,r},deleteIcon:o().createElement(L.A,null)}),r&&o().createElement(s.Tooltip,{title:"Transformation configured"},o().createElement(s.Chip,{icon:o().createElement(Y.A,null),size:"small",label:"Transform",style:{marginLeft:8,backgroundColor:"#ff9800",color:"white"}})),o().createElement(s.Box,{display:"flex"},o().createElement(s.IconButton,{size:"small",onClick:function(){return function(e){var t=u.find((function(t){return t.id===e})),r=C[e]||Q(t);D({fieldId:e,field:t,config:r}),h(!0)}(e.id)},style:{marginLeft:4},title:"Configure transformation"},o().createElement(Y.A,{fontSize:"small"})),o().createElement(s.IconButton,{size:"small",onClick:function(){return function(e){var t=u.find((function(t){return t.id===e})),r=d.find((function(e){return e.targetField===t.name}));if(t&&r){var n=U[e]||r.splitRule||null;N({fieldId:e,field:t,sourceField:r.sourceField,rule:n}),j(!0)}}(e.id)},style:{marginLeft:4},title:"Configure split rule"},o().createElement("i",{className:"material-icons",style:{fontSize:"16px"}},"content_cut")))):o().createElement(s.Typography,{variant:"body2",color:"textSecondary",style:{fontSize:"0.85rem"}},"Drag a column here"),n.placeholder)}))))))}))))})))),o().createElement(s.Box,{mt:3,display:"flex",justifyContent:"flex-end"},o().createElement(s.Button,{variant:"contained",color:"primary",onClick:function(){if(!u.filter((function(e){return e.required})).every((function(e){return d.some((function(t){return t.targetField===e.name}))}))){var e=u.filter((function(e){return e.required})).filter((function(e){return!d.some((function(t){return t.targetField===e.name}))})),r=[],n=e.some((function(e){return"latitude"===e.id||"longitude"===e.id})),o=e.some((function(e){return"incident_date"===e.id||"incident_time"===e.id||"dispatch_time"===e.id||"en_route_time"===e.id||"on_scene_time"===e.id}));n&&r.push("Map visualizations may not be available"),o&&r.push("Time-based analysis may be limited"),0===r.length&&r.push("Some features may be limited or unavailable");var a="\nWarning: Missing Required Fields\n\nThe following required fields are not mapped:\n".concat(e.map((function(e){return"- "+e.name})).join("\n"),"\n\nImpact:\n").concat(r.map((function(e){return"- "+e})).join("\n"),"\n\nDo you want to continue anyway?\n      ");if(!window.confirm(a))return;try{sessionStorage.setItem("warnedMissingFields",JSON.stringify(e.map((function(e){return e.name})))),sessionStorage.setItem("warnedMissingFieldsTimestamp",(new Date).toISOString()),console.warn("User proceeded with missing required fields:",e.map((function(e){return e.name})).join(", "))}catch(e){console.warn("Could not store missing fields info:",e)}}var i=[],l=u.filter((function(e){return"date"===e.type&&e.name.includes("Date")})),s=u.filter((function(e){return"time"===e.type||e.name.includes("Time")}));l.forEach((function(e){var t=d.find((function(t){return t.targetField===e.name}));t&&s.forEach((function(r){var n=d.find((function(e){return e.targetField===r.name}));n&&n.sourceField===t.sourceField&&(console.log("Found Date+Time pair using same source column: ".concat(e.name," + ").concat(r.name," <- ").concat(t.sourceField)),i.push({sourceField:t.sourceField,dateField:e.name,timeField:r.name,sourceValue:c&&c.length>0?c[0][t.sourceField]:null}))}))}));var m=d.map((function(e){var t=u.find((function(t){return t.name===e.targetField})),r=t?t.id:null;return J(J({},e),{},{transformConfig:t?C[r]||Q(t):null,splitRule:r&&(U[r]||e.splitRule)||null})})),f={_dateTimePairs:i.length>0?i:void 0,_splitRules:{}};m.forEach((function(e){e.splitRule&&(f._splitRules[e.targetField]={sourceField:e.sourceField,delimiter:e.splitRule.delimiter,partIndex:e.splitRule.partIndex})}));try{sessionStorage.setItem("formatterProcessingMetadata",JSON.stringify(f))}catch(e){console.warn("Could not store processing metadata:",e)}"function"==typeof t&&t(m,f)}},"Apply and Preview")))),g&&b&&o().createElement(G,{open:g,fieldConfig:b,onClose:function(){return h(!1)},onSave:function(e){return function(e,t){F((function(r){return J(J({},r),{},V({},e,t))}));var r=u.find((function(t){return t.id===e}));if(r){var n=d.find((function(e){return e.targetField===r.name}));n&&i({type:x,payload:J(J({},n),{},{transformConfig:t})})}h(!1),D(null)}(b.fieldId,e)}}),T&&B&&o().createElement(s.Dialog,{open:T,onClose:function(){return j(!1)},"aria-labelledby":"split-config-dialog-title",maxWidth:"sm",fullWidth:!0},o().createElement(s.DialogTitle,{id:"split-config-dialog-title"},"Configure Split Rule for ",B.field.name),o().createElement(s.DialogContent,{dividers:!0},o().createElement(s.Box,{p:1},o().createElement(s.Typography,{variant:"subtitle1",gutterBottom:!0},"Split Source Field: ",B.sourceField),c&&c.length>0&&o().createElement(s.Box,{mb:2,p:1,border:"1px solid #e0e0e0",borderRadius:1,bgcolor:"#f5f5f5"},o().createElement(s.Typography,{variant:"caption"},"Sample data:"),o().createElement(s.Box,{component:"pre",style:{margin:"4px 0",overflowX:"auto"}},c[0][B.sourceField]||"No sample data available")),o().createElement(s.FormControl,{component:"fieldset",fullWidth:!0,margin:"normal"},o().createElement(s.Typography,{variant:"body2"},"Enable Split Rule"),o().createElement(s.Box,{display:"flex",alignItems:"center"},o().createElement(s.Switch,{checked:!!B.rule,onChange:function(e){e.target.checked?N(J(J({},B),{},{rule:{delimiter:" ",partIndex:0}})):N(J(J({},B),{},{rule:null}))},color:"primary"}),o().createElement(s.Typography,{variant:"body2",style:{marginLeft:8}},B.rule?"Split rule active":"Use entire field value"))),B.rule&&o().createElement(o().Fragment,null,o().createElement(s.FormControl,{fullWidth:!0,margin:"normal"},o().createElement(s.InputLabel,null,"Split Delimiter"),o().createElement(s.Select,{value:B.rule.delimiter,onChange:function(e){N(J(J({},B),{},{rule:J(J({},B.rule),{},{delimiter:e.target.value})}))}},o().createElement(s.MenuItem,{value:" "},"Space"),o().createElement(s.MenuItem,{value:","},"Comma (,)"),o().createElement(s.MenuItem,{value:";"},"Semicolon (;)"),o().createElement(s.MenuItem,{value:"|"},"Pipe (|)"),o().createElement(s.MenuItem,{value:"/"},"Forward Slash (/)"),o().createElement(s.MenuItem,{value:"-"},"Hyphen (-)"),o().createElement(s.MenuItem,{value:"."},"Period (.)"))),o().createElement(s.FormControl,{fullWidth:!0,margin:"normal"},o().createElement(s.InputLabel,null,"Part to Extract"),o().createElement(s.Select,{value:B.rule.partIndex,onChange:function(e){N(J(J({},B),{},{rule:J(J({},B.rule),{},{partIndex:e.target.value})}))}},o().createElement(s.MenuItem,{value:0},"First Part (1)"),o().createElement(s.MenuItem,{value:1},"Second Part (2)"),o().createElement(s.MenuItem,{value:2},"Third Part (3)"),o().createElement(s.MenuItem,{value:3},"Fourth Part (4)"),o().createElement(s.MenuItem,{value:4},"Fifth Part (5)"),o().createElement(s.MenuItem,{value:-1},"Last Part"))),o().createElement(s.Box,{mt:2,p:2,bgcolor:"#e8f4fd",borderRadius:1},o().createElement(s.Typography,{variant:"subtitle2"},"Preview:"),c&&c.length>0&&o().createElement(s.Box,{mt:1,maxHeight:120,overflow:"auto",bgcolor:"white",p:1,borderRadius:1},o().createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},o().createElement("thead",null,o().createElement("tr",{style:{backgroundColor:"#f5f5f5"}},o().createElement("th",{style:{padding:8,textAlign:"left"}},"Original"),o().createElement("th",{style:{padding:8,textAlign:"left"}},"Split Result"))),o().createElement("tbody",null,c.slice(0,3).map((function(e,t){var r=e[B.sourceField]||"",n="N/A";try{var a=r.split(B.rule.delimiter),i=B.rule.partIndex;n=-1===i?a[a.length-1]:a[i]||"N/A"}catch(e){n="Error"}return o().createElement("tr",{key:t},o().createElement("td",{style:{padding:8,borderTop:"1px solid #e0e0e0"}},r),o().createElement("td",{style:{padding:8,borderTop:"1px solid #e0e0e0",fontWeight:"bold"}},n))}))))))),"date"===B.field.type&&B.field.name.includes("Date")&&o().createElement(s.Box,{mt:3,p:2,bgcolor:"#fff3cd",borderRadius:1},o().createElement(s.Typography,{variant:"subtitle2"},"ðŸ•’ Date/Time Smart Handling:"),o().createElement(s.Typography,{variant:"body2",style:{marginTop:8}},"If you map this Date field and its corresponding Time field to the ",o().createElement("strong",null,"same"),' source column, the system will automatically split the value if it detects a combined date+time format (like "2023-01-15 14:30:00").'),o().createElement(s.Typography,{variant:"body2",style:{marginTop:8}},"This automatic detection works alongside any manual split rules you configure.")))),o().createElement(s.DialogActions,null,o().createElement(s.Button,{onClick:function(){return j(!1)},color:"default"},"Cancel"),o().createElement(s.Button,{onClick:function(){return function(e,t){H((function(r){return J(J({},r),{},V({},e,t))}));var r=u.find((function(t){return t.id===e}));if(r){var n=d.find((function(e){return e.targetField===r.name}));n&&i({type:x,payload:J(J({},n),{},{splitRule:t})})}j(!1),N(null)}(B.fieldId,B.rule)},color:"primary",variant:"contained"},"Save Configuration"))))},Q=function(e){var t=e.error,r=P().dispatch;return o().createElement(s.Paper,{elevation:3,style:{padding:24,margin:16,maxWidth:600,marginLeft:"auto",marginRight:"auto"}},o().createElement(s.Box,{textAlign:"center",p:2},o().createElement(s.Typography,{variant:"h5",color:"error",gutterBottom:!0},"Error Loading Component"),o().createElement(s.Typography,{variant:"body1",paragraph:!0},t),o().createElement(s.Typography,{variant:"body2",color:"textSecondary",paragraph:!0},"Please check your network connection and try again. If the problem persists, contact support."),o().createElement(s.Box,{mt:3,display:"flex",justifyContent:"center",gap:2},o().createElement(s.Button,{variant:"contained",color:"primary",onClick:function(){r({type:O,payload:null}),r({type:D,payload:!0})}},"Retry"),o().createElement(s.Button,{variant:"outlined",onClick:function(){return window.location.reload()}},"Reload Page"))))};var Z=r(579);const ee=function(e){var t=e.onMappingComplete,r=P().state,a=r.isLoading,i=r.error,l=r.sourceColumns,c=r.sampleData,u=r.selectedTool;return(0,n.useEffect)((function(){console.log("DataFormatterUI App initialized with:",{sourceColumns:l,sampleDataCount:(null==c?void 0:c.length)||0,selectedTool:u,isLoading:a,hasError:!!i})}),[]),a?o().createElement(s.Box,{p:3,textAlign:"center","data-testid":"loading-indicator"},o().createElement(s.CircularProgress,{size:40}),o().createElement(s.Typography,{variant:"body1",style:{marginTop:16}},"Loading field mapping interface...")):i?o().createElement(Q,{error:i}):l&&0!==l.length?o().createElement(Z.A,null,o().createElement(s.Box,{p:2},o().createElement(K,{onMappingComplete:function(e){console.log("Mapping complete:",e),"function"==typeof t&&t(e)}}))):o().createElement(s.Paper,{elevation:2,style:{padding:24,margin:16}},o().createElement(s.Typography,{variant:"h5",gutterBottom:!0,color:"error"},"No source data available"),o().createElement(s.Typography,{variant:"body1",paragraph:!0},"Please make sure you have uploaded a file with valid data before mapping fields."),o().createElement(s.Button,{variant:"contained",color:"primary",onClick:function(){return window.location.reload()}},"Reload Page"))};console.log("[index.js] Script execution started");var te=(0,l.A)({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"}},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}});function re(e,t,n){if(e){var a=r(579).A;i().render(o().createElement(a,null,o().createElement(c.A,{theme:te},o().createElement(u.Ay,null),o().createElement(j,{initialData:t},o().createElement(ee,{onMappingComplete:n})))),e)}else console.error("No container element provided for DataFormatterUI")}function ne(e){e&&i().unmountComponentAtNode(e)}console.log("[index.js] Before window.DataFormatterUI assignment"),"undefined"!=typeof window&&(console.log("[index.js] Inside window check, assigning DataFormatterUI"),window.DataFormatterUI={mount:re,unmount:ne},console.log("[index.js] After window.DataFormatterUI assignment"))},579:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(883),o=r.n(n);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}const m=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=u(t),function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,r||[],u(e).constructor):t.apply(e,r))}(this,t,[e])).state={hasError:!1,error:null,errorInfo:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,e),r=t,l=[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}],(n=[{key:"componentDidCatch",value:function(e,t){console.error("React Data Formatter Error Caught:",e,t),this.setState({error:e,errorInfo:t}),window.formatterState&&(window.formatterState.lastError={message:e.message,stack:e.stack,componentStack:t.componentStack,timestamp:(new Date).toISOString()})}},{key:"render",value:function(){return this.state.hasError?o().createElement("div",{style:{margin:"20px",padding:"20px",border:"1px solid #f5c6cb",borderRadius:"4px",backgroundColor:"#f8d7da",color:"#721c24"}},o().createElement("h3",{style:{marginTop:0}},"Something went wrong with the Data Formatter"),o().createElement("p",null,"Please try refreshing the page or contact support if the issue persists."),this.state.error&&o().createElement("details",{style:{whiteSpace:"pre-wrap",marginTop:"10px"}},o().createElement("summary",null,"Error Details (for technical support)"),o().createElement("p",null,o().createElement("strong",null,"Error:")," ",this.state.error.toString()),this.state.errorInfo&&o().createElement("p",null,o().createElement("strong",null,"Component Stack:")," ",this.state.errorInfo.componentStack))):this.props.children}}])&&i(r.prototype,n),l&&i(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,l}(o().Component)},627:e=>{e.exports=r},668:e=>{e.exports=n},845:e=>{e.exports=t},883:t=>{t.exports=e}},i={};function l(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return a[e](r,r.exports,l),r.exports}l.m=a,o=[],l.O=(e,t,r,n)=>{if(!t){var a=1/0;for(s=0;s<o.length;s++){for(var[t,r,n]=o[s],i=!0,c=0;c<t.length;c++)(!1&n||a>=n)&&Object.keys(l.O).every((e=>l.O[e](t[c])))?t.splice(c--,1):(i=!1,n<a&&(a=n));if(i){o.splice(s--,1);var u=r();void 0!==u&&(e=u)}}return e}n=n||0;for(var s=o.length;s>0&&o[s-1][2]>n;s--)o[s]=o[s-1];o[s]=[t,r,n]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={282:0};l.O.j=t=>0===e[t];var t=(t,r)=>{var n,o,[a,i,c]=r,u=0;if(a.some((t=>0!==e[t]))){for(n in i)l.o(i,n)&&(l.m[n]=i[n]);if(c)var s=c(l)}for(t&&t(r);u<a.length;u++)o=a[u],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(s)},r=this.webpackChunkDataFormatterUI=this.webpackChunkDataFormatterUI||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var c=l.O(void 0,[121],(()=>l(184)));return l.O(c)})()));
//# sourceMappingURL=data-formatter.5f80d6903c30464e3664.js.map