import{g as Je,a as Ye,r as x,u as Qe,j as e,s as Ke,c as Xe,b as Ze,B as t,C as ee,R as es,bn as ss,y as Se}from"./index-X-5sj_O2.js";import{A as X,a as ae,M as We,T as K,F as oe,I as le,S as ce}from"./TextField-WGkVMSL6.js";import{c as $,T as s,P as J}from"./Typography-D9pLBQZd.js";import{T as De,E as ts,A as rs}from"./Edit-BlksxOGl.js";import{R as Ae,T as ns}from"./TrendingUp-C0u9NctU.js";import{C as R,a as N}from"./CardContent-DBNlYpvR.js";import{S as qe}from"./Settings-DHP4f2-O.js";import{j as as,B as S,L as Be}from"./List-tQuLRVWa.js";import{A as is}from"./Assessment-ByEZxo36.js";import{G as j,C as q}from"./listItemTextClasses-BYFLolzm.js";import{C as V}from"./CheckCircle-Dl_ooQaV.js";import{B as Y}from"./Business-C4RieAzt.js";import{T as os}from"./Timeline-Cd4sWp9y.js";import{L as Ce}from"./LinearProgress-CNXfCjqe.js";import{S as ls,a as cs}from"./Speed-c4kD3r5d.js";import{A as Pe}from"./Avatar-CYszcDsM.js";import{e as je,T as ge,a as fe,b as G,c as m,d as ye}from"./TableRow-DpPCsBI4.js";import{W as ds}from"./Warning-DhfauMwb.js";import{M as Oe,D as xs}from"./MoreVert-DTSIQ33I.js";import{M as U}from"./MenuItem-BYeTpYqG.js";import{a as Ee,b as ne,L as ve,c as hs}from"./ListItemText-_Lv4ipIS.js";import{D as $e}from"./Delete-DgzD_kXi.js";import{D as de,a as xe,b as he,F as be,c as me}from"./FormControlLabel-BpWWLJRX.js";import{S as ie,a as Te}from"./Save-_oNa1-cj.js";import{S as He}from"./Security-DW3xiGEk.js";import{D as Ie}from"./Divider-weSR3Vna.js";import{T as Ve,a as Q}from"./Tabs-D7nc22dG.js";import{C as Me}from"./Cancel-D4rdgy3y.js";import{E as Z}from"./Error-B_L15wdv.js";import{B as ms}from"./Badge-dYCFN7BN.js";import{L as Fe,A as us}from"./Launch-BJHlDEUR.js";import{I as ps}from"./Info-mSDpFAkZ.js";import{D as pe}from"./Description-D4L2VwDr.js";import"./Popper-DZEnjQjS.js";function js(c){return Je("MuiListItemAvatar",c)}Ye("MuiListItemAvatar",["root","alignItemsFlexStart"]);const gs=c=>{const{alignItems:r,classes:h}=c;return Ze({root:["root",r==="flex-start"&&"alignItemsFlexStart"]},js,h)},fs=Ke("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(c,r)=>{const{ownerState:h}=c;return[r.root,h.alignItems==="flex-start"&&r.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),ys=x.forwardRef(function(r,h){const d=Qe({props:r,name:"MuiListItemAvatar"}),{className:A,...C}=d,D=x.useContext(as),z={...d,alignItems:D.alignItems},_=gs(z);return e.jsx(fs,{className:Xe(_.root,A),ownerState:z,ref:h,...C})}),vs=$(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-5h2zm4 0h-2v-3h2zm0-5h-2v-2h2zm4 5h-2V7h2z"})),bs=$(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12m8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8"})),_s=$(e.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96"})),ws=$(e.jsx("path",{d:"M12 7V3H2v18h14v-2h-4v-2h2v-2h-2v-2h2v-2h-2V9h8v6h2V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm14 12v2h-2v2h-2v-2h-2v-2h2v-2h2v2zm-6-8h-2v2h2zm0 4h-2v2h2z"})),Ss=$(e.jsx("path",{fillRule:"evenodd",d:"m9 17 3-2.94c-.39-.04-.68-.06-1-.06-2.67 0-8 1.34-8 4v2h9zm2-5c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m4.47 8.5L12 17l1.4-1.41 2.07 2.08 5.13-5.17 1.4 1.41z"})),Ue=$(e.jsx("path",{d:"M12 19c0-3.87 3.13-7 7-7 1.08 0 2.09.25 3 .68V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h8.08c-.05-.33-.08-.66-.08-1M4 6l8 5 8-5v2l-8 5-8-5zm13.34 16-3.54-3.54 1.41-1.41 2.12 2.12 4.24-4.24L23 16.34z"})),Ge=$(e.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"})),Cs=$(e.jsx("path",{d:"M7.58 4.08 6.15 2.65C3.75 4.48 2.17 7.3 2.03 10.5h2c.15-2.65 1.51-4.97 3.55-6.42m12.39 6.42h2c-.15-3.2-1.73-6.02-4.12-7.85l-1.42 1.43c2.02 1.45 3.39 3.77 3.54 6.42M18 11c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-6 11c.14 0 .27-.01.4-.04.65-.14 1.18-.58 1.44-1.18q.15-.36.15-.78h-4c.01 1.1.9 2 2.01 2"})),ze=$(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"})),Re=$(e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),re=$(e.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),Ne=$(e.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5z"})),Ds=$(e.jsx("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"})),zs=({userRole:c})=>{const[r,h]=x.useState(null),[d,A]=x.useState(null),[C,D]=x.useState(!0),[z,_]=x.useState(!1),[M,o]=x.useState(null),[v,w]=x.useState(!1);x.useEffect(()=>{f(),c==="super_admin"&&I()},[c]);const f=async()=>{try{D(!0);const p=await fetch("/admin/api/analytics/overview",{credentials:"include"});if(!p.ok)throw new Error("Failed to fetch analytics");const a=await p.json();if(a.success)h(a.analytics);else throw new Error(a.error||"Failed to load analytics")}catch(p){console.error("Error fetching analytics:",p),o(p instanceof Error?p.message:"Failed to load analytics")}finally{D(!1)}},I=async()=>{try{_(!0),await new Promise(a=>setTimeout(a,1e3));const p={...r,system_health:{status:"healthy",uptime_percentage:99.8,last_backup:new Date(Date.now()-864e5).toISOString(),performance_score:92},user_growth:{weekly_growth:12,monthly_growth:45,retention_rate:87},tool_usage:{most_used_tool:"Response Time Analyzer",total_sessions:1247,avg_session_duration:18.5},recent_activity:[{id:1,type:"user_created",description:"New user registered: john.doe@firestation.com",timestamp:new Date(Date.now()-36e5).toISOString(),user_email:"john.doe@firestation.com"},{id:2,type:"approval_processed",description:"Department approval: Metro Fire Department",timestamp:new Date(Date.now()-72e5).toISOString()},{id:3,type:"user_login",description:"Admin login: chief@rural-fire.org",timestamp:new Date(Date.now()-108e5).toISOString(),user_email:"chief@rural-fire.org"}],pending_items:{pending_approvals:3,pending_department_requests:2,pending_user_requests:5},top_departments:[{id:1,name:"Houston Fire Department",user_count:45,last_activity:new Date(Date.now()-18e5).toISOString(),status:"active"},{id:2,name:"Metro Fire & EMS",user_count:32,last_activity:new Date(Date.now()-36e5).toISOString(),status:"active"},{id:3,name:"Rural Fire District 7",user_count:18,last_activity:new Date(Date.now()-864e5).toISOString(),status:"active"}]};A(p)}catch(p){console.error("Error fetching extended analytics:",p)}finally{_(!1)}},k=async()=>{w(!0),await Promise.all([f(),c==="super_admin"?I():Promise.resolve()]),w(!1)},F=p=>{const a=new Date,u=new Date(p),n=Math.floor((a.getTime()-u.getTime())/1e3);return n<60?"Just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:`${Math.floor(n/86400)}d ago`};if(C)return e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:e.jsx(ee,{})});if(M)return e.jsx(X,{severity:"error",sx:{mb:3},children:M});if(!r)return null;const L=r.total_users>0?Math.round(r.active_users/r.total_users*100):0,W=r.total_departments>0?Math.round(r.active_departments/r.total_departments*100):0;return e.jsxs(t,{children:[e.jsxs(t,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(t,{children:[e.jsx(s,{variant:"h5",gutterBottom:!0,children:c==="super_admin"?"Master Admin Dashboard":"Admin Overview"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:c==="super_admin"?"System-wide analytics and management":"Department analytics"})]}),e.jsx(De,{title:"Refresh Data",children:e.jsx(ae,{onClick:k,disabled:v,children:e.jsx(Ae,{sx:{color:v?"action.disabled":"primary.main"}})})})]}),c==="super_admin"&&e.jsx(R,{sx:{mb:3,bgcolor:"primary.50"},children:e.jsxs(N,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(qe,{color:"primary"}),"Quick Actions"]}),e.jsxs(t,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(S,{variant:"contained",startIcon:e.jsx(re,{}),size:"small",onClick:()=>{},children:"Add User"}),e.jsx(S,{variant:"contained",startIcon:e.jsx(ws,{}),size:"small",onClick:()=>{},children:"Add Department"}),e.jsxs(S,{variant:"outlined",startIcon:e.jsx(Ge,{}),size:"small",color:"warning",onClick:()=>{},children:["Pending Approvals (",(d==null?void 0:d.pending_items.pending_approvals)||0,")"]}),e.jsx(S,{variant:"outlined",startIcon:e.jsx(is,{}),size:"small",onClick:()=>{},children:"Detailed Reports"})]})]})}),e.jsxs(j,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(j,{size:{xs:12,sm:6,md:3},children:e.jsx(R,{children:e.jsx(N,{children:e.jsxs(t,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(t,{children:[e.jsx(s,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Total Users"}),e.jsx(s,{variant:"h4",children:r.total_users}),c==="super_admin"&&d&&e.jsxs(s,{variant:"body2",color:"success.main",children:["+",d.user_growth.monthly_growth," this month"]})]}),e.jsx(ze,{sx:{fontSize:40,color:"primary.main",opacity:.7}})]})})})}),e.jsx(j,{size:{xs:12,sm:6,md:3},children:e.jsx(R,{children:e.jsx(N,{children:e.jsxs(t,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(t,{children:[e.jsx(s,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Active Users"}),e.jsx(s,{variant:"h4",color:"success.main",children:r.active_users}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:[L,"% active"]})]}),e.jsx(V,{sx:{fontSize:40,color:"success.main",opacity:.7}})]})})})}),e.jsx(j,{size:{xs:12,sm:6,md:3},children:e.jsx(R,{children:e.jsx(N,{children:e.jsxs(t,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(t,{children:[e.jsx(s,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:c==="super_admin"?"Total Departments":"Your Department"}),e.jsx(s,{variant:"h4",children:r.total_departments}),r.active_departments<r.total_departments&&e.jsxs(s,{variant:"body2",color:"warning.main",children:[r.total_departments-r.active_departments," inactive"]})]}),e.jsx(Y,{sx:{fontSize:40,color:"info.main",opacity:.7}})]})})})}),e.jsx(j,{size:{xs:12,sm:6,md:3},children:e.jsx(R,{children:e.jsx(N,{children:e.jsxs(t,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(t,{children:[e.jsx(s,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:c==="super_admin"?"System Health":"New This Month"}),c==="super_admin"&&d?e.jsxs(e.Fragment,{children:[e.jsxs(s,{variant:"h4",color:d.system_health.status==="healthy"?"success.main":d.system_health.status==="warning"?"warning.main":"error.main",children:[d.system_health.performance_score,"%"]}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:[d.system_health.uptime_percentage,"% uptime"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(s,{variant:"h4",color:"secondary.main",children:r.recent_users_this_month}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"new users"})]})]}),c==="super_admin"?e.jsx(Ne,{sx:{fontSize:40,color:"success.main",opacity:.7}}):e.jsx(ns,{sx:{fontSize:40,color:"secondary.main",opacity:.7}})]})})})})]}),c==="super_admin"&&d&&e.jsxs(j,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(j,{size:{xs:12,md:4},children:e.jsx(R,{children:e.jsxs(N,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(vs,{color:"primary"}),"Tool Usage"]}),e.jsxs(t,{sx:{mb:2},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Most Used Tool"}),e.jsx(s,{variant:"h6",color:"primary.main",children:d.tool_usage.most_used_tool})]}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Total Sessions"}),e.jsx(s,{variant:"body2",fontWeight:"bold",children:d.tool_usage.total_sessions.toLocaleString()})]}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Avg Duration"}),e.jsxs(s,{variant:"body2",fontWeight:"bold",children:[d.tool_usage.avg_session_duration," min"]})]})]})})}),e.jsx(j,{size:{xs:12,md:4},children:e.jsx(R,{children:e.jsxs(N,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(os,{color:"primary"}),"User Growth"]}),e.jsxs(t,{sx:{mb:2},children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Weekly Growth"}),e.jsxs(s,{variant:"body2",fontWeight:"bold",color:"success.main",children:["+",d.user_growth.weekly_growth]})]}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Monthly Growth"}),e.jsxs(s,{variant:"body2",fontWeight:"bold",color:"success.main",children:["+",d.user_growth.monthly_growth]})]}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Retention Rate"}),e.jsxs(s,{variant:"body2",fontWeight:"bold",children:[d.user_growth.retention_rate,"%"]})]})]}),e.jsx(Ce,{variant:"determinate",value:d.user_growth.retention_rate,sx:{height:8,borderRadius:4},color:d.user_growth.retention_rate>80?"success":"warning"})]})})}),e.jsx(j,{size:{xs:12,md:4},children:e.jsx(R,{children:e.jsxs(N,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ls,{color:"primary"}),"System Performance"]}),e.jsxs(t,{sx:{mb:2},children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Uptime"}),e.jsxs(s,{variant:"body2",fontWeight:"bold",color:"success.main",children:[d.system_health.uptime_percentage,"%"]})]}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Performance Score"}),e.jsxs(s,{variant:"body2",fontWeight:"bold",children:[d.system_health.performance_score,"%"]})]}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Last Backup"}),e.jsx(s,{variant:"body2",fontWeight:"bold",children:F(d.system_health.last_backup)})]})]}),e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(V,{color:"success",fontSize:"small"}),e.jsx(s,{variant:"body2",color:"success.main",children:"System Operating Normally"})]})]})})})]}),e.jsxs(j,{container:!0,spacing:3,children:[e.jsx(j,{size:{xs:12,md:c==="super_admin"?6:12},children:e.jsx(R,{children:e.jsxs(N,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"User Activity"}),e.jsxs(t,{sx:{mb:2},children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:1},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Active Users"}),e.jsxs(s,{variant:"body2",fontWeight:"bold",children:[r.active_users," / ",r.total_users]})]}),e.jsx(Ce,{variant:"determinate",value:L,sx:{height:8,borderRadius:4},color:L>80?"success":L>60?"warning":"error"}),e.jsxs(s,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[L,"% of users are active"]})]}),e.jsxs(t,{display:"flex",gap:1,flexWrap:"wrap",children:[e.jsx(q,{size:"small",label:`${r.active_users} Active`,color:"success",variant:"outlined"}),r.total_users-r.active_users>0&&e.jsx(q,{size:"small",label:`${r.total_users-r.active_users} Inactive`,color:"default",variant:"outlined"}),r.recent_users_this_month>0&&e.jsx(q,{size:"small",label:`${r.recent_users_this_month} New This Month`,color:"primary",variant:"outlined"})]})]})})}),c==="super_admin"&&d&&e.jsx(j,{size:{xs:12,md:6},children:e.jsx(R,{children:e.jsxs(N,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(cs,{color:"primary"}),"Recent Activity"]}),e.jsx(t,{sx:{maxHeight:200,overflow:"auto"},children:d.recent_activity.map(p=>e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(Pe,{sx:{width:32,height:32,bgcolor:p.type==="user_created"?"success.main":p.type==="approval_processed"?"warning.main":"info.main",fontSize:"0.75rem"},children:p.type==="user_created"?e.jsx(re,{fontSize:"small"}):p.type==="approval_processed"?e.jsx(V,{fontSize:"small"}):e.jsx(ze,{fontSize:"small"})}),e.jsxs(t,{sx:{flexGrow:1,minWidth:0},children:[e.jsx(s,{variant:"body2",noWrap:!0,children:p.description}),e.jsx(s,{variant:"caption",color:"text.secondary",children:F(p.timestamp)})]})]},p.id))})]})})}),c!=="super_admin"&&e.jsx(j,{size:{xs:12,md:6},children:e.jsx(R,{children:e.jsxs(N,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Department Status"}),e.jsxs(t,{sx:{mb:2},children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:1},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Active Departments"}),e.jsxs(s,{variant:"body2",fontWeight:"bold",children:[r.active_departments," / ",r.total_departments]})]}),e.jsx(Ce,{variant:"determinate",value:W,sx:{height:8,borderRadius:4},color:W>80?"success":W>60?"warning":"error"}),e.jsxs(s,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[W,"% of departments are active"]})]}),e.jsxs(t,{display:"flex",gap:1,flexWrap:"wrap",children:[e.jsx(q,{size:"small",label:`${r.active_departments} Active`,color:"success",variant:"outlined"}),r.total_departments-r.active_departments>0&&e.jsx(q,{size:"small",label:`${r.total_departments-r.active_departments} Inactive`,color:"warning",variant:"outlined"})]})]})})})]}),c==="super_admin"&&d&&e.jsx(R,{sx:{mt:3},children:e.jsxs(N,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Y,{color:"primary"}),"Top Departments"]}),e.jsx(je,{children:e.jsxs(ge,{size:"small",children:[e.jsx(fe,{children:e.jsxs(G,{children:[e.jsx(m,{children:"Department Name"}),e.jsx(m,{align:"right",children:"Users"}),e.jsx(m,{align:"right",children:"Last Activity"}),e.jsx(m,{align:"center",children:"Status"})]})}),e.jsx(ye,{children:d.top_departments.map(p=>e.jsxs(G,{children:[e.jsx(m,{component:"th",scope:"row",children:p.name}),e.jsx(m,{align:"right",children:p.user_count}),e.jsx(m,{align:"right",children:F(p.last_activity)}),e.jsx(m,{align:"center",children:e.jsx(q,{size:"small",label:p.status,color:p.status==="active"?"success":"default",variant:"outlined"})})]},p.id))})]})})]})}),e.jsx(R,{sx:{mt:3},children:e.jsxs(N,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_s,{color:"primary"}),"System Health"]}),e.jsxs(j,{container:!0,spacing:2,children:[e.jsx(j,{size:{xs:12,sm:4},children:e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(V,{color:"success"}),e.jsx(s,{variant:"body2",children:"User Management: Operational"})]})}),e.jsx(j,{size:{xs:12,sm:4},children:e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(V,{color:"success"}),e.jsx(s,{variant:"body2",children:"Department Management: Operational"})]})}),e.jsx(j,{size:{xs:12,sm:4},children:e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[r.recent_users_this_month>0?e.jsx(V,{color:"success"}):e.jsx(ds,{color:"warning"}),e.jsxs(s,{variant:"body2",children:["User Registration: ",r.recent_users_this_month>0?"Active":"Low Activity"]})]})}),c==="super_admin"&&d&&e.jsxs(e.Fragment,{children:[e.jsx(j,{size:{xs:12,sm:4},children:e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(V,{color:"success"}),e.jsx(s,{variant:"body2",children:"Approval Workflows: Active"})]})}),e.jsx(j,{size:{xs:12,sm:4},children:e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Ds,{color:"info"}),e.jsxs(s,{variant:"body2",children:["Database: ",d.system_health.performance_score,"% Performance"]})]})}),e.jsx(j,{size:{xs:12,sm:4},children:e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Ne,{color:"success"}),e.jsx(s,{variant:"body2",children:"Security: All Systems Normal"})]})})]})]})]})})]})},As=({open:c,user:r,onClose:h,onSave:d,userRole:A})=>{const[C,D]=x.useState({name:"",email:"",role:"",is_active:!0});x.useEffect(()=>{r&&D({name:r.name||"",email:r.email||"",role:r.role||"user",is_active:r.is_active??!0})},[r]);const z=()=>{r&&d(r.id,C)},_=o=>v=>{D(w=>({...w,[o]:v.target.value}))},M=o=>v=>{D(w=>({...w,[o]:v.target.checked}))};return e.jsxs(de,{open:c,onClose:h,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(xe,{children:["Edit User: ",r==null?void 0:r.email]}),e.jsx(he,{children:e.jsxs(t,{sx:{pt:2,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(K,{label:"Name",fullWidth:!0,value:C.name,onChange:_("name")}),e.jsx(K,{label:"Email",fullWidth:!0,value:C.email,onChange:_("email"),type:"email"}),e.jsxs(oe,{fullWidth:!0,children:[e.jsx(le,{children:"Role"}),e.jsxs(ce,{value:C.role,onChange:_("role"),label:"Role",children:[e.jsx(U,{value:"user",children:"User"}),e.jsx(U,{value:"admin",children:"Admin"}),e.jsx(U,{value:"manager",children:"Manager"}),A==="super_admin"&&e.jsx(U,{value:"super_admin",children:"Super Admin"})]})]}),e.jsx(be,{control:e.jsx(ie,{checked:C.is_active,onChange:M("is_active")}),label:"Active User"})]})}),e.jsxs(me,{children:[e.jsx(S,{onClick:h,children:"Cancel"}),e.jsx(S,{onClick:z,variant:"contained",children:"Save Changes"})]})]})},Is=({userRole:c})=>{const[r,h]=x.useState([]),[d,A]=x.useState(!0),[C,D]=x.useState(!1),[z,_]=x.useState(null),[M,o]=x.useState(null),[v,w]=x.useState({open:!1,user:null}),[f,I]=x.useState(!1),[k,F]=x.useState({name:"",email:"",role:"user",department_id:"",send_invite:!0}),[L,W]=x.useState([]),[p,a]=x.useState(null),[u,n]=x.useState(null);x.useEffect(()=>{g(),b()},[]);const g=async()=>{try{A(!0);const l=await fetch("/admin/api/users",{credentials:"include"});if(!l.ok)throw new Error("Failed to fetch users");const y=await l.json();if(y.success)h(y.users);else throw new Error(y.error||"Failed to load users")}catch(l){console.error("Error fetching users:",l),_(l instanceof Error?l.message:"Failed to load users")}finally{A(!1)}},b=async()=>{try{const l=await fetch("/admin/api/departments",{credentials:"include"});if(!l.ok)throw new Error("Failed to fetch departments");const y=await l.json();y.success&&W(y.departments.map(H=>({id:H.id,name:H.name})))}catch(l){console.error("Error fetching departments:",l)}},O=async()=>{try{D(!0);const y=await(await fetch("/admin/api/users",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...k,department_id:parseInt(k.department_id)||null})})).json();if(y.success)h(H=>[...H,y.user]),o("User created successfully"),_(null),F({name:"",email:"",role:"user",department_id:"",send_invite:!0}),I(!1),setTimeout(()=>{o(null)},3e3);else throw new Error(y.error||"Failed to create user")}catch(l){console.error("Error creating user:",l),_(l instanceof Error?l.message:"Failed to create user")}finally{D(!1)}},B=async(l,y)=>{try{const ue=await(await fetch(`/admin/api/users/${l}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(y)})).json();if(ue.success)h(_e=>_e.map(we=>we.id===l?{...we,...y}:we)),w({open:!1,user:null}),_(null);else throw new Error(ue.error||"Failed to update user")}catch(H){console.error("Error updating user:",H),_(H instanceof Error?H.message:"Failed to update user")}},i=async l=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{const H=await(await fetch(`/admin/api/users/${l}`,{method:"DELETE",credentials:"include"})).json();if(H.success)h(ue=>ue.filter(_e=>_e.id!==l)),_(null);else throw new Error(H.error||"Failed to delete user")}catch(y){console.error("Error deleting user:",y),_(y instanceof Error?y.message:"Failed to delete user")}},E=(l,y)=>{a(l.currentTarget),n(y)},T=()=>{a(null),n(null)},P=l=>{switch(l){case"super_admin":return"error";case"admin":return"warning";case"manager":return"info";default:return"default"}},ke=l=>l?new Date(l).toLocaleDateString():"Never";return d?e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:e.jsx(ee,{})}):e.jsxs(t,{children:[e.jsxs(t,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(s,{variant:"h5",children:"User Management"}),e.jsxs(t,{sx:{display:"flex",gap:1},children:[e.jsx(S,{variant:"outlined",startIcon:e.jsx(Ae,{}),onClick:g,children:"Refresh"}),c==="super_admin"&&e.jsx(S,{variant:"contained",startIcon:e.jsx(re,{}),onClick:()=>I(!0),children:"Add User"})]})]}),z&&e.jsx(X,{severity:"error",sx:{mb:3},children:z}),M&&e.jsx(X,{severity:"success",sx:{mb:3},children:M}),e.jsx(je,{component:J,children:e.jsxs(ge,{children:[e.jsx(fe,{children:e.jsxs(G,{children:[e.jsx(m,{children:"User"}),e.jsx(m,{children:"Department"}),e.jsx(m,{children:"Role"}),e.jsx(m,{children:"Status"}),e.jsx(m,{children:"Created"}),e.jsx(m,{children:"Last Login"}),e.jsx(m,{children:"Actions"})]})}),e.jsxs(ye,{children:[r.map(l=>e.jsxs(G,{children:[e.jsx(m,{children:e.jsxs(t,{children:[e.jsx(s,{variant:"body2",fontWeight:"bold",children:l.name}),e.jsx(s,{variant:"body2",color:"text.secondary",children:l.email})]})}),e.jsx(m,{children:e.jsx(s,{variant:"body2",children:l.department_name||"No Department"})}),e.jsx(m,{children:e.jsx(q,{label:l.role.replace("_"," ").toUpperCase(),color:P(l.role),size:"small"})}),e.jsx(m,{children:e.jsx(q,{label:l.is_active?"Active":"Inactive",color:l.is_active?"success":"default",size:"small",icon:l.is_active?e.jsx(V,{}):e.jsx(bs,{})})}),e.jsx(m,{children:e.jsx(s,{variant:"body2",children:ke(l.created_at)})}),e.jsx(m,{children:e.jsx(s,{variant:"body2",children:ke(l.last_login)})}),e.jsx(m,{children:e.jsx(ae,{onClick:y=>E(y,l),children:e.jsx(Oe,{})})})]},l.id)),r.length===0&&e.jsx(G,{children:e.jsx(m,{colSpan:7,align:"center",children:e.jsx(s,{variant:"body2",color:"text.secondary",sx:{py:4},children:"No users found"})})})]})]})}),e.jsxs(We,{anchorEl:p,open:!!p,onClose:T,children:[e.jsxs(U,{onClick:()=>{u&&w({open:!0,user:u}),T()},children:[e.jsx(Ee,{children:e.jsx(ts,{fontSize:"small"})}),e.jsx(ne,{children:"Edit User"})]}),e.jsxs(U,{onClick:()=>{u&&i(u.id),T()},children:[e.jsx(Ee,{children:e.jsx($e,{fontSize:"small"})}),e.jsx(ne,{children:"Delete User"})]})]}),e.jsx(As,{open:v.open,user:v.user,onClose:()=>w({open:!1,user:null}),onSave:B,userRole:c}),e.jsxs(de,{open:f,onClose:()=>I(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(xe,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(re,{color:"primary"}),"Create New User"]})}),e.jsx(he,{children:e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[e.jsx(K,{label:"Full Name",fullWidth:!0,value:k.name,onChange:l=>F(y=>({...y,name:l.target.value})),placeholder:"e.g., John Smith",required:!0}),e.jsx(K,{label:"Email Address",fullWidth:!0,type:"email",value:k.email,onChange:l=>F(y=>({...y,email:l.target.value})),placeholder:"e.g., john.smith@department.gov",required:!0,helperText:"User will receive login instructions at this email"}),e.jsxs(oe,{fullWidth:!0,children:[e.jsx(le,{children:"Department"}),e.jsxs(ce,{value:k.department_id,onChange:l=>F(y=>({...y,department_id:l.target.value})),label:"Department",children:[e.jsx(U,{value:"",children:"No Department"}),L.map(l=>e.jsx(U,{value:l.id.toString(),children:l.name},l.id))]})]}),e.jsxs(oe,{fullWidth:!0,children:[e.jsx(le,{children:"Role"}),e.jsxs(ce,{value:k.role,onChange:l=>F(y=>({...y,role:l.target.value})),label:"Role",children:[e.jsx(U,{value:"user",children:"User"}),e.jsx(U,{value:"admin",children:"Admin"}),e.jsx(U,{value:"manager",children:"Manager"}),c==="super_admin"&&e.jsx(U,{value:"super_admin",children:"Super Admin"})]})]}),e.jsx(be,{control:e.jsx(ie,{checked:k.send_invite,onChange:l=>F(y=>({...y,send_invite:l.target.checked}))}),label:"Send invitation email to user"})]})}),e.jsxs(me,{children:[e.jsx(S,{onClick:()=>I(!1),disabled:C,children:"Cancel"}),e.jsx(S,{variant:"contained",onClick:O,disabled:C||!k.name.trim()||!k.email.trim(),startIcon:e.jsx(re,{}),children:C?"Creating...":"Create User"})]})]})]})},ks=c=>({"data-formatter":{name:"Data Formatter",route:"/app/data-formatter",description:"Transform CAD exports into standardized formats"},"response-time-analyzer":{name:"Response Time Analyzer",route:"/app/response-time-analyzer",description:"NFPA 1710 compliance analysis and reporting"},"fire-map-pro":{name:"Fire Map Pro",route:"/app/fire-map-pro",description:"Advanced incident mapping and geographic analysis"},"water-supply-coverage":{name:"Water Supply Coverage",route:"/water-supply-coverage",description:"Rural water supply coverage analysis"},"iso-credit-calculator":{name:"ISO Credit Calculator",route:"/iso-credit-calculator",description:"Fire Suppression Rating Schedule assessment"},"station-coverage-optimizer":{name:"Station Coverage Optimizer",route:"/station-coverage-optimizer",description:"Optimize station locations and response coverage"},"admin-console":{name:"Admin Console",route:"/app/admin",description:"Department and user management"},"call-density-heatmap":{name:"Call Density Heatmap",description:"Legacy tool - Geographic incident density analysis"},"coverage-gap-finder":{name:"Coverage Gap Finder",description:"Legacy tool - Identify response coverage gaps"}})[c]||{name:c.replace(/-/g," ").replace(/\b\w/g,h=>h.toUpperCase()),description:"Unknown feature"},Es=({userRole:c})=>{const[r,h]=x.useState([]),[d,A]=x.useState(!0),[C,D]=x.useState(!1),[z,_]=x.useState(null),[M,o]=x.useState(null),[v,w]=x.useState(!1),[f,I]=x.useState({name:"",code:"",department_type:"combined"});x.useEffect(()=>{k()},[]);const k=async()=>{try{A(!0);const a=await fetch("/admin/api/departments",{credentials:"include"});if(!a.ok)throw new Error("Failed to fetch departments");const u=await a.json();if(u.success)h(u.departments);else throw new Error(u.error||"Failed to load departments")}catch(a){console.error("Error fetching departments:",a),_(a instanceof Error?a.message:"Failed to load departments")}finally{A(!1)}},F=async(a,u)=>{try{D(!0);const g=await(await fetch(`/admin/api/departments/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(u)})).json();if(g.success)h(b=>b.map(O=>O.id===a?{...O,...u}:O)),o("Department updated successfully"),_(null),setTimeout(()=>{o(null)},3e3);else throw new Error(g.error||"Failed to update department")}catch(n){console.error("Error updating department:",n),_(n instanceof Error?n.message:"Failed to update department")}finally{D(!1)}},L=async()=>{try{D(!0);const u=await(await fetch("/admin/api/departments",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(f)})).json();if(u.success)h(n=>[...n,u.department]),o("Department created successfully"),_(null),I({name:"",code:"",department_type:"combined"}),w(!1),setTimeout(()=>{o(null)},3e3);else throw new Error(u.error||"Failed to create department")}catch(a){console.error("Error creating department:",a),_(a instanceof Error?a.message:"Failed to create department")}finally{D(!1)}},W=a=>{switch(a){case"fire":return"error";case"ems":return"info";case"combined":return"warning";default:return"default"}},p=a=>new Date(a).toLocaleDateString();return d?e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:e.jsx(ee,{})}):e.jsxs(t,{children:[e.jsxs(t,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(s,{variant:"h5",children:"Department Settings"}),e.jsxs(t,{sx:{display:"flex",gap:2},children:[c==="super_admin"&&e.jsx(S,{variant:"contained",startIcon:e.jsx(rs,{}),onClick:()=>w(!0),children:"Add Department"}),e.jsx(S,{variant:"outlined",startIcon:e.jsx(Ae,{}),onClick:k,children:"Refresh"})]})]}),z&&e.jsx(X,{severity:"error",sx:{mb:3},children:z}),M&&e.jsx(X,{severity:"success",sx:{mb:3},children:M}),e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:3},children:[r.map(a=>e.jsx(R,{children:e.jsxs(N,{children:[e.jsxs(t,{sx:{mb:3},children:[e.jsxs(t,{display:"flex",alignItems:"center",gap:2,sx:{mb:2},children:[e.jsx(Y,{color:"primary"}),e.jsx(s,{variant:"h6",children:a.name}),e.jsx(q,{label:a.department_type.toUpperCase(),color:W(a.department_type),size:"small"}),e.jsx(q,{label:a.is_active?"Active":"Inactive",color:a.is_active?"success":"default",size:"small"})]}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:["Department Code: ",a.code," • Created: ",p(a.created_at)," • ",a.user_count," Users"]})]}),e.jsxs(t,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:3},children:[e.jsxs(t,{children:[e.jsxs(s,{variant:"subtitle1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(qe,{fontSize:"small"}),"Basic Settings"]}),e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(K,{label:"Department Name",fullWidth:!0,value:a.name,onChange:u=>{const n=u.target.value;h(g=>g.map(b=>b.id===a.id?{...b,name:n}:b))},size:"small"}),e.jsxs(oe,{fullWidth:!0,size:"small",children:[e.jsx(le,{children:"Department Type"}),e.jsxs(ce,{value:a.department_type,onChange:u=>{const n=u.target.value;h(g=>g.map(b=>b.id===a.id?{...b,department_type:n}:b))},label:"Department Type",children:[e.jsx(U,{value:"fire",children:"Fire"}),e.jsx(U,{value:"ems",children:"EMS"}),e.jsx(U,{value:"combined",children:"Combined Fire/EMS"})]})]}),c==="super_admin"&&e.jsx(be,{control:e.jsx(ie,{checked:a.is_active,onChange:u=>{const n=u.target.checked;h(g=>g.map(b=>b.id===a.id?{...b,is_active:n}:b))}}),label:"Department Active"})]})]}),e.jsxs(t,{children:[e.jsxs(s,{variant:"subtitle1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(He,{fontSize:"small"}),"Advanced Settings"]}),e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(be,{control:e.jsx(ie,{checked:a.api_enabled,onChange:u=>{const n=u.target.checked;h(g=>g.map(b=>b.id===a.id?{...b,api_enabled:n}:b))}}),label:"API Access Enabled"}),e.jsx(s,{variant:"subtitle2",gutterBottom:!0,children:"Available Features"}),e.jsx(J,{variant:"outlined",sx:{p:2},children:e.jsxs(Be,{dense:!0,children:[Object.entries(a.features_enabled||{}).map(([u,n])=>{const g=ks(u);return e.jsxs(ve,{divider:!0,children:[e.jsx(ne,{primary:g.name,secondary:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(q,{size:"small",label:n?"Enabled":"Disabled",color:n?"success":"default",variant:n?"filled":"outlined"}),g.route&&e.jsx(s,{variant:"caption",color:"text.secondary",children:g.route})]})}),e.jsx(hs,{children:e.jsx(ie,{edge:"end",checked:n,onChange:b=>{const O={...a.features_enabled,[u]:b.target.checked};h(B=>B.map(i=>i.id===a.id?{...i,features_enabled:O}:i))}})})]},u)}),Object.keys(a.features_enabled||{}).length===0&&e.jsx(ve,{children:e.jsx(ne,{primary:"No features configured",secondary:"Contact administrator to enable features"})})]})})]})]})]}),e.jsx(Ie,{sx:{my:3}}),e.jsx(t,{display:"flex",justifyContent:"flex-end",children:e.jsx(S,{variant:"contained",startIcon:e.jsx(Te,{}),onClick:()=>F(a.id,{name:a.name,department_type:a.department_type,is_active:a.is_active,api_enabled:a.api_enabled,features_enabled:a.features_enabled}),disabled:C,children:C?"Saving...":"Save Changes"})})]})},a.id)),r.length===0&&e.jsxs(J,{sx:{p:4,textAlign:"center"},children:[e.jsx(Y,{sx:{fontSize:48,color:"text.secondary",mb:2}}),e.jsx(s,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Departments Found"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:c==="super_admin"?"Create a new department to get started.":"Contact your administrator to set up departments."})]})]}),e.jsxs(de,{open:v,onClose:()=>w(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(xe,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Y,{color:"primary"}),"Create New Department"]})}),e.jsx(he,{children:e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[e.jsx(K,{label:"Department Name",fullWidth:!0,value:f.name,onChange:a=>I(u=>({...u,name:a.target.value})),placeholder:"e.g., Springfield Fire Department",required:!0}),e.jsx(K,{label:"Department Code",fullWidth:!0,value:f.code,onChange:a=>I(u=>({...u,code:a.target.value})),placeholder:"e.g., SFD",required:!0,helperText:"Short unique identifier for the department"}),e.jsxs(oe,{fullWidth:!0,children:[e.jsx(le,{children:"Department Type"}),e.jsxs(ce,{value:f.department_type,onChange:a=>I(u=>({...u,department_type:a.target.value})),label:"Department Type",children:[e.jsx(U,{value:"fire",children:"Fire Department"}),e.jsx(U,{value:"ems",children:"EMS Service"}),e.jsx(U,{value:"combined",children:"Combined Fire/EMS"})]})]})]})}),e.jsxs(me,{children:[e.jsx(S,{onClick:()=>w(!1),disabled:C,children:"Cancel"}),e.jsx(S,{variant:"contained",onClick:L,disabled:C||!f.name.trim()||!f.code.trim(),startIcon:e.jsx(Te,{}),children:C?"Creating...":"Create Department"})]})]})]})};function Le(c){const{children:r,value:h,index:d,...A}=c;return e.jsx("div",{role:"tabpanel",hidden:h!==d,id:`approvals-tabpanel-${d}`,"aria-labelledby":`approvals-tab-${d}`,...A,children:h===d&&e.jsx(t,{sx:{pt:3},children:r})})}const Ts=()=>{const[c,r]=x.useState(0),[h,d]=x.useState([]),[A,C]=x.useState([]),[D,z]=x.useState(!0),[_,M]=x.useState(null),[o,v]=x.useState({open:!1,type:"department",action:"approve",request:null}),[w,f]=x.useState(""),[I,k]=x.useState(!1);x.useEffect(()=>{F()},[]);const F=async()=>{try{z(!0),M(null);const n=await fetch("/admin/api/department-requests?status=pending",{credentials:"include"});if(!n.ok)throw new Error("Failed to fetch department requests");const g=await n.json(),b=await fetch("/admin/api/user-requests?status=pending",{credentials:"include"});if(!b.ok)throw new Error("Failed to fetch user requests");const O=await b.json();d(g.requests||[]),C(O.requests||[])}catch(n){console.error("Error fetching pending requests:",n),M(n instanceof Error?n.message:"Failed to fetch requests")}finally{z(!1)}},L=(n,g)=>{r(g)},W=(n,g,b)=>{v({open:!0,type:n,action:g,request:b}),f("")},p=()=>{v({open:!1,type:"department",action:"approve",request:null}),f("")},a=async()=>{if(!o.request)return;const{type:n,action:g,request:b}=o,O=n==="department"?`/admin/api/department-requests/${b.id}/${g}`:`/admin/api/user-requests/${b.id}/${g}`;try{k(!0);const B=await fetch(O,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({review_notes:w})});if(!B.ok){const i=await B.json();throw new Error(i.error||`Failed to ${g} request`)}await F(),p()}catch(B){console.error(`Error ${o.action}ing request:`,B),M(B instanceof Error?B.message:`Failed to ${g} request`)}finally{k(!1)}},u=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return D?e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(ee,{size:60})}):e.jsxs(t,{children:[e.jsxs(t,{sx:{mb:3},children:[e.jsx(s,{variant:"h5",component:"h2",gutterBottom:!0,children:"Pending Approvals"}),e.jsx(s,{variant:"body1",color:"text.secondary",children:"Review and approve new department and user registration requests"})]}),_&&e.jsx(X,{severity:"error",sx:{mb:3},onClose:()=>M(null),children:_}),e.jsxs(j,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(j,{size:{xs:12,sm:6},children:e.jsx(R,{children:e.jsx(N,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Y,{color:"primary"}),e.jsxs(t,{children:[e.jsx(s,{variant:"h4",children:h.length}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Department Requests"})]})]})})})}),e.jsx(j,{size:{xs:12,sm:6},children:e.jsx(R,{children:e.jsx(N,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Re,{color:"primary"}),e.jsxs(t,{children:[e.jsx(s,{variant:"h4",children:A.length}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"User Requests"})]})]})})})})]}),e.jsx(J,{sx:{mb:3},children:e.jsxs(Ve,{value:c,onChange:L,"aria-label":"approval tabs",children:[e.jsx(Q,{icon:e.jsx(Y,{}),label:`Department Requests (${h.length})`}),e.jsx(Q,{icon:e.jsx(Re,{}),label:`User Requests (${A.length})`})]})}),e.jsx(Le,{value:c,index:0,children:e.jsx(je,{component:J,children:e.jsxs(ge,{children:[e.jsx(fe,{children:e.jsxs(G,{children:[e.jsx(m,{children:"Department"}),e.jsx(m,{children:"Contact"}),e.jsx(m,{children:"Type"}),e.jsx(m,{children:"Population"}),e.jsx(m,{children:"Stations"}),e.jsx(m,{children:"Requested"}),e.jsx(m,{children:"Actions"})]})}),e.jsx(ye,{children:h.length===0?e.jsx(G,{children:e.jsx(m,{colSpan:7,align:"center",sx:{py:4},children:e.jsx(s,{variant:"body1",color:"text.secondary",children:"No pending department requests"})})}):h.map(n=>{var g;return e.jsxs(G,{children:[e.jsxs(m,{children:[e.jsx(s,{variant:"subtitle2",children:n.department_name}),e.jsx(s,{variant:"body2",color:"text.secondary",children:n.department_code})]}),e.jsxs(m,{children:[e.jsx(s,{variant:"body2",children:n.contact_name}),e.jsx(s,{variant:"body2",color:"text.secondary",children:n.contact_email})]}),e.jsx(m,{children:e.jsx(q,{label:n.department_type,size:"small",variant:"outlined"})}),e.jsx(m,{children:((g=n.population_served)==null?void 0:g.toLocaleString())||"N/A"}),e.jsx(m,{children:n.number_of_stations||"N/A"}),e.jsx(m,{children:e.jsx(s,{variant:"body2",children:u(n.requested_at)})}),e.jsx(m,{children:e.jsxs(t,{sx:{display:"flex",gap:1},children:[e.jsx(S,{size:"small",startIcon:e.jsx(V,{}),color:"success",onClick:()=>W("department","approve",n),children:"Approve"}),e.jsx(S,{size:"small",startIcon:e.jsx(Me,{}),color:"error",onClick:()=>W("department","deny",n),children:"Deny"})]})})]},n.id)})})]})})}),e.jsx(Le,{value:c,index:1,children:e.jsx(je,{component:J,children:e.jsxs(ge,{children:[e.jsx(fe,{children:e.jsxs(G,{children:[e.jsx(m,{children:"User"}),e.jsx(m,{children:"Department"}),e.jsx(m,{children:"Requested Role"}),e.jsx(m,{children:"Experience"}),e.jsx(m,{children:"Requested"}),e.jsx(m,{children:"Actions"})]})}),e.jsx(ye,{children:A.length===0?e.jsx(G,{children:e.jsx(m,{colSpan:6,align:"center",sx:{py:4},children:e.jsx(s,{variant:"body1",color:"text.secondary",children:"No pending user requests"})})}):A.map(n=>e.jsxs(G,{children:[e.jsxs(m,{children:[e.jsx(s,{variant:"subtitle2",children:n.user_name}),e.jsx(s,{variant:"body2",color:"text.secondary",children:n.user_email})]}),e.jsx(m,{children:e.jsx(s,{variant:"body2",children:n.department_name})}),e.jsx(m,{children:e.jsx(q,{label:n.requested_role,size:"small",color:"primary",variant:"outlined"})}),e.jsxs(m,{children:[e.jsx(s,{variant:"body2",children:n.years_of_service?`${n.years_of_service} years`:"N/A"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:n.current_position||"N/A"})]}),e.jsx(m,{children:e.jsx(s,{variant:"body2",children:u(n.requested_at)})}),e.jsx(m,{children:e.jsxs(t,{sx:{display:"flex",gap:1},children:[e.jsx(S,{size:"small",startIcon:e.jsx(V,{}),color:"success",onClick:()=>W("user","approve",n),children:"Approve"}),e.jsx(S,{size:"small",startIcon:e.jsx(Me,{}),color:"error",onClick:()=>W("user","deny",n),children:"Deny"})]})})]},n.id))})]})})}),e.jsxs(de,{open:o.open,onClose:p,maxWidth:"md",fullWidth:!0,children:[e.jsxs(xe,{children:[o.action==="approve"?"Approve":"Deny"," "," ",o.type==="department"?"Department":"User"," Request"]}),e.jsx(he,{children:o.request&&e.jsxs(t,{sx:{pt:1},children:[e.jsxs(t,{sx:{mb:3},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Request Details"}),o.type==="department"?e.jsxs(j,{container:!0,spacing:2,children:[e.jsxs(j,{size:{xs:12,sm:6},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Department Name"}),e.jsx(s,{variant:"body1",children:o.request.department_name})]}),e.jsxs(j,{size:{xs:12,sm:6},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Type"}),e.jsx(s,{variant:"body1",children:o.request.department_type})]}),e.jsxs(j,{size:{xs:12,sm:6},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Contact Name"}),e.jsx(s,{variant:"body1",children:o.request.contact_name})]}),e.jsxs(j,{size:{xs:12,sm:6},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Contact Email"}),e.jsx(s,{variant:"body1",children:o.request.contact_email})]}),e.jsxs(j,{size:{xs:12},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Justification"}),e.jsx(s,{variant:"body1",children:o.request.justification||"N/A"})]})]}):e.jsxs(j,{container:!0,spacing:2,children:[e.jsxs(j,{size:{xs:12,sm:6},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"User Name"}),e.jsx(s,{variant:"body1",children:o.request.user_name})]}),e.jsxs(j,{size:{xs:12,sm:6},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Email"}),e.jsx(s,{variant:"body1",children:o.request.user_email})]}),e.jsxs(j,{size:{xs:12,sm:6},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Department"}),e.jsx(s,{variant:"body1",children:o.request.department_name})]}),e.jsxs(j,{size:{xs:12,sm:6},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Requested Role"}),e.jsx(s,{variant:"body1",children:o.request.requested_role})]}),e.jsxs(j,{size:{xs:12},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Verification Info"}),e.jsx(s,{variant:"body1",children:o.request.verification_info||"N/A"})]})]})]}),e.jsx(Ie,{sx:{my:2}}),e.jsxs(t,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:["Review Notes ",o.action==="deny"&&e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(K,{fullWidth:!0,multiline:!0,rows:4,value:w,onChange:n=>f(n.target.value),placeholder:o.action==="approve"?"Optional notes about the approval...":"Please provide a reason for denial...",required:o.action==="deny"})]})]})}),e.jsxs(me,{children:[e.jsx(S,{onClick:p,disabled:I,children:"Cancel"}),e.jsx(S,{onClick:a,disabled:I||o.action==="deny"&&!w.trim(),color:o.action==="approve"?"success":"error",variant:"contained",children:I?e.jsx(ee,{size:20}):`${o.action==="approve"?"Approve":"Deny"} Request`})]})]})]})},Ms=()=>{const[c,r]=x.useState([]),[h,d]=x.useState(null),[A,C]=x.useState(!1),[D,z]=x.useState(null),[_,M]=x.useState(null),[o,v]=x.useState(null),[w,f]=x.useState(!1),[I,k]=x.useState("all");x.useEffect(()=>{F(),L();const i=setInterval(()=>{F(),L()},3e4);return()=>clearInterval(i)},[I]);const F=async()=>{try{C(!0);const i=new URLSearchParams({unread_only:I==="unread"?"true":"false",limit:"20"}),E=await fetch(`/notifications/api/notifications?${i}`,{credentials:"include"});if(!E.ok)throw new Z("Failed to fetch notifications");const T=await E.json();if(T.success)r(T.notifications);else throw new Z(T.error||"Failed to load notifications")}catch(i){console.error("Error fetching notifications:",i),z(i instanceof Z?i.message:"Failed to load notifications")}finally{C(!1)}},L=async()=>{try{const i=await fetch("/notifications/api/notifications/stats",{credentials:"include"});if(!i.ok)throw new Z("Failed to fetch notification stats");const E=await i.json();E.success&&d(E.stats)}catch(i){console.error("Error fetching notification stats:",i)}},W=async i=>{try{if(!(await fetch(`/notifications/api/notifications/${i}/read`,{method:"POST",credentials:"include"})).ok)throw new Z("Failed to mark notification as read");r(T=>T.map(P=>P.id===i?{...P,is_read:!0}:P)),L()}catch(E){console.error("Error marking notification as read:",E),z("Failed to mark notification as read")}},p=async()=>{try{if(!(await fetch("/notifications/api/notifications/mark-all-read",{method:"POST",credentials:"include"})).ok)throw new Z("Failed to mark all notifications as read");r(E=>E.map(T=>({...T,is_read:!0}))),L()}catch(i){console.error("Error marking all notifications as read:",i),z("Failed to mark all notifications as read")}},a=async i=>{try{if(!(await fetch(`/notifications/api/notifications/${i}`,{method:"DELETE",credentials:"include"})).ok)throw new Z("Failed to delete notification");r(T=>T.filter(P=>P.id!==i)),L()}catch(E){console.error("Error deleting notification:",E),z("Failed to delete notification")}},u=(i,E)=>{const T={fontSize:"small",color:E==="urgent"?"error":E==="high"?"warning":"primary"};switch(i){case"approval_request":return e.jsx(re,{...T});case"department_approved":return e.jsx(Y,{...T});case"user_approved":return e.jsx(V,{...T});case"system_alert":return e.jsx(He,{...T});default:return e.jsx(ps,{...T})}},n=i=>{switch(i){case"urgent":return"error";case"high":return"warning";case"normal":return"primary";case"low":return"default";default:return"default"}},g=i=>{const E=new Date,T=new Date(i),P=Math.floor((E.getTime()-T.getTime())/1e3);return P<60?"Just now":P<3600?`${Math.floor(P/60)}m ago`:P<86400?`${Math.floor(P/3600)}h ago`:`${Math.floor(P/86400)}d ago`},b=i=>{i.is_read||W(i.id),i.action_url?window.open(i.action_url,"_blank"):(v(i),f(!0))},O=(i,E)=>{i.stopPropagation(),M(i.currentTarget),v(E)},B=()=>{M(null),v(null)};return e.jsx(R,{children:e.jsxs(N,{children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ms,{badgeContent:(h==null?void 0:h.unread_count)||0,color:"error",children:e.jsx(Cs,{color:"primary"})}),e.jsx(s,{variant:"h6",children:"Notifications"})]}),e.jsxs(t,{sx:{display:"flex",gap:1},children:[e.jsxs(S,{size:"small",variant:I==="all"?"contained":"outlined",onClick:()=>k("all"),children:["All (",(h==null?void 0:h.total_count)||0,")"]}),e.jsxs(S,{size:"small",variant:I==="unread"?"contained":"outlined",onClick:()=>k("unread"),children:["Unread (",(h==null?void 0:h.unread_count)||0,")"]}),h&&h.unread_count>0&&e.jsx(De,{title:"Mark all as read",children:e.jsx(ae,{size:"small",onClick:p,children:e.jsx(Ue,{})})})]})]}),D&&e.jsx(X,{severity:"error",sx:{mb:2},onClose:()=>z(null),children:D}),A&&e.jsx(t,{sx:{display:"flex",justifyContent:"center",py:2},children:e.jsx(ee,{size:24})}),!A&&e.jsx(Be,{sx:{maxHeight:400,overflow:"auto"},children:c.length===0?e.jsx(ve,{children:e.jsx(ne,{primary:"No notifications",secondary:I==="unread"?"All caught up!":"You have no notifications yet."})}):c.map((i,E)=>e.jsxs(es.Fragment,{children:[e.jsxs(ve,{sx:{cursor:"pointer",bgcolor:i.is_read?"transparent":"action.hover",borderRadius:1,mb:.5,"&:hover":{bgcolor:"action.selected"}},onClick:()=>b(i),children:[e.jsx(ys,{children:e.jsx(Pe,{sx:{bgcolor:i.is_read?"grey.300":"primary.main"},children:u(i.type,i.priority)})}),e.jsx(ne,{primary:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(s,{variant:"subtitle2",sx:{fontWeight:i.is_read?"normal":"bold",flexGrow:1},children:i.title}),e.jsx(q,{size:"small",label:i.priority,color:n(i.priority),variant:"outlined"})]}),secondary:e.jsxs(t,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:i.message}),e.jsx(s,{variant:"caption",color:"text.secondary",children:g(i.created_at)})]})}),e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.action_url&&e.jsx(De,{title:"Open link",children:e.jsx(ae,{size:"small",children:e.jsx(Fe,{fontSize:"small"})})}),e.jsx(ae,{size:"small",onClick:T=>O(T,i),children:e.jsx(Oe,{fontSize:"small"})})]})]}),E<c.length-1&&e.jsx(Ie,{})]},i.id))}),e.jsxs(We,{anchorEl:_,open:!!_,onClose:B,children:[o&&!o.is_read&&e.jsxs(U,{onClick:()=>{W(o.id),B()},children:[e.jsx(Ue,{sx:{mr:1},fontSize:"small"}),"Mark as read"]}),e.jsxs(U,{onClick:()=>{o&&a(o.id),B()},children:[e.jsx($e,{sx:{mr:1},fontSize:"small"}),"Delete"]})]}),e.jsx(de,{open:w,onClose:()=>f(!1),maxWidth:"sm",fullWidth:!0,children:o&&e.jsxs(e.Fragment,{children:[e.jsx(xe,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[u(o.type,o.priority),o.title]})}),e.jsxs(he,{children:[e.jsx(s,{variant:"body1",paragraph:!0,children:o.message}),e.jsxs(t,{sx:{display:"flex",gap:1,mb:2},children:[e.jsx(q,{size:"small",label:o.type.replace("_"," ").toUpperCase(),variant:"outlined"}),e.jsx(q,{size:"small",label:o.priority.toUpperCase(),color:n(o.priority),variant:"outlined"})]}),e.jsx(s,{variant:"caption",color:"text.secondary",children:new Date(o.created_at).toLocaleString()})]}),e.jsxs(me,{children:[e.jsx(S,{onClick:()=>f(!1),children:"Close"}),o.action_url&&e.jsx(S,{variant:"contained",startIcon:e.jsx(Fe,{}),onClick:()=>{window.open(o.action_url,"_blank"),f(!1)},children:"Open Link"})]})]})})]})})};function se(c){const{children:r,value:h,index:d,...A}=c;return e.jsx("div",{role:"tabpanel",hidden:h!==d,id:`admin-tabpanel-${d}`,"aria-labelledby":`admin-tab-${d}`,...A,children:h===d&&e.jsx(t,{sx:{pt:3},children:r})})}function te(c){return{id:`admin-tab-${c}`,"aria-controls":`admin-tabpanel-${c}`}}const ut=()=>{const c=ss(),[r,h]=x.useState(0),[d,A]=x.useState(!0),[C,D]=x.useState(null),[z,_]=x.useState(null);x.useEffect(()=>{M()},[]);const M=async()=>{try{A(!0);const v=await fetch("/auth/api/me",{credentials:"include"});if(console.log("🔐 Admin access check - Response status:",v.status),!v.ok)throw new Error("Authentication required");const w=await v.json();console.log("🔐 Admin access check - Response data:",w);const f=w.user||w;if(console.log("🔐 Admin access check - Extracted user:",f),!f||f.role!=="admin"&&f.role!=="super_admin")throw console.error("🔐 Admin access denied - User role:",f==null?void 0:f.role),new Error("Admin access required");console.log("🔐 Admin access granted - User role:",f.role),_(f.role==="super_admin"?"super_admin":"admin")}catch(v){console.error("🔐 Admin access check failed:",v),v instanceof Error?v.message==="Authentication required"?(D("Please log in to access the admin console."),console.log("🔐 Redirecting to login due to authentication failure"),setTimeout(()=>c("/login"),2e3)):(D(v.message),console.log("🔐 Authorization error - user may be logged in but lacks admin privileges")):D("Access denied")}finally{A(!1)}},o=(v,w)=>{h(w)};return d?e.jsx(Se,{maxWidth:"lg",sx:{mt:4,mb:4},children:e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(ee,{size:60})})}):C?e.jsxs(Se,{maxWidth:"lg",sx:{mt:4,mb:4},children:[e.jsx(X,{severity:"error",sx:{mb:2},children:C}),C.includes("log in")&&e.jsxs(J,{sx:{p:3,mt:2},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Quick Admin Login"}),e.jsxs(t,{component:"form",onSubmit:async v=>{v.preventDefault();const w=new FormData(v.target),f=w.get("email"),I=w.get("password");try{const k=await fetch("/auth/api/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:f,password:I})});if(k.ok)D(null),M();else{const F=await k.json();D(F.message||"Login failed")}}catch{D("Login request failed")}},sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx("input",{type:"email",name:"email",placeholder:"Email",defaultValue:"admin@fireems.ai",style:{padding:"12px",border:"1px solid #ccc",borderRadius:"4px"}}),e.jsx("input",{type:"password",name:"password",placeholder:"Password",defaultValue:"admin123",style:{padding:"12px",border:"1px solid #ccc",borderRadius:"4px"}}),e.jsx(S,{type:"submit",variant:"contained",color:"primary",children:"Login to Admin Console"})]})]})]}):e.jsxs(Se,{maxWidth:"lg",sx:{mt:4,mb:4},children:[e.jsx(t,{sx:{mb:4},children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(us,{sx:{fontSize:40,color:"primary.main"}}),e.jsxs(t,{sx:{flexGrow:1},children:[e.jsx(s,{variant:"h4",component:"h1",gutterBottom:!0,children:"Admin Console"}),e.jsx(s,{variant:"subtitle1",color:"text.secondary",children:"Manage departments, users, and system settings"})]}),e.jsx(S,{variant:"outlined",onClick:()=>c("/"),sx:{mr:2},children:"Back to Tools"})]})}),e.jsx(J,{sx:{mb:3},children:e.jsxs(Ve,{value:r,onChange:o,"aria-label":"admin navigation tabs",variant:"fullWidth",children:[e.jsx(Q,{icon:e.jsx(xs,{}),label:"Overview",...te(0)}),e.jsx(Q,{icon:e.jsx(ze,{}),label:"User Management",...te(1)}),e.jsx(Q,{icon:e.jsx(Y,{}),label:"Department Settings",...te(2)}),e.jsx(Q,{icon:e.jsx(Ge,{}),label:"Notifications",...te(3)}),z==="super_admin"&&e.jsx(Q,{icon:e.jsx(Ss,{}),label:"Pending Approvals",...te(4)}),z==="super_admin"&&e.jsx(Q,{icon:e.jsx(pe,{}),label:"System Documentation",...te(5)})]})}),e.jsx(se,{value:r,index:0,children:e.jsx(zs,{userRole:z})}),e.jsx(se,{value:r,index:1,children:e.jsx(Is,{userRole:z})}),e.jsx(se,{value:r,index:2,children:e.jsx(Es,{userRole:z})}),e.jsx(se,{value:r,index:3,children:e.jsx(Ms,{})}),z==="super_admin"&&e.jsx(se,{value:r,index:4,children:e.jsx(Ts,{})}),z==="super_admin"&&e.jsx(se,{value:r,index:5,children:e.jsxs(J,{sx:{p:3},children:[e.jsxs(s,{variant:"h5",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1,mb:3},children:[e.jsx(pe,{}),"System Administration Documentation"]}),e.jsx(s,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Technical documentation for system administrators and product owners."}),e.jsxs(j,{container:!0,spacing:3,children:[e.jsx(j,{item:!0,xs:12,md:6,children:e.jsx(R,{children:e.jsxs(N,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"System Admin Guide"}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Complete guide for server setup, configuration, and maintenance."}),e.jsx(S,{variant:"contained",startIcon:e.jsx(pe,{}),onClick:()=>window.open("/docs/admin/SYSTEM_ADMIN_GUIDE","_blank"),children:"Read Guide"})]})})}),e.jsx(j,{item:!0,xs:12,md:6,children:e.jsx(R,{children:e.jsxs(N,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Troubleshooting Guide"}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Technical troubleshooting, debugging, and issue resolution."}),e.jsx(S,{variant:"contained",startIcon:e.jsx(pe,{}),onClick:()=>window.open("/docs/admin/TROUBLESHOOTING","_blank"),children:"Read Guide"})]})})})]})]})})]})};export{ut as default};
