var Ju=Object.defineProperty;var eh=(n,e,t)=>e in n?Ju(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var z=(n,e,t)=>eh(n,typeof e!="symbol"?e+"":e,t);import{i as th,E as nh,F as ih,T as sh,R as Qo,H as I,g as Ue,a as Ge,r as T,u as Jl,I as Yt,j as d,s as X,c as Ze,d as mt,b as Le,m as ei,e as ki,J as rh,K as oh,L as no,M as io,l as Ie,B as N,k as en,N as ah,O as lh,P as Cn,Q as Zt,h as Gn,S as ch,U as Ks,V as dh,W as Qs,X as Zs,C as so,_ as Zo,Y as uh,Z as hh,$ as fh,a0 as ph,a1 as mh}from"./index-BnLcZMYe.js";import{L as Rn,F as gh,a as yh,u as ec,v as xh,P as bh}from"./leaflet-JxvqLGwl.js";import{_ as vh,Z as wh,$ as re,a0 as Th,c as qe,d as Jo,a1 as tc,T as M,G as B,D as Bt,P as Ve,A as $t,F as nc,I as ic,h as Sh,M as Js,w as As,m as Re,p as _e,q as sc,r as Ph,H as ea,o as Sn,J as Dh,a2 as U,f as gt,a3 as Fs,a4 as Ch,a5 as Mh,u as Ce,a6 as er,a7 as kh,e as qn,g as Es,B as Te,n as ro,N as Mr,L as kr,a as rc,v as Ih,a8 as ys,a9 as Bn,aa as oc,i as oo,ab as ta,k as ao,x as ac,y as lc,E as cc,z as dc,l as Ls,C as Ns,Y as _h,j as uc,U as lo,O as jh,Q as Rh,W as Oh,X as Ah,s as Fh,t as ii}from"./jspdf.es.min-BXZJnleU.js";import{A as Eh,e as hc,T as fc,a as pc,b as Et,c as Z,d as mc,f as vn,g as wn,L as gc,C as Ir,i as Lh,h as Nh,S as yc,F as xc,P as _r,R as Nn,D as bc,B as zh,j as Bh,l as $h,m as Vh,n as Wh,k as Hh}from"./TableChart-BxrvfCfr.js";var tr={exports:{}},nr,na;function Yh(){if(na)return nr;na=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return nr=n,nr}var ir,ia;function Uh(){if(ia)return ir;ia=1;var n=Yh();function e(){}function t(){}return t.resetWarningCache=e,ir=function(){function i(o,a,l,c,u,h){if(h!==n){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}i.isRequired=i;function s(){return i}var r={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:s,element:i,elementType:i,instanceOf:s,node:i,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return r.PropTypes=r,r},ir}var sa;function Gh(){return sa||(sa=1,tr.exports=Uh()()),tr.exports}var qh=Gh();const E=th(qh),vc=E.oneOfType([E.func,E.object]);function Be({props:n,name:e}){return nh({props:n,name:e,defaultTheme:ih,themeId:sh})}function Xh(n,e){return n.classList?!!e&&n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}function Kh(n,e){n.classList?n.classList.add(e):Xh(n,e)||(typeof n.className=="string"?n.className=n.className+" "+e:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+e))}function ra(n,e){return n.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Qh(n,e){n.classList?n.classList.remove(e):typeof n.className=="string"?n.className=ra(n.className,e):n.setAttribute("class",ra(n.className&&n.className.baseVal||"",e))}var Zh=function(e,t){return e&&t&&t.split(" ").forEach(function(i){return Kh(e,i)})},sr=function(e,t){return e&&t&&t.split(" ").forEach(function(i){return Qh(e,i)})},co=function(n){vh(e,n);function e(){for(var i,s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i=n.call.apply(n,[this].concat(r))||this,i.appliedClasses={appear:{},enter:{},exit:{}},i.onEnter=function(a,l){var c=i.resolveArguments(a,l),u=c[0],h=c[1];i.removeClasses(u,"exit"),i.addClass(u,h?"appear":"enter","base"),i.props.onEnter&&i.props.onEnter(a,l)},i.onEntering=function(a,l){var c=i.resolveArguments(a,l),u=c[0],h=c[1],f=h?"appear":"enter";i.addClass(u,f,"active"),i.props.onEntering&&i.props.onEntering(a,l)},i.onEntered=function(a,l){var c=i.resolveArguments(a,l),u=c[0],h=c[1],f=h?"appear":"enter";i.removeClasses(u,f),i.addClass(u,f,"done"),i.props.onEntered&&i.props.onEntered(a,l)},i.onExit=function(a){var l=i.resolveArguments(a),c=l[0];i.removeClasses(c,"appear"),i.removeClasses(c,"enter"),i.addClass(c,"exit","base"),i.props.onExit&&i.props.onExit(a)},i.onExiting=function(a){var l=i.resolveArguments(a),c=l[0];i.addClass(c,"exit","active"),i.props.onExiting&&i.props.onExiting(a)},i.onExited=function(a){var l=i.resolveArguments(a),c=l[0];i.removeClasses(c,"exit"),i.addClass(c,"exit","done"),i.props.onExited&&i.props.onExited(a)},i.resolveArguments=function(a,l){return i.props.nodeRef?[i.props.nodeRef.current,a]:[a,l]},i.getClassNames=function(a){var l=i.props.classNames,c=typeof l=="string",u=c&&l?l+"-":"",h=c?""+u+a:l[a],f=c?h+"-active":l[a+"Active"],p=c?h+"-done":l[a+"Done"];return{baseClassName:h,activeClassName:f,doneClassName:p}},i}var t=e.prototype;return t.addClass=function(s,r,o){var a=this.getClassNames(r)[o+"ClassName"],l=this.getClassNames("enter"),c=l.doneClassName;r==="appear"&&o==="done"&&c&&(a+=" "+c),o==="active"&&s&&wh(s),a&&(this.appliedClasses[r][o]=a,Zh(s,a))},t.removeClasses=function(s,r){var o=this.appliedClasses[r],a=o.base,l=o.active,c=o.done;this.appliedClasses[r]={},a&&sr(s,a),l&&sr(s,l),c&&sr(s,c)},t.render=function(){var s=this.props;s.classNames;var r=re(s,["classNames"]);return Qo.createElement(Th,I({},r,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(Qo.Component);co.defaultProps={classNames:""};co.propTypes={};function Jh(n){return Ue("MuiLinearProgress",n)}Ge("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const jr=4,Rr=io`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,ef=typeof Rr!="string"?no`
        animation: ${Rr} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,Or=io`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,tf=typeof Or!="string"?no`
        animation: ${Or} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,Ar=io`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,nf=typeof Ar!="string"?no`
        animation: ${Ar} 3s infinite linear;
      `:null,sf=n=>{const{classes:e,variant:t,color:i}=n,s={root:["root",`color${mt(i)}`,t],dashed:["dashed",`dashedColor${mt(i)}`],bar1:["bar","bar1",`barColor${mt(i)}`,(t==="indeterminate"||t==="query")&&"bar1Indeterminate",t==="determinate"&&"bar1Determinate",t==="buffer"&&"bar1Buffer"],bar2:["bar","bar2",t!=="buffer"&&`barColor${mt(i)}`,t==="buffer"&&`color${mt(i)}`,(t==="indeterminate"||t==="query")&&"bar2Indeterminate",t==="buffer"&&"bar2Buffer"]};return Le(s,Jh,e)},uo=(n,e)=>n.vars?n.vars.palette.LinearProgress[`${e}Bg`]:n.palette.mode==="light"?rh(n.palette[e].main,.62):oh(n.palette[e].main,.5),rf=X("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`color${mt(t.color)}`],e[t.variant]]}})(ei(({theme:n})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(n.palette).filter(ki()).map(([e])=>({props:{color:e},style:{backgroundColor:uo(n,e)}})),{props:({ownerState:e})=>e.color==="inherit"&&e.variant!=="buffer",style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),of=X("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.dashed,e[`dashedColor${mt(t.color)}`]]}})(ei(({theme:n})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(n.palette).filter(ki()).map(([e])=>{const t=uo(n,e);return{props:{color:e},style:{backgroundImage:`radial-gradient(${t} 0%, ${t} 16%, transparent 42%)`}}})]})),nf||{animation:`${Ar} 3s infinite linear`}),af=X("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.bar,e.bar1,e[`barColor${mt(t.color)}`],(t.variant==="indeterminate"||t.variant==="query")&&e.bar1Indeterminate,t.variant==="determinate"&&e.bar1Determinate,t.variant==="buffer"&&e.bar1Buffer]}})(ei(({theme:n})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(n.palette).filter(ki()).map(([e])=>({props:{color:e},style:{backgroundColor:(n.vars||n).palette[e].main}})),{props:{variant:"determinate"},style:{transition:`transform .${jr}s linear`}},{props:{variant:"buffer"},style:{zIndex:1,transition:`transform .${jr}s linear`}},{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:{width:"auto"}},{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:ef||{animation:`${Rr} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),lf=X("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.bar,e.bar2,e[`barColor${mt(t.color)}`],(t.variant==="indeterminate"||t.variant==="query")&&e.bar2Indeterminate,t.variant==="buffer"&&e.bar2Buffer]}})(ei(({theme:n})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(n.palette).filter(ki()).map(([e])=>({props:{color:e},style:{"--LinearProgressBar2-barColor":(n.vars||n).palette[e].main}})),{props:({ownerState:e})=>e.variant!=="buffer"&&e.color!=="inherit",style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:e})=>e.variant!=="buffer"&&e.color==="inherit",style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(n.palette).filter(ki()).map(([e])=>({props:{color:e,variant:"buffer"},style:{backgroundColor:uo(n,e),transition:`transform .${jr}s linear`}})),{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:{width:"auto"}},{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:tf||{animation:`${Or} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),cf=T.forwardRef(function(e,t){const i=Jl({props:e,name:"MuiLinearProgress"}),{className:s,color:r="primary",value:o,valueBuffer:a,variant:l="indeterminate",...c}=i,u={...i,color:r,variant:l},h=sf(u),f=Yt(),p={},m={bar1:{},bar2:{}};if((l==="determinate"||l==="buffer")&&o!==void 0){p["aria-valuenow"]=Math.round(o),p["aria-valuemin"]=0,p["aria-valuemax"]=100;let y=o-100;f&&(y=-y),m.bar1.transform=`translateX(${y}%)`}if(l==="buffer"&&a!==void 0){let y=(a||0)-100;f&&(y=-y),m.bar2.transform=`translateX(${y}%)`}return d.jsxs(rf,{className:Ze(h.root,s),ownerState:u,role:"progressbar",...p,ref:t,...c,children:[l==="buffer"?d.jsx(of,{className:h.dashed,ownerState:u}):null,d.jsx(af,{className:h.bar1,ownerState:u,style:m.bar1}),l==="determinate"?null:d.jsx(lf,{className:h.bar2,ownerState:u,style:m.bar2})]})}),df=qe(d.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}));function uf(n){return Ue("MuiTableSortLabel",n)}const rr=Ge("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc","directionDesc","directionAsc"]),hf=n=>{const{classes:e,direction:t,active:i}=n,s={root:["root",i&&"active",`direction${mt(t)}`],icon:["icon",`iconDirection${mt(t)}`]};return Le(s,uf,e)},ff=X(tc,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.active&&e.active]}})(ei(({theme:n})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(n.vars||n).palette.text.secondary},"&:hover":{color:(n.vars||n).palette.text.secondary,[`& .${rr.icon}`]:{opacity:.5}},[`&.${rr.active}`]:{color:(n.vars||n).palette.text.primary,[`& .${rr.icon}`]:{opacity:1,color:(n.vars||n).palette.text.secondary}}}))),pf=X("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,e[`iconDirection${mt(t.direction)}`]]}})(ei(({theme:n})=>({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:n.transitions.create(["opacity","transform"],{duration:n.transitions.duration.shorter}),userSelect:"none",variants:[{props:{direction:"desc"},style:{transform:"rotate(0deg)"}},{props:{direction:"asc"},style:{transform:"rotate(180deg)"}}]}))),mf=T.forwardRef(function(e,t){const i=Jl({props:e,name:"MuiTableSortLabel"}),{active:s=!1,children:r,className:o,direction:a="asc",hideSortIcon:l=!1,IconComponent:c=df,slots:u={},slotProps:h={},...f}=i,p={...i,active:s,direction:a,hideSortIcon:l,IconComponent:c},m=hf(p),y={slots:u,slotProps:h},[g,x]=Jo("root",{elementType:ff,externalForwardedProps:y,ownerState:p,className:Ze(m.root,o),ref:t}),[v,b]=Jo("icon",{elementType:pf,externalForwardedProps:y,ownerState:p,className:m.icon});return d.jsxs(g,{disableRipple:!0,component:"span",...x,...f,children:[r,l&&!s?null:d.jsx(v,{as:c,...b})]})}),gf=qe(d.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"})),yf=qe(d.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-7h2zm4 0h-2V7h2zm4 0h-2v-4h2z"})),xf=qe(d.jsx("path",{d:"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16m11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M5 11l1.5-4.5h11L19 11z"})),bf=qe(d.jsx("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"})),vf=qe(d.jsx("path",{d:"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2zm10 14.5V20H8v-3.5l4-4zm-4-5-4-4V4h8v3.5z"})),or=qe(d.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),wf=qe(d.jsx("path",{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm7 7V3.5L18.5 9z"})),Tf=qe(d.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2m0 16H5V7h14zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"})),wc=qe([d.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),d.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")]),Sf=qe(d.jsx("path",{d:"m20.38 8.57-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83"})),Pf=qe(d.jsx("path",{d:"M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V8h2z"})),Df=qe(d.jsx("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"})),On=(n,e)=>{if(!n)return null;try{let t=n;if(t.includes("T")){const s=t.split("T");if(s[0].includes("-")){const r=s[0].split("-");if(r.length>=2){if(s.length>1&&s[1].includes("/")){const o=s[1].split(" ")[0];o.split("/").length===3&&(t=o)}else if(r[0].includes(" ")){const a=r[0].split(" ")[0],l=r[1].split("-");if(l.length===2){const c=l[0].padStart(2,"0"),u=l[1].padStart(2,"0");t=`${a}-${c}-${u}`}}}}else s.length>1&&s[0].includes("/")&&(t=s[0])}if(t.length<=8&&t.includes(":")&&!t.includes("-")&&!t.includes("/")){if(!e)return console.warn("Base date is required for time-only strings:",t),null;const s=t.split(":").map(Number),r=s[0]||0,o=s[1]||0,a=s[2]||0;let l;try{if(l=new Date(e),isNaN(l.getTime()))return console.warn("Invalid base date:",e),null}catch(c){return console.warn("Error parsing base date:",e,c),null}return l.setHours(r,o,a),l}if(/^\d{1,2}\/\d{1,2}\/\d{4}\s+\d{1,2}:\d{2}$/.test(t)&&(t=t+":00",console.log(`ðŸ”§ HEXAGON FIX: Added missing seconds to "${n}" â†’ "${t}"`)),t.includes("/")){const s=t.split("/");if(s.length===3){let r=s[2],o="";if(r.includes(" ")){const f=r.split(" ");r=f[0],o=f.slice(1).join(" ")}const a=s[0].trim(),l=s[1].trim();let c=parseInt(r,10);const u=parseInt(a,10),h=parseInt(l,10);if(c>=0&&c<=99&&(c<=29?c+=2e3:c+=1900,console.log(`ðŸ”§ 2-DIGIT YEAR FIX: Converted "${r}" to ${c}`)),!isNaN(c)&&!isNaN(u)&&!isNaN(h)){const f=new Date(c,u-1,h);if(o&&o.includes(":")){const p=o.split(":").map(Number);f.setHours(p[0]||0,p[1]||0,p[2]||0,0)}if(!isNaN(f.getTime()))return console.log(`ðŸ•’ TIMEZONE FIX: Parsed "${t}" as LOCAL time: ${f.toISOString()} (${f.toString()})`),f}}}if(t.includes(" ")&&t.includes("-")){const[s,r]=t.split(" ");let o;if(s.match(/^\d{4}-\d{2}-\d{2}$/)){const[a,l,c]=s.split("-").map(Number);o=new Date(a,l-1,c)}else o=new Date(s);if(!isNaN(o.getTime())&&r&&r.includes(":")){const a=r.split(":").map(Number);return o.setHours(a[0]||0,a[1]||0,a[2]||0,0),console.log(`ðŸ•’ TIMEZONE FIX: Parsed date+time "${t}" as LOCAL time: ${o.toISOString()} (${o.toString()})`),o}}const i=new Date(t);return isNaN(i.getTime())?(console.warn(`Could not parse date string: ${n} (processed as: ${t})`),null):(t.includes("/")||t.includes(" ")&&!t.includes("T")&&!t.includes("Z")&&!t.includes("+")&&!t.includes("-",10)?console.log(`âš ï¸ TIMEZONE WARNING: Direct parsing of "${t}" may have timezone issues. Result: ${i.toISOString()} (${i.toString()})`):console.log(`ðŸ•’ DIRECT PARSE: "${t}" parsed as: ${i.toISOString()} (${i.toString()})`),i)}catch(t){return console.error(`Error parsing date: ${n}`,t),null}},ut=n=>{const e={dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null};try{const t=n.incidentDate;if(!t)return console.warn("No incident date available for parsing time-only strings"),e;console.log("=== Processing incident:",n.incidentId,"==="),console.log("Base Date:",t),console.log("Raw incident data:",{incidentTime:n.incidentTime,dispatchTime:n.dispatchTime,enRouteTime:n.enRouteTime,arrivalTime:n.arrivalTime,clearTime:n.clearTime}),console.log("ðŸ§ª CHATGPT DEBUG - Calculator receives incident:",JSON.stringify(n,null,2));let i=null;console.log("=== INCIDENT TIME PROCESSING DEBUG ==="),console.log("incident object keys:",Object.keys(n)),console.log(`incident.incidentTime value: "${n.incidentTime}" (type: ${typeof n.incidentTime})`),console.log(`incident.incidentTime is null: ${n.incidentTime===null}`),console.log(`incident.incidentTime is undefined: ${n.incidentTime===void 0}`),console.log(`incident.incidentTime is empty string: ${n.incidentTime===""}`),console.log("ðŸ” FIELD CHECK - Call Receive Time:",n["Call Receive Time"]),console.log("ðŸ” FIELD CHECK - call receive time:",n["call receive time"]),console.log("ðŸ” FIELD CHECK - Incident Time:",n["Incident Time"]),console.log("ðŸ” FIELD CHECK - incident time:",n["incident time"]),console.log("ðŸ” FULL INCIDENT OBJECT:",JSON.stringify(n,null,2)),n.incidentTime&&n.incidentTime!==""&&n.incidentTime!==null&&n.incidentTime!==void 0?/^(\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}|\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2})$/.test(n.incidentTime.trim())?(console.log(`ðŸ“… DATE-ONLY FORMAT DETECTED: incidentTime is "${n.incidentTime}" - contains no time component`),console.log("ðŸ“Š DATA QUALITY DECISION: Skipping dispatch time calculation for this incident to maintain data integrity"),console.log("âœ… PRESERVING OTHER METRICS: Turnout, travel, scene time, and total incident time will still be calculated where possible"),i=null,console.log("ðŸš¨ INCIDENT TIME SET TO NULL: Dispatch time calculation will be skipped for data integrity")):(i=On(n.incidentTime,t),console.log(`âœ… SUCCESS: Using incidentTime: "${n.incidentTime}" -> ${(i==null?void 0:i.toISOString())||"null"}`)):(i=On(t,t),console.log(`ðŸš¨ FALLBACK TRIGGERED: Using incidentDate as fallback (incidentTime was missing/empty): "${t}" -> ${(i==null?void 0:i.toISOString())||"null"}`),console.log("ðŸš¨ WHY FALLBACK? incidentTime validation failed:",{truthy:!!n.incidentTime,"not empty string":n.incidentTime!=="","not null":n.incidentTime!==null,"not undefined":n.incidentTime!==void 0,combined:!!(n.incidentTime&&n.incidentTime!==""&&n.incidentTime!==null&&n.incidentTime!==void 0)})),console.log("=== END INCIDENT TIME PROCESSING DEBUG ===");const s=On(n.dispatchTime,t);console.log(`Parsed dispatchTime: ${n.dispatchTime} -> ${(s==null?void 0:s.toISOString())||"null"}`);const r=On(n.enRouteTime,t);console.log(`Parsed enRouteTime: ${n.enRouteTime} -> ${(r==null?void 0:r.toISOString())||"null"}`);const o=On(n.arrivalTime,t);console.log(`Parsed arrivalTime: ${n.arrivalTime} -> ${(o==null?void 0:o.toISOString())||"null"}`);const a=On(n.clearTime,t);if(console.log(`Parsed clearTime: ${n.clearTime} -> ${(a==null?void 0:a.toISOString())||"null"}`),i&&s){const l=(s.getTime()-i.getTime())/1e3;l>0&&l<86400?e.dispatchTime=l:console.warn(`Invalid dispatch time interval: ${l} seconds`)}if(s&&r){const l=(r.getTime()-s.getTime())/1e3;l>0&&l<86400?e.turnoutTime=l:console.warn(`Invalid turnout time interval: ${l} seconds`)}if(r&&o){const l=(o.getTime()-r.getTime())/1e3;l>0&&l<86400?e.travelTime=l:console.warn(`Invalid travel time interval: ${l} seconds`)}if(i&&o){const l=(o.getTime()-i.getTime())/1e3;l>0&&l<86400?e.totalResponseTime=l:console.warn(`Invalid total response time interval: ${l} seconds`)}else!i&&o&&console.log("â­ï¸ SKIPPING TOTAL RESPONSE TIME: incidentTime was null (likely 00:00:00 case), cannot calculate total response time");if(o&&a){let l=a;a.getTime()<o.getTime()&&(l=new Date(a.getTime()+864e5),console.log(`ðŸŒ… MIDNIGHT ROLLOVER FIX: Clear time "${n.clearTime}" appears to be next day. Adjusted from ${a.toISOString()} to ${l.toISOString()}`));const c=(l.getTime()-o.getTime())/1e3;c>0&&c<86400*3?(e.sceneTime=c,console.log(`âœ… Scene time calculated: ${c} seconds (${Math.round(c/60)} minutes)`)):console.warn(`Invalid scene time interval: ${c} seconds (arrival: ${o.toISOString()}, clear: ${l.toISOString()})`)}if(i&&a){let l=a;a.getTime()<i.getTime()&&(l=new Date(a.getTime()+864e5),console.log(`ðŸŒ… MIDNIGHT ROLLOVER FIX (Total): Clear time "${n.clearTime}" appears to be next day for total incident time calculation`));const c=(l.getTime()-i.getTime())/1e3;c>0&&c<86400*3?(e.totalIncidentTime=c,console.log(`âœ… Total incident time calculated: ${c} seconds (${Math.round(c/60)} minutes)`)):console.warn(`Invalid total incident time interval: ${c} seconds (incident: ${i.toISOString()}, clear: ${l.toISOString()})`)}else!i&&a&&console.log("â­ï¸ SKIPPING TOTAL INCIDENT TIME: incidentTime was null (likely 00:00:00 case), cannot calculate total incident time")}catch(t){console.error("Error calculating metrics for incident",n.incidentId,t)}return console.log("Calculated metrics for incident",n.incidentId,e),e},Cf=n=>{if(console.log(`Calculating statistics for ${n.length} incidents`),!n||!n.length)return console.warn("No incidents provided for statistics calculation"),Ui();try{const e=n.filter(s=>!s.incidentId||!s.incidentDate?(console.warn(`Skipping incident missing required fields: ${JSON.stringify(s)}`),!1):!0);if(e.length===0)return console.warn("No valid incidents found for statistics calculation"),Ui();e.length<n.length&&console.warn(`Filtered out ${n.length-e.length} invalid incidents`);const i=e.map(ut).filter(s=>s.dispatchTime!==null||s.turnoutTime!==null||s.travelTime!==null||s.totalResponseTime!==null);return i.length===0?(console.warn("No valid metrics could be calculated"),Ui()):(console.log(`Calculated valid metrics for ${i.length} out of ${e.length} incidents`),{mean:Tc(i),median:Mf(i),ninetiethPercentile:kf(i,90),standardDeviation:If(i),min:_f(i),max:jf(i),count:i.length})}catch(e){return console.error("Error calculating response time statistics:",e),Ui()}},Ui=()=>{const n={dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null};return{mean:{...n},median:{...n},ninetiethPercentile:{...n},standardDeviation:{...n},min:{...n},max:{...n},count:0}},Tc=n=>{const e={dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null};return Object.keys(e).forEach(t=>{const i=n.map(s=>s[t]).filter(s=>s!==null);if(i.length){const s=i.reduce((r,o)=>r+o,0);e[t]=s/i.length}}),e},Mf=n=>{const e={dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null};return Object.keys(e).forEach(t=>{const i=n.map(s=>s[t]).filter(s=>s!==null).sort((s,r)=>s-r);if(i.length){const s=Math.floor(i.length/2);e[t]=i.length%2===0?(i[s-1]+i[s])/2:i[s]}}),e},kf=(n,e)=>{const t={dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null};return Object.keys(t).forEach(i=>{const s=n.map(r=>r[i]).filter(r=>r!==null).sort((r,o)=>r-o);if(s.length){const r=Math.ceil(e/100*s.length)-1;t[i]=s[Math.max(0,Math.min(r,s.length-1))]}}),t},If=n=>{const e={dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},t=Tc(n);return Object.keys(e).forEach(i=>{const s=t[i];if(s===null)return;const r=n.map(o=>o[i]).filter(o=>o!==null);if(r.length){const a=r.map(l=>Math.pow(l-s,2)).reduce((l,c)=>l+c,0)/r.length;e[i]=Math.sqrt(a)}}),e},_f=n=>{const e={dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null};return Object.keys(e).forEach(t=>{const i=n.map(s=>s[t]).filter(s=>s!==null);i.length&&(e[t]=Math.min(...i))}),e},jf=n=>{const e={dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null};return Object.keys(e).forEach(t=>{const i=n.map(s=>s[t]).filter(s=>s!==null);i.length&&(e[t]=Math.max(...i))}),e},ce=(n,e="full")=>{if(n===null)return"N/A";if(e==="seconds")return`${n.toFixed(1)}s`;if(e==="minutes")return`${(n/60).toFixed(1)} min`;const t=Math.floor(n/60),i=Math.round(n%60);return t===0?`${i} sec`:`${t} min ${i} sec`},me=(n,e)=>{if(n===null)return"N/A";if(e==="dispatch")return`${Math.round(n)} sec`;if(n>=60){const t=Math.floor(n/60),i=Math.round(n%60);return`${t} min ${i} sec`}return`${Math.round(n)} sec`},An=({title:n,value:e,icon:t,secondaryValue:i,secondaryLabel:s,color:r="#1976d2"})=>d.jsx(vn,{variant:"outlined",children:d.jsx(wn,{children:d.jsxs(N,{sx:{display:"flex",alignItems:"center"},children:[d.jsx(N,{sx:{display:"flex",alignItems:"center",justifyContent:"center",bgcolor:`${r}20`,color:r,borderRadius:"50%",p:1,mr:2,width:40,height:40},children:t}),d.jsxs(N,{children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:n}),d.jsx(M,{variant:"h5",component:"div",children:e}),i&&d.jsxs(M,{variant:"caption",color:"text.secondary",children:[s,": ",i]})]})]})})}),Sc=()=>{const{responseTimeStats:n}=Ie(t=>t.analyzer.calculatedMetrics),{incidents:e}=Ie(t=>t.analyzer.rawData);return!n||!e.length?d.jsxs(N,{sx:{p:3},children:[d.jsx(M,{variant:"h6",gutterBottom:!0,children:"Response Time Statistics"}),d.jsx(M,{variant:"body1",color:"text.secondary",children:"No data available for statistical analysis. Please load incident data."})]}):d.jsxs(N,{sx:{p:3},children:[d.jsx(M,{variant:"h6",gutterBottom:!0,children:"Response Time Statistics"}),d.jsxs(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:["Based on ",e.length," incidents"]}),d.jsxs(B,{container:!0,spacing:3,sx:{mb:4},children:[d.jsx(B,{size:{xs:12,sm:6,md:4},children:d.jsx(An,{title:"Average Total Response Time",value:ce(n.mean.totalResponseTime),icon:d.jsx(Eh,{}),secondaryValue:ce(n.ninetiethPercentile.totalResponseTime),secondaryLabel:"90th percentile",color:"#1976d2"})}),d.jsx(B,{size:{xs:12,sm:6,md:4},children:d.jsx(An,{title:"Average Dispatch Time",value:ce(n.mean.dispatchTime),icon:d.jsx(Sf,{}),secondaryValue:ce(n.ninetiethPercentile.dispatchTime),secondaryLabel:"90th percentile",color:"#2e7d32"})}),d.jsx(B,{size:{xs:12,sm:6,md:4},children:d.jsx(An,{title:"Average Turnout Time",value:ce(n.mean.turnoutTime),icon:d.jsx(Pf,{}),secondaryValue:ce(n.ninetiethPercentile.turnoutTime),secondaryLabel:"90th percentile",color:"#ed6c02"})}),d.jsx(B,{size:{xs:12,sm:6,md:4},children:d.jsx(An,{title:"Average Travel Time",value:ce(n.mean.travelTime),icon:d.jsx(xf,{}),secondaryValue:ce(n.ninetiethPercentile.travelTime),secondaryLabel:"90th percentile",color:"#9c27b0"})}),d.jsx(B,{size:{xs:12,sm:6,md:4},children:d.jsx(An,{title:"Average Scene Time",value:ce(n.mean.sceneTime),icon:d.jsx(wc,{}),secondaryValue:ce(n.median.sceneTime),secondaryLabel:"median",color:"#d32f2f"})}),d.jsx(B,{size:{xs:12,sm:6,md:4},children:d.jsx(An,{title:"Average Total Incident Time",value:ce(n.mean.totalIncidentTime),icon:d.jsx(vf,{}),secondaryValue:ce(n.median.totalIncidentTime),secondaryLabel:"median",color:"#0288d1"})})]}),d.jsx(Bt,{sx:{mb:4}}),d.jsx(M,{variant:"h6",gutterBottom:!0,children:"Detailed Response Time Statistics"}),d.jsx(hc,{component:Ve,variant:"outlined",sx:{mb:4},children:d.jsxs(fc,{size:"small",children:[d.jsx(pc,{children:d.jsxs(Et,{children:[d.jsx(Z,{children:"Metric"}),d.jsx(Z,{align:"right",children:"Mean"}),d.jsx(Z,{align:"right",children:"Median"}),d.jsx(Z,{align:"right",children:"90th Percentile"}),d.jsx(Z,{align:"right",children:"Min"}),d.jsx(Z,{align:"right",children:"Max"}),d.jsx(Z,{align:"right",children:"Std Dev"})]})}),d.jsxs(mc,{children:[d.jsxs(Et,{children:[d.jsx(Z,{children:"Dispatch Time"}),d.jsx(Z,{align:"right",children:me(n.mean.dispatchTime,"dispatch")}),d.jsx(Z,{align:"right",children:me(n.median.dispatchTime,"dispatch")}),d.jsx(Z,{align:"right",children:me(n.ninetiethPercentile.dispatchTime,"dispatch")}),d.jsx(Z,{align:"right",children:me(n.min.dispatchTime,"dispatch")}),d.jsx(Z,{align:"right",children:me(n.max.dispatchTime,"dispatch")}),d.jsx(Z,{align:"right",children:me(n.standardDeviation.dispatchTime,"dispatch")})]}),d.jsxs(Et,{children:[d.jsx(Z,{children:"Turnout Time"}),d.jsx(Z,{align:"right",children:me(n.mean.turnoutTime,"turnout")}),d.jsx(Z,{align:"right",children:me(n.median.turnoutTime,"turnout")}),d.jsx(Z,{align:"right",children:me(n.ninetiethPercentile.turnoutTime,"turnout")}),d.jsx(Z,{align:"right",children:me(n.min.turnoutTime,"turnout")}),d.jsx(Z,{align:"right",children:me(n.max.turnoutTime,"turnout")}),d.jsx(Z,{align:"right",children:me(n.standardDeviation.turnoutTime,"turnout")})]}),d.jsxs(Et,{children:[d.jsx(Z,{children:"Travel Time"}),d.jsx(Z,{align:"right",children:me(n.mean.travelTime,"travel")}),d.jsx(Z,{align:"right",children:me(n.median.travelTime,"travel")}),d.jsx(Z,{align:"right",children:me(n.ninetiethPercentile.travelTime,"travel")}),d.jsx(Z,{align:"right",children:me(n.min.travelTime,"travel")}),d.jsx(Z,{align:"right",children:me(n.max.travelTime,"travel")}),d.jsx(Z,{align:"right",children:me(n.standardDeviation.travelTime,"travel")})]}),d.jsxs(Et,{sx:{bgcolor:"action.hover"},children:[d.jsx(Z,{children:d.jsx("strong",{children:"Total Response Time"})}),d.jsx(Z,{align:"right",children:d.jsx("strong",{children:me(n.mean.totalResponseTime,"total")})}),d.jsx(Z,{align:"right",children:d.jsx("strong",{children:me(n.median.totalResponseTime,"total")})}),d.jsx(Z,{align:"right",children:d.jsx("strong",{children:me(n.ninetiethPercentile.totalResponseTime,"total")})}),d.jsx(Z,{align:"right",children:d.jsx("strong",{children:me(n.min.totalResponseTime,"total")})}),d.jsx(Z,{align:"right",children:d.jsx("strong",{children:me(n.max.totalResponseTime,"total")})}),d.jsx(Z,{align:"right",children:d.jsx("strong",{children:me(n.standardDeviation.totalResponseTime,"total")})})]}),d.jsxs(Et,{children:[d.jsx(Z,{children:"Scene Time"}),d.jsx(Z,{align:"right",children:me(n.mean.sceneTime,"scene")}),d.jsx(Z,{align:"right",children:me(n.median.sceneTime,"scene")}),d.jsx(Z,{align:"right",children:me(n.ninetiethPercentile.sceneTime,"scene")}),d.jsx(Z,{align:"right",children:me(n.min.sceneTime,"scene")}),d.jsx(Z,{align:"right",children:me(n.max.sceneTime,"scene")}),d.jsx(Z,{align:"right",children:me(n.standardDeviation.sceneTime,"scene")})]}),d.jsxs(Et,{children:[d.jsx(Z,{children:"Total Incident Time"}),d.jsx(Z,{align:"right",children:me(n.mean.totalIncidentTime,"incident")}),d.jsx(Z,{align:"right",children:me(n.median.totalIncidentTime,"incident")}),d.jsx(Z,{align:"right",children:me(n.ninetiethPercentile.totalIncidentTime,"incident")}),d.jsx(Z,{align:"right",children:me(n.min.totalIncidentTime,"incident")}),d.jsx(Z,{align:"right",children:me(n.max.totalIncidentTime,"incident")}),d.jsx(Z,{align:"right",children:me(n.standardDeviation.totalIncidentTime,"incident")})]})]})]})}),d.jsx(M,{variant:"body2",color:"text.secondary",children:"* Times are displayed using industry-standard units: dispatch times in seconds, longer intervals in minutes and seconds."})]})},Rf=({count:n,maxCount:e,label:t,color:i,height:s=150,showValue:r=!0})=>{const o=e>0?Math.max(n>0?12:0,n/e*100):0;return d.jsxs(N,{sx:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:55,mx:.5},children:[d.jsx(N,{sx:{height:s,display:"flex",alignItems:"flex-end"},children:d.jsx(N,{sx:{width:45,height:`${o}%`,bgcolor:n>0?i:"rgba(0,0,0,0.1)",borderTopLeftRadius:8,borderTopRightRadius:8,position:"relative",border:`2px solid ${n>0?i:"rgba(0,0,0,0.2)"}`,transition:"all 0.3s ease-in-out",boxShadow:n>0?`0 2px 4px ${i}30`:"none","&:hover":{opacity:.85,transform:"translateY(-3px)",boxShadow:n>0?`0 6px 12px ${i}50`:"0 2px 4px rgba(0,0,0,0.2)",cursor:"pointer"}},children:r&&n>0&&d.jsx(M,{variant:"caption",sx:{position:"absolute",top:-26,left:"50%",transform:"translateX(-50%)",whiteSpace:"nowrap",fontWeight:700,color:"text.primary",fontSize:"0.8rem",bgcolor:"white",px:.8,py:.2,borderRadius:1,border:`1px solid ${i}`,boxShadow:`0 2px 4px ${i}30`},children:n})})}),d.jsx(M,{variant:"caption",sx:{mt:2,textAlign:"center",fontSize:"0.75rem",fontWeight:600,color:"text.primary",lineHeight:1.3,bgcolor:"white",px:.8,py:.4,borderRadius:1,border:"1px solid",borderColor:"grey.300",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",minHeight:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:t})]})},Pc=()=>{const{incidents:n}=Ie(r=>r.analyzer.rawData),{responseTimeStats:e}=Ie(r=>r.analyzer.calculatedMetrics),t={fast:"#2E7D32",average:"#1976D2",slow:"#F57C00",verySlow:"#D32F2F"},i=T.useMemo(()=>{if(!n.length||!e)return null;const o=n.map(ut).map(u=>u.totalResponseTime).filter(u=>u!==null);if(!o.length)return null;const l=[{min:0,max:240,label:`0-4 min
(Excellent)`,color:t.fast},{min:240,max:360,label:`4-6 min
(Good)`,color:t.fast},{min:360,max:480,label:`6-8 min
(Target)`,color:t.average},{min:480,max:600,label:`8-10 min
(Fair)`,color:t.average},{min:600,max:900,label:`10-15 min
(Slow)`,color:t.slow},{min:900,max:1200,label:`15-20 min
(Concern)`,color:t.verySlow},{min:1200,max:1/0,label:`20+ min
(Critical)`,color:t.verySlow}].map(u=>{const h=o.filter(f=>f>=u.min&&f<u.max).length;return{...u,count:h}}),c=Math.max(...l.map(u=>u.count));return{buckets:l,maxCount:c,totalCount:o.length}},[n,e,t]),s=T.useMemo(()=>{if(!n.length||!e)return null;const o=n.map(ut).map(l=>l.totalResponseTime).filter(l=>l!==null);return o.length?[{max:240,label:"Under 4 min",color:t.fast},{max:480,label:"Under 8 min",color:t.average},{max:600,label:"Under 10 min",color:t.average}].map(l=>{const c=o.filter(h=>h<=l.max).length,u=c/o.length*100;return{...l,count:c,percentage:Math.round(u)}}):null},[n,e,t]);return!i||!s?d.jsxs(N,{sx:{p:3},children:[d.jsx(M,{variant:"h6",gutterBottom:!0,children:"Response Time Distribution"}),d.jsx(M,{variant:"body1",color:"text.secondary",children:"No incident data available for distribution analysis."})]}):d.jsxs(N,{sx:{p:3},children:[d.jsx(M,{variant:"h6",gutterBottom:!0,children:"Response Time Distribution"}),d.jsxs(B,{container:!0,spacing:3,children:[d.jsx(B,{size:{xs:12},children:d.jsxs(Ve,{variant:"outlined",sx:{p:3,background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",border:"2px solid",borderColor:"primary.light"},children:[d.jsxs(N,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[d.jsx(M,{variant:"subtitle1",sx:{fontWeight:600,color:"primary.dark"},children:"Response Time Frequency Distribution"}),d.jsx(M,{variant:"caption",color:"text.secondary",sx:{fontStyle:"italic"},children:"NFPA 1710 Performance Analysis"})]}),d.jsxs(N,{sx:{mt:3,display:"flex",justifyContent:"center",alignItems:"flex-end",height:280,px:3,gap:2,position:"relative",borderLeft:"3px solid #424242",borderBottom:"3px solid #424242",ml:6,mb:6,mr:3,bgcolor:"rgba(248, 250, 252, 0.5)",borderRadius:"4px 0 0 0"},children:[d.jsx(N,{sx:{position:"absolute",left:-35,height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"flex-end",py:1},children:[...Array(6)].map((r,o)=>d.jsx(M,{variant:"caption",color:"text.primary",sx:{fontSize:"0.75rem",fontWeight:500,bgcolor:"white",px:.5,borderRadius:.5},children:Math.round(i.maxCount/5*(5-o))},o))}),d.jsx(M,{variant:"caption",color:"text.primary",sx:{position:"absolute",left:-70,top:"50%",transform:"translateY(-50%) rotate(-90deg)",fontWeight:600,transformOrigin:"center",fontSize:"0.8rem",letterSpacing:"0.5px"},children:"Number of Incidents"}),i.buckets.map((r,o)=>d.jsx(Rf,{count:r.count,maxCount:i.maxCount,label:r.label,color:r.color,height:240},o)),d.jsx(M,{variant:"caption",color:"text.primary",sx:{position:"absolute",bottom:-40,left:"50%",transform:"translateX(-50%)",fontWeight:600,fontSize:"0.8rem",letterSpacing:"0.5px",bgcolor:"white",px:1,borderRadius:1},children:"Response Time Ranges"})]}),d.jsxs(N,{sx:{mt:4,p:2,bgcolor:"rgba(255,255,255,0.8)",borderRadius:2,border:"1px solid",borderColor:"grey.200"},children:[d.jsxs(M,{variant:"body2",color:"text.primary",sx:{textAlign:"center",fontWeight:500},children:["Distribution of ",d.jsxs("strong",{children:[i.totalCount," incidents"]})," by total response time"]}),d.jsx(M,{variant:"caption",color:"text.secondary",sx:{textAlign:"center",display:"block",mt:.5},children:"Bars show incident count in each time range â€¢ Hover for details â€¢ Performance ratings based on NFPA 1710 standards"})]})]})}),d.jsx(B,{size:{xs:12},children:d.jsxs(Ve,{variant:"outlined",sx:{p:2},children:[d.jsx(M,{variant:"subtitle1",gutterBottom:!0,children:"Response Time Compliance"}),d.jsx(B,{container:!0,spacing:3,sx:{mt:1},children:s.map((r,o)=>d.jsx(B,{size:{xs:12,sm:4},children:d.jsxs(N,{sx:{bgcolor:"background.default",p:2,borderRadius:1,border:`1px solid ${r.color}`,height:"100%"},children:[d.jsxs(M,{variant:"h5",gutterBottom:!0,sx:{color:r.color,fontWeight:"bold"},children:[r.percentage,"%"]}),d.jsx(M,{variant:"body2",gutterBottom:!0,children:r.label}),d.jsxs(M,{variant:"caption",color:"text.secondary",children:[r.count," of ",i.totalCount," incidents"]})]})},o))}),e&&d.jsx(N,{sx:{mt:3},children:d.jsxs(M,{variant:"body2",color:"text.secondary",children:["Average response time: ",ce(e.mean.totalResponseTime)," | Median: ",ce(e.median.totalResponseTime)," | 90th percentile: ",ce(e.ninetiethPercentile.totalResponseTime)]})})]})})]})]})},oa={lat:34.0522,lng:-118.2437},aa=11,Of=({incidents:n,colorBy:e,onIncidentSelect:t})=>{const i=As(),s=T.useRef(null),r=T.useRef(null),o=T.useRef(null),{expandedPanels:a}=Ie(p=>p.analyzer.ui),l=a.includes("incident-map"),c=T.useMemo(()=>n.map(p=>{const m={...p};return p.Latitude!==void 0&&!p.latitude&&(m.latitude=p.Latitude),p.Longitude!==void 0&&!p.longitude&&(m.longitude=p.Longitude),p.Address!==void 0&&!p.address&&(m.address=p.Address),console.log("HOTFIX: Converted field names for incident:",p.incidentId,"lat:",m.latitude,"lng:",m.longitude),m}),[n]),u=T.useMemo(()=>{if(c.length===0)return oa;const p=c.filter(g=>g.latitude!=null&&g.longitude!=null);if(p.length===0)return oa;const m=p.reduce((g,x)=>g+(x.latitude||0),0),y=p.reduce((g,x)=>g+(x.longitude||0),0);return{lat:m/p.length,lng:y/p.length}},[c]),h=T.useMemo(()=>c.filter(p=>p.latitude!=null&&p.longitude!=null).length,[c]),f=p=>{if(e==="responseTime"){const y=ut(p).totalResponseTime;if(y===null)return"#9e9e9e";const g=y/60;return g<4?"#4caf50":g<8?"#2196f3":g<12?"#ff9800":"#f44336"}else if(e==="incidentType"){const m=(typeof p.incidentType=="string"?p.incidentType:String(p.incidentType||"")).toLowerCase()||"other";return m.includes("fire")?"#f44336":m.includes("ems")||m.includes("medical")?"#2196f3":m.includes("rescue")?"#ff9800":"#4caf50"}else if(e==="unit"){const m=(typeof p.incidentType=="string"?p.incidentType:String(p.incidentType||"")).toLowerCase()||"other";return m.includes("engine")?"#f44336":m.includes("ambulance")||m.includes("ems")?"#2196f3":m.includes("truck")?"#ff9800":"#4caf50"}return"#2196f3"};return T.useEffect(()=>{if(!s.current||r.current)return;const p=Rn.map(s.current,{center:[u.lat,u.lng],zoom:aa,zoomControl:!0,attributionControl:!0});Rn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Â© OpenStreetMap contributors",maxZoom:19}).addTo(p);const m=Rn.layerGroup().addTo(p);return r.current=p,o.current=m,()=>{r.current&&(r.current.remove(),r.current=null,o.current=null)}},[]),T.useEffect(()=>{r.current&&h>0&&r.current.setView([u.lat,u.lng],aa)},[u,h]),T.useEffect(()=>{r.current&&setTimeout(()=>{var p;(p=r.current)==null||p.invalidateSize()},100)},[c]),T.useEffect(()=>{if(!s.current||!r.current)return;const p=new ResizeObserver(()=>{r.current&&setTimeout(()=>{var m;(m=r.current)==null||m.invalidateSize()},150)});return p.observe(s.current),()=>{p.disconnect()}},[]),T.useEffect(()=>{if(!r.current||!o.current)return;o.current.clearLayers();const p=c.filter(m=>m.latitude!=null&&m.longitude!=null);if(p.forEach(m=>{const y=m.latitude,g=m.longitude,x=f(m),v=Rn.divIcon({className:"custom-marker",html:`<div style="
          background-color: ${x};
          width: 20px;
          height: 20px;
          border-radius: 50%;
          border: 2px solid white;
          box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        "></div>`,iconSize:[20,20],iconAnchor:[10,10]}),b=Rn.marker([y,g],{icon:v}),S=ut(m),C=`
        <div style="min-width: 200px;">
          <h4 style="margin: 0 0 8px 0;">Incident ${m.incidentId}</h4>
          <p style="margin: 0 0 4px 0;"><strong>Type:</strong> ${m.incidentType||"Unknown"}</p>
          <p style="margin: 0 0 4px 0;"><strong>Date:</strong> ${m.incidentDate||"Unknown"}</p>
          <p style="margin: 0 0 4px 0;"><strong>Response Time:</strong> ${ce(S.totalResponseTime)}</p>
          ${m.address?`<p style="margin: 0 0 4px 0;"><strong>Address:</strong> ${m.address}</p>`:""}
        </div>
      `;b.bindPopup(C),b.on("click",()=>{t&&t(m.incidentId)}),o.current.addLayer(b)}),p.length>0){const m=new Rn.FeatureGroup(o.current.getLayers());r.current.fitBounds(m.getBounds().pad(.1))}},[c,e,t]),h===0?d.jsxs(N,{sx:{position:"relative",height:500,width:"100%",bgcolor:i.palette.grey[100],borderRadius:1,overflow:"hidden",border:`1px solid ${i.palette.divider}`,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",p:3},children:[d.jsx(gc,{sx:{fontSize:40,color:"text.secondary",mb:2}}),d.jsx(M,{variant:"h6",gutterBottom:!0,children:"No Location Data Available"}),d.jsxs(M,{variant:"body2",color:"text.secondary",align:"center",children:["None of the incidents have valid latitude/longitude coordinates.",d.jsx("br",{}),"Please ensure your data includes location information."]})]}):d.jsxs(N,{sx:{position:"relative",height:l?"calc(100vh - 200px)":"100%",minHeight:{xs:500,sm:600,md:700},width:"100%",maxWidth:"100%",borderRadius:1,overflow:"hidden",border:`1px solid ${i.palette.divider}`,"& .leaflet-container":{width:"100% !important",height:"100% !important"}},children:[d.jsx("div",{ref:s,style:{height:"100%",width:"100%",minWidth:"300px"}}),d.jsxs(N,{sx:{position:"absolute",top:10,right:10,bgcolor:"background.paper",p:1.5,borderRadius:1,boxShadow:2,zIndex:1e3},children:[d.jsxs(M,{variant:"body2",gutterBottom:!0,children:[d.jsx("strong",{children:h})," incidents with location data"]}),d.jsxs(M,{variant:"caption",color:"text.secondary",children:["Center: ",u.lat.toFixed(4),", ",u.lng.toFixed(4)]})]}),d.jsxs(N,{sx:{position:"absolute",bottom:10,left:10,bgcolor:"background.paper",p:1.5,borderRadius:1,boxShadow:2,zIndex:1e3},children:[d.jsxs(M,{variant:"body2",gutterBottom:!0,children:[d.jsx("strong",{children:"Color Legend:"}),e==="responseTime"&&" Response Time",e==="incidentType"&&" Incident Type",e==="unit"&&" Responding Unit"]}),d.jsxs(N,{sx:{display:"flex",gap:1,flexWrap:"wrap",mt:1},children:[e==="responseTime"&&d.jsxs(d.Fragment,{children:[d.jsx(Re,{size:"small",label:"< 4 min",sx:{bgcolor:"#4caf50",color:"white"}}),d.jsx(Re,{size:"small",label:"4-8 min",sx:{bgcolor:"#2196f3",color:"white"}}),d.jsx(Re,{size:"small",label:"8-12 min",sx:{bgcolor:"#ff9800",color:"white"}}),d.jsx(Re,{size:"small",label:"> 12 min",sx:{bgcolor:"#f44336",color:"white"}}),d.jsx(Re,{size:"small",label:"No time data",sx:{bgcolor:"#9e9e9e",color:"white"}})]}),e==="incidentType"&&d.jsxs(d.Fragment,{children:[d.jsx(Re,{size:"small",label:"Fire",sx:{bgcolor:"#f44336",color:"white"}}),d.jsx(Re,{size:"small",label:"EMS",sx:{bgcolor:"#2196f3",color:"white"}}),d.jsx(Re,{size:"small",label:"Rescue",sx:{bgcolor:"#ff9800",color:"white"}}),d.jsx(Re,{size:"small",label:"Other",sx:{bgcolor:"#4caf50",color:"white"}})]}),e==="unit"&&d.jsxs(d.Fragment,{children:[d.jsx(Re,{size:"small",label:"Engine",sx:{bgcolor:"#f44336",color:"white"}}),d.jsx(Re,{size:"small",label:"Ambulance",sx:{bgcolor:"#2196f3",color:"white"}}),d.jsx(Re,{size:"small",label:"Truck",sx:{bgcolor:"#ff9800",color:"white"}}),d.jsx(Re,{size:"small",label:"Other",sx:{bgcolor:"#4caf50",color:"white"}})]})]})]})]})},Af=({incident:n})=>{const e=T.useMemo(()=>ut(n),[n]);return d.jsx(vn,{variant:"outlined",sx:{mb:2},children:d.jsxs(wn,{children:[d.jsxs(M,{variant:"h6",gutterBottom:!0,children:["Incident ",n.incidentId]}),d.jsx(N,{sx:{mb:2},children:d.jsxs(B,{container:!0,spacing:2,children:[d.jsxs(B,{size:{xs:12,sm:6},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Date & Time"}),d.jsxs(M,{variant:"body1",children:[n.incidentDate," ",n.incidentTime?`at ${n.incidentTime}`:""]})]}),d.jsxs(B,{size:{xs:12,sm:6},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Type"}),d.jsx(M,{variant:"body1",children:n.incidentType||"Unknown"})]})]})}),d.jsx(Bt,{sx:{my:1.5}}),d.jsxs(N,{sx:{display:"flex",gap:2,alignItems:"center",mb:1.5},children:[d.jsx(gc,{color:"primary"}),d.jsx(M,{children:n.latitude!=null&&n.longitude!=null?`${n.latitude.toFixed(6)}, ${n.longitude.toFixed(6)}`:"No coordinates available"})]}),n.address&&d.jsxs(M,{variant:"body2",sx:{ml:4,mb:1.5},children:[n.address,n.city?`, ${n.city}`:"",n.state?`, ${n.state}`:"",n.zipCode?` ${n.zipCode}`:""]}),d.jsx(Bt,{sx:{my:1.5}}),d.jsx(M,{variant:"subtitle2",gutterBottom:!0,children:"Response Times:"}),d.jsxs(B,{container:!0,spacing:1,children:[d.jsxs(B,{size:{xs:6},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Dispatch:"}),d.jsx(M,{variant:"body1",children:ce(e.dispatchTime)})]}),d.jsxs(B,{size:{xs:6},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Turnout:"}),d.jsx(M,{variant:"body1",children:ce(e.turnoutTime)})]}),d.jsxs(B,{size:{xs:6},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Travel:"}),d.jsx(M,{variant:"body1",children:ce(e.travelTime)})]}),d.jsxs(B,{size:{xs:6},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Total:"}),d.jsx(M,{variant:"body1",children:ce(e.totalResponseTime)})]})]})]})})},Ff=({incidents:n})=>{const{responseTimeStats:e}=Ie(s=>s.analyzer.calculatedMetrics),t=T.useMemo(()=>{const s={};return n.forEach(r=>{const o=r.incidentType||"Unknown";s[o]=(s[o]||0)+1}),s},[n]),i=T.useMemo(()=>Object.entries(t).sort((s,r)=>r[1]-s[1]).slice(0,3),[t]);return e?d.jsx(vn,{variant:"outlined",children:d.jsxs(wn,{children:[d.jsx(M,{variant:"h6",gutterBottom:!0,children:"Regional Statistics"}),d.jsxs(M,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Based on ",n.length," incidents"]}),d.jsx(Bt,{sx:{my:1.5}}),d.jsx(M,{variant:"subtitle2",gutterBottom:!0,children:"Response Times:"}),d.jsxs(B,{container:!0,spacing:1,sx:{mb:2},children:[d.jsxs(B,{size:{xs:12,sm:4},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Average:"}),d.jsx(M,{variant:"body1",children:ce(e.mean.totalResponseTime)})]}),d.jsxs(B,{size:{xs:12,sm:4},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Median:"}),d.jsx(M,{variant:"body1",children:ce(e.median.totalResponseTime)})]}),d.jsxs(B,{size:{xs:12,sm:4},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"90th Percentile:"}),d.jsx(M,{variant:"body1",children:ce(e.ninetiethPercentile.totalResponseTime)})]})]}),d.jsx(Bt,{sx:{my:1.5}}),d.jsx(M,{variant:"subtitle2",gutterBottom:!0,children:"Top Incident Types:"}),d.jsx(N,{sx:{mt:1},children:i.map(([s,r])=>d.jsxs(N,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[d.jsx(M,{variant:"body2",children:s}),d.jsxs(M,{variant:"body2",children:[r," incidents"]})]},s))})]})}):null},Dc=()=>{console.log("INCIDENT_MAP_COMPONENT: Component is rendering!");const n=en(),{incidents:e}=Ie(c=>c.analyzer.rawData);console.log("INCIDENT_MAP_COMPONENT: Received",(e==null?void 0:e.length)||0,"incidents");const t=Ie(c=>c.analyzer.ui.selectedIncidentId),[i,s]=T.useState("responseTime"),r=T.useMemo(()=>t&&e.find(c=>c.incidentId===t)||null,[e,t]),o=T.useMemo(()=>e.some(c=>c.latitude!=null&&c.longitude!=null),[e]),a=c=>{s(c.target.value)},l=c=>{n({type:"analyzer/setSelectedIncident",payload:c})};return e.length?d.jsxs(N,{sx:{p:3},children:[d.jsx(M,{variant:"h6",gutterBottom:!0,children:"Incident Map"}),!o&&d.jsx($t,{severity:"warning",sx:{mb:3},children:"None of the incidents in your dataset have location coordinates (latitude/longitude). The map visualization requires geographic coordinates to display incidents."}),d.jsxs(N,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs(M,{variant:"body2",color:"text.secondary",children:["Showing ",e.length," incidents"]}),d.jsxs(nc,{size:"small",sx:{width:200},children:[d.jsx(ic,{id:"color-by-label",children:"Color By"}),d.jsxs(Sh,{labelId:"color-by-label",value:i,label:"Color By",onChange:a,children:[d.jsx(Js,{value:"responseTime",children:"Response Time"}),d.jsx(Js,{value:"incidentType",children:"Incident Type"}),d.jsx(Js,{value:"unit",children:"Responding Unit"})]})]})]}),d.jsxs(B,{container:!0,spacing:3,children:[d.jsx(B,{size:{xs:12,md:r?8:12},sx:{width:"100%"},children:d.jsx(N,{sx:{width:"100%",height:"100%",minHeight:{xs:500,sm:600,md:700},display:"flex",flexDirection:"column"},children:d.jsx(N,{sx:{flex:1,minHeight:0},children:d.jsx(Of,{incidents:e,colorBy:i,onIncidentSelect:l})})})}),r&&d.jsxs(B,{size:{xs:12,md:4},children:[d.jsx(Af,{incident:r}),d.jsx(Ff,{incidents:e})]})]})]}):d.jsxs(N,{sx:{p:3},children:[d.jsx(M,{variant:"h6",gutterBottom:!0,children:"Incident Map"}),d.jsx(M,{variant:"body1",color:"text.secondary",children:"No incident data available for mapping."})]})},Ef=n=>{if(!n)return"N/A";try{const e=n.split(" ");return e.length>=1?e[0]:n}catch{return n}},Lf=n=>{if(!n)return"N/A";try{const e=n.split(" ");return e.length>=2?e[1]:n}catch{return n}},Rt=[{id:"incidentId",label:"Incident ID",minWidth:120},{id:"incidentDate",label:"Incident Date",minWidth:110},{id:"incidentTime",label:"Time",minWidth:80},{id:"incidentType",label:"Type",minWidth:120},{id:"dispatchTime",label:"Dispatch Time",align:"right",minWidth:100,format:n=>n===null?"N/A":ce(n)},{id:"turnoutTime",label:"Turnout Time",align:"right",minWidth:100,format:n=>n===null?"N/A":ce(n)},{id:"travelTime",label:"Travel Time",align:"right",minWidth:100,format:n=>n===null?"N/A":ce(n)},{id:"totalResponseTime",label:"Total Response Time",align:"right",minWidth:150,format:n=>n===null?"N/A":ce(n)},{id:"respondingUnit",label:"Unit",minWidth:80},{id:"address",label:"Location",minWidth:200}],Cc=()=>{const n=en(),{incidents:e}=Ie(w=>w.analyzer.rawData),{responseTimeStats:t}=Ie(w=>w.analyzer.calculatedMetrics),i=Ie(w=>w.analyzer.ui.selectedIncidentId),[s,r]=T.useState(0),[o,a]=T.useState(10),[l,c]=T.useState("incidentDate"),[u,h]=T.useState("desc"),[f,p]=T.useState(""),m=T.useMemo(()=>e.map(w=>{const P=ut(w);return{...w,...P}}),[e]),y=T.useMemo(()=>{if(!f)return m;const w=f.toLowerCase();return m.filter(P=>P.incidentId&&P.incidentId.toLowerCase().includes(w)||P.incidentType&&(typeof P.incidentType=="string"?P.incidentType:String(P.incidentType)).toLowerCase().includes(w)||P.respondingUnit&&P.respondingUnit.toLowerCase().includes(w)||P.address&&P.address.toLowerCase().includes(w))},[m,f]),g=T.useMemo(()=>y.length?[...y].sort((w,P)=>{const j=w[l],A=P[l];return j==null&&A==null?0:j==null?u==="asc"?-1:1:A==null?u==="asc"?1:-1:u==="asc"?j<A?-1:j>A?1:0:A<j?-1:A>j?1:0}):[],[y,l,u]),x=T.useMemo(()=>{const w=s*o;return g.slice(w,w+o)},[g,s,o]),v=w=>{h(l===w&&u==="asc"?"desc":"asc"),c(w)},b=(w,P)=>{r(P)},S=w=>{a(parseInt(w.target.value,10)),r(0)},C=w=>{p(w.target.value),r(0)},_=w=>{n(ah(w===i?null:w))},O=w=>{if(w===null||!t)return"unknown";const P=t.ninetiethPercentile.totalResponseTime||0,j=t.mean.totalResponseTime||0;return w>P?"slow":w<j?"fast":"average"};return d.jsxs(N,{sx:{p:3},children:[d.jsxs(N,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs(M,{variant:"h6",children:["Incident Data",d.jsxs(M,{variant:"body2",color:"text.secondary",component:"span",sx:{ml:1},children:["(",y.length," incidents)"]})]}),d.jsx(_e,{size:"small",variant:"outlined",placeholder:"Search incidents...",value:f,onChange:C,InputProps:{startAdornment:d.jsx(sc,{position:"start",children:d.jsx(Ph,{})})},sx:{width:250}})]}),d.jsxs(Ve,{variant:"outlined",children:[d.jsx(hc,{sx:{maxHeight:600},children:d.jsxs(fc,{stickyHeader:!0,size:"small",children:[d.jsx(pc,{children:d.jsxs(Et,{children:[Rt.map(w=>d.jsx(Z,{align:w.align,style:{minWidth:w.minWidth},sortDirection:l===w.id?u:!1,children:d.jsx(mf,{active:l===w.id,direction:l===w.id?u:"asc",onClick:()=>v(w.id),children:w.label})},w.id)),d.jsx(Z,{style:{minWidth:50}})]})}),d.jsxs(mc,{children:[x.map(w=>{const P=O(w.totalResponseTime);return d.jsxs(Et,{hover:!0,selected:w.incidentId===i,onClick:()=>_(w.incidentId),sx:{cursor:"pointer"},children:[d.jsx(Z,{children:w.incidentId}),d.jsx(Z,{children:Ef(w.incidentDate||w.incidentTime)}),d.jsx(Z,{children:Lf(w.incidentTime||w.incidentDate)}),d.jsx(Z,{children:w.incidentType?d.jsx(Re,{size:"small",label:w.incidentType,color:w.incidentType.toLowerCase().includes("fire")?"error":w.incidentType.toLowerCase().includes("ems")?"primary":"default",variant:"outlined"}):"Unknown"}),d.jsx(Z,{align:"right",children:Rt[4].format?Rt[4].format(w.dispatchTime):w.dispatchTime||"N/A"}),d.jsx(Z,{align:"right",children:Rt[5].format?Rt[5].format(w.turnoutTime):w.turnoutTime||"N/A"}),d.jsx(Z,{align:"right",children:Rt[6].format?Rt[6].format(w.travelTime):w.travelTime||"N/A"}),d.jsx(Z,{align:"right",children:d.jsxs(N,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[P==="fast"&&d.jsx(Ir,{fontSize:"small",color:"success",sx:{mr:.5}}),P==="average"&&d.jsx(or,{fontSize:"small",color:"primary",sx:{mr:.5}}),P==="slow"&&d.jsx(ea,{fontSize:"small",color:"error",sx:{mr:.5}}),Rt[7].format?Rt[7].format(w.totalResponseTime):w.totalResponseTime||"N/A"]})}),d.jsx(Z,{children:w.respondingUnit||"N/A"}),d.jsx(Z,{children:w.address&&w.address!=="N/A"?d.jsxs(N,{children:[d.jsx(M,{variant:"body2",children:w.address}),(w.city||w.state)&&d.jsxs(M,{variant:"caption",color:"text.secondary",children:[w.city,w.city&&w.state?", ":"",w.state]}),w.latitude&&w.longitude&&d.jsxs(M,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:[w.latitude.toFixed(4),", ",w.longitude.toFixed(4)]})]}):w.latitude&&w.longitude?d.jsxs(M,{variant:"caption",color:"text.secondary",children:[w.latitude.toFixed(4),", ",w.longitude.toFixed(4)]}):d.jsx(M,{variant:"body2",color:"text.secondary",children:"No location data"})}),d.jsx(Z,{children:d.jsx(Sn,{size:"small",onClick:j=>{j.stopPropagation(),_(w.incidentId)},children:d.jsx(or,{fontSize:"small"})})})]},w.incidentId)}),x.length===0&&d.jsx(Et,{children:d.jsx(Z,{colSpan:Rt.length+1,align:"center",children:y.length===0&&f?d.jsxs(M,{variant:"body2",sx:{py:2},children:['No matching incidents found for "',f,'". Try a different search term.']}):e.length===0?d.jsx(M,{variant:"body2",sx:{py:2},children:"No incident data available. Please load incident data."}):d.jsx(M,{variant:"body2",sx:{py:2},children:"No incidents to display."})})})]})]})}),d.jsx(Lh,{rowsPerPageOptions:[10,25,50,100],component:"div",count:y.length,rowsPerPage:o,page:s,onPageChange:b,onRowsPerPageChange:S})]}),d.jsx(N,{sx:{mt:2},children:d.jsxs(M,{variant:"caption",color:"text.secondary",children:["* Response time status indicators:",d.jsx(Ir,{fontSize:"small",color:"success",sx:{ml:1,mr:.5,verticalAlign:"middle"}}),"Fast (below average),",d.jsx(or,{fontSize:"small",color:"primary",sx:{ml:1,mr:.5,verticalAlign:"middle"}}),"Average (within normal range),",d.jsx(ea,{fontSize:"small",color:"error",sx:{ml:1,mr:.5,verticalAlign:"middle"}}),"Slow (above 90th percentile)"]})})]})},si=B,Gi=({id:n,title:e,children:t,height:i=300})=>{const s=en(),{expandedPanels:r}=Ie(l=>l.analyzer.ui),o=r.includes(n),a=()=>{s(lh(n))};return d.jsxs(Ve,{sx:{height:o?"calc(100vh - 160px)":i,display:"flex",flexDirection:"column",transition:"height 0.3s ease",position:o?"fixed":"relative",top:o?"70px":"auto",left:o?"20px":"auto",right:o?"20px":"auto",zIndex:o?1200:"auto",width:o?"calc(100% - 40px)":"100%"},elevation:o?8:1,children:[d.jsxs(N,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,borderBottom:"1px solid",borderColor:"divider"},children:[d.jsx(M,{variant:"h6",children:e}),d.jsxs(N,{children:[d.jsx(Sn,{size:"small",sx:{mr:1},children:d.jsx(Dh,{fontSize:"small"})}),d.jsx(Sn,{size:"small",onClick:a,children:o?d.jsx(gh,{fontSize:"small"}):d.jsx(yh,{fontSize:"small"})})]})]}),d.jsx(N,{sx:{p:2,overflow:"auto",flexGrow:1,display:"flex",flexDirection:"column"},children:t})]})},Nf=()=>{const{activeDashboardPanels:n}=Ie(e=>e.analyzer.ui);return d.jsx(N,{sx:{p:2},children:d.jsxs(si,{container:!0,spacing:3,children:[n.includes("response-time-summary")&&d.jsx(si,{size:{xs:12,md:6},children:d.jsx(Gi,{id:"response-time-summary",title:"Response Time Summary",children:d.jsx(N,{sx:{maxHeight:300,overflow:"auto"},children:d.jsx(Sc,{})})})}),n.includes("time-distribution")&&d.jsx(si,{size:{xs:12,md:6},children:d.jsx(Gi,{id:"time-distribution",title:"Response Time Distribution",children:d.jsx(N,{sx:{minHeight:400,overflow:"visible"},children:d.jsx(Pc,{})})})}),n.includes("incident-map")&&d.jsx(si,{size:{xs:12},children:d.jsx(Gi,{id:"incident-map",title:"Incident Map",height:400,children:d.jsx(N,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:d.jsx(Dc,{})})})}),n.includes("incident-table")&&d.jsx(si,{size:{xs:12},children:d.jsx(Gi,{id:"incident-table",title:"Incident Data",height:350,children:d.jsx(N,{sx:{maxHeight:300,overflow:"auto"},children:d.jsx(Cc,{})})})})]})})},la=({incident:n,colors:e,showLabels:t=!0,compact:i=!1})=>{const s=T.useMemo(()=>ut(n),[n]),r=s.totalIncidentTime||0;if(r===0)return d.jsx(N,{sx:{height:i?20:40,display:"flex",alignItems:"center",bgcolor:"action.hover",borderRadius:1,px:1},children:d.jsx(M,{variant:"caption",color:"text.secondary",children:"No time data available"})});const o=(s.dispatchTime||0)/r*100,a=(s.turnoutTime||0)/r*100,l=(s.travelTime||0)/r*100,c=(s.sceneTime||0)/r*100;return d.jsxs(N,{sx:{mb:i?.5:2},children:[!i&&t&&d.jsxs(M,{variant:"body2",gutterBottom:!0,children:[n.incidentId," ",n.incidentType?`(${n.incidentType})`:""]}),d.jsxs(N,{sx:{display:"flex",flexDirection:"column"},children:[d.jsxs(N,{sx:{display:"flex",height:i?20:30,borderRadius:1,overflow:"hidden",border:`1px solid ${e.border}`},children:[s.dispatchTime&&s.dispatchTime>0&&d.jsx(N,{sx:{width:`${o}%`,bgcolor:e.dispatch,display:"flex",alignItems:"center",justifyContent:"center",minWidth:20},children:!i&&d.jsx(M,{variant:"caption",color:e.text,children:"D"})}),s.turnoutTime&&s.turnoutTime>0&&d.jsx(N,{sx:{width:`${a}%`,bgcolor:e.turnout,display:"flex",alignItems:"center",justifyContent:"center",minWidth:20},children:!i&&d.jsx(M,{variant:"caption",color:e.text,children:"T"})}),s.travelTime&&s.travelTime>0&&d.jsx(N,{sx:{width:`${l}%`,bgcolor:e.travel,display:"flex",alignItems:"center",justifyContent:"center",minWidth:20},children:!i&&d.jsx(M,{variant:"caption",color:e.text,children:"R"})}),s.sceneTime&&s.sceneTime>0&&d.jsx(N,{sx:{width:`${c}%`,bgcolor:e.scene,display:"flex",alignItems:"center",justifyContent:"center",minWidth:20},children:!i&&d.jsx(M,{variant:"caption",color:e.text,children:"S"})})]}),!i&&t&&d.jsxs(N,{sx:{display:"flex",justifyContent:"space-between",mt:.5},children:[d.jsx(M,{variant:"caption",color:"text.secondary",children:ce(s.dispatchTime,"seconds")}),d.jsx(M,{variant:"caption",color:"text.secondary",children:ce(s.turnoutTime,"seconds")}),d.jsx(M,{variant:"caption",color:"text.secondary",children:ce(s.travelTime,"seconds")}),d.jsx(M,{variant:"caption",color:"text.secondary",children:ce(s.sceneTime,"seconds")})]})]})]})},zf=({colors:n})=>d.jsxs(N,{sx:{display:"flex",gap:2,mt:2,mb:3},children:[d.jsxs(N,{sx:{display:"flex",alignItems:"center"},children:[d.jsx(N,{sx:{width:20,height:20,bgcolor:n.dispatch,mr:1,borderRadius:.5,border:`1px solid ${n.border}`}}),d.jsx(M,{variant:"caption",children:"Dispatch Time"})]}),d.jsxs(N,{sx:{display:"flex",alignItems:"center"},children:[d.jsx(N,{sx:{width:20,height:20,bgcolor:n.turnout,mr:1,borderRadius:.5,border:`1px solid ${n.border}`}}),d.jsx(M,{variant:"caption",children:"Turnout Time"})]}),d.jsxs(N,{sx:{display:"flex",alignItems:"center"},children:[d.jsx(N,{sx:{width:20,height:20,bgcolor:n.travel,mr:1,borderRadius:.5,border:`1px solid ${n.border}`}}),d.jsx(M,{variant:"caption",children:"Travel Time"})]}),d.jsxs(N,{sx:{display:"flex",alignItems:"center"},children:[d.jsx(N,{sx:{width:20,height:20,bgcolor:n.scene,mr:1,borderRadius:.5,border:`1px solid ${n.border}`}}),d.jsx(M,{variant:"caption",children:"Scene Time"})]})]}),Bf=()=>{const{incidents:n}=Ie(a=>a.analyzer.rawData),{responseTimeStats:e}=Ie(a=>a.analyzer.calculatedMetrics),t=Ie(a=>a.analyzer.ui.selectedIncidentId),i=As(),s={dispatch:i.palette.info.light,turnout:i.palette.warning.light,travel:i.palette.error.light,scene:i.palette.success.light,border:i.palette.divider,text:i.palette.getContrastText(i.palette.primary.main),background:i.palette.background.paper},r=T.useMemo(()=>t&&n.find(a=>a.incidentId===t)||null,[n,t]),o=T.useMemo(()=>[...n].sort((a,l)=>{const c=new Date(a.incidentDate);return new Date(l.incidentDate).getTime()-c.getTime()}).slice(0,10),[n]);return!n.length||!e?d.jsxs(N,{sx:{p:3},children:[d.jsx(M,{variant:"h6",gutterBottom:!0,children:"Response Time Timeline"}),d.jsx(M,{variant:"body1",color:"text.secondary",children:"No incident data available for timeline visualization."})]}):d.jsxs(N,{sx:{p:3},children:[d.jsx(M,{variant:"h6",gutterBottom:!0,children:"Response Time Timeline"}),d.jsx(zf,{colors:s}),d.jsxs(B,{container:!0,spacing:3,children:[r&&d.jsx(B,{size:{xs:12},children:d.jsxs(Ve,{variant:"outlined",sx:{p:2,mb:3},children:[d.jsxs(M,{variant:"subtitle1",gutterBottom:!0,children:["Selected Incident: ",r.incidentId]}),d.jsx(N,{sx:{mb:2},children:d.jsxs(B,{container:!0,spacing:2,children:[d.jsxs(B,{size:{xs:12,sm:6,md:3},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Date"}),d.jsx(M,{variant:"body1",children:r.incidentDate})]}),d.jsxs(B,{size:{xs:12,sm:6,md:3},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Time"}),d.jsx(M,{variant:"body1",children:r.incidentTime||"N/A"})]}),d.jsxs(B,{size:{xs:12,sm:6,md:3},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Type"}),d.jsx(M,{variant:"body1",children:r.incidentType||"Unknown"})]}),d.jsxs(B,{size:{xs:12,sm:6,md:3},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Unit"}),d.jsx(M,{variant:"body1",children:r.respondingUnit||"N/A"})]})]})}),d.jsx(Bt,{sx:{my:2}}),d.jsx(M,{variant:"subtitle2",gutterBottom:!0,children:"Response Timeline"}),d.jsx(la,{incident:r,colors:s,showLabels:!0}),d.jsx(N,{sx:{mt:3},children:d.jsxs(B,{container:!0,spacing:2,children:[d.jsxs(B,{size:{xs:6,sm:3},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Dispatch Time"}),d.jsx(M,{variant:"body1",children:ce(ut(r).dispatchTime)})]}),d.jsxs(B,{size:{xs:6,sm:3},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Turnout Time"}),d.jsx(M,{variant:"body1",children:ce(ut(r).turnoutTime)})]}),d.jsxs(B,{size:{xs:6,sm:3},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Travel Time"}),d.jsx(M,{variant:"body1",children:ce(ut(r).travelTime)})]}),d.jsxs(B,{size:{xs:6,sm:3},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Total Response Time"}),d.jsx(M,{variant:"body1",children:ce(ut(r).totalResponseTime)})]})]})})]})}),d.jsx(B,{size:{xs:12,md:r?12:6},children:d.jsxs(Ve,{variant:"outlined",sx:{p:2},children:[d.jsx(M,{variant:"subtitle1",gutterBottom:!0,children:"Recent Incidents Timeline"}),d.jsxs(N,{sx:{mt:2},children:[o.map(a=>d.jsx(la,{incident:a,colors:s,showLabels:!0,compact:!1},a.incidentId)),o.length===0&&d.jsx(M,{variant:"body2",color:"text.secondary",children:"No recent incidents to display."})]})]})}),!r&&d.jsx(B,{size:{xs:12,md:6},children:d.jsxs(Ve,{variant:"outlined",sx:{p:2},children:[d.jsx(M,{variant:"subtitle1",gutterBottom:!0,children:"Average Response Time Breakdown"}),d.jsxs(N,{sx:{p:2,mt:2,bgcolor:"background.default",borderRadius:1},children:[d.jsx(M,{variant:"body2",gutterBottom:!0,children:"Average time breakdown:"}),d.jsxs(N,{sx:{display:"flex",height:40,borderRadius:1,overflow:"hidden",mt:1},children:[d.jsx(N,{sx:{width:`${(e.mean.dispatchTime||0)/(e.mean.totalIncidentTime||1)*100}%`,bgcolor:s.dispatch,display:"flex",alignItems:"center",justifyContent:"center",minWidth:20},children:d.jsxs(M,{variant:"caption",color:s.text,children:[Math.round((e.mean.dispatchTime||0)/(e.mean.totalIncidentTime||1)*100),"%"]})}),d.jsx(N,{sx:{width:`${(e.mean.turnoutTime||0)/(e.mean.totalIncidentTime||1)*100}%`,bgcolor:s.turnout,display:"flex",alignItems:"center",justifyContent:"center",minWidth:20},children:d.jsxs(M,{variant:"caption",color:s.text,children:[Math.round((e.mean.turnoutTime||0)/(e.mean.totalIncidentTime||1)*100),"%"]})}),d.jsx(N,{sx:{width:`${(e.mean.travelTime||0)/(e.mean.totalIncidentTime||1)*100}%`,bgcolor:s.travel,display:"flex",alignItems:"center",justifyContent:"center",minWidth:20},children:d.jsxs(M,{variant:"caption",color:s.text,children:[Math.round((e.mean.travelTime||0)/(e.mean.totalIncidentTime||1)*100),"%"]})}),d.jsx(N,{sx:{width:`${(e.mean.sceneTime||0)/(e.mean.totalIncidentTime||1)*100}%`,bgcolor:s.scene,display:"flex",alignItems:"center",justifyContent:"center",minWidth:20},children:d.jsxs(M,{variant:"caption",color:s.text,children:[Math.round((e.mean.sceneTime||0)/(e.mean.totalIncidentTime||1)*100),"%"]})})]}),d.jsx(N,{sx:{mt:3},children:d.jsxs(B,{container:!0,spacing:2,children:[d.jsxs(B,{size:{xs:6,sm:3},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Avg Dispatch"}),d.jsx(M,{variant:"body1",children:ce(e.mean.dispatchTime)})]}),d.jsxs(B,{size:{xs:6,sm:3},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Avg Turnout"}),d.jsx(M,{variant:"body1",children:ce(e.mean.turnoutTime)})]}),d.jsxs(B,{size:{xs:6,sm:3},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Avg Travel"}),d.jsx(M,{variant:"body1",children:ce(e.mean.travelTime)})]}),d.jsxs(B,{size:{xs:6,sm:3},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Avg Total"}),d.jsx(M,{variant:"body1",children:ce(e.mean.totalResponseTime)})]})]})})]})]})})]})]})},ri=(n,e)=>n.length!==e.length?!1:e.every(t=>n.includes(t)),$f=({openTo:n,defaultOpenTo:e,views:t,defaultViews:i})=>{const s=t??i;let r;if(n!=null)r=n;else if(s.includes(e))r=e;else if(s.length>0)r=s[0];else throw new Error("MUI X: The `views` prop must contain at least one view.");return{views:s,openTo:r}},xs=(n,e,t)=>{let i=e;return i=n.setHours(i,n.getHours(t)),i=n.setMinutes(i,n.getMinutes(t)),i=n.setSeconds(i,n.getSeconds(t)),i=n.setMilliseconds(i,n.getMilliseconds(t)),i},Ii=({date:n,disableFuture:e,disablePast:t,maxDate:i,minDate:s,isDateDisabled:r,utils:o,timezone:a})=>{const l=xs(o,o.date(void 0,a),n);t&&o.isBefore(s,l)&&(s=l),e&&o.isAfter(i,l)&&(i=l);let c=n,u=n;for(o.isBefore(n,s)&&(c=s,u=null),o.isAfter(n,i)&&(u&&(u=i),c=null);c||u;){if(c&&o.isAfter(c,i)&&(c=null),u&&o.isBefore(u,s)&&(u=null),c){if(!r(c))return c;c=o.addDays(c,1)}if(u){if(!r(u))return u;u=o.addDays(u,-1)}}return null},Vf=(n,e)=>n.isValid(e)?e:null,ca=(n,e,t)=>e==null||!n.isValid(e)?t:e,Wf=(n,e,t)=>!n.isValid(e)&&e!=null&&!n.isValid(t)&&t!=null?!0:n.isEqual(e,t),ho=(n,e)=>{const i=[n.startOfYear(e)];for(;i.length<12;){const s=i[i.length-1];i.push(n.addMonths(s,1))}return i},Mc=(n,e,t)=>t==="date"?n.startOfDay(n.date(void 0,e)):n.date(void 0,e),Hf=["year","month","day"],da=n=>Hf.includes(n),fo=(n,{format:e,views:t},i)=>{if(e!=null)return e;const s=n.formats;return ri(t,["year"])?s.year:ri(t,["month"])?s.month:ri(t,["day"])?s.dayOfMonth:ri(t,["month","year"])?`${s.month} ${s.year}`:ri(t,["day","month"])?`${s.month} ${s.dayOfMonth}`:i?/en/.test(n.getCurrentLocaleCode())?s.normalDateWithWeekday:s.normalDate:s.keyboardDate},Yf=(n,e)=>{const t=n.startOfWeek(e);return[0,1,2,3,4,5,6].map(i=>n.addDays(t,i))},Uf=["hours","minutes","seconds"],Gf=n=>Uf.includes(n),ua=(n,e)=>e.getHours(n)*3600+e.getMinutes(n)*60+e.getSeconds(n),qf=(n,e)=>(t,i)=>n?e.isAfter(t,i):ua(t,e)>ua(i,e),Lt={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},Xf=n=>Math.max(...n.map(e=>Lt[e.type]??1)),oi=(n,e,t)=>{if(e===Lt.year)return n.startOfYear(t);if(e===Lt.month)return n.startOfMonth(t);if(e===Lt.day)return n.startOfDay(t);let i=t;return e<Lt.minutes&&(i=n.setMinutes(i,0)),e<Lt.seconds&&(i=n.setSeconds(i,0)),e<Lt.milliseconds&&(i=n.setMilliseconds(i,0)),i},Kf=({props:n,utils:e,granularity:t,timezone:i,getTodayDate:s})=>{let r=s?s():oi(e,t,Mc(e,i));n.minDate!=null&&e.isAfterDay(n.minDate,r)&&(r=oi(e,t,n.minDate)),n.maxDate!=null&&e.isBeforeDay(n.maxDate,r)&&(r=oi(e,t,n.maxDate));const o=qf(n.disableIgnoringDatePartForTimeValidation??!1,e);return n.minTime!=null&&o(n.minTime,r)&&(r=oi(e,t,n.disableIgnoringDatePartForTimeValidation?n.minTime:xs(e,r,n.minTime))),n.maxTime!=null&&o(r,n.maxTime)&&(r=oi(e,t,n.disableIgnoringDatePartForTimeValidation?n.maxTime:xs(e,r,n.maxTime))),r},kc=(n,e)=>{const t=n.formatTokenMap[e];if(t==null)throw new Error([`MUI X: The token "${e}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof t=="string"?{type:t,contentType:t==="meridiem"?"letter":"digit",maxLength:void 0}:{type:t.sectionType,contentType:t.contentType,maxLength:t.maxLength}},zs=(n,e)=>{const t=[],i=n.date(void 0,"default"),s=n.startOfWeek(i),r=n.endOfWeek(i);let o=s;for(;n.isBefore(o,r);)t.push(o),o=n.addDays(o,1);return t.map(a=>n.formatByString(a,e))},Ic=(n,e,t,i)=>{switch(t){case"month":return ho(n,n.date(void 0,e)).map(s=>n.formatByString(s,i));case"weekDay":return zs(n,i);case"meridiem":{const s=n.date(void 0,e);return[n.startOfDay(s),n.endOfDay(s)].map(r=>n.formatByString(r,i))}default:return[]}},ha="s",Qf=["0","1","2","3","4","5","6","7","8","9"],Zf=n=>{const e=n.date(void 0);return n.formatByString(n.setSeconds(e,0),ha)==="0"?Qf:Array.from({length:10}).map((i,s)=>n.formatByString(n.setSeconds(e,s),ha))},Pn=(n,e)=>{if(e[0]==="0")return n;const t=[];let i="";for(let s=0;s<n.length;s+=1){i+=n[s];const r=e.indexOf(i);r>-1&&(t.push(r.toString()),i="")}return t.join("")},po=(n,e)=>e[0]==="0"?n:n.split("").map(t=>e[Number(t)]).join(""),fa=(n,e)=>{const t=Pn(n,e);return t!==" "&&!Number.isNaN(Number(t))},mo=(n,e)=>Number(n).toString().padStart(e,"0"),_c=(n,e,t,i,s)=>{if(s.type==="day"&&s.contentType==="digit-with-letter"){const o=n.setDate(t.longestMonth,e);return n.formatByString(o,s.format)}let r=e.toString();return s.hasLeadingZerosInInput&&(r=mo(r,s.maxLength)),po(r,i)},go=(n,e,t)=>{let i=n.value||n.placeholder;const s=e==="non-input"?n.hasLeadingZerosInFormat:n.hasLeadingZerosInInput;return e==="non-input"&&n.hasLeadingZerosInInput&&!n.hasLeadingZerosInFormat&&(i=Number(Pn(i,t)).toString()),["input-rtl","input-ltr"].includes(e)&&n.contentType==="digit"&&!s&&i.length===1&&(i=`${i}â€Ž`),e==="input-rtl"&&(i=`â¨${i}â©`),i},pa=(n,e,t,i)=>n.formatByString(n.parse(e,t),i),Jf=(n,e)=>n.formatByString(n.date(void 0,"system"),e).length===4,jc=(n,e,t,i)=>{if(e!=="digit")return!1;const s=n.date(void 0,"default");switch(t){case"year":return n.lib==="dayjs"&&i==="YY"?!0:n.formatByString(n.setYear(s,1),i).startsWith("0");case"month":return n.formatByString(n.startOfYear(s),i).length>1;case"day":return n.formatByString(n.startOfMonth(s),i).length>1;case"weekDay":return n.formatByString(n.startOfWeek(s),i).length>1;case"hours":return n.formatByString(n.setHours(s,1),i).length>1;case"minutes":return n.formatByString(n.setMinutes(s,1),i).length>1;case"seconds":return n.formatByString(n.setSeconds(s,1),i).length>1;default:throw new Error("Invalid section type")}},ep=(n,e,t)=>{const i=e.some(l=>l.type==="day"),s=[],r=[];for(let l=0;l<e.length;l+=1){const c=e[l];i&&c.type==="weekDay"||(s.push(c.format),r.push(go(c,"non-input",t)))}const o=s.join(" "),a=r.join(" ");return n.parse(a,o)},tp=n=>n.map(e=>`${e.startSeparator}${e.value||e.placeholder}${e.endSeparator}`).join(""),np=(n,e,t)=>{const s=n.map(r=>{const o=go(r,t?"input-rtl":"input-ltr",e);return`${r.startSeparator}${o}${r.endSeparator}`}).join("");return t?`â¦${s}â©`:s},ip=(n,e,t)=>{const i=n.date(void 0,t),s=n.endOfYear(i),r=n.endOfDay(i),{maxDaysInMonth:o,longestMonth:a}=ho(n,i).reduce((l,c)=>{const u=n.getDaysInMonth(c);return u>l.maxDaysInMonth?{maxDaysInMonth:u,longestMonth:c}:l},{maxDaysInMonth:0,longestMonth:null});return{year:({format:l})=>({minimum:0,maximum:Jf(n,l)?9999:99}),month:()=>({minimum:1,maximum:n.getMonth(s)+1}),day:({currentDate:l})=>({minimum:1,maximum:n.isValid(l)?n.getDaysInMonth(l):o,longestMonth:a}),weekDay:({format:l,contentType:c})=>{if(c==="digit"){const u=zs(n,l).map(Number);return{minimum:Math.min(...u),maximum:Math.max(...u)}}return{minimum:1,maximum:7}},hours:({format:l})=>{const c=n.getHours(r);return Pn(n.formatByString(n.endOfDay(i),l),e)!==c.toString()?{minimum:1,maximum:Number(Pn(n.formatByString(n.startOfDay(i),l),e))}:{minimum:0,maximum:c}},minutes:()=>({minimum:0,maximum:n.getMinutes(r)}),seconds:()=>({minimum:0,maximum:n.getSeconds(r)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}},sp=(n,e,t,i)=>{switch(e.type){case"year":return n.setYear(i,n.getYear(t));case"month":return n.setMonth(i,n.getMonth(t));case"weekDay":{let s=n.formatByString(t,e.format);e.hasLeadingZerosInInput&&(s=mo(s,e.maxLength));const r=zs(n,e.format),o=r.indexOf(s),l=r.indexOf(e.value)-o;return n.addDays(t,l)}case"day":return n.setDate(i,n.getDate(t));case"meridiem":{const s=n.getHours(t)<12,r=n.getHours(i);return s&&r>=12?n.addHours(i,-12):!s&&r<12?n.addHours(i,12):i}case"hours":return n.setHours(i,n.getHours(t));case"minutes":return n.setMinutes(i,n.getMinutes(t));case"seconds":return n.setSeconds(i,n.getSeconds(t));default:return i}},ma={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},ga=(n,e,t,i,s)=>[...t].sort((r,o)=>ma[r.type]-ma[o.type]).reduce((r,o)=>!s||o.modified?sp(n,o,e,r):r,i),rp=()=>navigator.userAgent.toLowerCase().includes("android"),op=(n,e)=>{const t={};if(!e)return n.forEach((l,c)=>{const u=c===0?null:c-1,h=c===n.length-1?null:c+1;t[c]={leftIndex:u,rightIndex:h}}),{neighbors:t,startIndex:0,endIndex:n.length-1};const i={},s={};let r=0,o=0,a=n.length-1;for(;a>=0;){o=n.findIndex((l,c)=>{var u;return c>=r&&((u=l.endSeparator)==null?void 0:u.includes(" "))&&l.endSeparator!==" / "}),o===-1&&(o=n.length-1);for(let l=o;l>=r;l-=1)s[l]=a,i[a]=l,a-=1;r=o+1}return n.forEach((l,c)=>{const u=s[c],h=u===0?null:i[u-1],f=u===n.length-1?null:i[u+1];t[c]={leftIndex:h,rightIndex:f}}),{neighbors:t,startIndex:i[0],endIndex:i[n.length-1]}},Fr=(n,e)=>{if(n==null)return null;if(n==="all")return"all";if(typeof n=="string"){const t=e.findIndex(i=>i.type===n);return t===-1?null:t}return n},ap=["value","referenceDate"],Wt={emptyValue:null,getTodayValue:Mc,getInitialReferenceValue:n=>{let{value:e,referenceDate:t}=n,i=re(n,ap);return i.utils.isValid(e)?e:t??Kf(i)},cleanValue:Vf,areValuesEqual:Wf,isSameError:(n,e)=>n===e,hasError:n=>n!=null,defaultErrorState:null,getTimezone:(n,e)=>n.isValid(e)?n.getTimezone(e):null,setTimezone:(n,e,t)=>t==null?null:n.setTimezone(t,e)},lp={updateReferenceValue:(n,e,t)=>n.isValid(e)?e:t,getSectionsFromValue:(n,e)=>e(n),getV7HiddenInputValueFromSections:tp,getV6InputValueFromSections:np,parseValueStr:(n,e,t)=>t(n.trim(),e),getDateFromSection:n=>n,getDateSectionsFromValue:n=>n,updateDateInValue:(n,e,t)=>t,clearDateSections:n=>n.map(e=>I({},e,{value:""}))};function cp(n){return Ue("MuiPickersToolbar",n)}Ge("MuiPickersToolbar",["root","title","content"]);const dp=["localeText"],Er=T.createContext(null),Rc=function(e){const{localeText:t}=e,i=re(e,dp),{utils:s,localeText:r}=T.useContext(Er)??{utils:void 0,localeText:void 0},o=Be({props:i,name:"MuiLocalizationProvider"}),{children:a,dateAdapter:l,dateFormats:c,dateLibInstance:u,adapterLocale:h,localeText:f}=o,p=T.useMemo(()=>I({},f,r,t),[f,r,t]),m=T.useMemo(()=>{if(!l)return s||null;const x=new l({locale:h,formats:c,instance:u});if(!x.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/quickstart/#installation"].join(`
`));return x},[l,h,c,u,s]),y=T.useMemo(()=>m?{minDate:m.date("1900-01-01T00:00:00.000"),maxDate:m.date("2099-12-31T00:00:00.000")}:null,[m]),g=T.useMemo(()=>({utils:m,defaultDates:y,localeText:p}),[y,m,p]);return d.jsx(Er.Provider,{value:g,children:a})},Oc=T.createContext(()=>!0);function up(){return T.useContext(Oc)}const Ac=T.createContext(null);function Fc(){return T.useContext(Ac)}const yo=T.createContext(null),ti=()=>{const n=T.useContext(yo);if(n==null)throw new Error("MUI X: The `usePickerContext` hook can only be called inside the context of a Picker component");return n},Ec=T.createContext(null),Lc=T.createContext({ownerState:{isPickerDisabled:!1,isPickerReadOnly:!1,isPickerValueEmpty:!1,isPickerOpen:!1,pickerVariant:"desktop",pickerOrientation:"portrait"},rootRefObject:{current:null},labelId:void 0,dismissViews:()=>{},hasUIView:!0,getCurrentViewMode:()=>"UI",triggerElement:null,viewContainerRole:null,defaultActionBarActions:[],onPopperExited:void 0});function Nc(n){const{contextValue:e,actionsContextValue:t,privateContextValue:i,fieldPrivateContextValue:s,isValidContextValue:r,localeText:o,children:a}=n;return d.jsx(yo.Provider,{value:e,children:d.jsx(Ec.Provider,{value:t,children:d.jsx(Lc.Provider,{value:i,children:d.jsx(Ac.Provider,{value:s,children:d.jsx(Oc.Provider,{value:r,children:d.jsx(Rc,{localeText:o,children:a})})})})})})}const st=()=>T.useContext(Lc);function zc(){const{ownerState:n}=st(),e=Yt();return T.useMemo(()=>I({},n,{toolbarDirection:e?"rtl":"ltr"}),[n,e])}const hp=["children","className","classes","toolbarTitle","hidden","titleId","classes","landscapeDirection"],fp=n=>Le({root:["root"],title:["title"],content:["content"]},cp,n),pp=X("div",{name:"MuiPickersToolbar",slot:"Root"})(({theme:n})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:n.spacing(2,3),variants:[{props:{pickerOrientation:"landscape"},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]})),mp=X("div",{name:"MuiPickersToolbar",slot:"Content",shouldForwardProp:n=>Cn(n)&&n!=="landscapeDirection"})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{pickerOrientation:"landscape"},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{pickerOrientation:"landscape",landscapeDirection:"row"},style:{flexDirection:"row"}}]}),gp=T.forwardRef(function(e,t){const i=Be({props:e,name:"MuiPickersToolbar"}),{children:s,className:r,classes:o,toolbarTitle:a,hidden:l,titleId:c,landscapeDirection:u}=i,h=re(i,hp),f=zc(),p=fp(o);return l?null:d.jsxs(pp,I({ref:t,className:Ze(p.root,r),ownerState:f},h,{children:[d.jsx(M,{color:"text.secondary",variant:"overline",id:c,className:p.title,children:a}),d.jsx(mp,{className:p.content,ownerState:f,landscapeDirection:u,children:s})]}))}),yp=n=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:I({},n)}}}}),Bc={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:n=>n==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",nextStepButtonLabel:"Next",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",timeRangePickerToolbarTitle:"Select time range",clockLabelText:(n,e)=>`Select ${n}. ${e?`Selected time is ${e}`:"No time selected"}`,hoursClockNumberText:n=>`${n} hours`,minutesClockNumberText:n=>`${n} minutes`,secondsClockNumberText:n=>`${n} seconds`,selectViewText:n=>`Select ${n}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:n=>`Week ${n}`,calendarWeekNumberText:n=>`${n}`,openDatePickerDialogue:n=>n?`Choose date, selected date is ${n}`:"Choose date",openTimePickerDialogue:n=>n?`Choose time, selected time is ${n}`:"Choose time",openRangePickerDialogue:n=>n?`Choose range, selected range is ${n}`:"Choose range",fieldClearLabel:"Clear",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:n=>"Y".repeat(n.digitAmount),fieldMonthPlaceholder:n=>n.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:n=>n.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},xp=Bc;yp(Bc);const Mn=()=>{const n=T.useContext(Er);if(n===null)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(n.utils===null)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const e=T.useMemo(()=>I({},xp,n.localeText),[n.localeText]);return T.useMemo(()=>I({},n,{localeText:e}),[n,e])},Fe=()=>Mn().utils,bp=()=>Mn().defaultDates,Bs=n=>{const e=Fe(),t=T.useRef(void 0);return t.current===void 0&&(t.current=e.date(void 0,n)),t.current},ln=()=>Mn().localeText;function vp(n){return Ue("MuiDatePickerToolbar",n)}Ge("MuiDatePickerToolbar",["root","title"]);const Lr=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],Nr=["disablePast","disableFuture","minTime","maxTime","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],$c=["minDateTime","maxDateTime"],wp=[...Lr,...Nr,...$c],Vc=n=>wp.reduce((e,t)=>(n.hasOwnProperty(t)&&(e[t]=n[t]),e),{}),Tp=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef","unstableStartFieldRef","unstableEndFieldRef","enableAccessibleFieldDOMStructure","disabled","readOnly","dateSeparator","autoFocus","focused"],Wc=(n,e)=>T.useMemo(()=>{const t=I({},n),i={},s=r=>{t.hasOwnProperty(r)&&(i[r]=t[r],delete t[r])};return Tp.forEach(s),e==="date"?Lr.forEach(s):e==="time"?Nr.forEach(s):e==="date-time"&&(Lr.forEach(s),Nr.forEach(s),$c.forEach(s)),{forwardedProps:t,internalProps:i}},[n,e]),Sp=({utils:n,format:e})=>{let t=10,i=e,s=n.expandFormat(e);for(;s!==i;)if(i=s,s=n.expandFormat(i),t-=1,t<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the component.");return s},Pp=({utils:n,expandedFormat:e})=>{const t=[],{start:i,end:s}=n.escapedCharacters,r=new RegExp(`(\\${i}[^\\${s}]*\\${s})+`,"g");let o=null;for(;o=r.exec(e);)t.push({start:o.index,end:r.lastIndex-1});return t},Dp=(n,e,t,i)=>{switch(t.type){case"year":return e.fieldYearPlaceholder({digitAmount:n.formatByString(n.date(void 0,"default"),i).length,format:i});case"month":return e.fieldMonthPlaceholder({contentType:t.contentType,format:i});case"day":return e.fieldDayPlaceholder({format:i});case"weekDay":return e.fieldWeekDayPlaceholder({contentType:t.contentType,format:i});case"hours":return e.fieldHoursPlaceholder({format:i});case"minutes":return e.fieldMinutesPlaceholder({format:i});case"seconds":return e.fieldSecondsPlaceholder({format:i});case"meridiem":return e.fieldMeridiemPlaceholder({format:i});default:return i}},Cp=({utils:n,date:e,shouldRespectLeadingZeros:t,localeText:i,localizedDigits:s,now:r,token:o,startSeparator:a})=>{if(o==="")throw new Error("MUI X: Should not call `commitToken` with an empty token");const l=kc(n,o),c=jc(n,l.contentType,l.type,o),u=t?c:l.contentType==="digit",h=n.isValid(e);let f=h?n.formatByString(e,o):"",p=null;if(u)if(c)p=f===""?n.formatByString(r,o).length:f.length;else{if(l.maxLength==null)throw new Error(`MUI X: The token ${o} should have a 'maxLength' property on it's adapter`);p=l.maxLength,h&&(f=po(mo(Pn(f,s),p),s))}return I({},l,{format:o,maxLength:p,value:f,placeholder:Dp(n,i,l,o),hasLeadingZerosInFormat:c,hasLeadingZerosInInput:u,startSeparator:a,endSeparator:"",modified:!1})},Mp=n=>{var p;const{utils:e,expandedFormat:t,escapedParts:i}=n,s=e.date(void 0),r=[];let o="";const a=Object.keys(e.formatTokenMap).sort((m,y)=>y.length-m.length),l=/^([a-zA-Z]+)/,c=new RegExp(`^(${a.join("|")})*$`),u=new RegExp(`^(${a.join("|")})`),h=m=>i.find(y=>y.start<=m&&y.end>=m);let f=0;for(;f<t.length;){const m=h(f),y=m!=null,g=(p=l.exec(t.slice(f)))==null?void 0:p[1];if(!y&&g!=null&&c.test(g)){let x=g;for(;x.length>0;){const v=u.exec(x)[1];x=x.slice(v.length),r.push(Cp(I({},n,{now:s,token:v,startSeparator:o}))),o=""}f+=g.length}else{const x=t[f];y&&(m==null?void 0:m.start)===f||(m==null?void 0:m.end)===f||(r.length===0?o+=x:(r[r.length-1].endSeparator+=x,r[r.length-1].isEndFormatSeparator=!0)),f+=1}}return r.length===0&&o.length>0&&r.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:o,endSeparator:"",modified:!1}),r},kp=({isRtl:n,formatDensity:e,sections:t})=>t.map(i=>{const s=r=>{let o=r;return n&&o!==null&&o.includes(" ")&&(o=`â©${o}â¦`),e==="spacious"&&["/",".","-"].includes(o)&&(o=` ${o} `),o};return i.startSeparator=s(i.startSeparator),i.endSeparator=s(i.endSeparator),i}),ya=n=>{let e=Sp(n);n.isRtl&&n.enableAccessibleFieldDOMStructure&&(e=e.split(" ").reverse().join(" "));const t=Pp(I({},n,{expandedFormat:e})),i=Mp(I({},n,{expandedFormat:e,escapedParts:t}));return kp(I({},n,{sections:i}))},xo=()=>T.useContext(yo),Ip=()=>{const n=T.useContext(Ec);if(n==null)throw new Error(["MUI X: The `usePickerActionsContext` can only be called in fields that are used as a slot of a Picker component"].join(`
`));return n},_p=["toolbarFormat","toolbarPlaceholder","className","classes"],jp=n=>Le({root:["root"],title:["title"]},vp,n),Rp=X(gp,{name:"MuiDatePickerToolbar",slot:"Root"})({}),Op=X(M,{name:"MuiDatePickerToolbar",slot:"Title"})({variants:[{props:{pickerOrientation:"landscape"},style:{margin:"auto 16px auto auto"}}]}),Ap=T.forwardRef(function(e,t){const i=Be({props:e,name:"MuiDatePickerToolbar"}),{toolbarFormat:s,toolbarPlaceholder:r="â€“â€“",className:o,classes:a}=i,l=re(i,_p),c=Fe(),{value:u,views:h,orientation:f}=ti(),p=ln(),m=zc(),y=jp(a),g=T.useMemo(()=>{if(!c.isValid(u))return r;const x=fo(c,{format:s,views:h},!0);return c.formatByString(u,x)},[u,s,r,c,h]);return d.jsx(Rp,I({ref:t,toolbarTitle:p.datePickerToolbarTitle,className:Ze(y.root,o)},l,{children:d.jsx(Op,{variant:"h4",align:f==="landscape"?"left":"center",ownerState:m,className:y.title,children:g})}))}),Li=({props:n,value:e,timezone:t,adapter:i})=>{if(e===null)return null;const{shouldDisableDate:s,shouldDisableMonth:r,shouldDisableYear:o,disablePast:a,disableFuture:l,minDate:c,maxDate:u}=n,h=i.utils.date(void 0,t);switch(!0){case!i.utils.isValid(e):return"invalidDate";case!!(s&&s(e)):return"shouldDisableDate";case!!(r&&r(e)):return"shouldDisableMonth";case!!(o&&o(e)):return"shouldDisableYear";case!!(l&&i.utils.isAfterDay(e,h)):return"disableFuture";case!!(a&&i.utils.isBeforeDay(e,h)):return"disablePast";case!!(c&&i.utils.isBeforeDay(e,c)):return"minDate";case!!(u&&i.utils.isAfterDay(e,u)):return"maxDate";default:return null}};Li.valueManager=Wt;function Hc(n){const{props:e,validator:t,value:i,timezone:s,onError:r}=n,o=Mn(),a=T.useRef(t.valueManager.defaultErrorState),l=t({adapter:o,value:i,timezone:s,props:e}),c=t.valueManager.hasError(l);T.useEffect(()=>{r&&!t.valueManager.isSameError(l,a.current)&&r(l,i),a.current=l},[t,r,l,i]);const u=U(h=>t({adapter:o,value:h,timezone:s,props:e}));return{validationError:l,hasValidationError:c,getValidationErrorForNewValue:u}}function Fp(n={}){const{enableAccessibleFieldDOMStructure:e=!0}=n;return T.useMemo(()=>({valueType:"date",validator:Li,internal_valueManager:Wt,internal_fieldValueManager:lp,internal_enableAccessibleFieldDOMStructure:e,internal_useApplyDefaultValuesToFieldInternalProps:Lp,internal_useOpenPickerButtonAriaLabel:Ep}),[e])}function Ep(n){const e=Fe(),t=ln();return T.useMemo(()=>{const i=e.isValid(n)?e.format(n,"fullDate"):null;return t.openDatePickerDialogue(i)},[n,t,e])}function Lp(n){const e=Fe(),t=Ni(n);return T.useMemo(()=>I({},n,t,{format:n.format??e.formats.keyboardDate}),[n,t,e])}function Ni(n){const e=Fe(),t=bp();return T.useMemo(()=>({disablePast:n.disablePast??!1,disableFuture:n.disableFuture??!1,minDate:ca(e,n.minDate,t.minDate),maxDate:ca(e,n.maxDate,t.maxDate)}),[n.minDate,n.maxDate,n.disableFuture,n.disablePast,e,t])}function Yc(n,e){const t=Be({props:n,name:e}),i=Ni(t),s=T.useMemo(()=>{var r;return((r=t.localeText)==null?void 0:r.toolbarTitle)==null?t.localeText:I({},t.localeText,{datePickerToolbarTitle:t.localeText.toolbarTitle})},[t.localeText]);return I({},t,i,{localeText:s},$f({views:t.views,openTo:t.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{slots:I({toolbar:Ap},t.slots)})}function Np(n){return Ue("MuiPickerPopper",n)}Ge("MuiPickerPopper",["root","paper"]);function zp(n,e){return Array.isArray(e)?e.every(t=>n.indexOf(t)!==-1):n.indexOf(e)!==-1}const Bp=n=>{setTimeout(n,0)},at=(n=document)=>{const e=n.activeElement;return e?e.shadowRoot?at(e.shadowRoot):e:null},$p="@media (pointer: fine)",Vp=["PaperComponent","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],Wp=n=>Le({root:["root"],paper:["paper"]},Np,n),Hp=X(kh,{name:"MuiPickerPopper",slot:"Root"})(({theme:n})=>({zIndex:n.zIndex.modal})),Yp=X(Ve,{name:"MuiPickerPopper",slot:"Paper"})({outline:0,transformOrigin:"top center",variants:[{props:({popperPlacement:n})=>["top","top-start","top-end"].includes(n),style:{transformOrigin:"bottom center"}}]});function Up(n,e){return e.documentElement.clientWidth<n.clientX||e.documentElement.clientHeight<n.clientY}function Gp(n,e){const t=T.useRef(!1),i=T.useRef(!1),s=T.useRef(null),r=T.useRef(!1);T.useEffect(()=>{if(!n)return;function l(){r.current=!0}return document.addEventListener("mousedown",l,!0),document.addEventListener("touchstart",l,!0),()=>{document.removeEventListener("mousedown",l,!0),document.removeEventListener("touchstart",l,!0),r.current=!1}},[n]);const o=U(l=>{if(!r.current)return;const c=i.current;i.current=!1;const u=er(s.current);if(!s.current||"clientX"in l&&Up(l,u))return;if(t.current){t.current=!1;return}let h;l.composedPath?h=l.composedPath().indexOf(s.current)>-1:h=!u.documentElement.contains(l.target)||s.current.contains(l.target),!h&&!c&&e(l)}),a=()=>{i.current=!0};return T.useEffect(()=>{if(n){const l=er(s.current),c=()=>{t.current=!0};return l.addEventListener("touchstart",o),l.addEventListener("touchmove",c),()=>{l.removeEventListener("touchstart",o),l.removeEventListener("touchmove",c)}}},[n,o]),T.useEffect(()=>{if(n){const l=er(s.current);return l.addEventListener("click",o),()=>{l.removeEventListener("click",o),i.current=!1}}},[n,o]),[s,a,a]}const qp=T.forwardRef((n,e)=>{const{PaperComponent:t,ownerState:i,children:s,paperSlotProps:r,paperClasses:o,onPaperClick:a,onPaperTouchStart:l}=n,c=re(n,Vp),u=Ce({elementType:t,externalSlotProps:r,additionalProps:{tabIndex:-1,elevation:8,ref:e},className:o,ownerState:i});return d.jsx(t,I({},c,u,{onClick:h=>{var f;a(h),(f=u.onClick)==null||f.call(u,h)},onTouchStart:h=>{var f;l(h),(f=u.onTouchStart)==null||f.call(u,h)},ownerState:i,children:s}))});function Xp(n){const e=Be({props:n,name:"MuiPickerPopper"}),{children:t,placement:i="bottom-start",slots:s,slotProps:r,classes:o}=e,{open:a,popupRef:l,reduceAnimations:c}=ti(),{dismissViews:u,getCurrentViewMode:h,onPopperExited:f,triggerElement:p,viewContainerRole:m}=st();T.useEffect(()=>{function $(K){a&&K.key==="Escape"&&u()}return document.addEventListener("keydown",$),()=>{document.removeEventListener("keydown",$)}},[u,a]);const y=T.useRef(null);T.useEffect(()=>{m==="tooltip"||h()==="field"||(a?y.current=at(document):y.current&&y.current instanceof HTMLElement&&setTimeout(()=>{y.current instanceof HTMLElement&&y.current.focus()}))},[a,m,h]);const g=Wp(o),{ownerState:x,rootRefObject:v}=st(),b=I({},x,{popperPlacement:i}),S=U(()=>{m==="tooltip"?Bp(()=>{var $,K;($=v.current)!=null&&$.contains(at(document))||(K=l.current)!=null&&K.contains(at(document))||u()}):u()}),[C,_,O]=Gp(a,S),w=T.useRef(null),P=gt(w,l),j=gt(P,C),A=$=>{$.key==="Escape"&&($.stopPropagation(),u())},k=(s==null?void 0:s.desktopTransition)??c?Fs:Ch,D=(s==null?void 0:s.desktopTrapFocus)??Mh,R=(s==null?void 0:s.desktopPaper)??Yp,F=(s==null?void 0:s.popper)??Hp,L=Ce({elementType:F,externalSlotProps:r==null?void 0:r.popper,additionalProps:{transition:!0,role:m??void 0,open:a,placement:i,anchorEl:p,onKeyDown:A},className:g.root,ownerState:b});return d.jsx(F,I({},L,{children:({TransitionProps:$})=>d.jsx(D,I({open:a,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:m==="tooltip",isEnabled:()=>!0},r==null?void 0:r.desktopTrapFocus,{children:d.jsx(k,I({},$,r==null?void 0:r.desktopTransition,{onExited:K=>{var V,J,W;f==null||f(),(J=(V=r==null?void 0:r.desktopTransition)==null?void 0:V.onExited)==null||J.call(V,K),(W=$==null?void 0:$.onExited)==null||W.call($)},children:d.jsx(qp,{PaperComponent:R,ownerState:b,ref:j,onPaperClick:_,onPaperTouchStart:O,paperClasses:g.paper,paperSlotProps:r==null?void 0:r.desktopPaper,children:t})}))}))}))}const Kp="@media (prefers-reduced-motion: reduce)",$n=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),xa=$n&&$n[1]?parseInt($n[1],10):null,ba=$n&&$n[2]?parseInt($n[2],10):null,Qp=xa&&xa<10||ba&&ba<13||!1;function Uc(n){const e=ec(Kp,{defaultMatches:!1});return n??(e||Qp)}const Gc={hasNextStep:!1,hasSeveralSteps:!1,goToNextStep:()=>{},areViewsInSameStep:()=>!0};function Zp(n){const{steps:e,isViewMatchingStep:t,onStepChange:i}=n;return s=>{if(e==null)return Gc;const r=e.findIndex(a=>t(s.view,a)),o=r===-1||r===e.length-1?null:e[r+1];return{hasNextStep:o!=null,hasSeveralSteps:e.length>1,goToNextStep:()=>{o!=null&&i(I({},s,{step:o}))},areViewsInSameStep:(a,l)=>{const c=e.find(h=>t(a,h)),u=e.find(h=>t(l,h));return c===u}}}}function qc({onChange:n,onViewChange:e,openTo:t,view:i,views:s,autoFocus:r,focusedView:o,onFocusedViewChange:a,getStepNavigation:l}){const c=T.useRef(t),u=T.useRef(s),h=T.useRef(s.includes(t)?t:s[0]),[f,p]=qn({name:"useViews",state:"view",controlled:i,default:h.current}),m=T.useRef(r?f:null),[y,g]=qn({name:"useViews",state:"focusedView",controlled:o,default:m.current}),x=l?l({setView:p,view:f,defaultView:h.current,views:s}):Gc;T.useEffect(()=>{(c.current&&c.current!==t||u.current&&u.current.some(P=>!s.includes(P)))&&(p(s.includes(t)?t:s[0]),u.current=s,c.current=t)},[t,p,f,s]);const v=s.indexOf(f),b=s[v-1]??null,S=s[v+1]??null,C=U((P,j)=>{g(j?P:A=>P===A?null:A),a==null||a(P,j)}),_=U(P=>{C(P,!0),P!==f&&(p(P),e&&e(P))}),O=U(()=>{S&&_(S)}),w=U((P,j,A)=>{const k=j==="finish",D=A?s.indexOf(A)<s.length-1:!!S;n(P,k&&D?"partial":j,A);let F=null;if(A!=null&&A!==f?F=A:k&&(F=f),F==null)return;const L=s[s.indexOf(F)+1];L==null||!x.areViewsInSameStep(F,L)||_(L)});return I({},x,{view:f,setView:_,focusedView:y,setFocusedView:C,nextView:S,previousView:b,defaultView:s.includes(t)?t:s[0],goToNextView:O,setValueAndGoToNextView:w})}function va(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}function Jp(n,e){const[t,i]=T.useState(va);return Zt(()=>{const s=()=>{i(va())};return window.addEventListener("orientationchange",s),()=>{window.removeEventListener("orientationchange",s)}},[]),zp(n,["hours","minutes","seconds"])?"portrait":e??t}const zi=({name:n,timezone:e,value:t,defaultValue:i,referenceDate:s,onChange:r,valueManager:o})=>{const a=Fe(),[l,c]=qn({name:n,state:"value",controlled:t,default:i??o.emptyValue}),u=T.useMemo(()=>o.getTimezone(a,l),[a,o,l]),h=U(y=>u==null?y:o.setTimezone(a,u,y)),f=T.useMemo(()=>e||u||(s?a.getTimezone(s):"default"),[e,u,s,a]),p=T.useMemo(()=>o.setTimezone(a,f,l),[o,a,f,l]),m=U((y,...g)=>{const x=h(y);c(x),r==null||r(x,...g)});return{value:p,handleValueChange:m,timezone:f}};function em(n){const{props:e,valueManager:t,validator:i}=n,{value:s,defaultValue:r,onChange:o,referenceDate:a,timezone:l,onAccept:c,closeOnSelect:u,open:h,onOpen:f,onClose:p}=e,{current:m}=T.useRef(r),{current:y}=T.useRef(s!==void 0),{current:g}=T.useRef(h!==void 0),x=Fe(),{timezone:v,value:b,handleValueChange:S}=zi({name:"a picker component",timezone:l,value:s,defaultValue:m,referenceDate:a,onChange:o,valueManager:t}),[C,_]=T.useState(()=>({open:!1,lastExternalValue:b,clockShallowValue:void 0,lastCommittedValue:b,hasBeenModifiedSinceMount:!1})),{getValidationErrorForNewValue:O}=Hc({props:e,validator:i,timezone:v,value:b,onError:e.onError}),w=U(k=>{const D=typeof k=="function"?k(C.open):k;g||_(R=>I({},R,{open:D})),D&&f&&f(),D||p==null||p()}),P=U((k,D)=>{const{changeImportance:R="accept",skipPublicationIfPristine:F=!1,validationError:L,shortcut:$,shouldClose:K=R==="accept"}=D??{};let V,J;!F&&!y&&!C.hasBeenModifiedSinceMount?(V=!0,J=R==="accept"):(V=!t.areValuesEqual(x,k,b),J=R==="accept"&&!t.areValuesEqual(x,k,C.lastCommittedValue)),_(ge=>I({},ge,{clockShallowValue:V?void 0:ge.clockShallowValue,lastCommittedValue:J?b:ge.lastCommittedValue,hasBeenModifiedSinceMount:!0}));let W=null;const se=()=>(W||(W={validationError:L??O(k)},$&&(W.shortcut=$)),W);V&&S(k,se()),J&&c&&c(k,se()),K&&w(!1)});b!==C.lastExternalValue&&_(k=>I({},k,{lastExternalValue:b,clockShallowValue:void 0,hasBeenModifiedSinceMount:!0}));const j=U((k,D="partial")=>{if(D==="shallow"){_(R=>I({},R,{clockShallowValue:k,hasBeenModifiedSinceMount:!0}));return}P(k,{changeImportance:D==="finish"&&u?"accept":"set"})});T.useEffect(()=>{if(g){if(h===void 0)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");_(k=>I({},k,{open:h}))}},[g,h]);const A=T.useMemo(()=>t.cleanValue(x,C.clockShallowValue===void 0?b:C.clockShallowValue),[x,t,C.clockShallowValue,b]);return{timezone:v,state:C,setValue:P,setValueFromView:j,setOpen:w,value:b,viewValue:A}}const tm=["className","sx"],Xc=({ref:n,props:e,valueManager:t,valueType:i,variant:s,validator:r,onPopperExited:o,autoFocusView:a,rendererInterceptor:l,localeText:c,viewContainerRole:u,getStepNavigation:h})=>{const{views:f,view:p,openTo:m,onViewChange:y,viewRenderers:g,reduceAnimations:x,orientation:v,disableOpenPicker:b,closeOnSelect:S,disabled:C,readOnly:_,formatDensity:O,enableAccessibleFieldDOMStructure:w,selectedSections:P,onSelectedSectionsChange:j,format:A,label:k,autoFocus:D,name:R}=e,{className:F,sx:L}=e,$=re(e,tm),K=Es(),V=Fe(),J=Mn(),W=Uc(x),se=Jp(f,v),{current:ge}=T.useRef(m??null),[de,we]=T.useState(null),ie=T.useRef(null),be=T.useRef(null),je=T.useRef(null),ue=gt(n,je),{timezone:ne,state:H,setOpen:ee,setValue:Y,setValueFromView:oe,value:he,viewValue:Q}=em({props:e,valueManager:t,validator:r}),{view:ve,setView:q,defaultView:ae,focusedView:te,setFocusedView:le,setValueAndGoToNextView:it,goToNextStep:Ke,hasNextStep:ht,hasSeveralSteps:ct}=qc({view:p,views:f,openTo:m,onChange:oe,onViewChange:y,autoFocus:a,getStepNavigation:h}),jt=U(()=>Y(t.emptyValue)),_n=U(()=>Y(t.getTodayValue(V,ne,i))),jn=U(()=>Y(he)),fe=U(()=>Y(H.lastCommittedValue,{skipPublicationIfPristine:!0})),pe=U(()=>{Y(he,{skipPublicationIfPristine:!0})}),{hasUIView:De,viewModeLookup:Ee,timeViewsCount:rt}=T.useMemo(()=>f.reduce((Xe,Dt)=>{const Ko=g[Dt]==null?"field":"UI";return Xe.viewModeLookup[Dt]=Ko,Ko==="UI"&&(Xe.hasUIView=!0,Gf(Dt)&&(Xe.timeViewsCount+=1)),Xe},{hasUIView:!1,viewModeLookup:{},timeViewsCount:0}),[g,f]),Qe=Ee[ve],yt=U(()=>Qe),[Je,ye]=T.useState(Qe==="UI"?ve:null);Je!==ve&&Ee[ve]==="UI"&&ye(ve),Zt(()=>{Qe==="field"&&H.open&&(ee(!1),setTimeout(()=>{var Xe,Dt;(Xe=be==null?void 0:be.current)==null||Xe.setSelectedSections(ve),(Dt=be==null?void 0:be.current)==null||Dt.focusField(ve)}))},[ve]),Zt(()=>{if(!H.open)return;let Xe=ve;Qe==="field"&&Je!=null&&(Xe=Je),Xe!==ae&&Ee[Xe]==="UI"&&Ee[ae]==="UI"&&(Xe=ae),Xe!==ve&&q(Xe),le(Xe,!0)},[H.open]);const et=T.useMemo(()=>({isPickerValueEmpty:t.areValuesEqual(V,he,t.emptyValue),isPickerOpen:H.open,isPickerDisabled:e.disabled??!1,isPickerReadOnly:e.readOnly??!1,pickerOrientation:se,pickerVariant:s}),[V,t,he,H.open,se,s,e.disabled,e.readOnly]),dt=T.useMemo(()=>b||!De?"hidden":C||_?"disabled":"enabled",[b,De,C,_]),Pt=U(Ke),Yi=T.useMemo(()=>S&&!ct?[]:["cancel","nextOrAccept"],[S,ct]),xt=T.useMemo(()=>({setValue:Y,setOpen:ee,clearValue:jt,setValueToToday:_n,acceptValueChanges:jn,cancelValueChanges:fe,setView:q,goToNextStep:Pt}),[Y,ee,jt,_n,jn,fe,q,Pt]),Ku=T.useMemo(()=>I({},xt,{value:he,timezone:ne,open:H.open,views:f,view:Je,initialView:ge,disabled:C??!1,readOnly:_??!1,autoFocus:D??!1,variant:s,orientation:se,popupRef:ie,reduceAnimations:W,triggerRef:we,triggerStatus:dt,hasNextStep:ht,fieldFormat:A??"",name:R,label:k,rootSx:L,rootRef:ue,rootClassName:F}),[xt,he,ue,s,se,W,C,_,A,F,R,k,L,dt,ht,ne,H.open,Je,f,ge,D]),Qu=T.useMemo(()=>({dismissViews:pe,ownerState:et,hasUIView:De,getCurrentViewMode:yt,rootRefObject:je,labelId:K,triggerElement:de,viewContainerRole:u,defaultActionBarActions:Yi,onPopperExited:o}),[pe,et,De,yt,K,de,u,Yi,o]),Zu=T.useMemo(()=>({formatDensity:O,enableAccessibleFieldDOMStructure:w,selectedSections:P,onSelectedSectionsChange:j,fieldRef:be}),[O,w,P,j,be]);return{providerProps:{localeText:c,contextValue:Ku,privateContextValue:Qu,actionsContextValue:xt,fieldPrivateContextValue:Zu,isValidContextValue:Xe=>{const Dt=r({adapter:J,value:Xe,timezone:ne,props:e});return!t.hasError(Dt)}},renderCurrentView:()=>{if(Je==null)return null;const Xe=g[Je];if(Xe==null)return null;const Dt=I({},$,{views:f,timezone:ne,value:Q,onChange:it,view:Je,onViewChange:q,showViewSwitcher:rt>1,timeViewsCount:rt},u==="tooltip"?{focusedView:null,onFocusedViewChange:()=>{}}:{focusedView:te,onFocusedViewChange:le});return l?d.jsx(l,{viewRenderers:g,popperView:Je,rendererProps:Dt}):Xe(Dt)},ownerState:et}};function Kc(n){return Ue("MuiPickersLayout",n)}const cn=Ge("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),nm=["actions"],im=X(ro,{name:"MuiPickersLayout",slot:"ActionBar"})({});function sm(n){const{actions:e}=n,t=re(n,nm),i=ln(),{clearValue:s,setValueToToday:r,acceptValueChanges:o,cancelValueChanges:a,goToNextStep:l,hasNextStep:c}=ti();if(e==null||e.length===0)return null;const u=e==null?void 0:e.map(h=>{switch(h){case"clear":return d.jsx(Te,{onClick:s,children:i.clearButtonLabel},h);case"cancel":return d.jsx(Te,{onClick:a,children:i.cancelButtonLabel},h);case"accept":return d.jsx(Te,{onClick:o,children:i.okButtonLabel},h);case"today":return d.jsx(Te,{onClick:r,children:i.todayButtonLabel},h);case"next":return d.jsx(Te,{onClick:l,children:i.nextStepButtonLabel},h);case"nextOrAccept":return c?d.jsx(Te,{onClick:l,children:i.nextStepButtonLabel},h):d.jsx(Te,{onClick:o,children:i.okButtonLabel},h);default:return null}});return d.jsx(im,I({},t,{children:u}))}const rm=T.memo(sm),_i=36,$s=2,Vs=320,om=280,bo=336,am=["items","changeImportance"],lm=["getValue"],cm=X(kr,{name:"MuiPickersLayout",slot:"Shortcuts"})({});function dm(n){const{items:e,changeImportance:t="accept"}=n,i=re(n,am),{setValue:s}=Ip(),r=up();if(e==null||e.length===0)return null;const o=e.map(a=>{let{getValue:l}=a,c=re(a,lm);const u=l({isValid:r});return I({},c,{label:c.label,onClick:()=>{s(u,{changeImportance:t,shortcut:c})},disabled:!r(u)})});return d.jsx(cm,I({dense:!0,sx:[{maxHeight:bo,maxWidth:200,overflow:"auto"},...Array.isArray(i.sx)?i.sx:[i.sx]]},i,{children:o.map(a=>d.jsx(Mr,{children:d.jsx(Re,I({},a))},a.id??a.label))}))}const um=["ownerState"];function hm(n){return n.view!==null}const fm=(n,e)=>{const{pickerOrientation:t}=e;return Le({root:["root",t==="landscape"&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},Kc,n)},pm=n=>{const{ownerState:e,defaultActionBarActions:t}=st(),{view:i}=ti(),s=Yt(),{children:r,slots:o,slotProps:a,classes:l}=n,c=T.useMemo(()=>I({},e,{layoutDirection:s?"rtl":"ltr"}),[e,s]),u=fm(l,c),h=(o==null?void 0:o.actionBar)??rm,f=Ce({elementType:h,externalSlotProps:a==null?void 0:a.actionBar,additionalProps:{actions:t},className:u.actionBar,ownerState:c}),p=re(f,um),m=d.jsx(h,I({},p)),y=o==null?void 0:o.toolbar,g=Ce({elementType:y,externalSlotProps:a==null?void 0:a.toolbar,className:u.toolbar,ownerState:c}),x=hm(g)&&y?d.jsx(y,I({},g)):null,v=r,b=o==null?void 0:o.tabs,S=i&&b?d.jsx(b,I({className:u.tabs},a==null?void 0:a.tabs)):null,C=(o==null?void 0:o.shortcuts)??dm,_=Ce({elementType:C,externalSlotProps:a==null?void 0:a.shortcuts,className:u.shortcuts,ownerState:c}),O=i&&C?d.jsx(C,I({},_)):null;return{toolbar:x,content:v,tabs:S,actionBar:m,shortcuts:O,ownerState:c}},mm=(n,e)=>{const{pickerOrientation:t}=e;return Le({root:["root",t==="landscape"&&"landscape"],contentWrapper:["contentWrapper"]},Kc,n)},gm=X("div",{name:"MuiPickersLayout",slot:"Root"})({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${cn.actionBar}`]:{gridColumn:"1 / 4",gridRow:3},variants:[{props:{pickerOrientation:"landscape"},style:{[`& .${cn.toolbar}`]:{gridColumn:1,gridRow:"2 / 3"},[`.${cn.shortcuts}`]:{gridColumn:"2 / 4",gridRow:1}}},{props:{pickerOrientation:"landscape",layoutDirection:"rtl"},style:{[`& .${cn.toolbar}`]:{gridColumn:3}}},{props:{pickerOrientation:"portrait"},style:{[`& .${cn.toolbar}`]:{gridColumn:"2 / 4",gridRow:1},[`& .${cn.shortcuts}`]:{gridColumn:1,gridRow:"2 / 3"}}},{props:{pickerOrientation:"portrait",layoutDirection:"rtl"},style:{[`& .${cn.shortcuts}`]:{gridColumn:3}}}]}),ym=X("div",{name:"MuiPickersLayout",slot:"ContentWrapper"})({gridColumn:"2 / 4",gridRow:2,display:"flex",flexDirection:"column"}),Qc=T.forwardRef(function(e,t){const i=Be({props:e,name:"MuiPickersLayout"}),{toolbar:s,content:r,tabs:o,actionBar:a,shortcuts:l,ownerState:c}=pm(i),{orientation:u,variant:h}=ti(),{sx:f,className:p,classes:m}=i,y=mm(m,c);return d.jsxs(gm,{ref:t,sx:f,className:Ze(y.root,p),ownerState:c,children:[u==="landscape"?l:s,u==="landscape"?s:l,d.jsx(ym,{className:y.contentWrapper,ownerState:c,children:h==="desktop"?d.jsxs(T.Fragment,{children:[r,o]}):d.jsxs(T.Fragment,{children:[o,r]})}),a]})});function vo(n){const{ownerState:e}=st(),t=Yt();return T.useMemo(()=>I({},e,{isFieldDisabled:n.disabled??!1,isFieldReadOnly:n.readOnly??!1,isFieldRequired:n.required??!1,fieldDirection:t?"rtl":"ltr"}),[e,n.disabled,n.readOnly,n.required,t])}const xm=qe(d.jsx("path",{d:"M7 10l5 5 5-5z"})),bm=qe(d.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"})),vm=qe(d.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),wm=qe(d.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}));qe(d.jsxs(T.Fragment,{children:[d.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),d.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));qe(d.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}));qe(d.jsxs(T.Fragment,{children:[d.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),d.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));const Tm=qe(d.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));function Sm(n){return Ue("MuiPickersTextField",n)}Ge("MuiPickersTextField",["root","focused","disabled","error","required"]);function Pm(n){return Ue("MuiPickersInputBase",n)}const Vn=Ge("MuiPickersInputBase",["root","focused","disabled","error","notchedOutline","sectionContent","sectionBefore","sectionAfter","adornedStart","adornedEnd","input","activeBar"]);function Dm(n){return Ue("MuiPickersSectionList",n)}const ai=Ge("MuiPickersSectionList",["root","section","sectionContent"]),Cm=["slots","slotProps","elements","sectionListRef","classes"],Zc=X("div",{name:"MuiPickersSectionList",slot:"Root"})({direction:"ltr /*! @noflip */",outline:"none"}),Jc=X("span",{name:"MuiPickersSectionList",slot:"Section"})({}),ed=X("span",{name:"MuiPickersSectionList",slot:"SectionSeparator"})({whiteSpace:"pre"}),td=X("span",{name:"MuiPickersSectionList",slot:"SectionContent"})({outline:"none"}),Mm=n=>Le({root:["root"],section:["section"],sectionContent:["sectionContent"]},Dm,n);function km(n){const{slots:e,slotProps:t,element:i,classes:s}=n,{ownerState:r}=st(),o=(e==null?void 0:e.section)??Jc,a=Ce({elementType:o,externalSlotProps:t==null?void 0:t.section,externalForwardedProps:i.container,className:s.section,ownerState:r}),l=(e==null?void 0:e.sectionContent)??td,c=Ce({elementType:l,externalSlotProps:t==null?void 0:t.sectionContent,externalForwardedProps:i.content,additionalProps:{suppressContentEditableWarning:!0},className:s.sectionContent,ownerState:r}),u=(e==null?void 0:e.sectionSeparator)??ed,h=Ce({elementType:u,externalSlotProps:t==null?void 0:t.sectionSeparator,externalForwardedProps:i.before,ownerState:I({},r,{separatorPosition:"before"})}),f=Ce({elementType:u,externalSlotProps:t==null?void 0:t.sectionSeparator,externalForwardedProps:i.after,ownerState:I({},r,{separatorPosition:"after"})});return d.jsxs(o,I({},a,{children:[d.jsx(u,I({},h)),d.jsx(l,I({},c)),d.jsx(u,I({},f))]}))}const Im=T.forwardRef(function(e,t){const i=Be({props:e,name:"MuiPickersSectionList"}),{slots:s,slotProps:r,elements:o,sectionListRef:a,classes:l}=i,c=re(i,Cm),u=Mm(l),{ownerState:h}=st(),f=T.useRef(null),p=gt(t,f),m=x=>{if(!f.current)throw new Error(`MUI X: Cannot call sectionListRef.${x} before the mount of the component.`);return f.current};T.useImperativeHandle(a,()=>({getRoot(){return m("getRoot")},getSectionContainer(x){return m("getSectionContainer").querySelector(`.${ai.section}[data-sectionindex="${x}"]`)},getSectionContent(x){return m("getSectionContent").querySelector(`.${ai.section}[data-sectionindex="${x}"] .${ai.sectionContent}`)},getSectionIndexFromDOMElement(x){const v=m("getSectionIndexFromDOMElement");if(x==null||!v.contains(x))return null;let b=null;return x.classList.contains(ai.section)?b=x:x.classList.contains(ai.sectionContent)&&(b=x.parentElement),b==null?null:Number(b.dataset.sectionindex)}}));const y=(s==null?void 0:s.root)??Zc,g=Ce({elementType:y,externalSlotProps:r==null?void 0:r.root,externalForwardedProps:c,additionalProps:{ref:p,suppressContentEditableWarning:!0},className:u.root,ownerState:h});return d.jsx(y,I({},g,{children:g.contentEditable?o.map(({content:x,before:v,after:b})=>`${v.children}${x.children}${b.children}`).join(""):d.jsx(T.Fragment,{children:o.map((x,v)=>d.jsx(km,{slots:s,slotProps:r,element:x,classes:u},v))})}))}),nd=T.createContext(null),Ws=()=>{const n=T.useContext(nd);if(n==null)throw new Error(["MUI X: The `usePickerTextFieldOwnerState` can only be called in components that are used inside a PickerTextField component"].join(`
`));return n},_m=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef","onFocus","onBlur","classes","ownerState"],jm=n=>Math.round(n*1e5)/1e5,Hs=X("div",{name:"MuiPickersInputBase",slot:"Root"})(({theme:n})=>I({},n.typography.body1,{color:(n.vars||n).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:`${jm(.15/16)}em`,variants:[{props:{isInputInFullWidth:!0},style:{width:"100%"}}]})),wo=X(Zc,{name:"MuiPickersInputBase",slot:"SectionsContainer"})(({theme:n})=>({padding:"4px 0 5px",fontFamily:n.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{fieldDirection:"rtl"},style:{textAlign:"right /*! @noflip */"}},{props:{inputSize:"small"},style:{paddingTop:1}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0},style:{color:"currentColor",opacity:0}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!1},style:n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:n.palette.mode==="light"?.42:.5}}]})),Rm=X(Jc,{name:"MuiPickersInputBase",slot:"Section"})(({theme:n})=>({fontFamily:n.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"inline-block",whiteSpace:"nowrap"})),Om=X(td,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(n,e)=>e.content})(({theme:n})=>({fontFamily:n.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"})),Am=X(ed,{name:"MuiPickersInputBase",slot:"Separator"})(()=>({whiteSpace:"pre",letterSpacing:"inherit"})),Fm=X("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(n,e)=>e.hiddenInput})(I({},xh)),Em=X("div",{name:"MuiPickersInputBase",slot:"ActiveBar"})(({theme:n,ownerState:e})=>({display:"none",position:"absolute",height:2,bottom:2,borderTopLeftRadius:2,borderTopRightRadius:2,transition:n.transitions.create(["width","left"],{duration:n.transitions.duration.shortest}),backgroundColor:(n.vars||n).palette.primary.main,'[data-active-range-position="start"] &, [data-active-range-position="end"] &':{display:"block"},'[data-active-range-position="start"] &':{left:e.sectionOffsets[0]},'[data-active-range-position="end"] &':{left:e.sectionOffsets[1]}})),Lm=(n,e)=>{const{isFieldFocused:t,isFieldDisabled:i,isFieldReadOnly:s,hasFieldError:r,inputSize:o,isInputInFullWidth:a,inputColor:l,hasStartAdornment:c,hasEndAdornment:u}=e,h={root:["root",t&&!i&&"focused",i&&"disabled",s&&"readOnly",r&&"error",a&&"fullWidth",`color${mt(l)}`,o==="small"&&"inputSizeSmall",c&&"adornedStart",u&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"],activeBar:["activeBar"]};return Le(h,Pm,n)};function wa(n,e,t,i){var s;if(n.content.id){const r=(s=e.current)==null?void 0:s.querySelectorAll(`[data-sectionindex="${t}"] [data-range-position="${i}"]`);if(r)return Array.from(r).reduce((o,a)=>o+a.offsetWidth,0)}return 0}function Nm(n,e){var s,r,o,a,l;let t=0;if(((s=e.current)==null?void 0:s.getAttribute("data-active-range-position"))==="end")for(let c=n.length-1;c>=n.length/2;c-=1)t+=wa(n[c],e,c,"end");else for(let c=0;c<n.length/2;c+=1)t+=wa(n[c],e,c,"start");return{activeBarWidth:t,sectionOffsets:[((o=(r=e.current)==null?void 0:r.querySelector('[data-sectionindex="0"]'))==null?void 0:o.offsetLeft)||0,((l=(a=e.current)==null?void 0:a.querySelector(`[data-sectionindex="${n.length/2}"]`))==null?void 0:l.offsetLeft)||0]}}const To=T.forwardRef(function(e,t){const i=Be({props:e,name:"MuiPickersInputBase"}),{elements:s,areAllSectionsEmpty:r,value:o,onChange:a,id:l,endAdornment:c,startAdornment:u,renderSuffix:h,slots:f,slotProps:p,contentEditable:m,tabIndex:y,onInput:g,onPaste:x,onKeyDown:v,name:b,readOnly:S,inputProps:C,inputRef:_,sectionListRef:O,onFocus:w,onBlur:P,classes:j,ownerState:A}=i,k=re(i,_m),D=Ws(),R=T.useRef(null),F=T.useRef(null),L=T.useRef([]),$=gt(t,R),K=gt(C==null?void 0:C.ref,_),V=rc();if(!V)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");const J=A??D,W=ne=>{var H;(H=V.onFocus)==null||H.call(V,ne),w==null||w(ne)},se=ne=>{W(ne)},ge=ne=>{var H,ee;if(v==null||v(ne),ne.key==="Enter"&&!ne.defaultMuiPrevented){if((H=R.current)!=null&&H.dataset.multiInput)return;const Y=(ee=R.current)==null?void 0:ee.closest("form"),oe=Y==null?void 0:Y.querySelector('[type="submit"]');if(!Y||!oe)return;ne.preventDefault(),Y.requestSubmit(oe)}},de=ne=>{var H;(H=V.onBlur)==null||H.call(V,ne),P==null||P(ne)};T.useEffect(()=>{V&&V.setAdornedStart(!!u)},[V,u]),T.useEffect(()=>{V&&(r?V.onEmpty():V.onFilled())},[V,r]);const we=Lm(j,J),ie=(f==null?void 0:f.root)||Hs,be=Ce({elementType:ie,externalSlotProps:p==null?void 0:p.root,externalForwardedProps:k,additionalProps:{"aria-invalid":V.error,ref:$},className:we.root,ownerState:J}),je=(f==null?void 0:f.input)||wo,ue=s.some(ne=>ne.content["data-range-position"]!==void 0);return T.useEffect(()=>{if(!ue||!J.isPickerOpen)return;const{activeBarWidth:ne,sectionOffsets:H}=Nm(s,R);L.current=[H[0],H[1]],F.current&&(F.current.style.width=`${ne}px`)},[s,ue,J.isPickerOpen]),d.jsxs(ie,I({},be,{children:[u,d.jsx(Im,{sectionListRef:O,elements:s,contentEditable:m,tabIndex:y,className:we.sectionsContainer,onFocus:W,onBlur:de,onInput:g,onPaste:x,onKeyDown:ge,slots:{root:je,section:Rm,sectionContent:Om,sectionSeparator:Am},slotProps:{root:I({},p==null?void 0:p.input,{ownerState:J}),sectionContent:{className:Vn.sectionContent},sectionSeparator:({separatorPosition:ne})=>({className:ne==="before"?Vn.sectionBefore:Vn.sectionAfter})}}),c,h?h(I({},V)):null,d.jsx(Fm,I({name:b,className:we.input,value:o,onChange:a,id:l,"aria-hidden":"true",tabIndex:-1,readOnly:S,required:V.required,disabled:V.disabled,onFocus:se},C,{ref:K})),ue&&d.jsx(Em,{className:we.activeBar,ref:F,ownerState:{sectionOffsets:L.current}})]}))});function zm(n){return Ue("MuiPickersOutlinedInput",n)}const Ct=I({},Vn,Ge("MuiPickersOutlinedInput",["root","notchedOutline","input"])),Bm=["children","className","label","notched","shrink"],$m=X("fieldset",{name:"MuiPickersOutlinedInput",slot:"NotchedOutline"})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%",borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),Ta=X("span")(({theme:n})=>({fontFamily:n.typography.fontFamily,fontSize:"inherit"})),Vm=X("legend",{shouldForwardProp:n=>Cn(n)&&n!=="notched"})(({theme:n})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:{inputHasLabel:!1},style:{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})}},{props:{inputHasLabel:!0},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:{inputHasLabel:!0,notched:!0},style:{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}}]}));function Wm(n){const{className:e,label:t,notched:i}=n,s=re(n,Bm),r=Ws();return d.jsx($m,I({"aria-hidden":!0,className:e},s,{ownerState:r,children:d.jsx(Vm,{ownerState:r,notched:i,children:t?d.jsx(Ta,{children:t}):d.jsx(Ta,{className:"notranslate",children:"â€‹"})})}))}const Hm=["label","autoFocus","ownerState","classes","notched"],Ym=X(Hs,{name:"MuiPickersOutlinedInput",slot:"Root"})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{padding:"0 14px",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${Ct.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${Ct.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${Ct.focused} .${Ct.notchedOutline}`]:{borderStyle:"solid",borderWidth:2},[`&.${Ct.disabled}`]:{[`& .${Ct.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled},"*":{color:(n.vars||n).palette.action.disabled}},[`&.${Ct.error} .${Ct.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},variants:Object.keys((n.vars??n).palette).filter(t=>{var i;return((i=(n.vars??n).palette[t])==null?void 0:i.main)??!1}).map(t=>({props:{inputColor:t},style:{[`&.${Ct.focused}:not(.${Ct.error}) .${Ct.notchedOutline}`]:{borderColor:(n.vars||n).palette[t].main}}}))}}),Um=X(wo,{name:"MuiPickersOutlinedInput",slot:"SectionsContainer"})({padding:"16.5px 0",variants:[{props:{inputSize:"small"},style:{padding:"8.5px 0"}}]}),Gm=n=>{const t=Le({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},zm,n);return I({},n,t)},id=T.forwardRef(function(e,t){const i=Be({props:e,name:"MuiPickersOutlinedInput"}),{label:s,classes:r,notched:o}=i,a=re(i,Hm),l=rc(),c=Gm(r);return d.jsx(To,I({slots:{root:Ym,input:Um},renderSuffix:u=>d.jsx(Wm,{shrink:!!(o||u.adornedStart||u.focused||u.filled),notched:!!(o||u.adornedStart||u.focused||u.filled),className:c.notchedOutline,label:s!=null&&s!==""&&(l!=null&&l.required)?d.jsxs(T.Fragment,{children:[s,"â€‰","*"]}):s})},a,{label:s,classes:c,ref:t}))});id.muiName="Input";function qm(n){return Ue("MuiPickersFilledInput",n)}const dn=I({},Vn,Ge("MuiPickersFilledInput",["root","underline","input"])),Xm=["label","autoFocus","disableUnderline","hiddenLabel","classes"],Km=X(Hs,{name:"MuiPickersFilledInput",slot:"Root",shouldForwardProp:n=>Cn(n)&&n!=="disableUnderline"})(({theme:n})=>{const e=n.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",r=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:i,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:i}},[`&.${dn.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:i},[`&.${dn.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:r},variants:[...Object.keys((n.vars??n).palette).filter(o=>(n.vars??n).palette[o].main).map(o=>{var a;return{props:{inputColor:o,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(a=(n.vars||n).palette[o])==null?void 0:a.main}`}}}}),{props:{disableUnderline:!1},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${dn.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${dn.error}`]:{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${dn.disabled}, .${dn.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${dn.disabled}:before`]:{borderBottomStyle:"dotted"}}},{props:{hasStartAdornment:!0},style:{paddingLeft:12}},{props:{hasEndAdornment:!0},style:{paddingRight:12}}]}}),Qm=X(wo,{name:"MuiPickersFilledInput",slot:"sectionsContainer",shouldForwardProp:n=>Cn(n)&&n!=="hiddenLabel"})({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,variants:[{props:{inputSize:"small"},style:{paddingTop:21,paddingBottom:4}},{props:{hasStartAdornment:!0},style:{paddingLeft:0}},{props:{hasEndAdornment:!0},style:{paddingRight:0}},{props:{hiddenLabel:!0},style:{paddingTop:16,paddingBottom:17}},{props:{hiddenLabel:!0,inputSize:"small"},style:{paddingTop:8,paddingBottom:9}}]}),Zm=(n,e)=>{const{inputHasUnderline:t}=e,s=Le({root:["root",t&&"underline"],input:["input"]},qm,n);return I({},n,s)},sd=T.forwardRef(function(e,t){const i=Be({props:e,name:"MuiPickersFilledInput"}),{label:s,disableUnderline:r=!1,hiddenLabel:o=!1,classes:a}=i,l=re(i,Xm),c=Ws(),u=I({},c,{inputHasUnderline:!r}),h=Zm(a,u);return d.jsx(To,I({slots:{root:Km,input:Qm},slotProps:{root:{disableUnderline:r},input:{hiddenLabel:o}}},l,{label:s,classes:h,ref:t,ownerState:u}))});sd.muiName="Input";function Jm(n){return Ue("MuiPickersFilledInput",n)}const li=I({},Vn,Ge("MuiPickersInput",["root","underline","input"])),eg=["label","autoFocus","disableUnderline","ownerState","classes"],tg=X(Hs,{name:"MuiPickersInput",slot:"Root",shouldForwardProp:n=>Cn(n)&&n!=="disableUnderline"})(({theme:n})=>{let t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(t=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),{"label + &":{marginTop:16},variants:[...Object.keys((n.vars??n).palette).filter(i=>(n.vars??n).palette[i].main).map(i=>({props:{inputColor:i},style:{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[i].main}`}}})),{props:{disableUnderline:!1},style:{"&::after":{background:"red",left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${li.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${li.error}`]:{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${li.disabled}, .${li.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${li.disabled}:before`]:{borderBottomStyle:"dotted"}}}]}}),ng=(n,e)=>{const{inputHasUnderline:t}=e,s=Le({root:["root",!t&&"underline"],input:["input"]},Jm,n);return I({},n,s)},rd=T.forwardRef(function(e,t){const i=Be({props:e,name:"MuiPickersInput"}),{label:s,disableUnderline:r=!1,classes:o}=i,a=re(i,eg),l=Ws(),c=I({},l,{inputHasUnderline:!r}),u=ng(o,c);return d.jsx(To,I({slots:{root:tg},slotProps:{root:{disableUnderline:r}}},a,{label:s,classes:u,ref:t}))});rd.muiName="Input";const ig=["onFocus","onBlur","className","classes","color","disabled","error","variant","required","InputProps","inputProps","inputRef","sectionListRef","elements","areAllSectionsEmpty","onClick","onKeyDown","onKeyUp","onPaste","onInput","endAdornment","startAdornment","tabIndex","contentEditable","focused","value","onChange","fullWidth","id","name","helperText","FormHelperTextProps","label","InputLabelProps","data-active-range-position"],sg={standard:rd,filled:sd,outlined:id},rg=X(nc,{name:"MuiPickersTextField",slot:"Root"})({}),og=(n,e)=>{const{isFieldFocused:t,isFieldDisabled:i,isFieldRequired:s}=e;return Le({root:["root",t&&!i&&"focused",i&&"disabled",s&&"required"]},Sm,n)},od=T.forwardRef(function(e,t){const i=Be({props:e,name:"MuiPickersTextField"}),{onFocus:s,onBlur:r,className:o,classes:a,color:l="primary",disabled:c=!1,error:u=!1,variant:h="outlined",required:f=!1,InputProps:p,inputProps:m,inputRef:y,sectionListRef:g,elements:x,areAllSectionsEmpty:v,onClick:b,onKeyDown:S,onKeyUp:C,onPaste:_,onInput:O,endAdornment:w,startAdornment:P,tabIndex:j,contentEditable:A,focused:k,value:D,onChange:R,fullWidth:F,id:L,name:$,helperText:K,FormHelperTextProps:V,label:J,InputLabelProps:W,"data-active-range-position":se}=i,ge=re(i,ig),de=T.useRef(null),we=gt(t,de),ie=Es(L),be=K&&ie?`${ie}-helper-text`:void 0,je=J&&ie?`${ie}-label`:void 0,ue=vo({disabled:i.disabled,required:i.required,readOnly:p==null?void 0:p.readOnly}),ne=T.useMemo(()=>I({},ue,{isFieldValueEmpty:v,isFieldFocused:k??!1,hasFieldError:u??!1,inputSize:i.size??"medium",inputColor:l??"primary",isInputInFullWidth:F??!1,hasStartAdornment:!!(P??(p==null?void 0:p.startAdornment)),hasEndAdornment:!!(w??(p==null?void 0:p.endAdornment)),inputHasLabel:!!J}),[ue,v,k,u,i.size,l,F,P,w,p==null?void 0:p.startAdornment,p==null?void 0:p.endAdornment,J]),H=og(a,ne),ee=sg[h];return d.jsx(nd.Provider,{value:ne,children:d.jsxs(rg,I({className:Ze(H.root,o),ref:we,focused:k,disabled:c,variant:h,error:u,color:l,fullWidth:F,required:f,ownerState:ne},ge,{children:[J!=null&&J!==""&&d.jsx(ic,I({htmlFor:ie,id:je},W,{children:J})),d.jsx(ee,I({elements:x,areAllSectionsEmpty:v,onClick:b,onKeyDown:S,onKeyUp:C,onInput:O,onPaste:_,onFocus:s,onBlur:r,endAdornment:w,startAdornment:P,tabIndex:j,contentEditable:A,value:D,onChange:R,id:ie,fullWidth:F,inputProps:m,inputRef:y,sectionListRef:g,label:J,name:$,role:"group","aria-labelledby":je,"aria-describedby":be,"aria-live":be?"polite":void 0,"data-active-range-position":se},p)),K&&d.jsx(Ih,I({id:be},V,{children:K}))]}))})}),ag=["enableAccessibleFieldDOMStructure"],lg=["InputProps","readOnly","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],cg=["onPaste","onKeyDown","inputMode","readOnly","InputProps","inputProps","inputRef","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],dg=["ownerState"],ug=["ownerState"],hg=["ownerState"],fg=["ownerState"],pg=["InputProps","inputProps"],mg=n=>{let{enableAccessibleFieldDOMStructure:e}=n,t=re(n,ag);if(e){const{InputProps:g,readOnly:x,onClear:v,clearable:b,clearButtonPosition:S,openPickerButtonPosition:C,openPickerAriaLabel:_}=t,O=re(t,lg);return{clearable:b,onClear:v,clearButtonPosition:S,openPickerButtonPosition:C,openPickerAriaLabel:_,textFieldProps:I({},O,{InputProps:I({},g??{},{readOnly:x})})}}const{onPaste:i,onKeyDown:s,inputMode:r,readOnly:o,InputProps:a,inputProps:l,inputRef:c,onClear:u,clearable:h,clearButtonPosition:f,openPickerButtonPosition:p,openPickerAriaLabel:m}=t,y=re(t,cg);return{clearable:h,onClear:u,clearButtonPosition:f,openPickerButtonPosition:p,openPickerAriaLabel:m,textFieldProps:I({},y,{InputProps:I({},a??{},{readOnly:o}),inputProps:I({},l??{},{inputMode:r,onPaste:i,onKeyDown:s,ref:c})})}},So=T.createContext({slots:{},slotProps:{},inputRef:void 0});function gg(n){var V,J;const{slots:e,slotProps:t,fieldResponse:i,defaultOpenPickerIcon:s}=n,r=ln(),o=xo(),a=T.useContext(So),{textFieldProps:l,onClear:c,clearable:u,openPickerAriaLabel:h,clearButtonPosition:f="end",openPickerButtonPosition:p="end"}=mg(i),m=vo(l),y=U(W=>{W.preventDefault(),o==null||o.setOpen(se=>!se)}),g=o?o.triggerStatus:"hidden",x=u?f:null,v=g!=="hidden"?p:null,b=(e==null?void 0:e.textField)??a.slots.textField??(i.enableAccessibleFieldDOMStructure===!1?_e:od),S=(e==null?void 0:e.inputAdornment)??a.slots.inputAdornment??sc,C=Ce({elementType:S,externalSlotProps:us(a.slotProps.inputAdornment,t==null?void 0:t.inputAdornment),additionalProps:{position:"start"},ownerState:I({},m,{position:"start"})}),_=re(C,dg),O=Ce({elementType:S,externalSlotProps:t==null?void 0:t.inputAdornment,additionalProps:{position:"end"},ownerState:I({},m,{position:"end"})}),w=re(O,ug),P=a.slots.openPickerButton??Sn,j=Ce({elementType:P,externalSlotProps:a.slotProps.openPickerButton,additionalProps:{disabled:g==="disabled",onClick:y,"aria-label":h,edge:l.variant!=="standard"?v:!1},ownerState:m}),A=re(j,hg),k=a.slots.openPickerIcon??s,D=Ce({elementType:k,externalSlotProps:a.slotProps.openPickerIcon,ownerState:m}),R=(e==null?void 0:e.clearButton)??a.slots.clearButton??Sn,F=Ce({elementType:R,externalSlotProps:us(a.slotProps.clearButton,t==null?void 0:t.clearButton),className:"clearButton",additionalProps:{title:r.fieldClearLabel,tabIndex:-1,onClick:c,disabled:i.disabled||i.readOnly,edge:l.variant!=="standard"&&x!==v?x:!1},ownerState:m}),L=re(F,fg),$=(e==null?void 0:e.clearIcon)??a.slots.clearIcon??Tm,K=Ce({elementType:$,externalSlotProps:us(a.slotProps.clearIcon,t==null?void 0:t.clearIcon),additionalProps:{fontSize:"small"},ownerState:m});return l.ref=gt(l.ref,o==null?void 0:o.rootRef),l.InputProps||(l.InputProps={}),o&&(l.InputProps.ref=o.triggerRef),!((V=l.InputProps)!=null&&V.startAdornment)&&(x==="start"||v==="start")&&(l.InputProps.startAdornment=d.jsxs(S,I({},_,{children:[v==="start"&&d.jsx(P,I({},A,{children:d.jsx(k,I({},D))})),x==="start"&&d.jsx(R,I({},L,{children:d.jsx($,I({},K))}))]}))),!((J=l.InputProps)!=null&&J.endAdornment)&&(x==="end"||v==="end")&&(l.InputProps.endAdornment=d.jsxs(S,I({},w,{children:[x==="end"&&d.jsx(R,I({},L,{children:d.jsx($,I({},K))})),v==="end"&&d.jsx(P,I({},A,{children:d.jsx(k,I({},D))}))]}))),x!=null&&(l.sx=[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(l.sx)?l.sx:[l.sx]]),d.jsx(b,I({},l))}function us(n,e){return n?e?t=>I({},ys(e,t),ys(n,t)):n:e}function yg(n){const{ref:e,externalForwardedProps:t,slotProps:i}=n,s=T.useContext(So),r=xo(),o=vo(t),{InputProps:a,inputProps:l}=t,c=re(t,pg),u=Ce({elementType:od,externalSlotProps:us(s.slotProps.textField,i==null?void 0:i.textField),externalForwardedProps:c,additionalProps:{ref:e,sx:r==null?void 0:r.rootSx,label:r==null?void 0:r.label,name:r==null?void 0:r.name,className:r==null?void 0:r.rootClassName,inputRef:s.inputRef},ownerState:o});return u.inputProps=I({},l,u.inputProps),u.InputProps=I({},a,u.InputProps),u}function ad(n){const{slots:e={},slotProps:t={},inputRef:i,children:s}=n,r=T.useMemo(()=>({inputRef:i,slots:{openPickerButton:e.openPickerButton,openPickerIcon:e.openPickerIcon,textField:e.textField,inputAdornment:e.inputAdornment,clearIcon:e.clearIcon,clearButton:e.clearButton},slotProps:{openPickerButton:t.openPickerButton,openPickerIcon:t.openPickerIcon,textField:t.textField,inputAdornment:t.inputAdornment,clearIcon:t.clearIcon,clearButton:t.clearButton}}),[i,e.openPickerButton,e.openPickerIcon,e.textField,e.inputAdornment,e.clearIcon,e.clearButton,t.openPickerButton,t.openPickerIcon,t.textField,t.inputAdornment,t.clearIcon,t.clearButton]);return d.jsx(So.Provider,{value:r,children:s})}function ld(n){const{steps:e}=n;return Zp({steps:e,isViewMatchingStep:(t,i)=>i.views==null||i.views.includes(t),onStepChange:({step:t,defaultView:i,setView:s,view:r,views:o})=>{const a=t.views==null?i:t.views.find(l=>o.includes(l));a!==r&&s(a)}})}const xg=["props","steps"],bg=["ownerState"],vg=n=>{var _;let{props:e,steps:t}=n,i=re(n,xg);const{slots:s,slotProps:r,label:o,inputRef:a,localeText:l}=e,c=ld({steps:t}),{providerProps:u,renderCurrentView:h,ownerState:f}=Xc(I({},i,{props:e,localeText:l,autoFocusView:!0,viewContainerRole:"dialog",variant:"desktop",getStepNavigation:c})),p=u.privateContextValue.labelId,m=((_=r==null?void 0:r.toolbar)==null?void 0:_.hidden)??!1,y=s.field,g=Ce({elementType:y,externalSlotProps:r==null?void 0:r.field,additionalProps:I({},m&&{id:p}),ownerState:f}),x=re(g,bg),v=s.layout??Qc;let b=p;m&&(o?b=`${p}-label`:b=void 0);const S=I({},r,{toolbar:I({},r==null?void 0:r.toolbar,{titleId:p}),popper:I({"aria-labelledby":b},r==null?void 0:r.popper)});return{renderPicker:()=>d.jsx(Nc,I({},u,{children:d.jsxs(ad,{slots:s,slotProps:S,inputRef:a,children:[d.jsx(y,I({},x)),d.jsx(Xp,{slots:s,slotProps:S,children:d.jsx(v,I({},S==null?void 0:S.layout,{slots:s,slotProps:S,children:h()}))})]})}))}},Fn=n=>n.saveQuery!=null,cd=({stateResponse:{localizedDigits:n,sectionsValueBoundaries:e,state:t,timezone:i,setCharacterQuery:s,setTempAndroidValueStr:r,updateSectionValue:o}})=>{const a=Fe(),l=({keyPressed:h,sectionIndex:f},p,m)=>{const y=h.toLowerCase(),g=t.sections[f];if(t.characterQuery!=null&&(!m||m(t.characterQuery.value))&&t.characterQuery.sectionIndex===f){const v=`${t.characterQuery.value}${y}`,b=p(v,g);if(!Fn(b))return s({sectionIndex:f,value:v,sectionType:g.type}),b}const x=p(y,g);return Fn(x)&&!x.saveQuery?(s(null),null):(s({sectionIndex:f,value:y,sectionType:g.type}),Fn(x)?null:x)},c=h=>{const f=(y,g,x)=>{const v=g.filter(b=>b.toLowerCase().startsWith(x));return v.length===0?{saveQuery:!1}:{sectionValue:v[0],shouldGoToNextSection:v.length===1}},p=(y,g,x,v)=>{const b=S=>Ic(a,i,g.type,S);if(g.contentType==="letter")return f(g.format,b(g.format),y);if(x&&v!=null&&kc(a,x).contentType==="letter"){const S=b(x),C=f(x,S,y);return Fn(C)?{saveQuery:!1}:I({},C,{sectionValue:v(C.sectionValue,S)})}return{saveQuery:!1}};return l(h,(y,g)=>{switch(g.type){case"month":{const x=v=>pa(a,v,a.formats.month,g.format);return p(y,g,a.formats.month,x)}case"weekDay":{const x=(v,b)=>b.indexOf(v).toString();return p(y,g,a.formats.weekday,x)}case"meridiem":return p(y,g);default:return{saveQuery:!1}}})},u=h=>{const f=(m,y)=>{const g=Pn(m,n),x=Number(g),v=e[y.type]({currentDate:null,format:y.format,contentType:y.contentType});if(x>v.maximum)return{saveQuery:!1};if(x<v.minimum)return{saveQuery:!0};const b=x*10>v.maximum||g.length===v.maximum.toString().length;return{sectionValue:_c(a,x,v,n,y),shouldGoToNextSection:b}};return l(h,(m,y)=>{if(y.contentType==="digit"||y.contentType==="digit-with-letter")return f(m,y);if(y.type==="month"){jc(a,"digit","month","MM");const g=f(m,{type:y.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(Fn(g))return g;const x=pa(a,g.sectionValue,"MM",y.format);return I({},g,{sectionValue:x})}if(y.type==="weekDay"){const g=f(m,y);if(Fn(g))return g;const x=zs(a,y.format)[Number(g.sectionValue)-1];return I({},g,{sectionValue:x})}return{saveQuery:!1}},m=>fa(m,n))};return U(h=>{const f=t.sections[h.sectionIndex],m=fa(h.keyPressed,n)?u(I({},h,{keyPressed:po(h.keyPressed,n)})):c(h);if(m==null){r(null);return}o({section:f,newSectionValue:m.sectionValue,shouldGoToNextSection:m.shouldGoToNextSection})})},wg=5e3,dd=n=>{var ve;const e=Fe(),t=ln(),i=Mn(),s=Yt(),{manager:{validator:r,valueType:o,internal_valueManager:a,internal_fieldValueManager:l},internalPropsWithDefaults:c,internalPropsWithDefaults:{value:u,defaultValue:h,referenceDate:f,onChange:p,format:m,formatDensity:y="dense",selectedSections:g,onSelectedSectionsChange:x,shouldRespectLeadingZeros:v=!1,timezone:b,enableAccessibleFieldDOMStructure:S=!0},forwardedProps:{error:C}}=n,{value:_,handleValueChange:O,timezone:w}=zi({name:"a field component",timezone:b,value:u,defaultValue:h,referenceDate:f,onChange:p,valueManager:a}),P=T.useRef(_);T.useEffect(()=>{P.current=_},[_]);const{hasValidationError:j}=Hc({props:c,validator:r,timezone:w,value:_,onError:c.onError}),A=T.useMemo(()=>C!==void 0?C:j,[j,C]),k=T.useMemo(()=>Zf(e),[e]),D=T.useMemo(()=>ip(e,k,w),[e,k,w]),R=T.useCallback(q=>l.getSectionsFromValue(q,ae=>ya({utils:e,localeText:t,localizedDigits:k,format:m,date:ae,formatDensity:y,shouldRespectLeadingZeros:v,enableAccessibleFieldDOMStructure:S,isRtl:s})),[l,m,t,k,s,v,e,y,S]),[F,L]=T.useState(()=>{const q=R(_),ae={sections:q,lastExternalValue:_,lastSectionsDependencies:{format:m,isRtl:s,locale:e.locale},tempValueStrAndroid:null,characterQuery:null},te=Xf(q),le=a.getInitialReferenceValue({referenceDate:f,value:_,utils:e,props:c,granularity:te,timezone:w});return I({},ae,{referenceValue:le})}),[$,K]=qn({controlled:g,default:null,name:"useField",state:"selectedSections"}),V=q=>{K(q),x==null||x(q)},J=T.useMemo(()=>Fr($,F.sections),[$,F.sections]),W=J==="all"?0:J,se=T.useMemo(()=>op(F.sections,s&&!S),[F.sections,s,S]),ge=T.useMemo(()=>F.sections.every(q=>q.value===""),[F.sections]),de=q=>{const ae={validationError:r({adapter:i,value:q,timezone:w,props:c})};O(q,ae)},we=(q,ae)=>{const te=[...F.sections];return te[q]=I({},te[q],{value:ae,modified:!0}),te},ie=T.useRef(null),be=Bn(),je=q=>{W!=null&&(ie.current={sectionIndex:W,value:q},be.start(0,()=>{ie.current=null}))},ue=()=>{a.areValuesEqual(e,_,a.emptyValue)?L(q=>I({},q,{sections:q.sections.map(ae=>I({},ae,{value:""})),tempValueStrAndroid:null,characterQuery:null})):(L(q=>I({},q,{characterQuery:null})),de(a.emptyValue))},ne=()=>{if(W==null)return;const q=F.sections[W];q.value!==""&&(je(""),l.getDateFromSection(_,q)===null?L(ae=>I({},ae,{sections:we(W,""),tempValueStrAndroid:null,characterQuery:null})):(L(ae=>I({},ae,{characterQuery:null})),de(l.updateDateInValue(_,q,null))))},H=q=>{const ae=(le,it)=>{const Ke=e.parse(le,m);if(!e.isValid(Ke))return null;const ht=ya({utils:e,localeText:t,localizedDigits:k,format:m,date:Ke,formatDensity:y,shouldRespectLeadingZeros:v,enableAccessibleFieldDOMStructure:S,isRtl:s});return ga(e,Ke,ht,it,!1)},te=l.parseValueStr(q,F.referenceValue,ae);de(te)},ee=Bn(),Y=({section:q,newSectionValue:ae,shouldGoToNextSection:te})=>{be.clear(),ee.clear();const le=l.getDateFromSection(_,q);te&&W<F.sections.length-1&&V(W+1);const it=we(W,ae),Ke=l.getDateSectionsFromValue(it,q),ht=ep(e,Ke,k);if(e.isValid(ht)){const ct=ga(e,ht,Ke,l.getDateFromSection(F.referenceValue,q),!0);return le==null&&ee.start(0,()=>{P.current===_&&L(jt=>I({},jt,{sections:l.clearDateSections(F.sections,q),tempValueStrAndroid:null}))}),de(l.updateDateInValue(_,q,ct))}return Ke.every(ct=>ct.value!=="")?(je(ae),de(l.updateDateInValue(_,q,ht))):le!=null?(je(ae),de(l.updateDateInValue(_,q,null))):L(ct=>I({},ct,{sections:it,tempValueStrAndroid:null}))},oe=q=>L(ae=>I({},ae,{tempValueStrAndroid:q})),he=U(q=>{L(ae=>I({},ae,{characterQuery:q}))});if(_!==F.lastExternalValue){let q;ie.current!=null&&!e.isValid(l.getDateFromSection(_,F.sections[ie.current.sectionIndex]))?q=we(ie.current.sectionIndex,ie.current.value):q=R(_),L(ae=>I({},ae,{lastExternalValue:_,sections:q,sectionsDependencies:{format:m,isRtl:s,locale:e.locale},referenceValue:l.updateReferenceValue(e,_,ae.referenceValue),tempValueStrAndroid:null}))}if(s!==F.lastSectionsDependencies.isRtl||m!==F.lastSectionsDependencies.format||e.locale!==F.lastSectionsDependencies.locale){const q=R(_);L(ae=>I({},ae,{lastSectionsDependencies:{format:m,isRtl:s,locale:e.locale},sections:q,tempValueStrAndroid:null,characterQuery:null}))}F.characterQuery!=null&&!A&&W==null&&he(null),F.characterQuery!=null&&((ve=F.sections[F.characterQuery.sectionIndex])==null?void 0:ve.type)!==F.characterQuery.sectionType&&he(null),T.useEffect(()=>{ie.current!=null&&(ie.current=null)});const Q=Bn();return T.useEffect(()=>(F.characterQuery!=null&&Q.start(wg,()=>he(null)),()=>{}),[F.characterQuery,he,Q]),T.useEffect(()=>{F.tempValueStrAndroid!=null&&W!=null&&ne()},[F.sections]),{activeSectionIndex:W,areAllSectionsEmpty:ge,error:A,localizedDigits:k,parsedSelectedSections:J,sectionOrder:se,sectionsValueBoundaries:D,state:F,timezone:w,value:_,clearValue:ue,clearActiveSection:ne,setCharacterQuery:he,setSelectedSections:V,setTempAndroidValueStr:oe,updateSectionValue:Y,updateValueFromValueStr:H,getSectionsFromValue:R}};function ud(n){const{manager:{internal_useApplyDefaultValuesToFieldInternalProps:e},internalProps:t,skipContextFieldRefAssignment:i}=n,s=xo(),r=Fc(),o=gt(t.unstableFieldRef,i?null:r==null?void 0:r.fieldRef),a=s==null?void 0:s.setValue,l=T.useCallback((u,h)=>a==null?void 0:a(u,{validationError:h.validationError,shouldClose:!1}),[a]),c=T.useMemo(()=>r!=null&&s!=null?I({value:s.value,onChange:l,timezone:s.timezone,disabled:s.disabled,readOnly:s.readOnly,autoFocus:s.autoFocus&&!s.open,focused:s.open?!0:void 0,format:s.fieldFormat,formatDensity:r.formatDensity,enableAccessibleFieldDOMStructure:r.enableAccessibleFieldDOMStructure,selectedSections:r.selectedSections,onSelectedSectionsChange:r.onSelectedSectionsChange,unstableFieldRef:o},t):t,[s,r,t,l,o]);return e(c)}function Po(n){const{focused:e,domGetters:t,stateResponse:{parsedSelectedSections:i,state:s}}=n;if(!t.isReady())return;const r=document.getSelection();if(!r)return;if(i==null){r.rangeCount>0&&t.getRoot().contains(r.getRangeAt(0).startContainer)&&r.removeAllRanges(),e&&t.getRoot().blur();return}if(!t.getRoot().contains(at(document)))return;const o=new window.Range;let a;i==="all"?a=t.getRoot():s.sections[i].type==="empty"?a=t.getSectionContainer(i):a=t.getSectionContent(i),o.selectNodeContents(a),a.focus(),r.removeAllRanges(),r.addRange(o)}function hd(n){const e=Fe(),{manager:{internal_fieldValueManager:t},internalPropsWithDefaults:{minutesStep:i,disabled:s,readOnly:r},stateResponse:{state:o,value:a,activeSectionIndex:l,parsedSelectedSections:c,sectionsValueBoundaries:u,localizedDigits:h,timezone:f,sectionOrder:p,clearValue:m,clearActiveSection:y,setSelectedSections:g,updateSectionValue:x}}=n;return U(v=>{if(!s)switch(!0){case((v.ctrlKey||v.metaKey)&&String.fromCharCode(v.keyCode)==="A"&&!v.shiftKey&&!v.altKey):{v.preventDefault(),g("all");break}case v.key==="ArrowRight":{if(v.preventDefault(),c==null)g(p.startIndex);else if(c==="all")g(p.endIndex);else{const b=p.neighbors[c].rightIndex;b!==null&&g(b)}break}case v.key==="ArrowLeft":{if(v.preventDefault(),c==null)g(p.endIndex);else if(c==="all")g(p.startIndex);else{const b=p.neighbors[c].leftIndex;b!==null&&g(b)}break}case v.key==="Delete":{if(v.preventDefault(),r)break;c==null||c==="all"?m():y();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(v.key):{if(v.preventDefault(),r||l==null)break;c==="all"&&g(l);const b=o.sections[l],S=Sg(e,f,b,v.key,u,h,t.getDateFromSection(a,b),{minutesStep:i});x({section:b,newSectionValue:S,shouldGoToNextSection:!1});break}}})}function Tg(n){switch(n){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}}function Sg(n,e,t,i,s,r,o,a){const l=Tg(i),c=i==="Home",u=i==="End",h=t.value===""||c||u,f=()=>{const m=s[t.type]({currentDate:o,format:t.format,contentType:t.contentType}),y=v=>_c(n,v,m,r,t),g=t.type==="minutes"&&(a!=null&&a.minutesStep)?a.minutesStep:1;let x;if(h){if(t.type==="year"&&!u&&!c)return n.formatByString(n.date(void 0,e),t.format);l>0||c?x=m.minimum:x=m.maximum}else x=parseInt(Pn(t.value,r),10)+l*g;return x%g!==0&&((l<0||c)&&(x+=g-(g+x)%g),(l>0||u)&&(x-=x%g)),x>m.maximum?y(m.minimum+(x-m.maximum-1)%(m.maximum-m.minimum+1)):x<m.minimum?y(m.maximum-(m.minimum-x-1)%(m.maximum-m.minimum+1)):y(x)},p=()=>{const m=Ic(n,e,t.type,t.format);if(m.length===0)return t.value;if(h)return l>0||c?m[0]:m[m.length-1];const x=((m.indexOf(t.value)+l)%m.length+m.length)%m.length;return m[x]};return t.contentType==="digit"||t.contentType==="digit-with-letter"?f():p()}function Pg(n){const{manager:e,focused:t,setFocused:i,domGetters:s,stateResponse:r,applyCharacterEditing:o,internalPropsWithDefaults:a,stateResponse:{parsedSelectedSections:l,sectionOrder:c,state:u,clearValue:h,setCharacterQuery:f,setSelectedSections:p,updateValueFromValueStr:m},internalPropsWithDefaults:{disabled:y=!1,readOnly:g=!1}}=n,x=hd({manager:e,internalPropsWithDefaults:a,stateResponse:r}),v=Bn(),b=U(w=>{y||!s.isReady()||(i(!0),l==="all"?v.start(0,()=>{const P=document.getSelection().getRangeAt(0).startOffset;if(P===0){p(c.startIndex);return}let j=0,A=0;for(;A<P&&j<u.sections.length;){const k=u.sections[j];j+=1,A+=`${k.startSeparator}${k.value||k.placeholder}${k.endSeparator}`.length}p(j-1)}):t?s.getRoot().contains(w.target)||p(c.startIndex):(i(!0),p(c.startIndex)))}),S=U(w=>{if(!s.isReady()||l!=="all")return;const j=w.target.textContent??"";s.getRoot().innerHTML=u.sections.map(A=>`${A.startSeparator}${A.value||A.placeholder}${A.endSeparator}`).join(""),Po({focused:t,domGetters:s,stateResponse:r}),j.length===0||j.charCodeAt(0)===10?(h(),p("all")):j.length>1?m(j):(l==="all"&&p(0),o({keyPressed:j,sectionIndex:0}))}),C=U(w=>{if(g||l!=="all"){w.preventDefault();return}const P=w.clipboardData.getData("text");w.preventDefault(),f(null),m(P)}),_=U(()=>{if(t||y||!s.isReady())return;const w=at(document);i(!0),s.getSectionIndexFromDOMElement(w)!=null||p(c.startIndex)}),O=U(()=>{setTimeout(()=>{if(!s.isReady())return;const w=at(document);!s.getRoot().contains(w)&&(i(!1),p(null))})});return{onKeyDown:x,onBlur:O,onFocus:_,onClick:b,onPaste:C,onInput:S,contentEditable:l==="all",tabIndex:l===0?-1:0}}function Dg(n){const{manager:{internal_fieldValueManager:e},stateResponse:{areAllSectionsEmpty:t,state:i,updateValueFromValueStr:s}}=n,r=U(a=>{s(a.target.value)});return{value:T.useMemo(()=>t?"":e.getV7HiddenInputValueFromSections(i.sections),[t,i.sections,e]),onChange:r}}function Cg(n){const{stateResponse:{setSelectedSections:e},internalPropsWithDefaults:{disabled:t=!1}}=n,i=U(s=>r=>{t||r.isDefaultPrevented()||e(s)});return T.useCallback(s=>({"data-sectionindex":s,onClick:i(s)}),[i])}function Mg(n){const e=Fe(),t=ln(),i=Es(),{focused:s,domGetters:r,stateResponse:o,applyCharacterEditing:a,manager:{internal_fieldValueManager:l},stateResponse:{parsedSelectedSections:c,sectionsValueBoundaries:u,state:h,value:f,clearActiveSection:p,setCharacterQuery:m,setSelectedSections:y,updateSectionValue:g,updateValueFromValueStr:x},internalPropsWithDefaults:{disabled:v=!1,readOnly:b=!1}}=n,S=c==="all",C=!S&&!v&&!b,_=U(k=>{if(!r.isReady())return;const D=h.sections[k];r.getSectionContent(k).innerHTML=D.value||D.placeholder,Po({focused:s,domGetters:r,stateResponse:o})}),O=U(k=>{if(!r.isReady())return;const D=k.target,R=D.textContent??"",F=r.getSectionIndexFromDOMElement(D),L=h.sections[F];if(b){_(F);return}if(R.length===0){if(L.value===""){_(F);return}const $=k.nativeEvent.inputType;if($==="insertParagraph"||$==="insertLineBreak"){_(F);return}_(F),p();return}a({keyPressed:R,sectionIndex:F}),_(F)}),w=U(k=>{k.preventDefault()}),P=U(k=>{if(k.preventDefault(),b||v||typeof c!="number")return;const D=h.sections[c],R=k.clipboardData.getData("text"),F=/^[a-zA-Z]+$/.test(R),L=/^[0-9]+$/.test(R),$=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(R);D.contentType==="letter"&&F||D.contentType==="digit"&&L||D.contentType==="digit-with-letter"&&$?(m(null),g({section:D,newSectionValue:R,shouldGoToNextSection:!0})):!F&&!L&&(m(null),x(R))}),j=U(k=>{k.preventDefault(),k.dataTransfer.dropEffect="none"}),A=U(k=>()=>{v||y(k)});return T.useCallback((k,D)=>{const R=u[k.type]({currentDate:l.getDateFromSection(f,k),contentType:k.contentType,format:k.format});return{onInput:O,onPaste:P,onMouseUp:w,onDragOver:j,onFocus:A(D),"aria-labelledby":`${i}-${k.type}`,"aria-readonly":b,"aria-valuenow":Ig(k,e),"aria-valuemin":R.minimum,"aria-valuemax":R.maximum,"aria-valuetext":k.value?kg(k,e):t.empty,"aria-label":t[k.type],"aria-disabled":v,tabIndex:S||D>0?-1:0,contentEditable:!S&&!v&&!b,role:"spinbutton",id:`${i}-${k.type}`,"data-range-position":k.dateName||void 0,spellCheck:C?!1:void 0,autoCapitalize:C?"off":void 0,autoCorrect:C?"off":void 0,children:k.value||k.placeholder,inputMode:k.contentType==="letter"?"text":"numeric"}},[u,i,S,v,b,C,t,e,O,P,w,j,A,l,f])}function kg(n,e){if(n.value)switch(n.type){case"month":{if(n.contentType==="digit")return e.format(e.setMonth(e.date(),Number(n.value)-1),"month");const t=e.parse(n.value,n.format);return t?e.format(t,"month"):void 0}case"day":return n.contentType==="digit"?e.format(e.setDate(e.startOfYear(e.date()),Number(n.value)),"dayOfMonthFull"):n.value;case"weekDay":return;default:return}}function Ig(n,e){if(n.value)switch(n.type){case"weekDay":return n.contentType==="letter"?void 0:Number(n.value);case"meridiem":{const t=e.parse(`01:00 ${n.value}`,`${e.formats.hours12h}:${e.formats.minutes} ${n.format}`);return t?e.getHours(t)>=12?1:0:void 0}case"day":return n.contentType==="digit-with-letter"?parseInt(n.value,10):Number(n.value);case"month":{if(n.contentType==="digit")return Number(n.value);const t=e.parse(n.value,n.format);return t?e.getMonth(t)+1:void 0}default:return n.contentType!=="letter"?Number(n.value):void 0}}const _g=n=>{const{props:e,manager:t,skipContextFieldRefAssignment:i,manager:{valueType:s,internal_useOpenPickerButtonAriaLabel:r}}=n,{internalProps:o,forwardedProps:a}=Wc(e,s),l=ud({manager:t,internalProps:o,skipContextFieldRefAssignment:i}),{sectionListRef:c,onBlur:u,onClick:h,onFocus:f,onInput:p,onPaste:m,onKeyDown:y,onClear:g,clearable:x}=a,{disabled:v=!1,readOnly:b=!1,autoFocus:S=!1,focused:C,unstableFieldRef:_}=l,O=T.useRef(null),w=gt(c,O),P=T.useMemo(()=>({isReady:()=>O.current!=null,getRoot:()=>O.current.getRoot(),getSectionContainer:Q=>O.current.getSectionContainer(Q),getSectionContent:Q=>O.current.getSectionContent(Q),getSectionIndexFromDOMElement:Q=>O.current.getSectionIndexFromDOMElement(Q)}),[O]),j=dd({manager:t,internalPropsWithDefaults:l,forwardedProps:a}),{areAllSectionsEmpty:A,error:k,parsedSelectedSections:D,sectionOrder:R,state:F,value:L,clearValue:$,setSelectedSections:K}=j,V=cd({stateResponse:j}),J=r(L),[W,se]=T.useState(!1);function ge(Q=0){if(v||!O.current||Sa(O)!=null)return;const ve=Fr(Q,F.sections);se(!0),O.current.getSectionContent(ve).focus()}const de=Pg({manager:t,internalPropsWithDefaults:l,stateResponse:j,applyCharacterEditing:V,focused:W,setFocused:se,domGetters:P}),we=Dg({manager:t,stateResponse:j}),ie=Cg({stateResponse:j,internalPropsWithDefaults:l}),be=Mg({manager:t,stateResponse:j,applyCharacterEditing:V,internalPropsWithDefaults:l,domGetters:P,focused:W}),je=U(Q=>{y==null||y(Q),de.onKeyDown(Q)}),ue=U(Q=>{u==null||u(Q),de.onBlur(Q)}),ne=U(Q=>{f==null||f(Q),de.onFocus(Q)}),H=U(Q=>{Q.isDefaultPrevented()||(h==null||h(Q),de.onClick(Q))}),ee=U(Q=>{m==null||m(Q),de.onPaste(Q)}),Y=U(Q=>{p==null||p(Q),de.onInput(Q)}),oe=U((Q,...ve)=>{Q.preventDefault(),g==null||g(Q,...ve),$(),Pa(O)?K(R.startIndex):ge(0)}),he=T.useMemo(()=>F.sections.map((Q,ve)=>{const q=be(Q,ve);return{container:ie(ve),content:be(Q,ve),before:{children:Q.startSeparator},after:{children:Q.endSeparator,"data-range-position":Q.isEndFormatSeparator?q["data-range-position"]:void 0}}}),[F.sections,ie,be]);return T.useEffect(()=>{if(O.current==null)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please add the `enableAccessibleFieldDOMStructure={false}` prop to your Picker or Field component:","","<DatePicker enableAccessibleFieldDOMStructure={false} slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join(`
`));S&&!v&&O.current&&O.current.getSectionContent(R.startIndex).focus()},[]),Zt(()=>{if(!(!W||!O.current)){if(D==="all")O.current.getRoot().focus();else if(typeof D=="number"){const Q=O.current.getSectionContent(D);Q&&Q.focus()}}},[D,W]),Zt(()=>{Po({focused:W,domGetters:P,stateResponse:j})}),T.useImperativeHandle(_,()=>({getSections:()=>F.sections,getActiveSectionIndex:()=>Sa(O),setSelectedSections:Q=>{if(v||!O.current)return;const ve=Fr(Q,F.sections);se((ve==="all"?0:ve)!==null),K(Q)},focusField:ge,isFieldFocused:()=>Pa(O)})),I({},a,de,{onBlur:ue,onClick:H,onFocus:ne,onInput:Y,onPaste:ee,onKeyDown:je,onClear:oe},we,{error:k,clearable:!!(x&&!A&&!b&&!v),focused:C??W,sectionListRef:w,enableAccessibleFieldDOMStructure:!0,elements:he,areAllSectionsEmpty:A,disabled:v,readOnly:b,autoFocus:S,openPickerAriaLabel:J})};function Sa(n){const e=at(document);return!e||!n.current||!n.current.getRoot().contains(e)?null:n.current.getSectionIndexFromDOMElement(e)}function Pa(n){const e=at(document);return!!n.current&&n.current.getRoot().contains(e)}const zn=n=>n.replace(/[\u2066\u2067\u2068\u2069]/g,""),jg=(n,e,t)=>{let i=0,s=t?1:0;const r=[];for(let o=0;o<n.length;o+=1){const a=n[o],l=go(a,t?"input-rtl":"input-ltr",e),c=`${a.startSeparator}${l}${a.endSeparator}`,u=zn(c).length,h=c.length,f=zn(l),p=s+(f===""?0:l.indexOf(f[0]))+a.startSeparator.length,m=p+f.length;r.push(I({},a,{start:i,end:i+u,startInInput:p,endInInput:m})),i+=u,s+=h}return r},Rg=n=>{const e=Yt(),t=Bn(),i=Bn(),{props:s,manager:r,skipContextFieldRefAssignment:o,manager:{valueType:a,internal_valueManager:l,internal_fieldValueManager:c,internal_useOpenPickerButtonAriaLabel:u}}=n,{internalProps:h,forwardedProps:f}=Wc(s,a),p=ud({manager:r,internalProps:h,skipContextFieldRefAssignment:o}),{onFocus:m,onClick:y,onPaste:g,onBlur:x,onKeyDown:v,onClear:b,clearable:S,inputRef:C,placeholder:_}=f,{readOnly:O=!1,disabled:w=!1,autoFocus:P=!1,focused:j,unstableFieldRef:A}=p,k=T.useRef(null),D=gt(C,k),R=dd({manager:r,internalPropsWithDefaults:p,forwardedProps:f}),{activeSectionIndex:F,areAllSectionsEmpty:L,error:$,localizedDigits:K,parsedSelectedSections:V,sectionOrder:J,state:W,value:se,clearValue:ge,clearActiveSection:de,setCharacterQuery:we,setSelectedSections:ie,setTempAndroidValueStr:be,updateSectionValue:je,updateValueFromValueStr:ue,getSectionsFromValue:ne}=R,H=cd({stateResponse:R}),ee=u(se),Y=T.useMemo(()=>jg(W.sections,K,e),[W.sections,K,e]);function oe(){const fe=k.current.selectionStart??0;let pe;fe<=Y[0].startInInput||fe>=Y[Y.length-1].endInInput?pe=1:pe=Y.findIndex(Ee=>Ee.startInInput-Ee.startSeparator.length>fe);const De=pe===-1?Y.length-1:pe-1;ie(De)}function he(fe=0){var pe;at(document)!==k.current&&((pe=k.current)==null||pe.focus(),ie(fe))}const Q=U(fe=>{m==null||m(fe);const pe=k.current;t.start(0,()=>{!pe||pe!==k.current||F==null&&(pe.value.length&&Number(pe.selectionEnd)-Number(pe.selectionStart)===pe.value.length?ie("all"):oe())})}),ve=U((fe,...pe)=>{fe.isDefaultPrevented()||(y==null||y(fe,...pe),oe())}),q=U(fe=>{if(g==null||g(fe),fe.preventDefault(),O||w)return;const pe=fe.clipboardData.getData("text");if(typeof V=="number"){const De=W.sections[V],Ee=/^[a-zA-Z]+$/.test(pe),rt=/^[0-9]+$/.test(pe),Qe=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(pe);if(De.contentType==="letter"&&Ee||De.contentType==="digit"&&rt||De.contentType==="digit-with-letter"&&Qe){we(null),je({section:De,newSectionValue:pe,shouldGoToNextSection:!0});return}if(Ee||rt)return}we(null),ue(pe)}),ae=U(fe=>{x==null||x(fe),ie(null)}),te=U(fe=>{if(O)return;const pe=fe.target.value;if(pe===""){ge();return}const De=fe.nativeEvent.data,Ee=De&&De.length>1,rt=Ee?De:pe,Qe=zn(rt);if(V==="all"&&ie(F),F==null||Ee){ue(Ee?De:Qe);return}let yt;if(V==="all"&&Qe.length===1)yt=Qe;else{const Je=zn(c.getV6InputValueFromSections(Y,K,e));let ye=-1,et=-1;for(let xt=0;xt<Je.length;xt+=1)ye===-1&&Je[xt]!==Qe[xt]&&(ye=xt),et===-1&&Je[Je.length-xt-1]!==Qe[Qe.length-xt-1]&&(et=xt);const dt=Y[F];if(ye<dt.start||Je.length-et-1>dt.end)return;const Yi=Qe.length-Je.length+dt.end-zn(dt.endSeparator||"").length;yt=Qe.slice(dt.start+zn(dt.startSeparator||"").length,Yi)}if(yt.length===0){rp()&&be(rt),de();return}H({keyPressed:yt,sectionIndex:F})}),le=U((fe,...pe)=>{fe.preventDefault(),b==null||b(fe,...pe),ge(),Da(k)?ie(J.startIndex):he(0)}),it=hd({manager:r,internalPropsWithDefaults:p,stateResponse:R}),Ke=U(fe=>{v==null||v(fe),it(fe)}),ht=T.useMemo(()=>_!==void 0?_:c.getV6InputValueFromSections(ne(l.emptyValue),K,e),[_,c,ne,l.emptyValue,K,e]),ct=T.useMemo(()=>W.tempValueStrAndroid??c.getV6InputValueFromSections(W.sections,K,e),[W.sections,c,W.tempValueStrAndroid,K,e]);T.useEffect(()=>{k.current&&k.current===at(document)&&ie("all")},[]),Zt(()=>{function fe(){if(!k.current)return;if(V==null){k.current.scrollLeft&&(k.current.scrollLeft=0);return}if(k.current!==at(document))return;const pe=k.current.scrollTop;if(V==="all")k.current.select();else{const De=Y[V],Ee=De.type==="empty"?De.startInInput-De.startSeparator.length:De.startInInput,rt=De.type==="empty"?De.endInInput+De.endSeparator.length:De.endInInput;(Ee!==k.current.selectionStart||rt!==k.current.selectionEnd)&&k.current===at(document)&&k.current.setSelectionRange(Ee,rt),i.start(0,()=>{k.current&&k.current===at(document)&&k.current.selectionStart===k.current.selectionEnd&&(k.current.selectionStart!==Ee||k.current.selectionEnd!==rt)&&fe()})}k.current.scrollTop=pe}fe()});const jt=T.useMemo(()=>F==null||W.sections[F].contentType==="letter"?"text":"numeric",[F,W.sections]),jn=!(k.current&&k.current===at(document))&&L;return T.useImperativeHandle(A,()=>({getSections:()=>W.sections,getActiveSectionIndex:()=>{const fe=k.current.selectionStart??0,pe=k.current.selectionEnd??0;if(fe===0&&pe===0)return null;const De=fe<=Y[0].startInInput?1:Y.findIndex(Ee=>Ee.startInInput-Ee.startSeparator.length>fe);return De===-1?Y.length-1:De-1},setSelectedSections:fe=>ie(fe),focusField:he,isFieldFocused:()=>Da(k)})),I({},f,{error:$,clearable:!!(S&&!L&&!O&&!w),onBlur:ae,onClick:ve,onFocus:Q,onPaste:q,onKeyDown:Ke,onClear:le,inputRef:D,enableAccessibleFieldDOMStructure:!1,placeholder:ht,inputMode:jt,autoComplete:"off",value:jn?"":ct,onChange:te,focused:j,disabled:w,readOnly:O,autoFocus:P,openPickerAriaLabel:ee})};function Da(n){return n.current===at(document)}const Og=n=>{const e=Fc();return(n.props.enableAccessibleFieldDOMStructure??(e==null?void 0:e.enableAccessibleFieldDOMStructure)??!0?_g:Rg)(n)},Ag=n=>{const e=Fp(n);return Og({manager:e,props:n})},Fg=["slots","slotProps"],fd=T.forwardRef(function(e,t){const i=Be({props:e,name:"MuiDateField"}),{slots:s,slotProps:r}=i,o=re(i,Fg),a=yg({slotProps:r,ref:t,externalForwardedProps:o}),l=Ag(a);return d.jsx(gg,{slots:s,slotProps:r,fieldResponse:l,defaultOpenPickerIcon:wm})}),pd=({shouldDisableDate:n,shouldDisableMonth:e,shouldDisableYear:t,minDate:i,maxDate:s,disableFuture:r,disablePast:o,timezone:a})=>{const l=Mn();return T.useCallback(c=>Li({adapter:l,value:c,timezone:a,props:{shouldDisableDate:n,shouldDisableMonth:e,shouldDisableYear:t,minDate:i,maxDate:s,disableFuture:r,disablePast:o}})!==null,[l,n,e,t,i,s,r,o,a])},Eg=(n,e)=>(t,i)=>{switch(i.type){case"setVisibleDate":return I({},t,{slideDirection:i.direction,currentMonth:i.month,isMonthSwitchingAnimating:!e.isSameMonth(i.month,t.currentMonth)&&!n&&!i.skipAnimation,focusedDay:i.focusedDay});case"changeMonthTimezone":{const s=i.newTimezone;if(e.getTimezone(t.currentMonth)===s)return t;let r=e.setTimezone(t.currentMonth,s);return e.getMonth(r)!==e.getMonth(t.currentMonth)&&(r=e.setMonth(r,e.getMonth(t.currentMonth))),I({},t,{currentMonth:r})}case"finishMonthSwitchingAnimation":return I({},t,{isMonthSwitchingAnimating:!1});default:throw new Error("missing support")}},Lg=n=>{const{value:e,referenceDate:t,disableFuture:i,disablePast:s,maxDate:r,minDate:o,onMonthChange:a,onYearChange:l,reduceAnimations:c,shouldDisableDate:u,timezone:h,getCurrentMonthFromVisibleDate:f}=n,p=Fe(),m=T.useRef(Eg(!!c,p)).current,y=T.useMemo(()=>Wt.getInitialReferenceValue({value:e,utils:p,timezone:h,props:n,referenceDate:t,granularity:Lt.day}),[t,h]),[g,x]=T.useReducer(m,{isMonthSwitchingAnimating:!1,focusedDay:y,currentMonth:p.startOfMonth(y),slideDirection:"left"}),v=pd({shouldDisableDate:u,minDate:o,maxDate:r,disableFuture:i,disablePast:s,timezone:h});T.useEffect(()=>{x({type:"changeMonthTimezone",newTimezone:p.getTimezone(y)})},[y,p]);const b=U(({target:C,reason:_})=>{if(_==="cell-interaction"&&g.focusedDay!=null&&p.isSameDay(C,g.focusedDay))return;const O=_==="cell-interaction";let w,P;if(_==="cell-interaction")w=f(C,g.currentMonth),P=C;else if(w=p.isSameMonth(C,g.currentMonth)?g.currentMonth:p.startOfMonth(C),P=C,v(P)){const k=p.startOfMonth(C),D=p.endOfMonth(C);P=Ii({utils:p,date:P,minDate:p.isBefore(o,k)?k:o,maxDate:p.isAfter(r,D)?D:r,disablePast:s,disableFuture:i,isDateDisabled:v,timezone:h})}const j=!p.isSameMonth(g.currentMonth,w),A=!p.isSameYear(g.currentMonth,w);j&&(a==null||a(w)),A&&(l==null||l(p.startOfYear(w))),x({type:"setVisibleDate",month:w,direction:p.isAfterDay(w,g.currentMonth)?"left":"right",focusedDay:g.focusedDay!=null&&P!=null&&p.isSameDay(P,g.focusedDay)?g.focusedDay:P,skipAnimation:O})}),S=T.useCallback(()=>{x({type:"finishMonthSwitchingAnimation"})},[]);return{referenceDate:y,calendarState:g,setVisibleDate:b,isDateDisabled:v,onMonthSwitchingAnimationEnd:S}},Ng=n=>Ue("MuiPickersFadeTransitionGroup",n);Ge("MuiPickersFadeTransitionGroup",["root"]);const zg=["children"],Bg=n=>Le({root:["root"]},Ng,n),$g=X(oc,{name:"MuiPickersFadeTransitionGroup",slot:"Root"})({display:"block",position:"relative"});function md(n){const e=Be({props:n,name:"MuiPickersFadeTransitionGroup"}),{className:t,reduceAnimations:i,transKey:s,classes:r}=e,{children:o}=e,a=re(e,zg),l=Bg(r),c=As();if(i)return o;const u=I({},a);return d.jsx($g,{className:Ze(l.root,t),ownerState:u,children:d.jsx(Fs,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:c.transitions.duration.enteringScreen,enter:c.transitions.duration.enteringScreen,exit:0},children:o},s)})}function Vg(n){return Ue("MuiPickersDay",n)}const un=Ge("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]);function gd(n){const{disabled:e,selected:t,today:i,outsideCurrentMonth:s,day:r,disableMargin:o,disableHighlightToday:a,showDaysOutsideCurrentMonth:l}=n,c=Fe(),{ownerState:u}=st();return T.useMemo(()=>I({},u,{day:r,isDaySelected:t??!1,isDayDisabled:e??!1,isDayCurrent:i??!1,isDayOutsideMonth:s??!1,isDayStartOfWeek:c.isSameDay(r,c.startOfWeek(r)),isDayEndOfWeek:c.isSameDay(r,c.endOfWeek(r)),disableMargin:o??!1,disableHighlightToday:a??!1,showDaysOutsideCurrentMonth:l??!1}),[c,u,r,t,e,i,s,o,a,l])}const Wg=["autoFocus","className","classes","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","children","isFirstVisibleCell","isLastVisibleCell","day","selected","disabled","today","outsideCurrentMonth","disableMargin","disableHighlightToday","showDaysOutsideCurrentMonth"],Hg=(n,e)=>{const{isDaySelected:t,isDayDisabled:i,isDayCurrent:s,isDayOutsideMonth:r,disableMargin:o,disableHighlightToday:a,showDaysOutsideCurrentMonth:l}=e,c=r&&!l;return Le({root:["root",t&&!c&&"selected",i&&"disabled",!o&&"dayWithMargin",!a&&s&&"today",r&&l&&"dayOutsideMonth",c&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},Vg,n)},yd=({theme:n})=>I({},n.typography.caption,{width:_i,height:_i,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:n.transitions.create("background-color",{duration:n.transitions.duration.short}),color:(n.vars||n).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Gn(n.palette.primary.main,n.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.focusOpacity})`:Gn(n.palette.primary.main,n.palette.action.focusOpacity),[`&.${un.selected}`]:{willChange:"background-color",backgroundColor:(n.vars||n).palette.primary.dark}},[`&.${un.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,fontWeight:n.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(n.vars||n).palette.primary.dark}},[`&.${un.disabled}:not(.${un.selected})`]:{color:(n.vars||n).palette.text.disabled},[`&.${un.disabled}&.${un.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:`0 ${$s}px`}},{props:{isDayOutsideMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(n.vars||n).palette.text.secondary}},{props:{disableHighlightToday:!1,isDayCurrent:!0},style:{[`&:not(.${un.selected})`]:{border:`1px solid ${(n.vars||n).palette.text.secondary}`}}}]}),xd=(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disableMargin&&e.dayWithMargin,!t.disableHighlightToday&&t.isDayCurrent&&e.today,!t.isDayOutsideMonth&&t.showDaysOutsideCurrentMonth&&e.dayOutsideMonth,t.isDayOutsideMonth&&!t.showDaysOutsideCurrentMonth&&e.hiddenDaySpacingFiller]},Yg=X(tc,{name:"MuiPickersDay",slot:"Root",overridesResolver:xd})(yd),Ug=X("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:xd})(({theme:n})=>I({},yd({theme:n}),{opacity:0,pointerEvents:"none"})),ci=()=>{},Gg=T.forwardRef(function(e,t){const i=Be({props:e,name:"MuiPickersDay"}),{autoFocus:s=!1,className:r,classes:o,isAnimating:a,onClick:l,onDaySelect:c,onFocus:u=ci,onBlur:h=ci,onKeyDown:f=ci,onMouseDown:p=ci,onMouseEnter:m=ci,children:y,day:g,selected:x,disabled:v,today:b,outsideCurrentMonth:S,disableMargin:C,disableHighlightToday:_,showDaysOutsideCurrentMonth:O}=i,w=re(i,Wg),P=gd({day:g,selected:x,disabled:v,today:b,outsideCurrentMonth:S,disableMargin:C,disableHighlightToday:_,showDaysOutsideCurrentMonth:O}),j=Hg(o,P),A=Fe(),k=T.useRef(null),D=gt(k,t);Zt(()=>{s&&!v&&!a&&!S&&k.current.focus()},[s,v,a,S]);const R=L=>{p(L),S&&L.preventDefault()},F=L=>{v||c(g),S&&L.currentTarget.focus(),l&&l(L)};return S&&!O?d.jsx(Ug,{className:Ze(j.root,j.hiddenDaySpacingFiller,r),ownerState:P,role:w.role}):d.jsx(Yg,I({className:Ze(j.root,r),ref:D,centerRipple:!0,disabled:v,tabIndex:x?0:-1,onKeyDown:L=>f(L,g),onFocus:L=>u(L,g),onBlur:L=>h(L,g),onMouseEnter:L=>m(L,g),onClick:F,onMouseDown:R},w,{ownerState:P,children:y||A.format(g,"dayOfMonth")}))}),qg=T.memo(Gg),Xg=n=>Ue("MuiPickersSlideTransition",n),bt=Ge("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),Kg=["children","className","reduceAnimations","slideDirection","transKey","classes"],Qg=(n,e)=>{const{slideDirection:t}=e,i={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${t}`],exitActive:[`slideExitActiveLeft-${t}`]};return Le(i,Xg,n)},Zg=X(oc,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(n,e)=>[e.root,{[`.${bt["slideEnter-left"]}`]:e["slideEnter-left"]},{[`.${bt["slideEnter-right"]}`]:e["slideEnter-right"]},{[`.${bt.slideEnterActive}`]:e.slideEnterActive},{[`.${bt.slideExit}`]:e.slideExit},{[`.${bt["slideExitActiveLeft-left"]}`]:e["slideExitActiveLeft-left"]},{[`.${bt["slideExitActiveLeft-right"]}`]:e["slideExitActiveLeft-right"]}]})(({theme:n})=>{const e=n.transitions.create("transform",{duration:n.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${bt["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${bt["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${bt.slideEnterActive}`]:{transform:"translate(0%)",transition:e},[`& .${bt.slideExit}`]:{transform:"translate(0%)"},[`& .${bt["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:e,zIndex:0},[`& .${bt["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:e,zIndex:0}}});function Jg(n){const e=Be({props:n,name:"MuiPickersSlideTransition"}),{children:t,className:i,reduceAnimations:s,slideDirection:r,transKey:o,classes:a}=e,l=re(e,Kg),{ownerState:c}=st(),u=I({},c,{slideDirection:r}),h=Qg(a,u),f=As();if(s)return d.jsx("div",{className:Ze(h.root,i),children:t});const p={exit:h.exit,enterActive:h.enterActive,enter:h.enter,exitActive:h.exitActive};return d.jsx(Zg,{className:Ze(h.root,i),childFactory:m=>T.cloneElement(m,{classNames:p}),role:"presentation",ownerState:u,children:d.jsx(co,I({mountOnEnter:!0,unmountOnExit:!0,timeout:f.transitions.duration.complex,classNames:p},l,{children:t}),o)})}const ey=n=>Ue("MuiDayCalendar",n);Ge("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const ty=["parentProps","day","focusedDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],ny=["ownerState"],iy=n=>Le({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},ey,n),bd=(_i+$s*2)*6,sy=X("div",{name:"MuiDayCalendar",slot:"Root"})({}),ry=X("div",{name:"MuiDayCalendar",slot:"Header"})({display:"flex",justifyContent:"center",alignItems:"center"}),oy=X(M,{name:"MuiDayCalendar",slot:"WeekDayLabel"})(({theme:n})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(n.vars||n).palette.text.secondary})),ay=X(M,{name:"MuiDayCalendar",slot:"WeekNumberLabel"})(({theme:n})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(n.vars||n).palette.text.disabled})),ly=X(M,{name:"MuiDayCalendar",slot:"WeekNumber"})(({theme:n})=>I({},n.typography.caption,{width:_i,height:_i,padding:0,margin:`0 ${$s}px`,color:(n.vars||n).palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),cy=X("div",{name:"MuiDayCalendar",slot:"LoadingContainer"})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:bd}),dy=X(Jg,{name:"MuiDayCalendar",slot:"SlideTransition"})({minHeight:bd}),uy=X("div",{name:"MuiDayCalendar",slot:"MonthContainer"})({overflow:"hidden"}),hy=X("div",{name:"MuiDayCalendar",slot:"WeekContainer"})({margin:`${$s}px 0`,display:"flex",justifyContent:"center"});function fy(n){let{parentProps:e,day:t,focusedDay:i,selectedDays:s,isDateDisabled:r,currentMonthNumber:o,isViewFocused:a}=n,l=re(n,ty);const{disabled:c,disableHighlightToday:u,isMonthSwitchingAnimating:h,showDaysOutsideCurrentMonth:f,slots:p,slotProps:m,timezone:y}=e,g=Fe(),x=Bs(y),v=i!=null&&g.isSameDay(t,i),b=a&&v,S=s.some(R=>g.isSameDay(R,t)),C=g.isSameDay(t,x),_=T.useMemo(()=>c||r(t),[c,r,t]),O=T.useMemo(()=>g.getMonth(t)!==o,[g,t,o]),w=gd({day:t,selected:S,disabled:_,today:C,outsideCurrentMonth:O,disableMargin:void 0,disableHighlightToday:u,showDaysOutsideCurrentMonth:f}),P=(p==null?void 0:p.day)??qg,j=Ce({elementType:P,externalSlotProps:m==null?void 0:m.day,additionalProps:I({disableHighlightToday:u,showDaysOutsideCurrentMonth:f,role:"gridcell",isAnimating:h,"data-timestamp":g.toJsDate(t).valueOf()},l),ownerState:I({},w,{day:t,isDayDisabled:_,isDaySelected:S})}),A=re(j,ny),k=T.useMemo(()=>{const R=g.startOfMonth(g.setMonth(t,o));return f?g.isSameDay(t,g.startOfWeek(R)):g.isSameDay(t,R)},[o,t,f,g]),D=T.useMemo(()=>{const R=g.endOfMonth(g.setMonth(t,o));return f?g.isSameDay(t,g.endOfWeek(R)):g.isSameDay(t,R)},[o,t,f,g]);return d.jsx(P,I({},A,{day:t,disabled:_,autoFocus:!O&&b,today:C,outsideCurrentMonth:O,isFirstVisibleCell:k,isLastVisibleCell:D,selected:S,tabIndex:v?0:-1,"aria-selected":S,"aria-current":C?"date":void 0}))}function py(n){const e=Be({props:n,name:"MuiDayCalendar"}),t=Fe(),{onFocusedDayChange:i,className:s,classes:r,currentMonth:o,selectedDays:a,focusedDay:l,loading:c,onSelectedDaysChange:u,onMonthSwitchingAnimationEnd:h,readOnly:f,reduceAnimations:p,renderLoading:m=()=>d.jsx("span",{children:"..."}),slideDirection:y,TransitionProps:g,disablePast:x,disableFuture:v,minDate:b,maxDate:S,shouldDisableDate:C,shouldDisableMonth:_,shouldDisableYear:O,dayOfWeekFormatter:w=H=>t.format(H,"weekdayShort").charAt(0).toUpperCase(),hasFocus:P,onFocusedViewChange:j,gridLabelId:A,displayWeekNumber:k,fixedWeekNumber:D,timezone:R}=e,F=Bs(R),L=iy(r),$=Yt(),K=pd({shouldDisableDate:C,shouldDisableMonth:_,shouldDisableYear:O,minDate:b,maxDate:S,disablePast:x,disableFuture:v,timezone:R}),V=ln(),J=U(H=>{f||u(H)}),W=H=>{K(H)||(i(H),j==null||j(!0))},se=U((H,ee)=>{switch(H.key){case"ArrowUp":W(t.addDays(ee,-7)),H.preventDefault();break;case"ArrowDown":W(t.addDays(ee,7)),H.preventDefault();break;case"ArrowLeft":{const Y=t.addDays(ee,$?1:-1),oe=t.addMonths(ee,$?1:-1),he=Ii({utils:t,date:Y,minDate:$?Y:t.startOfMonth(oe),maxDate:$?t.endOfMonth(oe):Y,isDateDisabled:K,timezone:R});W(he||Y),H.preventDefault();break}case"ArrowRight":{const Y=t.addDays(ee,$?-1:1),oe=t.addMonths(ee,$?-1:1),he=Ii({utils:t,date:Y,minDate:$?t.startOfMonth(oe):Y,maxDate:$?Y:t.endOfMonth(oe),isDateDisabled:K,timezone:R});W(he||Y),H.preventDefault();break}case"Home":W(t.startOfWeek(ee)),H.preventDefault();break;case"End":W(t.endOfWeek(ee)),H.preventDefault();break;case"PageUp":W(t.addMonths(ee,1)),H.preventDefault();break;case"PageDown":W(t.addMonths(ee,-1)),H.preventDefault();break}}),ge=U((H,ee)=>W(ee)),de=U((H,ee)=>{l!=null&&t.isSameDay(l,ee)&&(j==null||j(!1))}),we=t.getMonth(o),ie=t.getYear(o),be=T.useMemo(()=>a.filter(H=>!!H).map(H=>t.startOfDay(H)),[t,a]),je=`${ie}-${we}`,ue=T.useMemo(()=>T.createRef(),[je]),ne=T.useMemo(()=>{const H=t.getWeekArray(o);let ee=t.addMonths(o,1);for(;D&&H.length<D;){const Y=t.getWeekArray(ee),oe=t.isSameDay(H[H.length-1][0],Y[0][0]);Y.slice(oe?1:0).forEach(he=>{H.length<D&&H.push(he)}),ee=t.addMonths(ee,1)}return H},[o,D,t]);return d.jsxs(sy,{role:"grid","aria-labelledby":A,className:L.root,children:[d.jsxs(ry,{role:"row",className:L.header,children:[k&&d.jsx(ay,{variant:"caption",role:"columnheader","aria-label":V.calendarWeekNumberHeaderLabel,className:L.weekNumberLabel,children:V.calendarWeekNumberHeaderText}),Yf(t,F).map((H,ee)=>d.jsx(oy,{variant:"caption",role:"columnheader","aria-label":t.format(H,"weekday"),className:L.weekDayLabel,children:w(H)},ee.toString()))]}),c?d.jsx(cy,{className:L.loadingContainer,children:m()}):d.jsx(dy,I({transKey:je,onExited:h,reduceAnimations:p,slideDirection:y,className:Ze(s,L.slideTransition)},g,{nodeRef:ue,children:d.jsx(uy,{ref:ue,role:"rowgroup",className:L.monthContainer,children:ne.map((H,ee)=>d.jsxs(hy,{role:"row",className:L.weekContainer,"aria-rowindex":ee+1,children:[k&&d.jsx(ly,{className:L.weekNumber,role:"rowheader","aria-label":V.calendarWeekNumberAriaLabelText(t.getWeekNumber(H[0])),children:V.calendarWeekNumberText(t.getWeekNumber(H[0]))}),H.map((Y,oe)=>d.jsx(fy,{parentProps:e,day:Y,selectedDays:be,isViewFocused:P,focusedDay:l,onKeyDown:se,onFocus:ge,onBlur:de,onDaySelect:J,isDateDisabled:K,currentMonthNumber:we,"aria-colindex":oe+1},Y.toString()))]},`week-${H[0]}`))})}))]})}function vd(n){return Ue("MuiMonthCalendar",n)}const qi=Ge("MuiMonthCalendar",["root","button","disabled","selected"]),my=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],gy=(n,e)=>{const t={button:["button",e.isMonthDisabled&&"disabled",e.isMonthSelected&&"selected"]};return Le(t,vd,n)},yy=X("button",{name:"MuiMonthCalendar",slot:"Button",overridesResolver:(n,e)=>[e.button,{[`&.${qi.disabled}`]:e.disabled},{[`&.${qi.selected}`]:e.selected}]})(({theme:n})=>I({color:"unset",backgroundColor:"transparent",border:0,outline:0},n.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Gn(n.palette.action.active,n.palette.action.hoverOpacity)},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Gn(n.palette.action.active,n.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${qi.disabled}`]:{color:(n.vars||n).palette.text.secondary},[`&.${qi.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,"&:focus, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}}})),xy=T.memo(function(e){const{autoFocus:t,classes:i,disabled:s,selected:r,value:o,onClick:a,onKeyDown:l,onFocus:c,onBlur:u,slots:h,slotProps:f}=e,p=re(e,my),m=T.useRef(null),{ownerState:y}=st(),g=I({},y,{isMonthDisabled:s,isMonthSelected:r}),x=gy(i,g);Zt(()=>{var S;t&&((S=m.current)==null||S.focus())},[t]);const v=(h==null?void 0:h.monthButton)??yy,b=Ce({elementType:v,externalSlotProps:f==null?void 0:f.monthButton,externalForwardedProps:p,additionalProps:{disabled:s,ref:m,type:"button",role:"radio","aria-checked":r,onClick:S=>a(S,o),onKeyDown:S=>l(S,o),onFocus:S=>c(S,o),onBlur:S=>u(S,o)},ownerState:g,className:x.button});return d.jsx(v,I({},b))}),by=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"],vy=n=>Le({root:["root"]},vd,n);function wy(n,e){const t=Be({props:n,name:e}),i=Ni(t);return I({},t,i,{monthsPerRow:t.monthsPerRow??3})}const Ty=X("div",{name:"MuiMonthCalendar",slot:"Root",shouldForwardProp:n=>Cn(n)&&n!=="monthsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:16,padding:"8px 0",width:Vs,boxSizing:"border-box",variants:[{props:{monthsPerRow:3},style:{columnGap:24}},{props:{monthsPerRow:4},style:{columnGap:0}}]}),Sy=T.forwardRef(function(e,t){const i=wy(e,"MuiMonthCalendar"),{autoFocus:s,className:r,classes:o,value:a,defaultValue:l,referenceDate:c,disabled:u,disableFuture:h,disablePast:f,maxDate:p,minDate:m,onChange:y,shouldDisableMonth:g,readOnly:x,onMonthFocus:v,hasFocus:b,onFocusedViewChange:S,monthsPerRow:C,timezone:_,gridLabelId:O,slots:w,slotProps:P}=i,j=re(i,by),{value:A,handleValueChange:k,timezone:D}=zi({name:"MonthCalendar",timezone:_,value:a,defaultValue:l,referenceDate:c,onChange:y,valueManager:Wt}),R=Bs(D),F=Yt(),L=Fe(),{ownerState:$}=st(),K=T.useMemo(()=>Wt.getInitialReferenceValue({value:A,utils:L,props:i,timezone:D,referenceDate:c,granularity:Lt.month}),[]),V=vy(o),J=T.useMemo(()=>L.getMonth(R),[L,R]),W=T.useMemo(()=>A!=null?L.getMonth(A):null,[A,L]),[se,ge]=T.useState(()=>W||L.getMonth(K)),[de,we]=qn({name:"MonthCalendar",state:"hasFocus",controlled:b,default:s??!1}),ie=U(Y=>{we(Y),S&&S(Y)}),be=T.useCallback(Y=>{const oe=L.startOfMonth(f&&L.isAfter(R,m)?R:m),he=L.startOfMonth(h&&L.isBefore(R,p)?R:p),Q=L.startOfMonth(Y);return L.isBefore(Q,oe)||L.isAfter(Q,he)?!0:g?g(Q):!1},[h,f,p,m,R,g,L]),je=U((Y,oe)=>{if(x)return;const he=L.setMonth(A??K,oe);k(he)}),ue=U(Y=>{be(L.setMonth(A??K,Y))||(ge(Y),ie(!0),v&&v(Y))});T.useEffect(()=>{ge(Y=>W!==null&&Y!==W?W:Y)},[W]);const ne=U((Y,oe)=>{switch(Y.key){case"ArrowUp":ue((12+oe-3)%12),Y.preventDefault();break;case"ArrowDown":ue((12+oe+3)%12),Y.preventDefault();break;case"ArrowLeft":ue((12+oe+(F?1:-1))%12),Y.preventDefault();break;case"ArrowRight":ue((12+oe+(F?-1:1))%12),Y.preventDefault();break}}),H=U((Y,oe)=>{ue(oe)}),ee=U((Y,oe)=>{se===oe&&ie(!1)});return d.jsx(Ty,I({ref:t,className:Ze(V.root,r),ownerState:$,role:"radiogroup","aria-labelledby":O,monthsPerRow:C},j,{children:ho(L,A??K).map(Y=>{const oe=L.getMonth(Y),he=L.format(Y,"monthShort"),Q=L.format(Y,"month"),ve=oe===W,q=u||be(Y);return d.jsx(xy,{selected:ve,value:oe,onClick:je,onKeyDown:ne,autoFocus:de&&oe===se,disabled:q,tabIndex:oe===se&&!q?0:-1,onFocus:H,onBlur:ee,"aria-current":J===oe?"date":void 0,"aria-label":Q,slots:w,slotProps:P,classes:o,children:he},he)})}))});function wd(n){return Ue("MuiYearCalendar",n)}const Xi=Ge("MuiYearCalendar",["root","button","disabled","selected"]),Py=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],Dy=(n,e)=>{const t={button:["button",e.isYearDisabled&&"disabled",e.isYearSelected&&"selected"]};return Le(t,wd,n)},Cy=X("button",{name:"MuiYearCalendar",slot:"Button",overridesResolver:(n,e)=>[e.button,{[`&.${Xi.disabled}`]:e.disabled},{[`&.${Xi.selected}`]:e.selected}]})(({theme:n})=>I({color:"unset",backgroundColor:"transparent",border:0,outline:0},n.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.focusOpacity})`:Gn(n.palette.action.active,n.palette.action.focusOpacity)},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Gn(n.palette.action.active,n.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Xi.disabled}`]:{color:(n.vars||n).palette.text.secondary},[`&.${Xi.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,"&:focus, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}}})),My=T.memo(function(e){const{autoFocus:t,classes:i,disabled:s,selected:r,value:o,onClick:a,onKeyDown:l,onFocus:c,onBlur:u,slots:h,slotProps:f}=e,p=re(e,Py),m=T.useRef(null),{ownerState:y}=st(),g=I({},y,{isYearDisabled:s,isYearSelected:r}),x=Dy(i,g);Zt(()=>{var S;t&&((S=m.current)==null||S.focus())},[t]);const v=(h==null?void 0:h.yearButton)??Cy,b=Ce({elementType:v,externalSlotProps:f==null?void 0:f.yearButton,externalForwardedProps:p,additionalProps:{disabled:s,ref:m,type:"button",role:"radio","aria-checked":r,onClick:S=>a(S,o),onKeyDown:S=>l(S,o),onFocus:S=>c(S,o),onBlur:S=>u(S,o)},ownerState:g,className:x.button});return d.jsx(v,I({},b))}),ky=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"],Iy=n=>Le({root:["root"]},wd,n);function _y(n,e){const t=Be({props:n,name:e}),i=Ni(t);return I({},t,i,{yearsPerRow:t.yearsPerRow??3,yearsOrder:t.yearsOrder??"asc"})}const jy=X("div",{name:"MuiYearCalendar",slot:"Root",shouldForwardProp:n=>Cn(n)&&n!=="yearsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:12,padding:"6px 0",overflowY:"auto",height:"100%",width:Vs,maxHeight:om,boxSizing:"border-box",position:"relative",variants:[{props:{yearsPerRow:3},style:{columnGap:24}},{props:{yearsPerRow:4},style:{columnGap:0,padding:"0 2px"}}]}),Ry=X("div",{name:"MuiYearCalendar",slot:"ButtonFiller"})({height:36,width:72}),Oy=T.forwardRef(function(e,t){const i=_y(e,"MuiYearCalendar"),{autoFocus:s,className:r,classes:o,value:a,defaultValue:l,referenceDate:c,disabled:u,disableFuture:h,disablePast:f,maxDate:p,minDate:m,onChange:y,readOnly:g,shouldDisableYear:x,onYearFocus:v,hasFocus:b,onFocusedViewChange:S,yearsOrder:C,yearsPerRow:_,timezone:O,gridLabelId:w,slots:P,slotProps:j}=i,A=re(i,ky),{value:k,handleValueChange:D,timezone:R}=zi({name:"YearCalendar",timezone:O,value:a,defaultValue:l,referenceDate:c,onChange:y,valueManager:Wt}),F=Bs(R),L=Yt(),$=Fe(),{ownerState:K}=st(),V=T.useMemo(()=>Wt.getInitialReferenceValue({value:k,utils:$,props:i,timezone:R,referenceDate:c,granularity:Lt.year}),[]),J=Iy(o),W=T.useMemo(()=>$.getYear(F),[$,F]),se=T.useMemo(()=>k!=null?$.getYear(k):null,[k,$]),[ge,de]=T.useState(()=>se||$.getYear(V)),[we,ie]=qn({name:"YearCalendar",state:"hasFocus",controlled:b,default:s??!1}),be=U(te=>{ie(te),S&&S(te)}),je=T.useCallback(te=>{if(f&&$.isBeforeYear(te,F)||h&&$.isAfterYear(te,F)||m&&$.isBeforeYear(te,m)||p&&$.isAfterYear(te,p))return!0;if(!x)return!1;const le=$.startOfYear(te);return x(le)},[h,f,p,m,F,x,$]),ue=U((te,le)=>{if(g)return;const it=$.setYear(k??V,le);D(it)}),ne=U(te=>{je($.setYear(k??V,te))||(de(te),be(!0),v==null||v(te))});T.useEffect(()=>{de(te=>se!==null&&te!==se?se:te)},[se]);const H=C!=="desc"?_*1:_*-1,ee=L&&C==="asc"||!L&&C==="desc"?-1:1,Y=U((te,le)=>{switch(te.key){case"ArrowUp":ne(le-H),te.preventDefault();break;case"ArrowDown":ne(le+H),te.preventDefault();break;case"ArrowLeft":ne(le-ee),te.preventDefault();break;case"ArrowRight":ne(le+ee),te.preventDefault();break}}),oe=U((te,le)=>{ne(le)}),he=U((te,le)=>{ge===le&&be(!1)}),Q=T.useRef(null),ve=gt(t,Q);T.useEffect(()=>{if(s||Q.current===null)return;const te=Q.current.querySelector('[tabindex="0"]');if(!te)return;const le=te.offsetHeight,it=te.offsetTop,Ke=Q.current.clientHeight,ht=Q.current.scrollTop,ct=it+le;le>Ke||it<ht||(Q.current.scrollTop=ct-Ke/2-le/2)},[s]);const q=$.getYearRange([m,p]);C==="desc"&&q.reverse();let ae=_-q.length%_;return ae===_&&(ae=0),d.jsxs(jy,I({ref:ve,className:Ze(J.root,r),ownerState:K,role:"radiogroup","aria-labelledby":w,yearsPerRow:_},A,{children:[q.map(te=>{const le=$.getYear(te),it=le===se,Ke=u||je(te);return d.jsx(My,{selected:it,value:le,onClick:ue,onKeyDown:Y,autoFocus:we&&le===ge,disabled:Ke,tabIndex:le===ge&&!Ke?0:-1,onFocus:oe,onBlur:he,"aria-current":W===le?"date":void 0,slots:P,slotProps:j,classes:o,children:$.format(te,"year")},$.format(te,"year"))}),Array.from({length:ae},(te,le)=>d.jsx(Ry,{},le))]}))}),Ay=n=>Ue("MuiPickersCalendarHeader",n),Fy=Ge("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]);function Ey(n){return Ue("MuiPickersArrowSwitcher",n)}Ge("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const Ly=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId","classes"],Ny=["ownerState"],zy=["ownerState"],By=X("div",{name:"MuiPickersArrowSwitcher",slot:"Root"})({display:"flex"}),$y=X("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer"})(({theme:n})=>({width:n.spacing(3)})),Ca=X(Sn,{name:"MuiPickersArrowSwitcher",slot:"Button"})({variants:[{props:{isButtonHidden:!0},style:{visibility:"hidden"}}]}),Vy=n=>Le({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},Ey,n),Wy=T.forwardRef(function(e,t){const i=Yt(),s=Be({props:e,name:"MuiPickersArrowSwitcher"}),{children:r,className:o,slots:a,slotProps:l,isNextDisabled:c,isNextHidden:u,onGoToNext:h,nextLabel:f,isPreviousDisabled:p,isPreviousHidden:m,onGoToPrevious:y,previousLabel:g,labelId:x,classes:v}=s,b=re(s,Ly),{ownerState:S}=st(),C=Vy(v),_={isDisabled:c,isHidden:u,goTo:h,label:f},O={isDisabled:p,isHidden:m,goTo:y,label:g},w=(a==null?void 0:a.previousIconButton)??Ca,P=Ce({elementType:w,externalSlotProps:l==null?void 0:l.previousIconButton,additionalProps:{size:"medium",title:O.label,"aria-label":O.label,disabled:O.isDisabled,edge:"end",onClick:O.goTo},ownerState:I({},S,{isButtonHidden:O.isHidden??!1}),className:Ze(C.button,C.previousIconButton)}),j=(a==null?void 0:a.nextIconButton)??Ca,A=Ce({elementType:j,externalSlotProps:l==null?void 0:l.nextIconButton,additionalProps:{size:"medium",title:_.label,"aria-label":_.label,disabled:_.isDisabled,edge:"start",onClick:_.goTo},ownerState:I({},S,{isButtonHidden:_.isHidden??!1}),className:Ze(C.button,C.nextIconButton)}),k=(a==null?void 0:a.leftArrowIcon)??bm,D=Ce({elementType:k,externalSlotProps:l==null?void 0:l.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:S,className:C.leftArrowIcon}),R=re(D,Ny),F=(a==null?void 0:a.rightArrowIcon)??vm,L=Ce({elementType:F,externalSlotProps:l==null?void 0:l.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:S,className:C.rightArrowIcon}),$=re(L,zy);return d.jsxs(By,I({ref:t,className:Ze(C.root,o),ownerState:S},b,{children:[d.jsx(w,I({},P,{children:i?d.jsx(F,I({},$)):d.jsx(k,I({},R))})),r?d.jsx(M,{variant:"subtitle1",component:"span",id:x,children:r}):d.jsx($y,{className:C.spacer,ownerState:S}),d.jsx(j,I({},A,{children:i?d.jsx(k,I({},R)):d.jsx(F,I({},$))}))]}))});function Hy(n,{disableFuture:e,maxDate:t,timezone:i}){const s=Fe();return T.useMemo(()=>{const r=s.date(void 0,i),o=s.startOfMonth(e&&s.isBefore(r,t)?r:t);return!s.isAfter(o,n)},[e,t,n,s,i])}function Yy(n,{disablePast:e,minDate:t,timezone:i}){const s=Fe();return T.useMemo(()=>{const r=s.date(void 0,i),o=s.startOfMonth(e&&s.isAfter(r,t)?r:t);return!s.isBefore(o,n)},[e,t,n,s,i])}const Uy=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","classes","timezone","format"],Gy=["ownerState"],qy=n=>Le({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},Ay,n),Xy=X("div",{name:"MuiPickersCalendarHeader",slot:"Root"})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),Ky=X("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer"})(({theme:n})=>I({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},n.typography.body1,{fontWeight:n.typography.fontWeightMedium})),Qy=X("div",{name:"MuiPickersCalendarHeader",slot:"Label"})({marginRight:6}),Zy=X(Sn,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton"})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${Fy.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),Jy=X(xm,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon"})(({theme:n})=>({willChange:"transform",transition:n.transitions.create("transform"),transform:"rotate(0deg)"})),ex=T.forwardRef(function(e,t){const i=ln(),s=Fe(),r=Be({props:e,name:"MuiPickersCalendarHeader"}),{slots:o,slotProps:a,currentMonth:l,disabled:c,disableFuture:u,disablePast:h,maxDate:f,minDate:p,onMonthChange:m,onViewChange:y,view:g,reduceAnimations:x,views:v,labelId:b,className:S,classes:C,timezone:_,format:O=`${s.formats.month} ${s.formats.year}`}=r,w=re(r,Uy),{ownerState:P}=st(),j=qy(C),A=(o==null?void 0:o.switchViewButton)??Zy,k=Ce({elementType:A,externalSlotProps:a==null?void 0:a.switchViewButton,additionalProps:{size:"small","aria-label":i.calendarViewSwitchingButtonAriaLabel(g)},ownerState:P,className:j.switchViewButton}),D=(o==null?void 0:o.switchViewIcon)??Jy,R=Ce({elementType:D,externalSlotProps:a==null?void 0:a.switchViewIcon,ownerState:P,className:j.switchViewIcon}),F=re(R,Gy),L=()=>m(s.addMonths(l,1)),$=()=>m(s.addMonths(l,-1)),K=Hy(l,{disableFuture:u,maxDate:f,timezone:_}),V=Yy(l,{disablePast:h,minDate:p,timezone:_}),J=()=>{if(!(v.length===1||!y||c))if(v.length===2)y(v.find(se=>se!==g)||v[0]);else{const se=v.indexOf(g)!==0?0:1;y(v[se])}};if(v.length===1&&v[0]==="year")return null;const W=s.formatByString(l,O);return d.jsxs(Xy,I({},w,{ownerState:P,className:Ze(j.root,S),ref:t,children:[d.jsxs(Ky,{role:"presentation",onClick:J,ownerState:P,"aria-live":"polite",className:j.labelContainer,children:[d.jsx(md,{reduceAnimations:x,transKey:W,children:d.jsx(Qy,{id:b,ownerState:P,className:j.label,children:W})}),v.length>1&&!c&&d.jsx(A,I({},k,{children:d.jsx(D,I({},F))}))]}),d.jsx(Fs,{in:g==="day",appear:!x,enter:!x,children:d.jsx(Wy,{slots:o,slotProps:a,onGoToPrevious:$,isPreviousDisabled:V,previousLabel:i.previousMonth,onGoToNext:L,isNextDisabled:K,nextLabel:i.nextMonth})})]}))}),tx=X("div")({overflow:"hidden",width:Vs,maxHeight:bo,display:"flex",flexDirection:"column",margin:"0 auto"}),nx=n=>Ue("MuiDateCalendar",n);Ge("MuiDateCalendar",["root","viewTransitionContainer"]);const ix=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","classes","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"],sx=n=>Le({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},nx,n);function rx(n,e){const t=Be({props:n,name:e}),i=Uc(t.reduceAnimations),s=Ni(t);return I({},t,s,{loading:t.loading??!1,openTo:t.openTo??"day",views:t.views??["year","day"],reduceAnimations:i,renderLoading:t.renderLoading??(()=>d.jsx("span",{children:"..."}))})}const ox=X(tx,{name:"MuiDateCalendar",slot:"Root"})({display:"flex",flexDirection:"column",height:bo}),ax=X(md,{name:"MuiDateCalendar",slot:"ViewTransitionContainer"})({}),lx=T.forwardRef(function(e,t){const i=Fe(),{ownerState:s}=st(),r=Es(),o=rx(e,"MuiDateCalendar"),{autoFocus:a,onViewChange:l,value:c,defaultValue:u,referenceDate:h,disableFuture:f,disablePast:p,onChange:m,onMonthChange:y,reduceAnimations:g,shouldDisableDate:x,shouldDisableMonth:v,shouldDisableYear:b,view:S,views:C,openTo:_,className:O,classes:w,disabled:P,readOnly:j,minDate:A,maxDate:k,disableHighlightToday:D,focusedView:R,onFocusedViewChange:F,showDaysOutsideCurrentMonth:L,fixedWeekNumber:$,dayOfWeekFormatter:K,slots:V,slotProps:J,loading:W,renderLoading:se,displayWeekNumber:ge,yearsOrder:de,yearsPerRow:we,monthsPerRow:ie,timezone:be}=o,je=re(o,ix),{value:ue,handleValueChange:ne,timezone:H}=zi({name:"DateCalendar",timezone:be,value:c,defaultValue:u,referenceDate:h,onChange:m,valueManager:Wt}),{view:ee,setView:Y,focusedView:oe,setFocusedView:he,goToNextView:Q,setValueAndGoToNextView:ve}=qc({view:S,views:C,openTo:_,onChange:ne,onViewChange:l,autoFocus:a,focusedView:R,onFocusedViewChange:F}),{referenceDate:q,calendarState:ae,setVisibleDate:te,isDateDisabled:le,onMonthSwitchingAnimationEnd:it}=Lg({value:ue,referenceDate:h,reduceAnimations:g,onMonthChange:y,minDate:A,maxDate:k,shouldDisableDate:x,disablePast:p,disableFuture:f,timezone:H,getCurrentMonthFromVisibleDate:(ye,et)=>i.isSameMonth(ye,et)?et:i.startOfMonth(ye)}),Ke=P&&ue||A,ht=P&&ue||k,ct=`${r}-grid-label`,jt=oe!==null,_n=(V==null?void 0:V.calendarHeader)??ex,jn=Ce({elementType:_n,externalSlotProps:J==null?void 0:J.calendarHeader,additionalProps:{views:C,view:ee,currentMonth:ae.currentMonth,onViewChange:Y,onMonthChange:ye=>te({target:ye,reason:"header-navigation"}),minDate:Ke,maxDate:ht,disabled:P,disablePast:p,disableFuture:f,reduceAnimations:g,timezone:H,labelId:ct},ownerState:s}),fe=U(ye=>{const et=i.startOfMonth(ye),dt=i.endOfMonth(ye),Pt=le(ye)?Ii({utils:i,date:ye,minDate:i.isBefore(A,et)?et:A,maxDate:i.isAfter(k,dt)?dt:k,disablePast:p,disableFuture:f,isDateDisabled:le,timezone:H}):ye;Pt?(ve(Pt,"finish"),te({target:Pt,reason:"cell-interaction"})):(Q(),te({target:et,reason:"cell-interaction"}))}),pe=U(ye=>{const et=i.startOfYear(ye),dt=i.endOfYear(ye),Pt=le(ye)?Ii({utils:i,date:ye,minDate:i.isBefore(A,et)?et:A,maxDate:i.isAfter(k,dt)?dt:k,disablePast:p,disableFuture:f,isDateDisabled:le,timezone:H}):ye;Pt?(ve(Pt,"finish"),te({target:Pt,reason:"cell-interaction"})):(Q(),te({target:et,reason:"cell-interaction"}))}),De=U(ye=>ne(ye&&xs(i,ye,ue??q),"finish",ee));T.useEffect(()=>{i.isValid(ue)&&te({target:ue,reason:"controlled-value-change"})},[ue]);const Ee=sx(w),rt={disablePast:p,disableFuture:f,maxDate:k,minDate:A},Qe={disableHighlightToday:D,readOnly:j,disabled:P,timezone:H,gridLabelId:ct,slots:V,slotProps:J},yt=T.useRef(ee);T.useEffect(()=>{yt.current!==ee&&(oe===yt.current&&he(ee,!0),yt.current=ee)},[oe,he,ee]);const Je=T.useMemo(()=>[ue],[ue]);return d.jsxs(ox,I({ref:t,className:Ze(Ee.root,O),ownerState:s},je,{children:[d.jsx(_n,I({},jn,{slots:V,slotProps:J})),d.jsx(ax,{reduceAnimations:g,className:Ee.viewTransitionContainer,transKey:ee,ownerState:s,children:d.jsxs("div",{children:[ee==="year"&&d.jsx(Oy,I({},rt,Qe,{value:ue,onChange:pe,shouldDisableYear:b,hasFocus:jt,onFocusedViewChange:ye=>he("year",ye),yearsOrder:de,yearsPerRow:we,referenceDate:q})),ee==="month"&&d.jsx(Sy,I({},rt,Qe,{hasFocus:jt,className:O,value:ue,onChange:fe,shouldDisableMonth:v,onFocusedViewChange:ye=>he("month",ye),monthsPerRow:ie,referenceDate:q})),ee==="day"&&d.jsx(py,I({},ae,rt,Qe,{onMonthSwitchingAnimationEnd:it,hasFocus:jt,onFocusedDayChange:ye=>te({target:ye,reason:"cell-interaction"}),reduceAnimations:g,selectedDays:Je,onSelectedDaysChange:De,shouldDisableDate:x,shouldDisableMonth:v,shouldDisableYear:b,onFocusedViewChange:ye=>he("day",ye),showDaysOutsideCurrentMonth:L,fixedWeekNumber:$,dayOfWeekFormatter:K,displayWeekNumber:ge,loading:W,renderLoading:se}))]})})]}))}),Wn=({view:n,onViewChange:e,views:t,focusedView:i,onFocusedViewChange:s,value:r,defaultValue:o,referenceDate:a,onChange:l,className:c,classes:u,disableFuture:h,disablePast:f,minDate:p,maxDate:m,shouldDisableDate:y,shouldDisableMonth:g,shouldDisableYear:x,reduceAnimations:v,onMonthChange:b,monthsPerRow:S,onYearChange:C,yearsOrder:_,yearsPerRow:O,slots:w,slotProps:P,loading:j,renderLoading:A,disableHighlightToday:k,readOnly:D,disabled:R,showDaysOutsideCurrentMonth:F,dayOfWeekFormatter:L,sx:$,autoFocus:K,fixedWeekNumber:V,displayWeekNumber:J,timezone:W})=>d.jsx(lx,{view:n,onViewChange:e,views:t.filter(da),focusedView:i&&da(i)?i:null,onFocusedViewChange:s,value:r,defaultValue:o,referenceDate:a,onChange:l,className:c,classes:u,disableFuture:h,disablePast:f,minDate:p,maxDate:m,shouldDisableDate:y,shouldDisableMonth:g,shouldDisableYear:x,reduceAnimations:v,onMonthChange:b,monthsPerRow:S,onYearChange:C,yearsOrder:_,yearsPerRow:O,slots:w,slotProps:P,loading:j,renderLoading:A,disableHighlightToday:k,readOnly:D,disabled:R,showDaysOutsideCurrentMonth:F,dayOfWeekFormatter:L,sx:$,autoFocus:K,fixedWeekNumber:V,displayWeekNumber:J,timezone:W}),Td=T.forwardRef(function(e,t){var l;const i=Fe(),s=Yc(e,"MuiDesktopDatePicker"),r=I({day:Wn,month:Wn,year:Wn},s.viewRenderers),o=I({},s,{closeOnSelect:s.closeOnSelect??!0,viewRenderers:r,format:fo(i,s,!1),yearsPerRow:s.yearsPerRow??4,slots:I({field:fd},s.slots),slotProps:I({},s.slotProps,{field:c=>{var u;return I({},ys((u=s.slotProps)==null?void 0:u.field,c),Vc(s))},toolbar:I({hidden:!0},(l=s.slotProps)==null?void 0:l.toolbar)})}),{renderPicker:a}=vg({ref:t,props:o,valueManager:Wt,valueType:"date",validator:Li,steps:null});return a()});Td.propTypes={autoFocus:E.bool,className:E.string,closeOnSelect:E.bool,dayOfWeekFormatter:E.func,defaultValue:E.object,disabled:E.bool,disableFuture:E.bool,disableHighlightToday:E.bool,disableOpenPicker:E.bool,disablePast:E.bool,displayWeekNumber:E.bool,enableAccessibleFieldDOMStructure:E.any,fixedWeekNumber:E.number,format:E.string,formatDensity:E.oneOf(["dense","spacious"]),inputRef:vc,label:E.node,loading:E.bool,localeText:E.object,maxDate:E.object,minDate:E.object,monthsPerRow:E.oneOf([3,4]),name:E.string,onAccept:E.func,onChange:E.func,onClose:E.func,onError:E.func,onMonthChange:E.func,onOpen:E.func,onSelectedSectionsChange:E.func,onViewChange:E.func,onYearChange:E.func,open:E.bool,openTo:E.oneOf(["day","month","year"]),orientation:E.oneOf(["landscape","portrait"]),readOnly:E.bool,reduceAnimations:E.bool,referenceDate:E.object,renderLoading:E.func,selectedSections:E.oneOfType([E.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),E.number]),shouldDisableDate:E.func,shouldDisableMonth:E.func,shouldDisableYear:E.func,showDaysOutsideCurrentMonth:E.bool,slotProps:E.object,slots:E.object,sx:E.oneOfType([E.arrayOf(E.oneOfType([E.func,E.object,E.bool])),E.func,E.object]),timezone:E.string,value:E.object,view:E.oneOf(["day","month","year"]),viewRenderers:E.shape({day:E.func,month:E.func,year:E.func}),views:E.arrayOf(E.oneOf(["day","month","year"]).isRequired),yearsOrder:E.oneOf(["asc","desc"]),yearsPerRow:E.oneOf([3,4])};const cx=X(oo)({[`& .${ta.container}`]:{outline:0},[`& .${ta.paper}`]:{outline:0,minWidth:Vs}}),dx=X(ao)({"&:first-of-type":{padding:0}});function ux(n){const{children:e,slots:t,slotProps:i}=n,{open:s}=ti(),{dismissViews:r}=st(),o=(t==null?void 0:t.dialog)??cx,a=(t==null?void 0:t.mobileTransition)??Fs;return d.jsx(o,I({open:s,onClose:r},i==null?void 0:i.dialog,{TransitionComponent:a,TransitionProps:i==null?void 0:i.mobileTransition,PaperComponent:t==null?void 0:t.mobilePaper,PaperProps:i==null?void 0:i.mobilePaper,children:d.jsx(dx,{children:e})}))}const hx=["props","steps"],fx=["ownerState"],px=n=>{var _;let{props:e,steps:t}=n,i=re(n,hx);const{slots:s,slotProps:r,label:o,inputRef:a,localeText:l}=e,c=ld({steps:t}),{providerProps:u,renderCurrentView:h,ownerState:f}=Xc(I({},i,{props:e,localeText:l,autoFocusView:!0,viewContainerRole:"dialog",variant:"mobile",getStepNavigation:c})),p=u.privateContextValue.labelId,m=((_=r==null?void 0:r.toolbar)==null?void 0:_.hidden)??!1,y=s.field,g=Ce({elementType:y,externalSlotProps:r==null?void 0:r.field,additionalProps:I({},m&&{id:p}),ownerState:f}),x=re(g,fx),v=s.layout??Qc;let b=p;m&&(o?b=`${p}-label`:b=void 0);const S=I({},r,{toolbar:I({},r==null?void 0:r.toolbar,{titleId:p}),mobilePaper:I({"aria-labelledby":b},r==null?void 0:r.mobilePaper)});return{renderPicker:()=>d.jsx(Nc,I({},u,{children:d.jsxs(ad,{slots:s,slotProps:S,inputRef:a,children:[d.jsx(y,I({},x)),d.jsx(ux,{slots:s,slotProps:S,children:d.jsx(v,I({},S==null?void 0:S.layout,{slots:s,slotProps:S,children:h()}))})]})}))}},Sd=T.forwardRef(function(e,t){var l;const i=Fe(),s=Yc(e,"MuiMobileDatePicker"),r=I({day:Wn,month:Wn,year:Wn},s.viewRenderers),o=I({},s,{viewRenderers:r,format:fo(i,s,!1),slots:I({field:fd},s.slots),slotProps:I({},s.slotProps,{field:c=>{var u;return I({},ys((u=s.slotProps)==null?void 0:u.field,c),Vc(s))},toolbar:I({hidden:!1},(l=s.slotProps)==null?void 0:l.toolbar)})}),{renderPicker:a}=px({ref:t,props:o,valueManager:Wt,valueType:"date",validator:Li,steps:null});return a()});Sd.propTypes={autoFocus:E.bool,className:E.string,closeOnSelect:E.bool,dayOfWeekFormatter:E.func,defaultValue:E.object,disabled:E.bool,disableFuture:E.bool,disableHighlightToday:E.bool,disableOpenPicker:E.bool,disablePast:E.bool,displayWeekNumber:E.bool,enableAccessibleFieldDOMStructure:E.any,fixedWeekNumber:E.number,format:E.string,formatDensity:E.oneOf(["dense","spacious"]),inputRef:vc,label:E.node,loading:E.bool,localeText:E.object,maxDate:E.object,minDate:E.object,monthsPerRow:E.oneOf([3,4]),name:E.string,onAccept:E.func,onChange:E.func,onClose:E.func,onError:E.func,onMonthChange:E.func,onOpen:E.func,onSelectedSectionsChange:E.func,onViewChange:E.func,onYearChange:E.func,open:E.bool,openTo:E.oneOf(["day","month","year"]),orientation:E.oneOf(["landscape","portrait"]),readOnly:E.bool,reduceAnimations:E.bool,referenceDate:E.object,renderLoading:E.func,selectedSections:E.oneOfType([E.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),E.number]),shouldDisableDate:E.func,shouldDisableMonth:E.func,shouldDisableYear:E.func,showDaysOutsideCurrentMonth:E.bool,slotProps:E.object,slots:E.object,sx:E.oneOfType([E.arrayOf(E.oneOfType([E.func,E.object,E.bool])),E.func,E.object]),timezone:E.string,value:E.object,view:E.oneOf(["day","month","year"]),viewRenderers:E.shape({day:E.func,month:E.func,year:E.func}),views:E.arrayOf(E.oneOf(["day","month","year"]).isRequired),yearsOrder:E.oneOf(["asc","desc"]),yearsPerRow:E.oneOf([3,4])};const mx=["desktopModeMediaQuery"],Ma=T.forwardRef(function(e,t){const i=Be({props:e,name:"MuiDatePicker"}),{desktopModeMediaQuery:s=$p}=i,r=re(i,mx);return ec(s,{defaultMatches:!0})?d.jsx(Td,I({ref:t},r)):d.jsx(Sd,I({ref:t},r))}),Pd=6048e5,gx=864e5,Bi=6e4,$i=36e5,yx=1e3,ka=Symbol.for("constructDateFrom");function Ae(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&ka in n?n[ka](e):n instanceof Date?new n.constructor(e):new Date(e)}function G(n,e){return Ae(e||n,n)}function Vi(n,e,t){const i=G(n,t==null?void 0:t.in);return isNaN(e)?Ae((t==null?void 0:t.in)||n,NaN):(e&&i.setDate(i.getDate()+e),i)}function Do(n,e,t){return Ae(n,+G(n)+e)}function Dd(n,e,t){return Do(n,e*1e3)}function Cd(n,e,t){const i=G(n,t==null?void 0:t.in);return i.setTime(i.getTime()+e*Bi),i}function Md(n,e,t){return Do(n,e*$i)}function kd(n,e,t){return Vi(n,e*7,t)}function Ys(n,e,t){const i=G(n,t==null?void 0:t.in);if(isNaN(e))return Ae(n,NaN);if(!e)return i;const s=i.getDate(),r=Ae(n,i.getTime());r.setMonth(i.getMonth()+e+1,0);const o=r.getDate();return s>=o?r:(i.setFullYear(r.getFullYear(),r.getMonth(),s),i)}function Id(n,e,t){return Ys(n,e*12,t)}function bs(n,e){const t=G(n,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}let xx={};function kn(){return xx}function _d(n,e){var a,l,c,u;const t=kn(),i=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=G(n,e==null?void 0:e.in),r=s.getDay(),o=(r<i?-7:0)+6-(r-i);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}function zr(n,e){const t=G(n,e==null?void 0:e.in),i=t.getFullYear();return t.setFullYear(i+1,0,0),t.setHours(23,59,59,999),t}const bx={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},vx=(n,e,t)=>{let i;const s=bx[n];return typeof s=="string"?i=s:e===1?i=s.one:i=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function ar(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const wx={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Tx={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Sx={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Px={date:ar({formats:wx,defaultWidth:"full"}),time:ar({formats:Tx,defaultWidth:"full"}),dateTime:ar({formats:Sx,defaultWidth:"full"})},Dx={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Cx=(n,e,t,i)=>Dx[n];function di(n){return(e,t)=>{const i=t!=null&&t.context?String(t.context):"standalone";let s;if(i==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):o;s=n.formattingValues[a]||n.formattingValues[o]}else{const o=n.defaultWidth,a=t!=null&&t.width?String(t.width):n.defaultWidth;s=n.values[a]||n.values[o]}const r=n.argumentCallback?n.argumentCallback(e):e;return s[r]}}const Mx={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},kx={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ix={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_x={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},jx={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Rx={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ox=(n,e)=>{const t=Number(n),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Ax={ordinalNumber:Ox,era:di({values:Mx,defaultWidth:"wide"}),quarter:di({values:kx,defaultWidth:"wide",argumentCallback:n=>n-1}),month:di({values:Ix,defaultWidth:"wide"}),day:di({values:_x,defaultWidth:"wide"}),dayPeriod:di({values:jx,defaultWidth:"wide",formattingValues:Rx,defaultFormattingWidth:"wide"})};function ui(n){return(e,t={})=>{const i=t.width,s=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],r=e.match(s);if(!r)return null;const o=r[0],a=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?Ex(a,h=>h.test(o)):Fx(a,h=>h.test(o));let c;c=n.valueCallback?n.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function Fx(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function Ex(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function Lx(n){return(e,t={})=>{const i=e.match(n.matchPattern);if(!i)return null;const s=i[0],r=e.match(n.parsePattern);if(!r)return null;let o=n.valueCallback?n.valueCallback(r[0]):r[0];o=t.valueCallback?t.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const Nx=/^(\d+)(th|st|nd|rd)?/i,zx=/\d+/i,Bx={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},$x={any:[/^b/i,/^(a|c)/i]},Vx={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Wx={any:[/1/i,/2/i,/3/i,/4/i]},Hx={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Yx={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ux={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Gx={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},qx={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Xx={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Kx={ordinalNumber:Lx({matchPattern:Nx,parsePattern:zx,valueCallback:n=>parseInt(n,10)}),era:ui({matchPatterns:Bx,defaultMatchWidth:"wide",parsePatterns:$x,defaultParseWidth:"any"}),quarter:ui({matchPatterns:Vx,defaultMatchWidth:"wide",parsePatterns:Wx,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ui({matchPatterns:Hx,defaultMatchWidth:"wide",parsePatterns:Yx,defaultParseWidth:"any"}),day:ui({matchPatterns:Ux,defaultMatchWidth:"wide",parsePatterns:Gx,defaultParseWidth:"any"}),dayPeriod:ui({matchPatterns:qx,defaultMatchWidth:"any",parsePatterns:Xx,defaultParseWidth:"any"})},Co={code:"en-US",formatDistance:vx,formatLong:Px,formatRelative:Cx,localize:Ax,match:Kx,options:{weekStartsOn:0,firstWeekContainsDate:1}};function vs(n){const e=G(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function _t(n,...e){const t=Ae.bind(null,e.find(i=>typeof i=="object"));return e.map(t)}function Xn(n,e){const t=G(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function jd(n,e,t){const[i,s]=_t(t==null?void 0:t.in,n,e),r=Xn(i),o=Xn(s),a=+r-vs(r),l=+o-vs(o);return Math.round((a-l)/gx)}function Mo(n,e){const t=G(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function Qx(n,e){const t=G(n,e==null?void 0:e.in);return jd(t,Mo(t))+1}function It(n,e){var a,l,c,u;const t=kn(),i=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=G(n,e==null?void 0:e.in),r=s.getDay(),o=(r<i?7:0)+r-i;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Kn(n,e){return It(n,{...e,weekStartsOn:1})}function Rd(n,e){const t=G(n,e==null?void 0:e.in),i=t.getFullYear(),s=Ae(t,0);s.setFullYear(i+1,0,4),s.setHours(0,0,0,0);const r=Kn(s),o=Ae(t,0);o.setFullYear(i,0,4),o.setHours(0,0,0,0);const a=Kn(o);return t.getTime()>=r.getTime()?i+1:t.getTime()>=a.getTime()?i:i-1}function Zx(n,e){const t=Rd(n,e),i=Ae(n,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),Kn(i)}function Od(n,e){const t=G(n,e==null?void 0:e.in),i=+Kn(t)-+Zx(t);return Math.round(i/Pd)+1}function ko(n,e){var u,h,f,p;const t=G(n,e==null?void 0:e.in),i=t.getFullYear(),s=kn(),r=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(f=s.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=Ae((e==null?void 0:e.in)||n,0);o.setFullYear(i+1,0,r),o.setHours(0,0,0,0);const a=It(o,e),l=Ae((e==null?void 0:e.in)||n,0);l.setFullYear(i,0,r),l.setHours(0,0,0,0);const c=It(l,e);return+t>=+a?i+1:+t>=+c?i:i-1}function Jx(n,e){var a,l,c,u;const t=kn(),i=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,s=ko(n,e),r=Ae((e==null?void 0:e.in)||n,0);return r.setFullYear(s,0,i),r.setHours(0,0,0,0),It(r,e)}function Io(n,e){const t=G(n,e==null?void 0:e.in),i=+It(t,e)-+Jx(t,e);return Math.round(i/Pd)+1}function Me(n,e){const t=n<0?"-":"",i=Math.abs(n).toString().padStart(e,"0");return t+i}const tn={y(n,e){const t=n.getFullYear(),i=t>0?t:1-t;return Me(e==="yy"?i%100:i,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Me(t+1,2)},d(n,e){return Me(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Me(n.getHours()%12||12,e.length)},H(n,e){return Me(n.getHours(),e.length)},m(n,e){return Me(n.getMinutes(),e.length)},s(n,e){return Me(n.getSeconds(),e.length)},S(n,e){const t=e.length,i=n.getMilliseconds(),s=Math.trunc(i*Math.pow(10,t-3));return Me(s,e.length)}},En={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ia={G:function(n,e,t){const i=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const i=n.getFullYear(),s=i>0?i:1-i;return t.ordinalNumber(s,{unit:"year"})}return tn.y(n,e)},Y:function(n,e,t,i){const s=ko(n,i),r=s>0?s:1-s;if(e==="YY"){const o=r%100;return Me(o,2)}return e==="Yo"?t.ordinalNumber(r,{unit:"year"}):Me(r,e.length)},R:function(n,e){const t=Rd(n);return Me(t,e.length)},u:function(n,e){const t=n.getFullYear();return Me(t,e.length)},Q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return Me(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return Me(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,e,t){const i=n.getMonth();switch(e){case"M":case"MM":return tn.M(n,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(n,e,t){const i=n.getMonth();switch(e){case"L":return String(i+1);case"LL":return Me(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(n,e,t,i){const s=Io(n,i);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):Me(s,e.length)},I:function(n,e,t){const i=Od(n);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):Me(i,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):tn.d(n,e)},D:function(n,e,t){const i=Qx(n);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):Me(i,e.length)},E:function(n,e,t){const i=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(n,e,t,i){const s=n.getDay(),r=(s-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(r);case"ee":return Me(r,2);case"eo":return t.ordinalNumber(r,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(n,e,t,i){const s=n.getDay(),r=(s-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(r);case"cc":return Me(r,e.length);case"co":return t.ordinalNumber(r,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(n,e,t){const i=n.getDay(),s=i===0?7:i;switch(e){case"i":return String(s);case"ii":return Me(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(n,e,t){const s=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,e,t){const i=n.getHours();let s;switch(i===12?s=En.noon:i===0?s=En.midnight:s=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,e,t){const i=n.getHours();let s;switch(i>=17?s=En.evening:i>=12?s=En.afternoon:i>=4?s=En.morning:s=En.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let i=n.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return tn.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):tn.H(n,e)},K:function(n,e,t){const i=n.getHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):Me(i,e.length)},k:function(n,e,t){let i=n.getHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):Me(i,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):tn.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):tn.s(n,e)},S:function(n,e){return tn.S(n,e)},X:function(n,e,t){const i=n.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return ja(i);case"XXXX":case"XX":return mn(i);case"XXXXX":case"XXX":default:return mn(i,":")}},x:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"x":return ja(i);case"xxxx":case"xx":return mn(i);case"xxxxx":case"xxx":default:return mn(i,":")}},O:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+_a(i,":");case"OOOO":default:return"GMT"+mn(i,":")}},z:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+_a(i,":");case"zzzz":default:return"GMT"+mn(i,":")}},t:function(n,e,t){const i=Math.trunc(+n/1e3);return Me(i,e.length)},T:function(n,e,t){return Me(+n,e.length)}};function _a(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),s=Math.trunc(i/60),r=i%60;return r===0?t+String(s):t+String(s)+e+Me(r,2)}function ja(n,e){return n%60===0?(n>0?"-":"+")+Me(Math.abs(n)/60,2):mn(n,e)}function mn(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),s=Me(Math.trunc(i/60),2),r=Me(i%60,2);return t+s+e+r}const Ra=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Ad=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},eb=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],i=t[1],s=t[2];if(!s)return Ra(n,e);let r;switch(i){case"P":r=e.dateTime({width:"short"});break;case"PP":r=e.dateTime({width:"medium"});break;case"PPP":r=e.dateTime({width:"long"});break;case"PPPP":default:r=e.dateTime({width:"full"});break}return r.replace("{{date}}",Ra(i,e)).replace("{{time}}",Ad(s,e))},ws={p:Ad,P:eb},tb=/^D+$/,nb=/^Y+$/,ib=["D","DD","YY","YYYY"];function Fd(n){return tb.test(n)}function Ed(n){return nb.test(n)}function Br(n,e,t){const i=sb(n,e,t);if(console.warn(i),ib.includes(n))throw new RangeError(i)}function sb(n,e,t){const i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function rb(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function _o(n){return!(!rb(n)&&typeof n!="number"||isNaN(+G(n)))}const ob=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ab=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lb=/^'([^]*?)'?$/,cb=/''/g,db=/[a-zA-Z]/;function Ld(n,e,t){var u,h,f,p,m,y,g,x;const i=kn(),s=(t==null?void 0:t.locale)??i.locale??Co,r=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=(t==null?void 0:t.weekStartsOn)??((y=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:y.weekStartsOn)??i.weekStartsOn??((x=(g=i.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,a=G(n,t==null?void 0:t.in);if(!_o(a))throw new RangeError("Invalid time value");let l=e.match(ab).map(v=>{const b=v[0];if(b==="p"||b==="P"){const S=ws[b];return S(v,s.formatLong)}return v}).join("").match(ob).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:ub(v)};if(Ia[b])return{isToken:!0,value:v};if(b.match(db))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:r,weekStartsOn:o,locale:s};return l.map(v=>{if(!v.isToken)return v.value;const b=v.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&Ed(b)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&Fd(b))&&Br(b,e,String(n));const S=Ia[b[0]];return S(a,b,s.localize,c)}).join("")}function ub(n){const e=n.match(lb);return e?e[1].replace(cb,"'"):n}function hb(n,e){return G(n,e==null?void 0:e.in).getDate()}function Nd(n,e){const t=G(n,e==null?void 0:e.in),i=t.getFullYear(),s=t.getMonth(),r=Ae(t,0);return r.setFullYear(i,s+1,0),r.setHours(0,0,0,0),r.getDate()}function fb(n,e){return G(n,e==null?void 0:e.in).getHours()}function pb(n,e){return G(n,e==null?void 0:e.in).getMinutes()}function mb(n,e){return G(n,e==null?void 0:e.in).getMonth()}function gb(n){return G(n).getSeconds()}function yb(n){return G(n).getMilliseconds()}function xb(n,e){return G(n,e==null?void 0:e.in).getFullYear()}function lr(n,e){return+G(n)>+G(e)}function cr(n,e){return+G(n)<+G(e)}function bb(n,e){return+G(n)==+G(e)}function vb(n,e,t){const[i,s]=_t(t==null?void 0:t.in,n,e);return+Xn(i)==+Xn(s)}function wb(n,e,t){const[i,s]=_t(t==null?void 0:t.in,n,e);return i.getFullYear()===s.getFullYear()}function Tb(n,e,t){const[i,s]=_t(t==null?void 0:t.in,n,e);return i.getFullYear()===s.getFullYear()&&i.getMonth()===s.getMonth()}function $r(n,e){const t=G(n,e==null?void 0:e.in);return t.setMinutes(0,0,0),t}function Sb(n,e,t){const[i,s]=_t(t==null?void 0:t.in,n,e);return+$r(i)==+$r(s)}function Pb(){return Object.assign({},kn())}function Db(n,e){const t=Cb(e)?new e(0):Ae(e,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}function Cb(n){var e;return typeof n=="function"&&((e=n.prototype)==null?void 0:e.constructor)===n}const Mb=10;class zd{constructor(){z(this,"subPriority",0)}validate(e,t){return!0}}class kb extends zd{constructor(e,t,i,s,r){super(),this.value=e,this.validateValue=t,this.setValue=i,this.priority=s,r&&(this.subPriority=r)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,i){return this.setValue(e,t,this.value,i)}}class Ib extends zd{constructor(t,i){super();z(this,"priority",Mb);z(this,"subPriority",-1);this.context=t||(s=>Ae(i,s))}set(t,i){return i.timestampIsSet?t:Ae(t,Db(t,this.context))}}class Pe{run(e,t,i,s){const r=this.parse(e,t,i,s);return r?{setter:new kb(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}validate(e,t,i){return!0}}class _b extends Pe{constructor(){super(...arguments);z(this,"priority",140);z(this,"incompatibleTokens",["R","u","t","T"])}parse(t,i,s){switch(i){case"G":case"GG":case"GGG":return s.era(t,{width:"abbreviated"})||s.era(t,{width:"narrow"});case"GGGGG":return s.era(t,{width:"narrow"});case"GGGG":default:return s.era(t,{width:"wide"})||s.era(t,{width:"abbreviated"})||s.era(t,{width:"narrow"})}}set(t,i,s){return i.era=s,t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}const We={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Nt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function He(n,e){return n&&{value:e(n.value),rest:n.rest}}function Ne(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function zt(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const i=t[1]==="+"?1:-1,s=t[2]?parseInt(t[2],10):0,r=t[3]?parseInt(t[3],10):0,o=t[5]?parseInt(t[5],10):0;return{value:i*(s*$i+r*Bi+o*yx),rest:e.slice(t[0].length)}}function Bd(n){return Ne(We.anyDigitsSigned,n)}function $e(n,e){switch(n){case 1:return Ne(We.singleDigit,e);case 2:return Ne(We.twoDigits,e);case 3:return Ne(We.threeDigits,e);case 4:return Ne(We.fourDigits,e);default:return Ne(new RegExp("^\\d{1,"+n+"}"),e)}}function Ts(n,e){switch(n){case 1:return Ne(We.singleDigitSigned,e);case 2:return Ne(We.twoDigitsSigned,e);case 3:return Ne(We.threeDigitsSigned,e);case 4:return Ne(We.fourDigitsSigned,e);default:return Ne(new RegExp("^-?\\d{1,"+n+"}"),e)}}function jo(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function $d(n,e){const t=e>0,i=t?e:1-e;let s;if(i<=50)s=n||100;else{const r=i+50,o=Math.trunc(r/100)*100,a=n>=r%100;s=n+o-(a?100:0)}return t?s:1-s}function Vd(n){return n%400===0||n%4===0&&n%100!==0}class jb extends Pe{constructor(){super(...arguments);z(this,"priority",130);z(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,i,s){const r=o=>({year:o,isTwoDigitYear:i==="yy"});switch(i){case"y":return He($e(4,t),r);case"yo":return He(s.ordinalNumber(t,{unit:"year"}),r);default:return He($e(i.length,t),r)}}validate(t,i){return i.isTwoDigitYear||i.year>0}set(t,i,s){const r=t.getFullYear();if(s.isTwoDigitYear){const a=$d(s.year,r);return t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}const o=!("era"in i)||i.era===1?s.year:1-s.year;return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}}class Rb extends Pe{constructor(){super(...arguments);z(this,"priority",130);z(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,i,s){const r=o=>({year:o,isTwoDigitYear:i==="YY"});switch(i){case"Y":return He($e(4,t),r);case"Yo":return He(s.ordinalNumber(t,{unit:"year"}),r);default:return He($e(i.length,t),r)}}validate(t,i){return i.isTwoDigitYear||i.year>0}set(t,i,s,r){const o=ko(t,r);if(s.isTwoDigitYear){const l=$d(s.year,o);return t.setFullYear(l,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),It(t,r)}const a=!("era"in i)||i.era===1?s.year:1-s.year;return t.setFullYear(a,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),It(t,r)}}class Ob extends Pe{constructor(){super(...arguments);z(this,"priority",130);z(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,i){return Ts(i==="R"?4:i.length,t)}set(t,i,s){const r=Ae(t,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),Kn(r)}}class Ab extends Pe{constructor(){super(...arguments);z(this,"priority",130);z(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,i){return Ts(i==="u"?4:i.length,t)}set(t,i,s){return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}class Fb extends Pe{constructor(){super(...arguments);z(this,"priority",120);z(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,i,s){switch(i){case"Q":case"QQ":return $e(i.length,t);case"Qo":return s.ordinalNumber(t,{unit:"quarter"});case"QQQ":return s.quarter(t,{width:"abbreviated",context:"formatting"})||s.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(t,{width:"wide",context:"formatting"})||s.quarter(t,{width:"abbreviated",context:"formatting"})||s.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=1&&i<=4}set(t,i,s){return t.setMonth((s-1)*3,1),t.setHours(0,0,0,0),t}}class Eb extends Pe{constructor(){super(...arguments);z(this,"priority",120);z(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,i,s){switch(i){case"q":case"qq":return $e(i.length,t);case"qo":return s.ordinalNumber(t,{unit:"quarter"});case"qqq":return s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(t,{width:"wide",context:"standalone"})||s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,i){return i>=1&&i<=4}set(t,i,s){return t.setMonth((s-1)*3,1),t.setHours(0,0,0,0),t}}class Lb extends Pe{constructor(){super(...arguments);z(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);z(this,"priority",110)}parse(t,i,s){const r=o=>o-1;switch(i){case"M":return He(Ne(We.month,t),r);case"MM":return He($e(2,t),r);case"Mo":return He(s.ordinalNumber(t,{unit:"month"}),r);case"MMM":return s.month(t,{width:"abbreviated",context:"formatting"})||s.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(t,{width:"wide",context:"formatting"})||s.month(t,{width:"abbreviated",context:"formatting"})||s.month(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=0&&i<=11}set(t,i,s){return t.setMonth(s,1),t.setHours(0,0,0,0),t}}class Nb extends Pe{constructor(){super(...arguments);z(this,"priority",110);z(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,i,s){const r=o=>o-1;switch(i){case"L":return He(Ne(We.month,t),r);case"LL":return He($e(2,t),r);case"Lo":return He(s.ordinalNumber(t,{unit:"month"}),r);case"LLL":return s.month(t,{width:"abbreviated",context:"standalone"})||s.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(t,{width:"wide",context:"standalone"})||s.month(t,{width:"abbreviated",context:"standalone"})||s.month(t,{width:"narrow",context:"standalone"})}}validate(t,i){return i>=0&&i<=11}set(t,i,s){return t.setMonth(s,1),t.setHours(0,0,0,0),t}}function zb(n,e,t){const i=G(n,t==null?void 0:t.in),s=Io(i,t)-e;return i.setDate(i.getDate()-s*7),G(i,t==null?void 0:t.in)}class Bb extends Pe{constructor(){super(...arguments);z(this,"priority",100);z(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,i,s){switch(i){case"w":return Ne(We.week,t);case"wo":return s.ordinalNumber(t,{unit:"week"});default:return $e(i.length,t)}}validate(t,i){return i>=1&&i<=53}set(t,i,s,r){return It(zb(t,s,r),r)}}function $b(n,e,t){const i=G(n,t==null?void 0:t.in),s=Od(i,t)-e;return i.setDate(i.getDate()-s*7),i}class Vb extends Pe{constructor(){super(...arguments);z(this,"priority",100);z(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,i,s){switch(i){case"I":return Ne(We.week,t);case"Io":return s.ordinalNumber(t,{unit:"week"});default:return $e(i.length,t)}}validate(t,i){return i>=1&&i<=53}set(t,i,s){return Kn($b(t,s))}}const Wb=[31,28,31,30,31,30,31,31,30,31,30,31],Hb=[31,29,31,30,31,30,31,31,30,31,30,31];class Yb extends Pe{constructor(){super(...arguments);z(this,"priority",90);z(this,"subPriority",1);z(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,i,s){switch(i){case"d":return Ne(We.date,t);case"do":return s.ordinalNumber(t,{unit:"date"});default:return $e(i.length,t)}}validate(t,i){const s=t.getFullYear(),r=Vd(s),o=t.getMonth();return r?i>=1&&i<=Hb[o]:i>=1&&i<=Wb[o]}set(t,i,s){return t.setDate(s),t.setHours(0,0,0,0),t}}class Ub extends Pe{constructor(){super(...arguments);z(this,"priority",90);z(this,"subpriority",1);z(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,i,s){switch(i){case"D":case"DD":return Ne(We.dayOfYear,t);case"Do":return s.ordinalNumber(t,{unit:"date"});default:return $e(i.length,t)}}validate(t,i){const s=t.getFullYear();return Vd(s)?i>=1&&i<=366:i>=1&&i<=365}set(t,i,s){return t.setMonth(0,s),t.setHours(0,0,0,0),t}}function Ro(n,e,t){var h,f,p,m;const i=kn(),s=(t==null?void 0:t.weekStartsOn)??((f=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??i.weekStartsOn??((m=(p=i.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??0,r=G(n,t==null?void 0:t.in),o=r.getDay(),l=(e%7+7)%7,c=7-s,u=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return Vi(r,u,t)}class Gb extends Pe{constructor(){super(...arguments);z(this,"priority",90);z(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,i,s){switch(i){case"E":case"EE":case"EEE":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=0&&i<=6}set(t,i,s,r){return t=Ro(t,s,r),t.setHours(0,0,0,0),t}}class qb extends Pe{constructor(){super(...arguments);z(this,"priority",90);z(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,i,s,r){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+r.weekStartsOn+6)%7+l};switch(i){case"e":case"ee":return He($e(i.length,t),o);case"eo":return He(s.ordinalNumber(t,{unit:"day"}),o);case"eee":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"eeeee":return s.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=0&&i<=6}set(t,i,s,r){return t=Ro(t,s,r),t.setHours(0,0,0,0),t}}class Xb extends Pe{constructor(){super(...arguments);z(this,"priority",90);z(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,i,s,r){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+r.weekStartsOn+6)%7+l};switch(i){case"c":case"cc":return He($e(i.length,t),o);case"co":return He(s.ordinalNumber(t,{unit:"day"}),o);case"ccc":return s.day(t,{width:"abbreviated",context:"standalone"})||s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"});case"ccccc":return s.day(t,{width:"narrow",context:"standalone"});case"cccccc":return s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(t,{width:"wide",context:"standalone"})||s.day(t,{width:"abbreviated",context:"standalone"})||s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"})}}validate(t,i){return i>=0&&i<=6}set(t,i,s,r){return t=Ro(t,s,r),t.setHours(0,0,0,0),t}}function Kb(n,e){const t=G(n,e==null?void 0:e.in).getDay();return t===0?7:t}function Qb(n,e,t){const i=G(n,t==null?void 0:t.in),s=Kb(i,t),r=e-s;return Vi(i,r,t)}class Zb extends Pe{constructor(){super(...arguments);z(this,"priority",90);z(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,i,s){const r=o=>o===0?7:o;switch(i){case"i":case"ii":return $e(i.length,t);case"io":return s.ordinalNumber(t,{unit:"day"});case"iii":return He(s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),r);case"iiiii":return He(s.day(t,{width:"narrow",context:"formatting"}),r);case"iiiiii":return He(s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),r);case"iiii":default:return He(s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),r)}}validate(t,i){return i>=1&&i<=7}set(t,i,s){return t=Qb(t,s),t.setHours(0,0,0,0),t}}class Jb extends Pe{constructor(){super(...arguments);z(this,"priority",80);z(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,i,s){switch(i){case"a":case"aa":case"aaa":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,i,s){return t.setHours(jo(s),0,0,0),t}}class e0 extends Pe{constructor(){super(...arguments);z(this,"priority",80);z(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,i,s){switch(i){case"b":case"bb":case"bbb":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,i,s){return t.setHours(jo(s),0,0,0),t}}class t0 extends Pe{constructor(){super(...arguments);z(this,"priority",80);z(this,"incompatibleTokens",["a","b","t","T"])}parse(t,i,s){switch(i){case"B":case"BB":case"BBB":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,i,s){return t.setHours(jo(s),0,0,0),t}}class n0 extends Pe{constructor(){super(...arguments);z(this,"priority",70);z(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,i,s){switch(i){case"h":return Ne(We.hour12h,t);case"ho":return s.ordinalNumber(t,{unit:"hour"});default:return $e(i.length,t)}}validate(t,i){return i>=1&&i<=12}set(t,i,s){const r=t.getHours()>=12;return r&&s<12?t.setHours(s+12,0,0,0):!r&&s===12?t.setHours(0,0,0,0):t.setHours(s,0,0,0),t}}class i0 extends Pe{constructor(){super(...arguments);z(this,"priority",70);z(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,i,s){switch(i){case"H":return Ne(We.hour23h,t);case"Ho":return s.ordinalNumber(t,{unit:"hour"});default:return $e(i.length,t)}}validate(t,i){return i>=0&&i<=23}set(t,i,s){return t.setHours(s,0,0,0),t}}class s0 extends Pe{constructor(){super(...arguments);z(this,"priority",70);z(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,i,s){switch(i){case"K":return Ne(We.hour11h,t);case"Ko":return s.ordinalNumber(t,{unit:"hour"});default:return $e(i.length,t)}}validate(t,i){return i>=0&&i<=11}set(t,i,s){return t.getHours()>=12&&s<12?t.setHours(s+12,0,0,0):t.setHours(s,0,0,0),t}}class r0 extends Pe{constructor(){super(...arguments);z(this,"priority",70);z(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,i,s){switch(i){case"k":return Ne(We.hour24h,t);case"ko":return s.ordinalNumber(t,{unit:"hour"});default:return $e(i.length,t)}}validate(t,i){return i>=1&&i<=24}set(t,i,s){const r=s<=24?s%24:s;return t.setHours(r,0,0,0),t}}class o0 extends Pe{constructor(){super(...arguments);z(this,"priority",60);z(this,"incompatibleTokens",["t","T"])}parse(t,i,s){switch(i){case"m":return Ne(We.minute,t);case"mo":return s.ordinalNumber(t,{unit:"minute"});default:return $e(i.length,t)}}validate(t,i){return i>=0&&i<=59}set(t,i,s){return t.setMinutes(s,0,0),t}}class a0 extends Pe{constructor(){super(...arguments);z(this,"priority",50);z(this,"incompatibleTokens",["t","T"])}parse(t,i,s){switch(i){case"s":return Ne(We.second,t);case"so":return s.ordinalNumber(t,{unit:"second"});default:return $e(i.length,t)}}validate(t,i){return i>=0&&i<=59}set(t,i,s){return t.setSeconds(s,0),t}}class l0 extends Pe{constructor(){super(...arguments);z(this,"priority",30);z(this,"incompatibleTokens",["t","T"])}parse(t,i){const s=r=>Math.trunc(r*Math.pow(10,-i.length+3));return He($e(i.length,t),s)}set(t,i,s){return t.setMilliseconds(s),t}}class c0 extends Pe{constructor(){super(...arguments);z(this,"priority",10);z(this,"incompatibleTokens",["t","T","x"])}parse(t,i){switch(i){case"X":return zt(Nt.basicOptionalMinutes,t);case"XX":return zt(Nt.basic,t);case"XXXX":return zt(Nt.basicOptionalSeconds,t);case"XXXXX":return zt(Nt.extendedOptionalSeconds,t);case"XXX":default:return zt(Nt.extended,t)}}set(t,i,s){return i.timestampIsSet?t:Ae(t,t.getTime()-vs(t)-s)}}class d0 extends Pe{constructor(){super(...arguments);z(this,"priority",10);z(this,"incompatibleTokens",["t","T","X"])}parse(t,i){switch(i){case"x":return zt(Nt.basicOptionalMinutes,t);case"xx":return zt(Nt.basic,t);case"xxxx":return zt(Nt.basicOptionalSeconds,t);case"xxxxx":return zt(Nt.extendedOptionalSeconds,t);case"xxx":default:return zt(Nt.extended,t)}}set(t,i,s){return i.timestampIsSet?t:Ae(t,t.getTime()-vs(t)-s)}}class u0 extends Pe{constructor(){super(...arguments);z(this,"priority",40);z(this,"incompatibleTokens","*")}parse(t){return Bd(t)}set(t,i,s){return[Ae(t,s*1e3),{timestampIsSet:!0}]}}class h0 extends Pe{constructor(){super(...arguments);z(this,"priority",20);z(this,"incompatibleTokens","*")}parse(t){return Bd(t)}set(t,i,s){return[Ae(t,s),{timestampIsSet:!0}]}}const f0={G:new _b,y:new jb,Y:new Rb,R:new Ob,u:new Ab,Q:new Fb,q:new Eb,M:new Lb,L:new Nb,w:new Bb,I:new Vb,d:new Yb,D:new Ub,E:new Gb,e:new qb,c:new Xb,i:new Zb,a:new Jb,b:new e0,B:new t0,h:new n0,H:new i0,K:new s0,k:new r0,m:new o0,s:new a0,S:new l0,X:new c0,x:new d0,t:new u0,T:new h0},p0=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,m0=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,g0=/^'([^]*?)'?$/,y0=/''/g,x0=/\S/,b0=/[a-zA-Z]/;function Wd(n,e,t,i){var g,x,v,b,S,C,_,O;const s=()=>Ae((i==null?void 0:i.in)||t,NaN),r=Pb(),o=(i==null?void 0:i.locale)??r.locale??Co,a=(i==null?void 0:i.firstWeekContainsDate)??((x=(g=i==null?void 0:i.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??r.firstWeekContainsDate??((b=(v=r.locale)==null?void 0:v.options)==null?void 0:b.firstWeekContainsDate)??1,l=(i==null?void 0:i.weekStartsOn)??((C=(S=i==null?void 0:i.locale)==null?void 0:S.options)==null?void 0:C.weekStartsOn)??r.weekStartsOn??((O=(_=r.locale)==null?void 0:_.options)==null?void 0:O.weekStartsOn)??0;if(!e)return n?s():G(t,i==null?void 0:i.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:o},u=[new Ib(i==null?void 0:i.in,t)],h=e.match(m0).map(w=>{const P=w[0];if(P in ws){const j=ws[P];return j(w,o.formatLong)}return w}).join("").match(p0),f=[];for(let w of h){!(i!=null&&i.useAdditionalWeekYearTokens)&&Ed(w)&&Br(w,e,n),!(i!=null&&i.useAdditionalDayOfYearTokens)&&Fd(w)&&Br(w,e,n);const P=w[0],j=f0[P];if(j){const{incompatibleTokens:A}=j;if(Array.isArray(A)){const D=f.find(R=>A.includes(R.token)||R.token===P);if(D)throw new RangeError(`The format string mustn't contain \`${D.fullToken}\` and \`${w}\` at the same time`)}else if(j.incompatibleTokens==="*"&&f.length>0)throw new RangeError(`The format string mustn't contain \`${w}\` and any other token at the same time`);f.push({token:P,fullToken:w});const k=j.run(n,w,o.match,c);if(!k)return s();u.push(k.setter),n=k.rest}else{if(P.match(b0))throw new RangeError("Format string contains an unescaped latin alphabet character `"+P+"`");if(w==="''"?w="'":P==="'"&&(w=v0(w)),n.indexOf(w)===0)n=n.slice(w.length);else return s()}}if(n.length>0&&x0.test(n))return s();const p=u.map(w=>w.priority).sort((w,P)=>P-w).filter((w,P,j)=>j.indexOf(w)===P).map(w=>u.filter(P=>P.priority===w).sort((P,j)=>j.subPriority-P.subPriority)).map(w=>w[0]);let m=G(t,i==null?void 0:i.in);if(isNaN(+m))return s();const y={};for(const w of p){if(!w.validate(m,c))return s();const P=w.set(m,y,c);Array.isArray(P)?(m=P[0],Object.assign(y,P[1])):m=P}return m}function v0(n){return n.match(g0)[1].replace(y0,"'")}function w0(n,e,t){const i=G(n,t==null?void 0:t.in);return i.setDate(e),i}function T0(n,e,t){const i=G(n,t==null?void 0:t.in);return i.setHours(e),i}function S0(n,e,t){const i=G(n,t==null?void 0:t.in);return i.setMinutes(e),i}function P0(n,e,t){const i=G(n,t==null?void 0:t.in),s=i.getFullYear(),r=i.getDate(),o=Ae(n,0);o.setFullYear(s,e,15),o.setHours(0,0,0,0);const a=Nd(o);return i.setMonth(e,Math.min(r,a)),i}function D0(n,e,t){const i=G(n,t==null?void 0:t.in);return i.setSeconds(e),i}function C0(n,e,t){const i=G(n,t==null?void 0:t.in);return i.setMilliseconds(e),i}function M0(n,e,t){const i=G(n,t==null?void 0:t.in);return isNaN(+i)?Ae(n,NaN):(i.setFullYear(e),i)}function Hd(n,e){const t=G(n,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function Oo(n,e){const t=G(n,e==null?void 0:e.in),i=t.getMonth();return t.setFullYear(t.getFullYear(),i+1,0),t.setHours(23,59,59,999),t}function k0(n,e,t){const i=+G(n,t==null?void 0:t.in),[s,r]=[+G(e.start,t==null?void 0:t.in),+G(e.end,t==null?void 0:t.in)].sort((o,a)=>o-a);return i>=s&&i<=r}const I0={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},_0={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class j0{constructor(e){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib=void 0,this.locale=void 0,this.formats=void 0,this.formatTokenMap=I0,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=o=>typeof o>"u"?new Date:o===null?null:new Date(o),this.getInvalidDate=()=>new Date("Invalid Date"),this.getTimezone=()=>"default",this.setTimezone=o=>o,this.toJsDate=o=>o,this.getCurrentLocaleCode=()=>this.locale.code,this.is12HourCycleInCurrentLocale=()=>/a/.test(this.locale.formatLong.time({width:"short"})),this.expandFormat=o=>{const a=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return o.match(a).map(l=>{const c=l[0];if(c==="p"||c==="P"){const u=this.longFormatters[c];return u(l,this.locale.formatLong)}return l}).join("")},this.formatNumber=o=>o,this.getDayOfWeek=o=>o.getDay()+1;const{locale:t,formats:i,longFormatters:s,lib:r}=e;this.locale=t,this.formats=I({},_0,i),this.longFormatters=s,this.lib=r||"date-fns"}}class R0 extends j0{constructor({locale:e,formats:t}={}){super({locale:e??Co,formats:t,longFormatters:ws}),this.parse=(i,s)=>i===""?null:Wd(i,s,new Date,{locale:this.locale}),this.isValid=i=>i==null?!1:_o(i),this.format=(i,s)=>this.formatByString(i,this.formats[s]),this.formatByString=(i,s)=>Ld(i,s,{locale:this.locale}),this.isEqual=(i,s)=>i===null&&s===null?!0:i===null||s===null?!1:bb(i,s),this.isSameYear=(i,s)=>wb(i,s),this.isSameMonth=(i,s)=>Tb(i,s),this.isSameDay=(i,s)=>vb(i,s),this.isSameHour=(i,s)=>Sb(i,s),this.isAfter=(i,s)=>lr(i,s),this.isAfterYear=(i,s)=>lr(i,zr(s)),this.isAfterDay=(i,s)=>lr(i,bs(s)),this.isBefore=(i,s)=>cr(i,s),this.isBeforeYear=(i,s)=>cr(i,this.startOfYear(s)),this.isBeforeDay=(i,s)=>cr(i,this.startOfDay(s)),this.isWithinRange=(i,[s,r])=>k0(i,{start:s,end:r}),this.startOfYear=i=>Mo(i),this.startOfMonth=i=>Hd(i),this.startOfWeek=i=>It(i,{locale:this.locale}),this.startOfDay=i=>Xn(i),this.endOfYear=i=>zr(i),this.endOfMonth=i=>Oo(i),this.endOfWeek=i=>_d(i,{locale:this.locale}),this.endOfDay=i=>bs(i),this.addYears=(i,s)=>Id(i,s),this.addMonths=(i,s)=>Ys(i,s),this.addWeeks=(i,s)=>kd(i,s),this.addDays=(i,s)=>Vi(i,s),this.addHours=(i,s)=>Md(i,s),this.addMinutes=(i,s)=>Cd(i,s),this.addSeconds=(i,s)=>Dd(i,s),this.getYear=i=>xb(i),this.getMonth=i=>mb(i),this.getDate=i=>hb(i),this.getHours=i=>fb(i),this.getMinutes=i=>pb(i),this.getSeconds=i=>gb(i),this.getMilliseconds=i=>yb(i),this.setYear=(i,s)=>M0(i,s),this.setMonth=(i,s)=>P0(i,s),this.setDate=(i,s)=>w0(i,s),this.setHours=(i,s)=>T0(i,s),this.setMinutes=(i,s)=>S0(i,s),this.setSeconds=(i,s)=>D0(i,s),this.setMilliseconds=(i,s)=>C0(i,s),this.getDaysInMonth=i=>Nd(i),this.getWeekArray=i=>{const s=this.startOfWeek(this.startOfMonth(i)),r=this.endOfWeek(this.endOfMonth(i));let o=0,a=s;const l=[];for(;this.isBefore(a,r);){const c=Math.floor(o/7);l[c]=l[c]||[],l[c].push(a),a=this.addDays(a,1),o+=1}return l},this.getWeekNumber=i=>Io(i,{locale:this.locale}),this.getYearRange=([i,s])=>{const r=this.startOfYear(i),o=this.endOfYear(s),a=[];let l=r;for(;this.isBefore(l,o);)a.push(l),l=this.addYears(l,1);return a}}}const O0=()=>{const n=en(),{incidents:e}=Ie(a=>a.analyzer.rawData),t=Ie(a=>a.analyzer.filters.incidentTypes),i=T.useMemo(()=>{const a=new Set;return e.forEach(l=>{l.incidentType&&a.add(l.incidentType)}),Array.from(a).sort()},[e]),s=a=>{const l=t||[],c=l.includes(a)?l.filter(u=>u!==a):[...l,a];n(Qs(c.length>0?c:null))},r=()=>{n(Qs(null))},o=()=>{n(Qs(i))};return d.jsxs(N,{children:[d.jsxs(N,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[d.jsx(M,{variant:"subtitle2",children:"Incident Types"}),d.jsxs(N,{children:[d.jsx(Te,{size:"small",onClick:o,children:"Select All"}),d.jsx(Te,{size:"small",onClick:r,children:"Clear"})]})]}),i.length===0?d.jsx(M,{variant:"body2",color:"text.secondary",children:"No incident types available in the data."}):d.jsx(xc,{children:d.jsx(B,{container:!0,spacing:1,children:i.map(a=>d.jsx(B,{size:6,children:d.jsx(Ls,{control:d.jsx(Ns,{checked:(t==null?void 0:t.includes(a))||!1,onChange:()=>s(a),size:"small"}),label:d.jsx(M,{variant:"body2",children:a})})},a))})})]})},A0=()=>{const n=en(),{incidents:e}=Ie(a=>a.analyzer.rawData),t=Ie(a=>a.analyzer.filters.units),i=T.useMemo(()=>{const a=new Set;return e.forEach(l=>{l.respondingUnit&&a.add(l.respondingUnit)}),Array.from(a).sort()},[e]),s=a=>{const l=t||[],c=l.includes(a)?l.filter(u=>u!==a):[...l,a];n(Zs(c.length>0?c:null))},r=()=>{n(Zs(null))},o=()=>{n(Zs(i))};return d.jsxs(N,{children:[d.jsxs(N,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[d.jsx(M,{variant:"subtitle2",children:"Responding Units"}),d.jsxs(N,{children:[d.jsx(Te,{size:"small",onClick:o,children:"Select All"}),d.jsx(Te,{size:"small",onClick:r,children:"Clear"})]})]}),i.length===0?d.jsx(M,{variant:"body2",color:"text.secondary",children:"No responding unit data available."}):d.jsx(xc,{children:d.jsx(B,{container:!0,spacing:1,children:i.map(a=>d.jsx(B,{size:6,children:d.jsx(Ls,{control:d.jsx(Ns,{checked:(t==null?void 0:t.includes(a))||!1,onChange:()=>s(a),size:"small"}),label:d.jsx(M,{variant:"body2",children:a})})},a))})})]})},F0=()=>{const n=en(),e=Ie(l=>l.analyzer.filters.dateRange),{incidents:t}=Ie(l=>l.analyzer.rawData),[i,s]=T.useState({min:null,max:null});T.useEffect(()=>{if(t.length>0){const l=t.map(c=>c.incidentDate).filter(c=>c).map(c=>new Date(c));if(l.length>0){const c=new Date(Math.min(...l.map(h=>h.getTime()))),u=new Date(Math.max(...l.map(h=>h.getTime())));s({min:c,max:u})}}},[t]);const r=l=>{if(l){const c=e?e[1]:null;n(Ks(c?[l,c]:null))}},o=l=>{if(l){const c=e?e[0]:null;n(Ks(c?[c,l]:null))}},a=()=>{n(Ks(null))};return d.jsx(Rc,{dateAdapter:R0,children:d.jsxs(N,{children:[d.jsxs(N,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[d.jsx(M,{variant:"subtitle2",children:"Date Range"}),d.jsx(Te,{size:"small",onClick:a,children:"Clear"})]}),d.jsxs(B,{container:!0,spacing:2,children:[d.jsx(B,{size:6,children:d.jsx(Ma,{label:"Start Date",value:e?e[0]:void 0,onChange:r,minDate:i.min??void 0,maxDate:i.max??void 0,slotProps:{textField:{size:"small",fullWidth:!0,variant:"outlined"}}})}),d.jsx(B,{size:6,children:d.jsx(Ma,{label:"End Date",value:e?e[1]:void 0,onChange:o,minDate:i.min??void 0,maxDate:i.max??void 0,slotProps:{textField:{size:"small",fullWidth:!0,variant:"outlined"}}})})]}),i.min&&i.max&&d.jsxs(M,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Data range: ",i.min.toLocaleDateString()," to ",i.max.toLocaleDateString()]})]})})},E0=()=>{const n=en(),e=Ie(s=>s.analyzer.filters.timeOfDay),t=[{label:"Morning (6AM-12PM)",value:[6,12]},{label:"Afternoon (12PM-6PM)",value:[12,18]},{label:"Evening (6PM-12AM)",value:[18,24]},{label:"Night (12AM-6AM)",value:[0,6]}],i=s=>{const r=e&&e[0]===s[0]&&e[1]===s[1]?null:s;n(dh(r))};return d.jsxs(N,{children:[d.jsx(M,{variant:"subtitle2",gutterBottom:!0,children:"Time of Day"}),d.jsx(yc,{direction:"row",spacing:1,sx:{flexWrap:"wrap",gap:1},children:t.map(s=>d.jsx(Re,{label:s.label,clickable:!0,onClick:()=>i(s.value),color:e&&e[0]===s.value[0]&&e[1]===s.value[1]?"primary":"default",variant:e&&e[0]===s.value[0]&&e[1]===s.value[1]?"filled":"outlined"},s.label))})]})},L0=()=>{const n=en(),e=Ie(o=>o.analyzer.filters),{incidents:t}=Ie(o=>o.analyzer.rawData),i=T.useMemo(()=>e.dateRange!==null||e.incidentTypes!==null||e.units!==null||e.geographicBounds!==null||e.timeOfDay!==null||e.priority!==null,[e]),s=T.useMemo(()=>i?t.filter(o=>{if(e.dateRange){const a=new Date(o.incidentDate),[l,c]=e.dateRange;if(a<l||a>c)return!1}if(e.incidentTypes&&o.incidentType&&!e.incidentTypes.includes(o.incidentType)||e.units&&o.respondingUnit&&!e.units.includes(o.respondingUnit))return!1;if(e.timeOfDay&&o.incidentTime){const a=o.incidentTime,l=parseInt(a.split(":")[0],10);if(l<e.timeOfDay[0]||l>=e.timeOfDay[1])return!1}return!(e.priority&&o.priority&&!e.priority.includes(o.priority))}).length:t.length,[t,e,i]),r=()=>{n(ch())};return d.jsxs(N,{sx:{p:3},children:[d.jsxs(N,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[d.jsxs(M,{variant:"h6",children:[d.jsx(bf,{sx:{verticalAlign:"middle",mr:1}}),"Filters"]}),d.jsx(Te,{variant:"outlined",color:"primary",startIcon:d.jsx(Nh,{}),disabled:!i,onClick:r,children:"Reset All"})]}),i&&d.jsxs($t,{severity:"info",sx:{mb:3},children:["Showing ",s," of ",t.length," incidents after applying filters"]}),d.jsxs(B,{container:!0,spacing:3,children:[d.jsx(B,{size:{xs:12,md:6},children:d.jsx(Ve,{variant:"outlined",sx:{p:2},children:d.jsx(F0,{})})}),d.jsx(B,{size:{xs:12,md:6},children:d.jsx(Ve,{variant:"outlined",sx:{p:2},children:d.jsx(E0,{})})}),d.jsx(B,{size:{xs:12,md:6},children:d.jsx(Ve,{variant:"outlined",sx:{p:2},children:d.jsx(O0,{})})}),d.jsx(B,{size:{xs:12,md:6},children:d.jsx(Ve,{variant:"outlined",sx:{p:2},children:d.jsx(A0,{})})})]}),d.jsx(N,{sx:{mt:3},children:d.jsxs(ac,{children:[d.jsx(lc,{expandIcon:d.jsx(cc,{}),children:d.jsx(M,{children:"Saved Filters"})}),d.jsx(dc,{children:d.jsx(N,{sx:{display:"flex",justifyContent:"center",p:2},children:d.jsx(M,{variant:"body2",color:"text.secondary",children:"Saved filters feature coming soon"})})})]})})]})};function Yd(n,e,t,i,s){i=i||{};var r=1.15,o=s.internal.scaleFactor,a=s.internal.getFontSize()/o,l=s.getLineHeightFactor?s.getLineHeightFactor():r,c=a*l,u=/\r\n|\r|\n/g,h="",f=1;if((i.valign==="middle"||i.valign==="bottom"||i.halign==="center"||i.halign==="right")&&(h=typeof n=="string"?n.split(u):n,f=h.length||1),t+=a*(2-r),i.valign==="middle"?t-=f/2*c:i.valign==="bottom"&&(t-=f*c),i.halign==="center"||i.halign==="right"){var p=a;if(i.halign==="center"&&(p*=.5),h&&f>=1){for(var m=0;m<h.length;m++)s.text(h[m],e-s.getStringUnitWidth(h[m])*p,t),t+=c;return s}e-=s.getStringUnitWidth(n)*p}return i.halign==="justify"?s.text(n,e,t,{maxWidth:i.maxWidth||100,align:"justify"}):s.text(n,e,t),s}var Oa={},Hn=function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:Oa=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var i,s,r;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),a=o.fontStyle,l=o.fontName;if(e.font&&(l=e.font),e.fontStyle){a=e.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(a)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),a=c[0])}if(this.jsPDFDocument.setFont(l,a),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var u=n.unifyColor(e.fillColor);u&&(i=this.jsPDFDocument).setFillColor.apply(i,u),u=n.unifyColor(e.textColor),u&&(s=this.jsPDFDocument).setTextColor.apply(s,u),u=n.unifyColor(e.lineColor),u&&(r=this.jsPDFDocument).setDrawColor.apply(r,u),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,i){return this.jsPDFDocument.splitTextToSize(e,t,i)},n.prototype.rect=function(e,t,i,s,r){return this.jsPDFDocument.rect(e,t,i,s,r)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return Oa||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n}(),Vr=function(n,e){return Vr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])},Vr(n,e)};function Ud(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Vr(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Gd=function(n){Ud(e,n);function e(t){var i=n.call(this)||this;return i._element=t,i}return e}(Array);function N0(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function z0(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function Ss(n,e,t){t.applyStyles(e,!0);var i=Array.isArray(n)?n:[n],s=i.map(function(r){return t.getTextWidth(r)}).reduce(function(r,o){return Math.max(r,o)},0);return s}function qd(n,e,t,i){var s=e.settings.tableLineWidth,r=e.settings.tableLineColor;n.applyStyles({lineWidth:s,lineColor:r});var o=Xd(s,!1);o&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),i.y-t.y,o)}function Xd(n,e){var t=n>0,i=e||e===0;return t&&i?"DF":t?"S":i?"F":null}function Us(n,e){var t,i,s,r;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(i=n.top)!==null&&i!==void 0?i:e,right:(s=n.right)!==null&&s!==void 0?s:e,bottom:(r=n.bottom)!==null&&r!==void 0?r:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function Kd(n,e){var t=Us(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function B0(n,e,t,i,s){var r={},o=1.3333333333333333,a=dr(e,function(b){return s.getComputedStyle(b).backgroundColor});a!=null&&(r.fillColor=a);var l=dr(e,function(b){return s.getComputedStyle(b).color});l!=null&&(r.textColor=l);var c=V0(i,t);c&&(r.cellPadding=c);var u="borderTopColor",h=o*t,f=i.borderTopWidth;if(i.borderBottomWidth===f&&i.borderRightWidth===f&&i.borderLeftWidth===f){var p=(parseFloat(f)||0)/h;p&&(r.lineWidth=p)}else r.lineWidth={top:(parseFloat(i.borderTopWidth)||0)/h,right:(parseFloat(i.borderRightWidth)||0)/h,bottom:(parseFloat(i.borderBottomWidth)||0)/h,left:(parseFloat(i.borderLeftWidth)||0)/h},r.lineWidth.top||(r.lineWidth.right?u="borderRightColor":r.lineWidth.bottom?u="borderBottomColor":r.lineWidth.left&&(u="borderLeftColor"));var m=dr(e,function(b){return s.getComputedStyle(b)[u]});m!=null&&(r.lineColor=m);var y=["left","right","center","justify"];y.indexOf(i.textAlign)!==-1&&(r.halign=i.textAlign),y=["middle","bottom","top"],y.indexOf(i.verticalAlign)!==-1&&(r.valign=i.verticalAlign);var g=parseInt(i.fontSize||"");isNaN(g)||(r.fontSize=g/o);var x=$0(i);x&&(r.fontStyle=x);var v=(i.fontFamily||"").toLowerCase();return n.indexOf(v)!==-1&&(r.font=v),r}function $0(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function dr(n,e){var t=Qd(n,e);if(!t)return null;var i=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!i||!Array.isArray(i))return null;var s=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],r=parseInt(i[4]);return r===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function Qd(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:Qd(n.parentElement,e):t}function V0(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],i=96/(72/e),s=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,r=t.map(function(a){return parseInt(a||"0")/i}),o=Us(r,0);return s>o.top&&(o.top=s),s>o.bottom&&(o.bottom=s),o}function Zd(n,e,t,i,s){var r,o;i===void 0&&(i=!1),s===void 0&&(s=!1);var a;typeof e=="string"?a=t.document.querySelector(e):a=e;var l=Object.keys(n.getFontList()),c=n.scaleFactor(),u=[],h=[],f=[];if(!a)return console.error("Html table could not be found with input: ",e),{head:u,body:h,foot:f};for(var p=0;p<a.rows.length;p++){var m=a.rows[p],y=(o=(r=m==null?void 0:m.parentElement)===null||r===void 0?void 0:r.tagName)===null||o===void 0?void 0:o.toLowerCase(),g=W0(l,c,t,m,i,s);g&&(y==="thead"?u.push(g):y==="tfoot"?f.push(g):h.push(g))}return{head:u,body:h,foot:f}}function W0(n,e,t,i,s,r){for(var o=new Gd(i),a=0;a<i.cells.length;a++){var l=i.cells[a],c=t.getComputedStyle(l);if(s||c.display!=="none"){var u=void 0;r&&(u=B0(n,l,e,c,t)),o.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:u,_element:l,content:H0(l)})}}var h=t.getComputedStyle(i);if(o.length>0&&(s||h.display!=="none"))return o}function H0(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function Y0(n,e,t){for(var i=0,s=[n,e,t];i<s.length;i++){var r=s[i];r&&typeof r!="object"&&console.error("The options parameter should be of type object, is: "+typeof r),r.startY&&typeof r.startY!="number"&&(console.error("Invalid value for startY option",r.startY),delete r.startY)}}function Qt(n,e,t,i,s){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(n),o=1;o<arguments.length;o++){var a=arguments[o];if(a!=null)for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])}return r}function Jd(n,e){var t=new Hn(n),i=t.getDocumentOptions(),s=t.getGlobalOptions();Y0(s,i,e);var r=Qt({},s,i,e),o;typeof window<"u"&&(o=window);var a=U0(s,i,e),l=G0(s,i,e),c=q0(t,r),u=K0(t,r,o);return{id:e.tableId,content:u,hooks:l,styles:a,settings:c}}function U0(n,e,t){for(var i={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(l){if(l==="columnStyles"){var c=n[l],u=e[l],h=t[l];i.columnStyles=Qt({},c,u,h)}else{var f=[n,e,t],p=f.map(function(m){return m[l]||{}});i[l]=Qt({},p[0],p[1],p[2])}},r=0,o=Object.keys(i);r<o.length;r++){var a=o[r];s(a)}return i}function G0(n,e,t){for(var i=[n,e,t],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},r=0,o=i;r<o.length;r++){var a=o[r];a.didParseCell&&s.didParseCell.push(a.didParseCell),a.willDrawCell&&s.willDrawCell.push(a.willDrawCell),a.didDrawCell&&s.didDrawCell.push(a.didDrawCell),a.willDrawPage&&s.willDrawPage.push(a.willDrawPage),a.didDrawPage&&s.didDrawPage.push(a.didDrawPage)}return s}function q0(n,e){var t,i,s,r,o,a,l,c,u,h,f,p,m=Us(e.margin,40/n.scaleFactor()),y=(t=X0(n,e.startY))!==null&&t!==void 0?t:m.top,g;e.showFoot===!0?g="everyPage":e.showFoot===!1?g="never":g=(i=e.showFoot)!==null&&i!==void 0?i:"everyPage";var x;e.showHead===!0?x="everyPage":e.showHead===!1?x="never":x=(s=e.showHead)!==null&&s!==void 0?s:"everyPage";var v=(r=e.useCss)!==null&&r!==void 0?r:!1,b=e.theme||(v?"plain":"striped"),S=!!e.horizontalPageBreak,C=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(a=e.includeHiddenHtml)!==null&&a!==void 0?a:!1,useCss:v,theme:b,startY:y,margin:m,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=e.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(u=e.tableWidth)!==null&&u!==void 0?u:"auto",showHead:x,showFoot:g,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(f=e.tableLineColor)!==null&&f!==void 0?f:200,horizontalPageBreak:S,horizontalPageBreakRepeat:C,horizontalPageBreakBehaviour:(p=e.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function X0(n,e){var t=n.getLastAutoTable(),i=n.scaleFactor(),s=n.pageNumber(),r=!1;if(t&&t.startPageNumber){var o=t.startPageNumber+t.pageNumber-1;r=o===s}return typeof e=="number"?e:(e==null||e===!1)&&r&&(t==null?void 0:t.finalY)!=null?t.finalY+20/i:null}function K0(n,e,t){var i=e.head||[],s=e.body||[],r=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(t){var a=Zd(n,e.html,t,o,e.useCss)||{};i=a.head||i,s=a.body||i,r=a.foot||i}else console.error("Cannot parse html in non browser environment")}var l=e.columns||Q0(i,s,r);return{columns:l,head:i,body:s,foot:r}}function Q0(n,e,t){var i=n[0]||e[0]||t[0]||[],s=[];return Object.keys(i).filter(function(r){return r!=="_element"}).forEach(function(r){var o=1,a;Array.isArray(i)?a=i[parseInt(r)]:a=i[r],typeof a=="object"&&!Array.isArray(a)&&(o=(a==null?void 0:a.colSpan)||1);for(var l=0;l<o;l++){var c=void 0;Array.isArray(i)?c=s.length:c=r+(l>0?"_".concat(l):"");var u={dataKey:c};s.push(u)}}),s}var Wr=function(){function n(e,t,i){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=i,this.doc=e.getDocument()}return n}(),Z0=function(n){Ud(e,n);function e(t,i,s,r,o,a){var l=n.call(this,t,i,a)||this;return l.cell=s,l.row=r,l.column=o,l.section=r.section,l}return e}(Wr),J0=function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,i){return t+i.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,i){return t+i.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,i,s,r,o){for(var a=0,l=t;a<l.length;a++){var c=l[a],u=new Z0(e,this,i,s,r,o),h=c(u)===!1;if(i.text=Array.isArray(i.text)?i.text:[i.text],h)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var i=0,s=this.hooks.didDrawPage;i<s.length;i++){var r=s[i];r(new Wr(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var i=0,s=this.hooks.willDrawPage;i<s.length;i++){var r=s[i];r(new Wr(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(s,r){return s+r.wrappedWidth},0);return t}else{var i=this.settings.margin;return e-i.left-i.right}},n}(),eu=function(){function n(e,t,i,s,r){r===void 0&&(r=!1),this.height=0,this.raw=e,e instanceof Gd&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=i,this.cells=s,this.spansMultiplePages=r}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(i,s){var r;return Math.max(i,((r=t.cells[s.index])===null||r===void 0?void 0:r.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(i){var s=t.cells[i.index];return s?s.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var i=this;return e.reduce(function(s,r){var o=i.cells[r.index];if(!o)return 0;var a=t.getLineHeight(o.styles.fontSize),l=o.padding("vertical"),c=l+a;return c>s?c:s},0)},n}(),tu=function(){function n(e,t,i){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=i,this.raw=e;var r=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,r=(s=e.content)!==null&&s!==void 0?s:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=r!=null?""+r:"",a=/\r\n|\r|\n/g;this.text=o.split(a)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var i;if(this.styles.halign==="right")i=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");i=this.x+s/2+this.padding("left")}else i=this.x+this.padding("left");return{x:i,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var i=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/e*t,r=i*s+this.padding("vertical");return Math.max(r,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=Us(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n}(),ev=function(){function n(e,t,i){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=i}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,i=0,s=e.allRows();i<s.length;i++){var r=s[i],o=r.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(t=Math.max(t,o.styles.cellWidth))}return t},n}();function tv(n,e){nv(n,e);var t=[],i=0;e.columns.forEach(function(r){var o=r.getMaxCustomCellWidth(e);o?r.width=o:(r.width=r.wrappedWidth,t.push(r)),i+=r.width});var s=e.getWidth(n.pageSize().width)-i;s&&(s=Hr(t,s,function(r){return Math.max(r.minReadableWidth,r.minWidth)})),s&&(s=Hr(t,s,function(r){return r.minWidth})),s=Math.abs(s),!e.settings.horizontalPageBreak&&s>.1/n.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),sv(e),rv(e,n),iv(e)}function nv(n,e){var t=n.scaleFactor(),i=e.settings.horizontalPageBreak,s=Kd(n,e);e.allRows().forEach(function(r){for(var o=0,a=e.columns;o<a.length;o++){var l=a[o],c=r.cells[l.index];if(c){var u=e.hooks.didParseCell;e.callCellHooks(n,u,c,r,l,null);var h=c.padding("horizontal");c.contentWidth=Ss(c.text,c.styles,n)+h;var f=Ss(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,n);if(c.minReadableWidth=f+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||i===!0)c.contentWidth>s?(c.minWidth=s,c.wrappedWidth=s):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var p=10/t;c.minWidth=c.styles.minCellWidth||p,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),e.allRows().forEach(function(r){for(var o=0,a=e.columns;o<a.length;o++){var l=a[o],c=r.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var u=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},h=u.cellWidth||u.minCellWidth;h&&typeof h=="number"&&(l.minWidth=h,l.wrappedWidth=h)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function Hr(n,e,t){for(var i=e,s=n.reduce(function(p,m){return p+m.wrappedWidth},0),r=0;r<n.length;r++){var o=n[r],a=o.wrappedWidth/s,l=i*a,c=o.width+l,u=t(o),h=c<u?u:c;e-=h-o.width,o.width=h}if(e=Math.round(e*1e10)/1e10,e){var f=n.filter(function(p){return e<0?p.width>t(p):!0});f.length&&(e=Hr(f,e,t))}return e}function iv(n){for(var e={},t=1,i=n.allRows(),s=0;s<i.length;s++)for(var r=i[s],o=0,a=n.columns;o<a.length;o++){var l=a[o],c=e[l.index];if(t>1)t--,delete r.cells[l.index];else if(c)c.cell.height+=r.height,t=c.cell.colSpan,delete r.cells[l.index],c.left--,c.left<=1&&delete e[l.index];else{var u=r.cells[l.index];if(!u)continue;if(u.height=r.height,u.rowSpan>1){var h=i.length-s,f=u.rowSpan>h?h:u.rowSpan;e[l.index]={cell:u,left:f,row:r}}}}}function sv(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var i=e[t],s=null,r=0,o=0,a=0;a<n.columns.length;a++){var l=n.columns[a];if(o-=1,o>1&&n.columns[a+1])r+=l.width,delete i.cells[l.index];else if(s){var c=s;delete i.cells[l.index],s=null,c.width=l.width+r}else{var c=i.cells[l.index];if(!c)continue;if(o=c.colSpan,r=0,c.colSpan>1){s=c,r+=l.width;continue}c.width=l.width+r}}}function rv(n,e){for(var t={count:0,height:0},i=0,s=n.allRows();i<s.length;i++){for(var r=s[i],o=0,a=n.columns;o<a.length;o++){var l=a[o],c=r.cells[l.index];if(c){e.applyStyles(c.styles,!0);var u=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=e.splitTextToSize(c.text,u+1/e.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=Aa(c.text,u,c.styles,e,"...");else if(c.styles.overflow==="hidden")c.text=Aa(c.text,u,c.styles,e,"");else if(typeof c.styles.overflow=="function"){var h=c.styles.overflow(c.text,u);typeof h=="string"?c.text=[h]:c.text=h}c.contentHeight=c.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var f=c.contentHeight/c.rowSpan;c.rowSpan>1&&t.count*t.height<f*c.rowSpan?t={height:f,count:c.rowSpan}:t&&t.count>0&&t.height>f&&(f=t.height),f>r.height&&(r.height=f)}}t.count--}}function Aa(n,e,t,i,s){return n.map(function(r){return ov(r,e,t,i,s)})}function ov(n,e,t,i,s){var r=1e4*i.scaleFactor();if(e=Math.ceil(e*r)/r,e>=Ss(n,t,i))return n;for(;e<Ss(n+s,t,i)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+s}function nu(n,e){var t=new Hn(n),i=av(e,t.scaleFactor()),s=new J0(e,i);return tv(t,s),t.applyStyles(t.userStyles),s}function av(n,e){var t=n.content,i=cv(t.columns);if(t.head.length===0){var s=Fa(i,"head");s&&t.head.push(s)}if(t.foot.length===0){var s=Fa(i,"foot");s&&t.foot.push(s)}var r=n.settings.theme,o=n.styles;return{columns:i,head:ur("head",t.head,i,o,r,e),body:ur("body",t.body,i,o,r,e),foot:ur("foot",t.foot,i,o,r,e)}}function ur(n,e,t,i,s,r){var o={},a=e.map(function(l,c){for(var u=0,h={},f=0,p=0,m=0,y=t;m<y.length;m++){var g=y[m];if(o[g.index]==null||o[g.index].left===0)if(p===0){var x=void 0;Array.isArray(l)?x=l[g.index-f-u]:x=l[g.dataKey];var v={};typeof x=="object"&&!Array.isArray(x)&&(v=(x==null?void 0:x.styles)||{});var b=dv(n,g,c,s,i,r,v),S=new tu(x,b,n);h[g.dataKey]=S,h[g.index]=S,p=S.colSpan-1,o[g.index]={left:S.rowSpan-1,times:p}}else p--,f++;else o[g.index].left--,p=o[g.index].times,u++}return new eu(l,c,n,h)});return a}function Fa(n,e){var t={};return n.forEach(function(i){if(i.raw!=null){var s=lv(e,i.raw);s!=null&&(t[i.dataKey]=s)}}),Object.keys(t).length>0?t:null}function lv(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function cv(n){return n.map(function(e,t){var i,s;return typeof e=="object"?s=(i=e.dataKey)!==null&&i!==void 0?i:t:s=t,new ev(s,e,t)})}function dv(n,e,t,i,s,r,o){var a=z0(i),l;n==="head"?l=s.headStyles:n==="body"?l=s.bodyStyles:n==="foot"&&(l=s.footStyles);var c=Qt({},a.table,a[n],s.styles,l),u=s.columnStyles[e.dataKey]||s.columnStyles[e.index]||{},h=n==="body"?u:{},f=n==="body"&&t%2===0?Qt({},a.alternateRow,s.alternateRowStyles):{},p=N0(r),m=Qt({},p,c,f,h);return Qt(m,o)}function uv(n,e,t){var i;t===void 0&&(t={});var s=Kd(n,e),r=new Map,o=[],a=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(f){var p=e.columns.find(function(m){return m.dataKey===f||m.index===f});p&&!r.has(p.index)&&(r.set(p.index,!0),o.push(p.index),a.push(e.columns[p.index]),s-=p.wrappedWidth)});for(var c=!0,u=(i=t==null?void 0:t.start)!==null&&i!==void 0?i:0;u<e.columns.length;){if(r.has(u)){u++;continue}var h=e.columns[u].wrappedWidth;if(c||s>=h)c=!1,o.push(u),a.push(e.columns[u]),s-=h;else break;u++}return{colIndexes:o,columns:a,lastIndex:u-1}}function hv(n,e){for(var t=[],i=0;i<e.columns.length;i++){var s=uv(n,e,{start:i});s.columns.length&&(t.push(s),i=s.lastIndex)}return t}function iu(n,e){var t=e.settings,i=t.startY,s=t.margin,r={x:s.left,y:i},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),a=i+s.bottom+o;if(t.pageBreak==="avoid"){var l=e.body,c=l.reduce(function(f,p){return f+p.height},0);a+=c}var u=new Hn(n);(t.pageBreak==="always"||t.startY!=null&&a>u.pageSize().height)&&(ru(u),r.y=s.top),e.callWillDrawPageHooks(u,r);var h=Qt({},r);e.startPageNumber=u.pageNumber(),t.horizontalPageBreak?fv(u,e,h,r):(u.applyStyles(u.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(f){return Jt(u,e,f,r,e.columns)}),u.applyStyles(u.userStyles),e.body.forEach(function(f,p){var m=p===e.body.length-1;Ps(u,e,f,m,h,r,e.columns)}),u.applyStyles(u.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(f){return Jt(u,e,f,r,e.columns)})),qd(u,e,h,r),e.callEndPageHooks(u,r),e.finalY=r.y,n.lastAutoTable=e,u.applyStyles(u.userStyles)}function fv(n,e,t,i){var s=hv(n,e),r=e.settings;if(r.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(c,u){n.applyStyles(n.userStyles),u>0?Ti(n,e,t,i,c.columns,!0):Ea(n,e,i,c.columns),pv(n,e,t,i,c.columns),hr(n,e,i,c.columns)});else for(var o=-1,a=s[0],l=function(){var c=o;if(a){n.applyStyles(n.userStyles);var u=a.columns;o>=0?Ti(n,e,t,i,u,!0):Ea(n,e,i,u),c=La(n,e,o+1,i,u),hr(n,e,i,u)}var h=c-o;s.slice(1).forEach(function(f){n.applyStyles(n.userStyles),Ti(n,e,t,i,f.columns,!0),La(n,e,o+1,i,f.columns,h),hr(n,e,i,f.columns)}),o=c};o<e.body.length-1;)l()}function Ea(n,e,t,i){var s=e.settings;n.applyStyles(n.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&e.head.forEach(function(r){return Jt(n,e,r,t,i)})}function pv(n,e,t,i,s){n.applyStyles(n.userStyles),e.body.forEach(function(r,o){var a=o===e.body.length-1;Ps(n,e,r,a,t,i,s)})}function La(n,e,t,i,s,r){n.applyStyles(n.userStyles),r=r??e.body.length;var o=Math.min(t+r,e.body.length),a=-1;return e.body.slice(t,o).forEach(function(l,c){var u=t+c===e.body.length-1,h=su(n,e,u,i);l.canEntireRowFit(h,s)&&(Jt(n,e,l,i,s),a=t+c)}),a}function hr(n,e,t,i){var s=e.settings;n.applyStyles(n.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&e.foot.forEach(function(r){return Jt(n,e,r,t,i)})}function mv(n,e,t){var i=t.getLineHeight(n.styles.fontSize),s=n.padding("vertical"),r=Math.floor((e-s)/i);return Math.max(0,r)}function gv(n,e,t,i){var s={};n.spansMultiplePages=!0,n.height=0;for(var r=0,o=0,a=t.columns;o<a.length;o++){var l=a[o],c=n.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var u=new tu(c.raw,c.styles,c.section);u=Qt(u,c),u.text=[];var h=mv(c,e,i);c.text.length>h&&(u.text=c.text.splice(h,c.text.length));var f=i.scaleFactor(),p=i.getLineHeightFactor();c.contentHeight=c.getContentHeight(f,p),c.contentHeight>=e&&(c.contentHeight=e,u.styles.minCellHeight-=e),c.contentHeight>n.height&&(n.height=c.contentHeight),u.contentHeight=u.getContentHeight(f,p),u.contentHeight>r&&(r=u.contentHeight),s[l.index]=u}}var m=new eu(n.raw,-1,n.section,s,!0);m.height=r;for(var y=0,g=t.columns;y<g.length;y++){var l=g[y],u=m.cells[l.index];u&&(u.height=m.height);var c=n.cells[l.index];c&&(c.height=n.height)}return m}function yv(n,e,t,i){var s=n.pageSize().height,r=i.settings.margin,o=r.top+r.bottom,a=s-o;e.section==="body"&&(a-=i.getHeadHeight(i.columns)+i.getFootHeight(i.columns));var l=e.getMinimumRowHeight(i.columns,n),c=l<t;if(l>a)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var u=e.hasRowSpan(i.columns),h=e.getMaxCellHeight(i.columns)>a;return h?(u&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||i.settings.rowPageBreak==="avoid")}function Ps(n,e,t,i,s,r,o){var a=su(n,e,i,r);if(t.canEntireRowFit(a,o))Jt(n,e,t,r,o);else if(yv(n,t,a,e)){var l=gv(t,a,e,n);Jt(n,e,t,r,o),Ti(n,e,s,r,o),Ps(n,e,l,i,s,r,o)}else Ti(n,e,s,r,o),Ps(n,e,t,i,s,r,o)}function Jt(n,e,t,i,s){i.x=e.settings.margin.left;for(var r=0,o=s;r<o.length;r++){var a=o[r],l=t.cells[a.index];if(!l){i.x+=a.width;continue}n.applyStyles(l.styles),l.x=i.x,l.y=i.y;var c=e.callCellHooks(n,e.hooks.willDrawCell,l,t,a,i);if(c===!1){i.x+=a.width;continue}xv(n,l,i);var u=l.getTextPos();Yd(l.text,u.x,u.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,l,t,a,i),i.x+=a.width}i.y+=t.height}function xv(n,e,t){var i=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof i.lineWidth=="number"){var s=Xd(i.lineWidth,i.fillColor);s&&n.rect(e.x,t.y,e.width,e.height,s)}else typeof i.lineWidth=="object"&&(i.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),bv(n,e,t,i.lineWidth))}function bv(n,e,t,i){var s,r,o,a;i.top&&(s=t.x,r=t.y,o=t.x+e.width,a=t.y,i.right&&(o+=.5*i.right),i.left&&(s-=.5*i.left),l(i.top,s,r,o,a)),i.bottom&&(s=t.x,r=t.y+e.height,o=t.x+e.width,a=t.y+e.height,i.right&&(o+=.5*i.right),i.left&&(s-=.5*i.left),l(i.bottom,s,r,o,a)),i.left&&(s=t.x,r=t.y,o=t.x,a=t.y+e.height,i.top&&(r-=.5*i.top),i.bottom&&(a+=.5*i.bottom),l(i.left,s,r,o,a)),i.right&&(s=t.x+e.width,r=t.y,o=t.x+e.width,a=t.y+e.height,i.top&&(r-=.5*i.top),i.bottom&&(a+=.5*i.bottom),l(i.right,s,r,o,a));function l(c,u,h,f,p){n.getDocument().setLineWidth(c),n.getDocument().line(u,h,f,p,"S")}}function su(n,e,t,i){var s=e.settings.margin.bottom,r=e.settings.showFoot;return(r==="everyPage"||r==="lastPage"&&t)&&(s+=e.getFootHeight(e.columns)),n.pageSize().height-i.y-s}function Ti(n,e,t,i,s,r){s===void 0&&(s=[]),r===void 0&&(r=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!r&&e.foot.forEach(function(a){return Jt(n,e,a,i,s)}),e.callEndPageHooks(n,i);var o=e.settings.margin;qd(n,e,t,i),ru(n),e.pageNumber++,i.x=o.left,i.y=o.top,t.y=o.top,e.callWillDrawPageHooks(n,i),e.settings.showHead==="everyPage"&&(e.head.forEach(function(a){return Jt(n,e,a,i,s)}),n.applyStyles(n.userStyles))}function ru(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function vv(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],s=Jd(this,i),r=nu(this,s);return iu(this,r),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,i,s){Yd(e,t,i,s,this)},n.API.autoTableSetDefaults=function(e){return Hn.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){Hn.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var i;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new Hn(this),r=Zd(s,e,window,t,!1),o=r.head,a=r.body,l=((i=o[0])===null||i===void 0?void 0:i.map(function(c){return c.content}))||[];return{columns:l,rows:a,data:a}}}var fr;function pr(n,e){var t=Jd(n,e),i=nu(n,t);iu(n,i)}try{if(typeof window<"u"&&window){var Na=window,za=Na.jsPDF||((fr=Na.jspdf)===null||fr===void 0?void 0:fr.jsPDF);za&&vv(za)}}catch(n){console.error("Could not apply autoTable plugin",n)}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Wi(n){return n+.5|0}const sn=(n,e,t)=>Math.max(Math.min(n,t),e);function xi(n){return sn(Wi(n*2.55),0,255)}function on(n){return sn(Wi(n*255),0,255)}function Xt(n){return sn(Wi(n/2.55)/100,0,1)}function Ba(n){return sn(Wi(n*100),0,100)}const vt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Yr=[..."0123456789ABCDEF"],wv=n=>Yr[n&15],Tv=n=>Yr[(n&240)>>4]+Yr[n&15],Ki=n=>(n&240)>>4===(n&15),Sv=n=>Ki(n.r)&&Ki(n.g)&&Ki(n.b)&&Ki(n.a);function Pv(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&vt[n[1]]*17,g:255&vt[n[2]]*17,b:255&vt[n[3]]*17,a:e===5?vt[n[4]]*17:255}:(e===7||e===9)&&(t={r:vt[n[1]]<<4|vt[n[2]],g:vt[n[3]]<<4|vt[n[4]],b:vt[n[5]]<<4|vt[n[6]],a:e===9?vt[n[7]]<<4|vt[n[8]]:255})),t}const Dv=(n,e)=>n<255?e(n):"";function Cv(n){var e=Sv(n)?wv:Tv;return n?"#"+e(n.r)+e(n.g)+e(n.b)+Dv(n.a,e):void 0}const Mv=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ou(n,e,t){const i=e*Math.min(t,1-t),s=(r,o=(r+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function kv(n,e,t){const i=(s,r=(s+n/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function Iv(n,e,t){const i=ou(n,1,.5);let s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)i[s]*=1-e-t,i[s]+=e;return i}function _v(n,e,t,i,s){return n===s?(e-t)/i+(e<t?6:0):e===s?(t-n)/i+2:(n-e)/i+4}function Ao(n){const t=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(t,i,s),o=Math.min(t,i,s),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=_v(t,i,s,u,r),l=l*60+.5),[l|0,c||0,a]}function Fo(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(on)}function Eo(n,e,t){return Fo(ou,n,e,t)}function jv(n,e,t){return Fo(Iv,n,e,t)}function Rv(n,e,t){return Fo(kv,n,e,t)}function au(n){return(n%360+360)%360}function Ov(n){const e=Mv.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?xi(+e[5]):on(+e[5]));const s=au(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=jv(s,r,o):e[1]==="hsv"?i=Rv(s,r,o):i=Eo(s,r,o),{r:i[0],g:i[1],b:i[2],a:t}}function Av(n,e){var t=Ao(n);t[0]=au(t[0]+e),t=Eo(t),n.r=t[0],n.g=t[1],n.b=t[2]}function Fv(n){if(!n)return;const e=Ao(n),t=e[0],i=Ba(e[1]),s=Ba(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${s}%, ${Xt(n.a)})`:`hsl(${t}, ${i}%, ${s}%)`}const $a={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Va={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Ev(){const n={},e=Object.keys(Va),t=Object.keys($a);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<t.length;s++)r=t[s],a=a.replace(r,$a[r]);r=parseInt(Va[o],16),n[a]=[r>>16&255,r>>8&255,r&255]}return n}let Qi;function Lv(n){Qi||(Qi=Ev(),Qi.transparent=[0,0,0,0]);const e=Qi[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Nv=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function zv(n){const e=Nv.exec(n);let t=255,i,s,r;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?xi(o):sn(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?xi(i):sn(i,0,255)),s=255&(e[4]?xi(s):sn(s,0,255)),r=255&(e[6]?xi(r):sn(r,0,255)),{r:i,g:s,b:r,a:t}}}function Bv(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Xt(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const mr=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Ln=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function $v(n,e,t){const i=Ln(Xt(n.r)),s=Ln(Xt(n.g)),r=Ln(Xt(n.b));return{r:on(mr(i+t*(Ln(Xt(e.r))-i))),g:on(mr(s+t*(Ln(Xt(e.g))-s))),b:on(mr(r+t*(Ln(Xt(e.b))-r))),a:n.a+t*(e.a-n.a)}}function Zi(n,e,t){if(n){let i=Ao(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=Eo(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function lu(n,e){return n&&Object.assign(e||{},n)}function Wa(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=on(n[3]))):(e=lu(n,{r:0,g:0,b:0,a:1}),e.a=on(e.a)),e}function Vv(n){return n.charAt(0)==="r"?zv(n):Ov(n)}class ji{constructor(e){if(e instanceof ji)return e;const t=typeof e;let i;t==="object"?i=Wa(e):t==="string"&&(i=Pv(e)||Lv(e)||Vv(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=lu(this._rgb);return e&&(e.a=Xt(e.a)),e}set rgb(e){this._rgb=Wa(e)}rgbString(){return this._valid?Bv(this._rgb):void 0}hexString(){return this._valid?Cv(this._rgb):void 0}hslString(){return this._valid?Fv(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,s=e.rgb;let r;const o=t===r?.5:t,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=$v(this._rgb,e._rgb,t)),this}clone(){return new ji(this.rgb)}alpha(e){return this._rgb.a=on(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Wi(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Zi(this._rgb,2,e),this}darken(e){return Zi(this._rgb,2,-e),this}saturate(e){return Zi(this._rgb,1,e),this}desaturate(e){return Zi(this._rgb,1,-e),this}rotate(e){return Av(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ut(){}const Wv=(()=>{let n=0;return()=>n++})();function ze(n){return n==null}function tt(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Se(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Tt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Ot(n,e){return Tt(n)?n:e}function xe(n,e){return typeof n>"u"?e:n}const Hv=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Oe(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function ke(n,e,t,i){let s,r,o;if(tt(n))for(r=n.length,s=0;s<r;s++)e.call(t,n[s],s);else if(Se(n))for(o=Object.keys(n),r=o.length,s=0;s<r;s++)e.call(t,n[o[s]],o[s])}function Ds(n,e){let t,i,s,r;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(s=n[t],r=e[t],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Cs(n){if(tt(n))return n.map(Cs);if(Se(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let s=0;for(;s<i;++s)e[t[s]]=Cs(n[t[s]]);return e}return n}function cu(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function Yv(n,e,t,i){if(!cu(n))return;const s=e[n],r=t[n];Se(s)&&Se(r)?Ri(s,r,i):e[n]=Cs(r)}function Ri(n,e,t){const i=tt(e)?e:[e],s=i.length;if(!Se(n))return n;t=t||{};const r=t.merger||Yv;let o;for(let a=0;a<s;++a){if(o=i[a],!Se(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],n,o,t)}return n}function Si(n,e){return Ri(n,e,{merger:Uv})}function Uv(n,e,t){if(!cu(n))return;const i=e[n],s=t[n];Se(i)&&Se(s)?Si(i,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Cs(s))}const Ha={"":n=>n,x:n=>n.x,y:n=>n.y};function Gv(n){const e=n.split("."),t=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function qv(n){const e=Gv(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function Ms(n,e){return(Ha[e]||(Ha[e]=qv(e)))(n)}function Lo(n){return n.charAt(0).toUpperCase()+n.slice(1)}const ks=n=>typeof n<"u",an=n=>typeof n=="function",Ya=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function Xv(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const nt=Math.PI,Vt=2*nt,Kv=Vt+nt,Is=Number.POSITIVE_INFINITY,Qv=nt/180,Mt=nt/2,hn=nt/4,Ua=nt*2/3,du=Math.log10,Qn=Math.sign;function Pi(n,e,t){return Math.abs(n-e)<t}function Ga(n){const e=Math.round(n);n=Pi(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(du(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function Zv(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((s,r)=>s-r).pop(),e}function Jv(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function _s(n){return!Jv(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function ew(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function tw(n,e,t){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function xn(n){return n*(nt/180)}function nw(n){return n*(180/nt)}function qa(n){if(!Tt(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function iw(n,e){const t=e.x-n.x,i=e.y-n.y,s=Math.sqrt(t*t+i*i);let r=Math.atan2(i,t);return r<-.5*nt&&(r+=Vt),{angle:r,distance:s}}function Ur(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function sw(n,e){return(n-e+Kv)%Vt-nt}function nn(n){return(n%Vt+Vt)%Vt}function uu(n,e,t,i){const s=nn(n),r=nn(e),o=nn(t),a=nn(r-s),l=nn(o-s),c=nn(s-r),u=nn(s-o);return s===r||s===o||i&&r===o||a>l&&c<u}function kt(n,e,t){return Math.max(e,Math.min(t,n))}function rw(n){return kt(n,-32768,32767)}function bn(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function No(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,t(r)?s=r:i=r;return{lo:s,hi:i}}const Gr=(n,e,t,i)=>No(n,t,i?s=>{const r=n[s][e];return r<t||r===t&&n[s+1][e]===t}:s=>n[s][e]<t),ow=(n,e,t)=>No(n,t,i=>n[i][e]>=t);function aw(n,e,t){let i=0,s=n.length;for(;i<s&&n[i]<e;)i++;for(;s>i&&n[s-1]>t;)s--;return i>0||s<n.length?n.slice(i,s):n}const hu=["push","pop","shift","splice","unshift"];function lw(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),hu.forEach(t=>{const i="_onData"+Lo(t),s=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function Xa(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(hu.forEach(r=>{delete n[r]}),delete n._chartjs)}function cw(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const fu=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function pu(n,e){let t=[],i=!1;return function(...s){t=s,i||(i=!0,fu.call(window,()=>{i=!1,n.apply(e,t)}))}}function dw(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const zo=n=>n==="start"?"left":n==="end"?"right":"center",ot=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,uw=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e,Ji=n=>n===0||n===1,Ka=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Vt/t)),Qa=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Vt/t)+1,Di={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Mt)+1,easeOutSine:n=>Math.sin(n*Mt),easeInOutSine:n=>-.5*(Math.cos(nt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Ji(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Ji(n)?n:Ka(n,.075,.3),easeOutElastic:n=>Ji(n)?n:Qa(n,.075,.3),easeInOutElastic(n){return Ji(n)?n:n<.5?.5*Ka(n*2,.1125,.45):.5+.5*Qa(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Di.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Di.easeInBounce(n*2)*.5:Di.easeOutBounce(n*2-1)*.5+.5};function Bo(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Za(n){return Bo(n)?n:new ji(n)}function gr(n){return Bo(n)?n:new ji(n).saturate(.5).darken(.1).hexString()}const hw=["x","y","borderWidth","radius","tension"],fw=["color","borderColor","backgroundColor"];function pw(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:fw},numbers:{type:"number",properties:hw}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function mw(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Ja=new Map;function gw(n,e){e=e||{};const t=n+JSON.stringify(e);let i=Ja.get(t);return i||(i=new Intl.NumberFormat(n,e),Ja.set(t,i)),i}function mu(n,e,t){return gw(e,t).format(n)}const yw={values(n){return tt(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let s,r=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=xw(n,t)}const o=du(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),mu(n,i,l)}};function xw(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var gu={formatters:yw};function bw(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:gu.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Dn=Object.create(null),qr=Object.create(null);function Ci(n,e){if(!e)return n;const t=e.split(".");for(let i=0,s=t.length;i<s;++i){const r=t[i];n=n[r]||(n[r]=Object.create(null))}return n}function yr(n,e,t){return typeof e=="string"?Ri(Ci(n,e),t):Ri(Ci(n,""),e)}class vw{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>gr(s.backgroundColor),this.hoverBorderColor=(i,s)=>gr(s.borderColor),this.hoverColor=(i,s)=>gr(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return yr(this,e,t)}get(e){return Ci(this,e)}describe(e,t){return yr(qr,e,t)}override(e,t){return yr(Dn,e,t)}route(e,t,i,s){const r=Ci(this,e),o=Ci(this,i),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],c=o[s];return Se(l)?Object.assign({},c,l):xe(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var Ye=new vw({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[pw,mw,bw]);function ww(n){return!n||ze(n.size)||ze(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function el(n,e,t,i,s){let r=e[s];return r||(r=e[s]=n.measureText(s).width,t.push(s)),r>i&&(i=r),i}function fn(n,e,t){const i=n.currentDevicePixelRatio,s=t!==0?Math.max(t/2,.5):0;return Math.round((e-s)*i)/i+s}function tl(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function Xr(n,e,t,i){yu(n,e,t,i,null)}function yu(n,e,t,i,s){let r,o,a,l,c,u,h,f;const p=e.pointStyle,m=e.rotation,y=e.radius;let g=(m||0)*Qv;if(p&&typeof p=="object"&&(r=p.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(g),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(y)||y<=0)){switch(n.beginPath(),p){default:s?n.ellipse(t,i,s/2,y,0,0,Vt):n.arc(t,i,y,0,Vt),n.closePath();break;case"triangle":u=s?s/2:y,n.moveTo(t+Math.sin(g)*u,i-Math.cos(g)*y),g+=Ua,n.lineTo(t+Math.sin(g)*u,i-Math.cos(g)*y),g+=Ua,n.lineTo(t+Math.sin(g)*u,i-Math.cos(g)*y),n.closePath();break;case"rectRounded":c=y*.516,l=y-c,o=Math.cos(g+hn)*l,h=Math.cos(g+hn)*(s?s/2-c:l),a=Math.sin(g+hn)*l,f=Math.sin(g+hn)*(s?s/2-c:l),n.arc(t-h,i-a,c,g-nt,g-Mt),n.arc(t+f,i-o,c,g-Mt,g),n.arc(t+h,i+a,c,g,g+Mt),n.arc(t-f,i+o,c,g+Mt,g+nt),n.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*y,u=s?s/2:l,n.rect(t-u,i-l,2*u,2*l);break}g+=hn;case"rectRot":h=Math.cos(g)*(s?s/2:y),o=Math.cos(g)*y,a=Math.sin(g)*y,f=Math.sin(g)*(s?s/2:y),n.moveTo(t-h,i-a),n.lineTo(t+f,i-o),n.lineTo(t+h,i+a),n.lineTo(t-f,i+o),n.closePath();break;case"crossRot":g+=hn;case"cross":h=Math.cos(g)*(s?s/2:y),o=Math.cos(g)*y,a=Math.sin(g)*y,f=Math.sin(g)*(s?s/2:y),n.moveTo(t-h,i-a),n.lineTo(t+h,i+a),n.moveTo(t+f,i-o),n.lineTo(t-f,i+o);break;case"star":h=Math.cos(g)*(s?s/2:y),o=Math.cos(g)*y,a=Math.sin(g)*y,f=Math.sin(g)*(s?s/2:y),n.moveTo(t-h,i-a),n.lineTo(t+h,i+a),n.moveTo(t+f,i-o),n.lineTo(t-f,i+o),g+=hn,h=Math.cos(g)*(s?s/2:y),o=Math.cos(g)*y,a=Math.sin(g)*y,f=Math.sin(g)*(s?s/2:y),n.moveTo(t-h,i-a),n.lineTo(t+h,i+a),n.moveTo(t+f,i-o),n.lineTo(t-f,i+o);break;case"line":o=s?s/2:Math.cos(g)*y,a=Math.sin(g)*y,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(g)*(s?s/2:y),i+Math.sin(g)*y);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Oi(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function $o(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Vo(n){n.restore()}function Tw(n,e,t,i,s){if(!e)return n.lineTo(t.x,t.y);if(s==="middle"){const r=(e.x+t.x)/2;n.lineTo(r,e.y),n.lineTo(r,t.y)}else s==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function Sw(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function Pw(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),ze(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function Dw(n,e,t,i,s){if(s.strikethrough||s.underline){const r=n.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=t-r.actualBoundingBoxAscent,c=t+r.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function Cw(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Ai(n,e,t,i,s,r={}){const o=tt(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(n.save(),n.font=s.string,Pw(n,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&Cw(n,r.backdrop),a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),ze(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(c,t,i,r.maxWidth)),n.fillText(c,t,i,r.maxWidth),Dw(n,t,i,c,r),i+=Number(s.lineHeight);n.restore()}function js(n,e){const{x:t,y:i,w:s,h:r,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*nt,nt,!0),n.lineTo(t,i+r-o.bottomLeft),n.arc(t+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,nt,Mt,!0),n.lineTo(t+s-o.bottomRight,i+r),n.arc(t+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,Mt,0,!0),n.lineTo(t+s,i+o.topRight),n.arc(t+s-o.topRight,i+o.topRight,o.topRight,0,-Mt,!0),n.lineTo(t+o.topLeft,i)}const Mw=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,kw=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Iw(n,e){const t=(""+n).match(Mw);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const _w=n=>+n||0;function xu(n,e){const t={},i=Se(e),s=i?Object.keys(e):e,r=Se(n)?i?o=>xe(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of s)t[o]=_w(r(o));return t}function bu(n){return xu(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Yn(n){return xu(n,["topLeft","topRight","bottomLeft","bottomRight"])}function St(n){const e=bu(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function lt(n,e){n=n||{},e=e||Ye.font;let t=xe(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=xe(n.style,e.style);i&&!(""+i).match(kw)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:xe(n.family,e.family),lineHeight:Iw(xe(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:xe(n.weight,e.weight),string:""};return s.string=ww(s),s}function es(n,e,t,i){let s,r,o;for(s=0,r=n.length;s<r;++s)if(o=n[s],o!==void 0&&o!==void 0)return o}function jw(n,e,t){const{min:i,max:s}=n,r=Hv(e,(s-i)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function In(n,e){return Object.assign(Object.create(n),e)}function Wo(n,e=[""],t,i,s=()=>n[0]){const r=t||n;typeof i>"u"&&(i=Su("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>Wo([a,...n],e,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return wu(a,l,()=>zw(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return il(a).includes(l)},ownKeys(a){return il(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function Zn(n,e,t,i){const s={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:vu(n,i),setContext:r=>Zn(n,r,t,i),override:r=>Zn(n.override(r),e,t,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,a){return wu(r,o,()=>Ow(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,a){return n[o]=a,delete r[o],!0}})}function vu(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:t,indexable:i,isScriptable:an(t)?t:()=>t,isIndexable:an(i)?i:()=>i}}const Rw=(n,e)=>n?n+Lo(e):e,Ho=(n,e)=>Se(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function wu(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function Ow(n,e,t){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=n;let a=i[e];return an(a)&&o.isScriptable(e)&&(a=Aw(e,a,n,t)),tt(a)&&a.length&&(a=Fw(e,a,n,o.isIndexable)),Ho(e,a)&&(a=Zn(a,s,r&&r[e],o)),a}function Aw(n,e,t,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(r,o||i);return a.delete(n),Ho(n,l)&&(l=Yo(s._scopes,s,n,l)),l}function Fw(n,e,t,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=t;if(typeof r.index<"u"&&i(n))return e[r.index%e.length];if(Se(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=Yo(c,s,n,u);e.push(Zn(h,r,o&&o[n],a))}}return e}function Tu(n,e,t){return an(n)?n(e,t):n}const Ew=(n,e)=>n===!0?e:typeof n=="string"?Ms(e,n):void 0;function Lw(n,e,t,i,s){for(const r of e){const o=Ew(t,r);if(o){n.add(o);const a=Tu(o._fallback,t,s);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function Yo(n,e,t,i){const s=e._rootScopes,r=Tu(e._fallback,t,i),o=[...n,...s],a=new Set;a.add(i);let l=nl(a,o,t,r||t,i);return l===null||typeof r<"u"&&r!==t&&(l=nl(a,o,r,l,i),l===null)?!1:Wo(Array.from(a),[""],s,r,()=>Nw(e,t,i))}function nl(n,e,t,i,s){for(;t;)t=Lw(n,e,t,i,s);return t}function Nw(n,e,t){const i=n._getTarget();e in i||(i[e]={});const s=i[e];return tt(s)&&Se(t)?t:s||{}}function zw(n,e,t,i){let s;for(const r of e)if(s=Su(Rw(r,n),t),typeof s<"u")return Ho(n,s)?Yo(t,i,n,s):s}function Su(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function il(n){let e=n._keys;return e||(e=n._keys=Bw(n._scopes)),e}function Bw(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}const $w=Number.EPSILON||1e-14,Jn=(n,e)=>e<n.length&&!n[e].skip&&n[e],Pu=n=>n==="x"?"y":"x";function Vw(n,e,t,i){const s=n.skip?e:n,r=e,o=t.skip?e:t,a=Ur(r,s),l=Ur(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,f=i*u;return{previous:{x:r.x-h*(o.x-s.x),y:r.y-h*(o.y-s.y)},next:{x:r.x+f*(o.x-s.x),y:r.y+f*(o.y-s.y)}}}function Ww(n,e,t){const i=n.length;let s,r,o,a,l,c=Jn(n,0);for(let u=0;u<i-1;++u)if(l=c,c=Jn(n,u+1),!(!l||!c)){if(Pi(e[u],0,$w)){t[u]=t[u+1]=0;continue}s=t[u]/e[u],r=t[u+1]/e[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=s*o*e[u],t[u+1]=r*o*e[u])}}function Hw(n,e,t="x"){const i=Pu(t),s=n.length;let r,o,a,l=Jn(n,0);for(let c=0;c<s;++c){if(o=a,a=l,l=Jn(n,c+1),!a)continue;const u=a[t],h=a[i];o&&(r=(u-o[t])/3,a[`cp1${t}`]=u-r,a[`cp1${i}`]=h-r*e[c]),l&&(r=(l[t]-u)/3,a[`cp2${t}`]=u+r,a[`cp2${i}`]=h+r*e[c])}}function Yw(n,e="x"){const t=Pu(e),i=n.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=Jn(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=Jn(n,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[t]-l[t])/u:0}r[o]=a?c?Qn(s[o-1])!==Qn(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}Ww(n,s,r),Hw(n,r,e)}function ts(n,e,t){return Math.max(Math.min(n,t),e)}function Uw(n,e){let t,i,s,r,o,a=Oi(n[0],e);for(t=0,i=n.length;t<i;++t)o=r,r=a,a=t<i-1&&Oi(n[t+1],e),r&&(s=n[t],o&&(s.cp1x=ts(s.cp1x,e.left,e.right),s.cp1y=ts(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=ts(s.cp2x,e.left,e.right),s.cp2y=ts(s.cp2y,e.top,e.bottom)))}function Gw(n,e,t,i,s){let r,o,a,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")Yw(n,s);else{let c=i?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)a=n[r],l=Vw(c,a,n[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&Uw(n,t)}function Uo(){return typeof window<"u"&&typeof document<"u"}function Go(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Rs(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const Gs=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function qw(n,e){return Gs(n).getPropertyValue(e)}const Xw=["top","right","bottom","left"];function Tn(n,e,t){const i={};t=t?"-"+t:"";for(let s=0;s<4;s++){const r=Xw[s];i[r]=parseFloat(n[e+"-"+r+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Kw=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Qw(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(Kw(s,r,n.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function gn(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,s=Gs(t),r=s.boxSizing==="border-box",o=Tn(s,"padding"),a=Tn(s,"border","width"),{x:l,y:c,box:u}=Qw(n,t),h=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:p,height:m}=e;return r&&(p-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-h)/p*t.width/i),y:Math.round((c-f)/m*t.height/i)}}function Zw(n,e,t){let i,s;if(e===void 0||t===void 0){const r=n&&Go(n);if(!r)e=n.clientWidth,t=n.clientHeight;else{const o=r.getBoundingClientRect(),a=Gs(r),l=Tn(a,"border","width"),c=Tn(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,i=Rs(a.maxWidth,r,"clientWidth"),s=Rs(a.maxHeight,r,"clientHeight")}}return{width:e,height:t,maxWidth:i||Is,maxHeight:s||Is}}const ns=n=>Math.round(n*10)/10;function Jw(n,e,t,i){const s=Gs(n),r=Tn(s,"margin"),o=Rs(s.maxWidth,n,"clientWidth")||Is,a=Rs(s.maxHeight,n,"clientHeight")||Is,l=Zw(n,e,t);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const f=Tn(s,"border","width"),p=Tn(s,"padding");c-=p.width+f.width,u-=p.height+f.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?c/i:u-r.height),c=ns(Math.min(c,o,l.maxWidth)),u=ns(Math.min(u,a,l.maxHeight)),c&&!u&&(u=ns(c/2)),(e!==void 0||t!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=ns(Math.floor(u*i))),{width:c,height:u}}function sl(n,e,t){const i=e||1,s=Math.floor(n.height*i),r=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(n.currentDevicePixelRatio=i,o.height=s,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const eT=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};Uo()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function rl(n,e){const t=qw(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function yn(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function tT(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function nT(n,e,t,i){const s={x:n.cp2x,y:n.cp2y},r={x:e.cp1x,y:e.cp1y},o=yn(n,s,t),a=yn(s,r,t),l=yn(r,e,t),c=yn(o,a,t),u=yn(a,l,t);return yn(c,u,t)}const iT=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},sT=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Un(n,e,t){return n?iT(e,t):sT()}function Du(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function Cu(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function Mu(n){return n==="angle"?{between:uu,compare:sw,normalize:nn}:{between:bn,compare:(e,t)=>e-t,normalize:e=>e}}function ol({start:n,end:e,count:t,loop:i,style:s}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:s}}function rT(n,e,t){const{property:i,start:s,end:r}=t,{between:o,normalize:a}=Mu(i),l=e.length;let{start:c,end:u,loop:h}=n,f,p;if(h){for(c+=l,u+=l,f=0,p=l;f<p&&o(a(e[c%l][i]),s,r);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:n.style}}function oT(n,e,t){if(!t)return[n];const{property:i,start:s,end:r}=t,o=e.length,{compare:a,between:l,normalize:c}=Mu(i),{start:u,end:h,loop:f,style:p}=rT(n,e,t),m=[];let y=!1,g=null,x,v,b;const S=()=>l(s,b,x)&&a(s,b)!==0,C=()=>a(r,x)===0||l(r,b,x),_=()=>y||S(),O=()=>!y||C();for(let w=u,P=u;w<=h;++w)v=e[w%o],!v.skip&&(x=c(v[i]),x!==b&&(y=l(x,s,r),g===null&&_()&&(g=a(x,s)===0?w:P),g!==null&&O()&&(m.push(ol({start:g,end:w,loop:f,count:o,style:p})),g=null),P=w,b=x));return g!==null&&m.push(ol({start:g,end:h,loop:f,count:o,style:p})),m}function aT(n,e){const t=[],i=n.segments;for(let s=0;s<i.length;s++){const r=oT(i[s],n.points,e);r.length&&t.push(...r)}return t}function lT(n,e,t,i){let s=0,r=e-1;if(t&&!i)for(;s<e&&!n[s].skip;)s++;for(;s<e&&n[s].skip;)s++;for(s%=e,t&&(r+=s);r>s&&n[r%e].skip;)r--;return r%=e,{start:s,end:r}}function cT(n,e,t,i){const s=n.length,r=[];let o=e,a=n[e],l;for(l=e+1;l<=t;++l){const c=n[l%s];c.skip||c.stop?a.skip||(i=!1,r.push({start:e%s,end:(l-1)%s,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&r.push({start:e%s,end:o%s,loop:i}),r}function dT(n,e){const t=n.points,i=n.options.spanGaps,s=t.length;if(!s)return[];const r=!!n._loop,{start:o,end:a}=lT(t,s,r,i);if(i===!0)return al(n,[{start:o,end:a,loop:r}],t,e);const l=a<o?a+s:a,c=!!n._fullLoop&&o===0&&a===s-1;return al(n,cT(t,o,l,c),t,e)}function al(n,e,t,i){return!i||!i.setContext||!t?e:uT(n,e,t,i)}function uT(n,e,t,i){const s=n._chart.getContext(),r=ll(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,c=[];let u=r,h=e[0].start,f=h;function p(m,y,g,x){const v=a?-1:1;if(m!==y){for(m+=l;t[m%l].skip;)m-=v;for(;t[y%l].skip;)y+=v;m%l!==y%l&&(c.push({start:m%l,end:y%l,loop:g,style:x}),u=x,h=y%l)}}for(const m of e){h=a?h:m.start;let y=t[h%l],g;for(f=h+1;f<=m.end;f++){const x=t[f%l];g=ll(i.setContext(In(s,{type:"segment",p0:y,p1:x,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),hT(g,u)&&p(h,f-1,m.loop,u),y=x,u=g}h<f-1&&p(h,f-1,m.loop,u)}return c}function ll(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function hT(n,e){if(!e)return!1;const t=[],i=function(s,r){return Bo(r)?(t.includes(r)||t.push(r),t.indexOf(r)):r};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function is(n,e,t){return n.options.clip?n[t]:e[t]}function fT(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:is(t,e,"left"),right:is(t,e,"right"),top:is(i,e,"top"),bottom:is(i,e,"bottom")}:e}function pT(n,e){const t=e._clip;if(t.disabled)return!1;const i=fT(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class mT{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,s){const r=t.listeners[s],o=t.duration;r.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=fu.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),t+=r.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Gt=new mT;const cl="transparent",gT={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=Za(n||cl),s=i.valid&&Za(e||cl);return s&&s.valid?s.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class yT{constructor(e,t,i,s){const r=t[i];s=es([e.to,s,r,e.from]);const o=es([e.from,r,s]);this._active=!0,this._fn=e.fn||gT[e.type||typeof o],this._easing=Di[e.easing]||Di.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=es([e.to,t,s,e.from]),this._from=es([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||t<i),!this._active){this._target[s]=a,this._notify(!0);return}if(t<0){this._target[s]=r;return}l=t/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][t]()}}class ku{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Se(e))return;const t=Object.keys(Ye.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!Se(r))return;const o={};for(const a of t)o[a]=r[a];(tt(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){const i=t.options,s=bT(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&xT(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,t){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,t));continue}const u=t[c];let h=r[c];const f=i.get(c);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){e[c]=u;continue}r[c]=h=new yT(f,e,c,u),s.push(h)}return s}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return Gt.add(this._chart,i),!0}}function xT(n,e){const t=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=n[i[s]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}function bT(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function dl(n,e){const t=n&&n.options||{},i=t.reverse,s=t.min===void 0?e:0,r=t.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function vT(n,e,t){if(t===!1)return!1;const i=dl(n,t),s=dl(e,t);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function wT(n){let e,t,i,s;return Se(n)?(e=n.top,t=n.right,i=n.bottom,s=n.left):e=t=i=s=n,{top:e,right:t,bottom:i,left:s,disabled:n===!1}}function Iu(n,e){const t=[],i=n._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)t.push(i[s].index);return t}function ul(n,e,t,i={}){const s=n.keys,r=i.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===t){if(u=!0,i.all)continue;break}c=n.values[l],Tt(c)&&(r||e===0||Qn(e)===Qn(c))&&(e+=c)}return!u&&!i.all?0:e}function TT(n,e){const{iScale:t,vScale:i}=e,s=t.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[r]:n[u]};return a}function xr(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function ST(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function PT(n){const{min:e,max:t,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}function DT(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function hl(n,e,t,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=n[s.index];if(t&&r>0||!t&&r<0)return s.index}return null}function fl(n,e){const{chart:t,_cachedMeta:i}=n,s=t._stacks||(t._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,u=ST(r,o,i),h=e.length;let f;for(let p=0;p<h;++p){const m=e[p],{[l]:y,[c]:g}=m,x=m._stacks||(m._stacks={});f=x[c]=DT(s,u,y),f[a]=g,f._top=hl(f,o,!0,i.type),f._bottom=hl(f,o,!1,i.type);const v=f._visualValues||(f._visualValues={});v[a]=g}}function br(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function CT(n,e){return In(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function MT(n,e,t){return In(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function hi(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][t]===void 0)return;delete r[i][t],r[i]._visualValues!==void 0&&r[i]._visualValues[t]!==void 0&&delete r[i]._visualValues[t]}}}const vr=n=>n==="reset"||n==="none",pl=(n,e)=>e?n:Object.assign({},n),kT=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:Iu(t,!0),values:null};class hs{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=xr(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&hi(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),s=(h,f,p,m)=>h==="x"?f:h==="r"?m:p,r=t.xAxisID=xe(i.xAxisID,br(e,"x")),o=t.yAxisID=xe(i.yAxisID,br(e,"y")),a=t.rAxisID=xe(i.rAxisID,br(e,"r")),l=t.indexAxis,c=t.iAxisID=s(l,r,o,a),u=t.vAxisID=s(l,o,r,a);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Xa(this._data,this),e._stacked&&hi(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(Se(t)){const s=this._cachedMeta;this._data=TT(t,s)}else if(i!==t){if(i){Xa(i,this);const s=this._cachedMeta;hi(s),s._parsed=[]}t&&Object.isExtensible(t)&&lw(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=t._stacked;t._stacked=xr(t.vScale,t),t.stack!==i.stack&&(s=!0,hi(t),t.stack=i.stack),this._resyncElements(e),(s||r!==t._stacked)&&(fl(this,t._parsed),t._stacked=xr(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=e===0&&t===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,h,f;if(this._parsing===!1)i._parsed=s,i._sorted=!0,f=s;else{tt(s[e])?f=this.parseArrayData(i,s,e,t):Se(s[e])?f=this.parseObjectData(i,s,e,t):f=this.parsePrimitiveData(i,s,e,t);const p=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<t;++u)i._parsed[u+e]=h=f[u],l&&(p()&&(l=!1),c=h);i._sorted=l}o&&fl(this,f)}parsePrimitiveData(e,t,i,s){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,h=new Array(s);let f,p,m;for(f=0,p=s;f<p;++f)m=f+i,h[f]={[a]:u||r.parse(c[m],m),[l]:o.parse(t[m],m)};return h}parseArrayData(e,t,i,s){const{xScale:r,yScale:o}=e,a=new Array(s);let l,c,u,h;for(l=0,c=s;l<c;++l)u=l+i,h=t[u],a[l]={x:r.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,t,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,h,f,p;for(u=0,h=s;u<h;++u)f=u+i,p=t[f],c[u]={x:r.parse(Ms(p,a),f),y:o.parse(Ms(p,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const s=this.chart,r=this._cachedMeta,o=t[e.axis],a={keys:Iu(s,!0),values:t._stacks[e.axis]._visualValues};return ul(a,o,r.index,{mode:i})}updateRangeFromParsed(e,t,i,s){const r=i[t.axis];let o=r===null?NaN:r;const a=s&&i._stacks[t.axis];s&&a&&(s.values=a,o=ul(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,a=this._getOtherScale(e),l=kT(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=PT(a);let f,p;function m(){p=s[f];const y=p[a.axis];return!Tt(p[e.axis])||u>y||h<y}for(f=0;f<o&&!(!m()&&(this.updateRangeFromParsed(c,e,p,l),r));++f);if(r){for(f=o-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=t.length;s<r;++s)o=t[s][e.axis],Tt(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,s=t.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=wT(xe(this.options.clip,vT(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,s=i.data||[],r=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,r,a,l),u=a;u<a+l;++u){const h=s[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=MT(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=CT(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const s=t==="active",r=this._cachedDataOpts,o=e+"-"+t,a=r[o],l=this.enableOptionSharing&&ks(i);if(a)return pl(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),p=Object.keys(Ye.elements[e]),m=()=>this.getContext(i,s,t),y=c.resolveNamedOptions(f,p,m,h);return y.$shared&&(y.$shared=l,r[o]=Object.freeze(pl(y,l))),y}_resolveAnimations(e,t,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${t}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,t),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(e,i,t))}const c=new ku(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||vr(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(t,r)||r!==s;return this.updateSharedOptions(r,t,i),{sharedOptions:r,includeOptions:o}}updateElement(e,t,i,s){vr(s)?Object.assign(e,i):this._resolveAnimations(t,s).update(e,i)}updateSharedOptions(e,t,i){e&&!vr(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,s){e.active=s;const r=this.getStyle(t,s);this._resolveAnimations(t,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=t.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,t,i=!0){const s=this._cachedMeta,r=s.data,o=e+t;let a;const l=c=>{for(c.length+=t,a=c.length-1;a>=o;a--)c[a]=c[a-t]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,t),i&&this.updateElements(r,e,t,"reset")}updateElements(e,t,i,s){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,t);i._stacked&&hi(i,s)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,s]=e;this[t](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}z(hs,"defaults",{}),z(hs,"datasetElementType",null),z(hs,"dataElementType",null);function pn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class qo{constructor(e){z(this,"options");this.options=e||{}}static override(e){Object.assign(qo.prototype,e)}init(){}formats(){return pn()}parse(){return pn()}format(){return pn()}add(){return pn()}diff(){return pn()}startOf(){return pn()}endOf(){return pn()}}var _u={_date:qo};function IT(n,e,t,i){const{controller:s,data:r,_sorted:o}=n,a=s._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const c=a._reversePixels?ow:Gr;if(i){if(s._sharedOptions){const u=r[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=c(r,e,t-h),p=c(r,e,t+h);return{lo:f.lo,hi:p.hi}}}}else{const u=c(r,e,t);if(l){const{vScale:h}=s._cachedMeta,{_parsed:f}=n,p=f.slice(0,u.lo+1).reverse().findIndex(y=>!ze(y[h.axis]));u.lo-=Math.max(0,p);const m=f.slice(u.hi).findIndex(y=>!ze(y[h.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:r.length-1}}function qs(n,e,t,i,s){const r=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:h,hi:f}=IT(r[a],e,o,s);for(let p=h;p<=f;++p){const m=u[p];m.skip||i(m,c,p)}}}function _T(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=t?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function wr(n,e,t,i,s){const r=[];return!s&&!n.isPointInArea(e)||qs(n,t,e,function(a,l,c){!s&&!Oi(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function jT(n,e,t,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=iw(o,{x:e.x,y:e.y});uu(h,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return qs(n,t,e,r),s}function RT(n,e,t,i,s,r){let o=[];const a=_T(t);let l=Number.POSITIVE_INFINITY;function c(u,h,f){const p=u.inRange(e.x,e.y,s);if(i&&!p)return;const m=u.getCenterPoint(s);if(!(!!r||n.isPointInArea(m))&&!p)return;const g=a(e,m);g<l?(o=[{element:u,datasetIndex:h,index:f}],l=g):g===l&&o.push({element:u,datasetIndex:h,index:f})}return qs(n,t,e,c),o}function Tr(n,e,t,i,s,r){return!r&&!n.isPointInArea(e)?[]:t==="r"&&!i?jT(n,e,t,s):RT(n,e,t,i,s,r)}function ml(n,e,t,i,s){const r=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return qs(n,t,e,(l,c,u)=>{l[o]&&l[o](e[t],s)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var OT={modes:{index(n,e,t,i){const s=gn(e,n),r=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?wr(n,s,r,i,o):Tr(n,s,r,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(n,e,t,i){const s=gn(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?wr(n,s,r,i,o):Tr(n,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,e,t,i){const s=gn(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return wr(n,s,r,i,o)},nearest(n,e,t,i){const s=gn(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return Tr(n,s,r,t.intersect,i,o)},x(n,e,t,i){const s=gn(e,n);return ml(n,s,"x",t.intersect,i)},y(n,e,t,i){const s=gn(e,n);return ml(n,s,"y",t.intersect,i)}}};const ju=["left","top","right","bottom"];function fi(n,e){return n.filter(t=>t.pos===e)}function gl(n,e){return n.filter(t=>ju.indexOf(t.pos)===-1&&t.box.axis===e)}function pi(n,e){return n.sort((t,i)=>{const s=e?i:t,r=e?t:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function AT(n){const e=[];let t,i,s,r,o,a;for(t=0,i=(n||[]).length;t<i;++t)s=n[t],{position:r,options:{stack:o,stackWeight:a=1}}=s,e.push({index:t,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}function FT(n){const e={};for(const t of n){const{stack:i,pos:s,stackWeight:r}=t;if(!i||!ju.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function ET(n,e){const t=FT(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];const{fullSize:l}=a.box,c=t[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:l&&e.availableHeight)}return t}function LT(n){const e=AT(n),t=pi(e.filter(c=>c.box.fullSize),!0),i=pi(fi(e,"left"),!0),s=pi(fi(e,"right")),r=pi(fi(e,"top"),!0),o=pi(fi(e,"bottom")),a=gl(e,"x"),l=gl(e,"y");return{fullSize:t,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:fi(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function yl(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function Ru(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function NT(n,e,t,i){const{pos:s,box:r}=t,o=n.maxPadding;if(!Se(s)){t.size&&(n[s]-=t.size);const h=i[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?r.height:r.width),t.size=h.size/h.count,n[s]+=t.size}r.getPadding&&Ru(o,r.getPadding());const a=Math.max(0,e.outerWidth-yl(o,n,"left","right")),l=Math.max(0,e.outerHeight-yl(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:c,other:u}:{same:u,other:c}}function zT(n){const e=n.maxPadding;function t(i){const s=Math.max(e[i]-n[i],0);return n[i]+=s,s}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function BT(n,e){const t=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],t[o])}),r}return i(n?["left","right"]:["top","bottom"])}function bi(n,e,t,i){const s=[];let r,o,a,l,c,u;for(r=0,o=n.length,c=0;r<o;++r){a=n[r],l=a.box,l.update(a.width||e.w,a.height||e.h,BT(a.horizontal,e));const{same:h,other:f}=NT(e,t,a,i);c|=h&&s.length,u=u||f,l.fullSize||s.push(a)}return c&&bi(s,e,t,i)||u}function ss(n,e,t,i,s){n.top=t,n.left=e,n.right=e+i,n.bottom=t+s,n.width=i,n.height=s}function xl(n,e,t,i){const s=t.padding;let{x:r,y:o}=e;for(const a of n){const l=a.box,c=i[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,f=c.size||l.height;ks(c.start)&&(o=c.start),l.fullSize?ss(l,s.left,o,t.outerWidth-s.right-s.left,f):ss(l,e.left+c.placed,o,h,f),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,f=c.size||l.width;ks(c.start)&&(r=c.start),l.fullSize?ss(l,r,s.top,f,t.outerHeight-s.bottom-s.top):ss(l,r,e.top+c.placed,f,h),c.start=r,c.placed+=h,r=l.right}}e.x=r,e.y=o}var wt={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const s=St(n.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(t-s.height,0),a=LT(n.boxes),l=a.vertical,c=a.horizontal;ke(n.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=l.reduce((y,g)=>g.box.options&&g.box.options.display===!1?y:y+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},s);Ru(f,St(i));const p=Object.assign({maxPadding:f,w:r,h:o,x:s.left,y:s.top},s),m=ET(l.concat(c),h);bi(a.fullSize,p,h,m),bi(l,p,h,m),bi(c,p,h,m)&&bi(l,p,h,m),zT(p),xl(a.leftAndTop,p,h,m),p.x+=p.w,p.y+=p.h,xl(a.rightAndBottom,p,h,m),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},ke(a.chartArea,y=>{const g=y.box;Object.assign(g,n.chartArea),g.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class Ou{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,s){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):i)}}isAttached(e){return!0}updateConfig(e){}}class $T extends Ou{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const fs="$chartjs",VT={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},bl=n=>n===null||n==="";function WT(n,e){const t=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[fs]={initial:{height:i,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",bl(s)){const r=rl(n,"width");r!==void 0&&(n.width=r)}if(bl(i))if(n.style.height==="")n.height=n.width/(e||2);else{const r=rl(n,"height");r!==void 0&&(n.height=r)}return n}const Au=eT?{passive:!0}:!1;function HT(n,e,t){n&&n.addEventListener(e,t,Au)}function YT(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,Au)}function UT(n,e){const t=VT[n.type]||n.type,{x:i,y:s}=gn(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Os(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function GT(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Os(a.addedNodes,i),o=o&&!Os(a.removedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function qT(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Os(a.removedNodes,i),o=o&&!Os(a.addedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}const Fi=new Map;let vl=0;function Fu(){const n=window.devicePixelRatio;n!==vl&&(vl=n,Fi.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function XT(n,e){Fi.size||window.addEventListener("resize",Fu),Fi.set(n,e)}function KT(n){Fi.delete(n),Fi.size||window.removeEventListener("resize",Fu)}function QT(n,e,t){const i=n.canvas,s=i&&Go(i);if(!s)return;const r=pu((a,l)=>{const c=s.clientWidth;t(a,l),c<s.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(s),XT(n,r),o}function Sr(n,e,t){t&&t.disconnect(),e==="resize"&&KT(n)}function ZT(n,e,t){const i=n.canvas,s=pu(r=>{n.ctx!==null&&t(UT(r,n))},n);return HT(i,e,s),s}class JT extends Ou{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(WT(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[fs])return!1;const i=t[fs].initial;["height","width"].forEach(r=>{const o=i[r];ze(o)?t.removeAttribute(r):t.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{t.style[r]=s[r]}),t.width=t.width,delete t[fs],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),o={attach:GT,detach:qT,resize:QT}[t]||ZT;s[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),s=i[t];if(!s)return;({attach:Sr,detach:Sr,resize:Sr}[t]||YT)(e,t,s),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return Jw(e,t,i,s)}isAttached(e){const t=e&&Go(e);return!!(t&&t.isConnected)}}function e1(n){return!Uo()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?$T:JT}class Ht{constructor(){z(this,"x");z(this,"y");z(this,"active",!1);z(this,"options");z(this,"$animations")}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return _s(this.x)&&_s(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}z(Ht,"defaults",{}),z(Ht,"defaultRoutes");function t1(n,e){const t=n.options.ticks,i=n1(n),s=Math.min(t.maxTicksLimit||i,i),r=t.major.enabled?s1(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return r1(e,c,r,o/s),c;const u=i1(r,e,s);if(o>0){let h,f;const p=o>1?Math.round((l-a)/(o-1)):null;for(rs(e,c,u,ze(p)?0:a-p,a),h=0,f=o-1;h<f;h++)rs(e,c,u,r[h],r[h+1]);return rs(e,c,u,l,ze(p)?e.length:l+p),c}return rs(e,c,u),c}function n1(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),s=n._maxLength/t;return Math.floor(Math.min(i,s))}function i1(n,e,t){const i=o1(n),s=e.length/t;if(!i)return Math.max(s,1);const r=Zv(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function s1(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function r1(n,e,t,i){let s=0,r=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(e.push(n[o]),s++,r=t[s*i])}function rs(n,e,t,i,s){const r=xe(i,0),o=Math.min(xe(s,n.length),n.length);let a=0,l,c,u;for(t=Math.ceil(t),s&&(l=s-i,t=l/Math.floor(l/t)),u=r;u<0;)a++,u=Math.round(r+a*t);for(c=Math.max(r,0);c<o;c++)c===u&&(e.push(n[c]),a++,u=Math.round(r+a*t))}function o1(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const a1=n=>n==="left"?"right":n==="right"?"left":n,wl=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,Tl=(n,e)=>Math.min(e||n,n);function Sl(n,e){const t=[],i=n.length/e,s=n.length;let r=0;for(;r<s;r+=i)t.push(n[Math.floor(r)]);return t}function l1(n,e,t){const i=n.ticks.length,s=Math.min(e,i-1),r=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(s),c;if(!(t&&(i===1?c=Math.max(l-r,o-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function c1(n,e){ke(n,t=>{const i=t.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete t.data[i[r]];i.splice(0,s)}})}function mi(n){return n.drawTicks?n.tickLength:0}function Pl(n,e){if(!n.display)return 0;const t=lt(n.font,e),i=St(n.padding);return(tt(n.text)?n.text.length:1)*t.lineHeight+i.height}function d1(n,e){return In(n,{scale:e,type:"scale"})}function u1(n,e,t){return In(n,{tick:t,index:e,type:"tick"})}function h1(n,e,t){let i=zo(n);return(t&&e!=="right"||!t&&e==="right")&&(i=a1(i)),i}function f1(n,e,t,i){const{top:s,left:r,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l;let h=0,f,p,m;const y=o-s,g=a-r;if(n.isHorizontal()){if(p=ot(i,r,a),Se(t)){const x=Object.keys(t)[0],v=t[x];m=u[x].getPixelForValue(v)+y-e}else t==="center"?m=(c.bottom+c.top)/2+y-e:m=wl(n,t,e);f=a-r}else{if(Se(t)){const x=Object.keys(t)[0],v=t[x];p=u[x].getPixelForValue(v)-g+e}else t==="center"?p=(c.left+c.right)/2-g+e:p=wl(n,t,e);m=ot(i,o,s),h=t==="left"?-Mt:Mt}return{titleX:p,titleY:m,maxWidth:f,rotation:h}}class ni extends Ht{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=Ot(e,Number.POSITIVE_INFINITY),t=Ot(t,Number.NEGATIVE_INFINITY),i=Ot(i,Number.POSITIVE_INFINITY),s=Ot(s,Number.NEGATIVE_INFINITY),{min:Ot(e,i),max:Ot(t,s),minDefined:Tt(e),maxDefined:Tt(t)}}getMinMax(e){let{min:t,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:t,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(t=Math.min(t,o.min)),r||(i=Math.max(i,o.max));return t=r&&t>i?i:t,i=s&&t>i?t:i,{min:Ot(t,Ot(i,t)),max:Ot(i,Ot(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Oe(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=jw(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Sl(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=t1(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Oe(this.options.afterUpdate,[this])}beforeSetDimensions(){Oe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Oe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Oe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Oe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=Oe(t.callback,[r.value,i,e],this)}afterTickToLabelConversion(){Oe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Oe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=Tl(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,r=t.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!t.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,p=kt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:p/(i-1),h+6>a&&(a=p/(i-(e.offset?.5:1)),l=this.maxHeight-mi(e.grid)-t.padding-Pl(e.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),o=nw(Math.min(Math.asin(kt((u.highest.height+6)/a,-1,1)),Math.asin(kt(l/c,-1,1))-Math.asin(kt(f/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Oe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Oe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Pl(s,t.options.font);if(a?(e.width=this.maxWidth,e.height=mi(r)+l):(e.height=this.maxHeight,e.width=mi(r)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:f}=this._getLabelSizes(),p=i.padding*2,m=xn(this.labelRotation),y=Math.cos(m),g=Math.sin(m);if(a){const x=i.mirror?0:g*h.width+y*f.height;e.height=Math.min(this.maxHeight,e.height+x+p)}else{const x=i.mirror?0:y*h.width+g*f.height;e.width=Math.min(this.maxWidth,e.width+x+p)}this._calculatePadding(c,u,g,y)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=s*e.width,p=i*t.height):(f=i*e.height,p=s*t.width):r==="start"?p=t.width:r==="end"?f=e.width:r!=="inner"&&(f=e.width/2,p=t.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let u=t.height/2,h=e.height/2;r==="start"?(u=0,h=e.height):r==="end"&&(u=t.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Oe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)ze(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=Sl(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(t/Tl(t,i));let c=0,u=0,h,f,p,m,y,g,x,v,b,S,C;for(h=0;h<t;h+=l){if(m=e[h].label,y=this._resolveTickFontOptions(h),s.font=g=y.string,x=r[g]=r[g]||{data:{},gc:[]},v=y.lineHeight,b=S=0,!ze(m)&&!tt(m))b=el(s,x.data,x.gc,b,m),S=v;else if(tt(m))for(f=0,p=m.length;f<p;++f)C=m[f],!ze(C)&&!tt(C)&&(b=el(s,x.data,x.gc,b,C),S+=v);o.push(b),a.push(S),c=Math.max(b,c),u=Math.max(S,u)}c1(r,t);const _=o.indexOf(c),O=a.indexOf(u),w=P=>({width:o[P]||0,height:a[P]||0});return{first:w(0),last:w(t-1),widest:w(_),highest:w(O),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return rw(this._alignToPixels?fn(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=u1(this.getContext(),e,i))}return this.$context||(this.$context=d1(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=xn(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=mi(r),p=[],m=a.setContext(this.getContext()),y=m.display?m.width:0,g=y/2,x=function(L){return fn(i,L,y)};let v,b,S,C,_,O,w,P,j,A,k,D;if(o==="top")v=x(this.bottom),O=this.bottom-f,P=v-g,A=x(e.top)+g,D=e.bottom;else if(o==="bottom")v=x(this.top),A=e.top,D=x(e.bottom)-g,O=v+g,P=this.top+f;else if(o==="left")v=x(this.right),_=this.right-f,w=v-g,j=x(e.left)+g,k=e.right;else if(o==="right")v=x(this.left),j=e.left,k=x(e.right)-g,_=v+g,w=this.left+f;else if(t==="x"){if(o==="center")v=x((e.top+e.bottom)/2+.5);else if(Se(o)){const L=Object.keys(o)[0],$=o[L];v=x(this.chart.scales[L].getPixelForValue($))}A=e.top,D=e.bottom,O=v+g,P=O+f}else if(t==="y"){if(o==="center")v=x((e.left+e.right)/2);else if(Se(o)){const L=Object.keys(o)[0],$=o[L];v=x(this.chart.scales[L].getPixelForValue($))}_=v-g,w=_-f,j=e.left,k=e.right}const R=xe(s.ticks.maxTicksLimit,h),F=Math.max(1,Math.ceil(h/R));for(b=0;b<h;b+=F){const L=this.getContext(b),$=r.setContext(L),K=a.setContext(L),V=$.lineWidth,J=$.color,W=K.dash||[],se=K.dashOffset,ge=$.tickWidth,de=$.tickColor,we=$.tickBorderDash||[],ie=$.tickBorderDashOffset;S=l1(this,b,l),S!==void 0&&(C=fn(i,S,V),c?_=w=j=k=C:O=P=A=D=C,p.push({tx1:_,ty1:O,tx2:w,ty2:P,x1:j,y1:A,x2:k,y2:D,width:V,color:J,borderDash:W,borderDashOffset:se,tickWidth:ge,tickColor:de,tickBorderDash:we,tickBorderDashOffset:ie}))}return this._ticksLength=h,this._borderValue=v,p}_computeLabelItems(e){const t=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=r,f=mi(i.grid),p=f+u,m=h?-u:p,y=-xn(this.labelRotation),g=[];let x,v,b,S,C,_,O,w,P,j,A,k,D="middle";if(s==="top")_=this.bottom-m,O=this._getXAxisLabelAlignment();else if(s==="bottom")_=this.top+m,O=this._getXAxisLabelAlignment();else if(s==="left"){const F=this._getYAxisLabelAlignment(f);O=F.textAlign,C=F.x}else if(s==="right"){const F=this._getYAxisLabelAlignment(f);O=F.textAlign,C=F.x}else if(t==="x"){if(s==="center")_=(e.top+e.bottom)/2+p;else if(Se(s)){const F=Object.keys(s)[0],L=s[F];_=this.chart.scales[F].getPixelForValue(L)+p}O=this._getXAxisLabelAlignment()}else if(t==="y"){if(s==="center")C=(e.left+e.right)/2-p;else if(Se(s)){const F=Object.keys(s)[0],L=s[F];C=this.chart.scales[F].getPixelForValue(L)}O=this._getYAxisLabelAlignment(f).textAlign}t==="y"&&(l==="start"?D="top":l==="end"&&(D="bottom"));const R=this._getLabelSizes();for(x=0,v=a.length;x<v;++x){b=a[x],S=b.label;const F=r.setContext(this.getContext(x));w=this.getPixelForTick(x)+r.labelOffset,P=this._resolveTickFontOptions(x),j=P.lineHeight,A=tt(S)?S.length:1;const L=A/2,$=F.color,K=F.textStrokeColor,V=F.textStrokeWidth;let J=O;o?(C=w,O==="inner"&&(x===v-1?J=this.options.reverse?"left":"right":x===0?J=this.options.reverse?"right":"left":J="center"),s==="top"?c==="near"||y!==0?k=-A*j+j/2:c==="center"?k=-R.highest.height/2-L*j+j:k=-R.highest.height+j/2:c==="near"||y!==0?k=j/2:c==="center"?k=R.highest.height/2-L*j:k=R.highest.height-A*j,h&&(k*=-1),y!==0&&!F.showLabelBackdrop&&(C+=j/2*Math.sin(y))):(_=w,k=(1-A)*j/2);let W;if(F.showLabelBackdrop){const se=St(F.backdropPadding),ge=R.heights[x],de=R.widths[x];let we=k-se.top,ie=0-se.left;switch(D){case"middle":we-=ge/2;break;case"bottom":we-=ge;break}switch(O){case"center":ie-=de/2;break;case"right":ie-=de;break;case"inner":x===v-1?ie-=de:x>0&&(ie-=de/2);break}W={left:ie,top:we,width:de+se.width,height:ge+se.height,color:F.backdropColor}}g.push({label:S,font:P,textOffset:k,options:{rotation:y,color:$,strokeColor:K,strokeWidth:V,textAlign:J,textBaseline:D,translation:[C,_],backdrop:W}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-xn(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,u;return t==="left"?s?(u=this.right+r,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):t==="right"?s?(u=this.left+r,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:s,width:r,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(r=0,o=s.length;r<o;++r){const l=s[r];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,f;this.isHorizontal()?(c=fn(e,this.left,o)-o/2,u=fn(e,this.right,a)+a/2,h=f=l):(h=fn(e,this.top,o)-o/2,f=fn(e,this.bottom,a)+a/2,c=u=l),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(c,h),t.lineTo(u,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&$o(i,s);const r=this.getLabelItems(e);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Ai(i,c,0,u,l,a)}s&&Vo(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:s}}=this;if(!i.display)return;const r=lt(i.font),o=St(i.padding),a=i.align;let l=r.lineHeight/2;t==="bottom"||t==="center"||Se(t)?(l+=o.bottom,tt(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:f}=f1(this,l,t,a);Ai(e,i.text,0,0,r,{color:i.color,maxWidth:h,rotation:f,textAlign:h1(a,t,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=xe(e.grid&&e.grid.z,-1),s=xe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ni.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=t.length;r<o;++r){const a=t[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return lt(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class os{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;g1(t)&&(i=this.register(t));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,p1(e,o,i),this.override&&Ye.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in Ye[s]&&(delete Ye[s][i],this.override&&delete Dn[i])}}function p1(n,e,t){const i=Ri(Object.create(null),[t?Ye.get(t):{},Ye.get(e),n.defaults]);Ye.set(e,i),n.defaultRoutes&&m1(e,n.defaultRoutes),n.descriptors&&Ye.describe(e,n.descriptors)}function m1(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),s=i.pop(),r=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");Ye.route(r,s,l,a)})}function g1(n){return"id"in n&&"defaults"in n}class y1{constructor(){this.controllers=new os(hs,"datasets",!0),this.elements=new os(Ht,"elements"),this.plugins=new os(Object,"plugins"),this.scales=new os(ni,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):ke(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){const s=Lo(e);Oe(i["before"+s],[],i),t[e](i),Oe(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const s=t.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var Ft=new y1;class x1{constructor(){this._init=[]}notify(e,t,i,s){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,t,i);return t==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,s){s=s||{};for(const r of e){const o=r.plugin,a=o[i],l=[t,s,r.options];if(Oe(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){ze(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,s=xe(i.options&&i.options.plugins,{}),r=b1(i);return s===!1&&!t?[]:w1(e,r,s,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(t,i),e,"stop"),this._notify(s(i,t),e,"start")}}function b1(n){const e={},t=[],i=Object.keys(Ft.plugins.items);for(let r=0;r<i.length;r++)t.push(Ft.getPlugin(i[r]));const s=n.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function v1(n,e){return!e&&n===!1?null:n===!0?{}:n}function w1(n,{plugins:e,localIds:t},i,s){const r=[],o=n.getContext();for(const a of e){const l=a.id,c=v1(i[l],s);c!==null&&r.push({plugin:a,options:T1(n.config,{plugin:a,local:t[l]},c,o)})}return r}function T1(n,{plugin:e,local:t},i,s){const r=n.pluginScopeKeys(e),o=n.getOptionScopes(i,r);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Kr(n,e){const t=Ye.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function S1(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function P1(n,e){return n===e?"_index_":"_value_"}function Dl(n){if(n==="x"||n==="y"||n==="r")return n}function D1(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Qr(n,...e){if(Dl(n))return n;for(const t of e){const i=t.axis||D1(t.position)||n.length>1&&Dl(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Cl(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function C1(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return Cl(n,"x",t[0])||Cl(n,"y",t[0])}return{}}function M1(n,e){const t=Dn[n.type]||{scales:{}},i=e.scales||{},s=Kr(n.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Se(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Qr(o,a,C1(o,n),Ye.scales[a.type]),c=P1(l,s),u=t.scales||{};r[o]=Si(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||Kr(a,e),u=(Dn[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=S1(h,l),p=o[f+"AxisID"]||f;r[p]=r[p]||Object.create(null),Si(r[p],[{axis:f},i[p],u[h]])})}),Object.keys(r).forEach(o=>{const a=r[o];Si(a,[Ye.scales[a.type],Ye.scale])}),r}function Eu(n){const e=n.options||(n.options={});e.plugins=xe(e.plugins,{}),e.scales=M1(n,e)}function Lu(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function k1(n){return n=n||{},n.data=Lu(n.data),Eu(n),n}const Ml=new Map,Nu=new Set;function as(n,e){let t=Ml.get(n);return t||(t=e(),Ml.set(n,t),Nu.add(t)),t}const gi=(n,e,t)=>{const i=Ms(e,t);i!==void 0&&n.add(i)};class I1{constructor(e){this._config=k1(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Lu(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Eu(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return as(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return as(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return as(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return as(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let s=i.get(e);return(!s||t)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,t,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;const l=new Set;t.forEach(u=>{e&&(l.add(e),u.forEach(h=>gi(l,e,h))),u.forEach(h=>gi(l,s,h)),u.forEach(h=>gi(l,Dn[r]||{},h)),u.forEach(h=>gi(l,Ye,h)),u.forEach(h=>gi(l,qr,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Nu.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,Dn[t]||{},Ye.datasets[t]||{},{type:t},Ye,qr]}resolveNamedOptions(e,t,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=kl(this._resolverCache,e,s);let l=o;if(j1(o,t)){r.$shared=!1,i=an(i)?i():i;const c=this.createResolver(e,i,a);l=Zn(o,i,c)}for(const c of t)r[c]=l[c];return r}createResolver(e,t,i=[""],s){const{resolver:r}=kl(this._resolverCache,e,i);return Se(t)?Zn(r,t,void 0,s):r}}function kl(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const s=t.join();let r=i.get(s);return r||(r={resolver:Wo(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const _1=n=>Se(n)&&Object.getOwnPropertyNames(n).some(e=>an(n[e]));function j1(n,e){const{isScriptable:t,isIndexable:i}=vu(n);for(const s of e){const r=t(s),o=i(s),a=(o||r)&&n[s];if(r&&(an(a)||_1(a))||o&&tt(a))return!0}return!1}var R1="4.5.0";const O1=["top","bottom","left","right","chartArea"];function Il(n,e){return n==="top"||n==="bottom"||O1.indexOf(n)===-1&&e==="x"}function _l(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function jl(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Oe(t&&t.onComplete,[n],e)}function A1(n){const e=n.chart,t=e.options.animation;Oe(t&&t.onProgress,[n],e)}function zu(n){return Uo()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const ps={},Rl=n=>{const e=zu(n);return Object.values(ps).filter(t=>t.canvas===e).pop()};function F1(n,e,t){const i=Object.keys(n);for(const s of i){const r=+s;if(r>=e){const o=n[s];delete n[s],(t>0||r>e)&&(n[r+t]=o)}}}function E1(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}class Kt{static register(...e){Ft.add(...e),Ol()}static unregister(...e){Ft.remove(...e),Ol()}constructor(e,t){const i=this.config=new I1(t),s=zu(e),r=Rl(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||e1(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Wv(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new x1,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=dw(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],ps[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Gt.listen(this,"complete",jl),Gt.listen(this,"progress",A1),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:s,_aspectRatio:r}=this;return ze(e)?t&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ft}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():sl(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return tl(this.canvas,this.ctx),this}stop(){return Gt.stop(this),this}resize(e,t){Gt.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,t,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,sl(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Oe(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};ke(t,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];t&&(r=r.concat(Object.keys(t).map(o=>{const a=t[o],l=Qr(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ke(r,o=>{const a=o.options,l=a.id,c=Qr(l,a),u=xe(a.type,o.dtype);(a.position===void 0||Il(a.position,c)!==Il(o.dposition))&&(a.position=o.dposition),s[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const f=Ft.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),ke(s,(o,a)=>{o||delete i[a]}),ke(i,o=>{wt.configure(this,o,o.options),wt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>t){for(let s=t;s<i;++s)this._destroyDatasetMeta(s);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(_l("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,s)=>{t.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=t.length;i<s;i++){const r=t[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||Kr(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Ft.getController(a),{datasetElementType:c,dataElementType:u}=Ye.datasets[a];Object.assign(l,{dataElementType:Ft.getElement(u),datasetElementType:c&&Ft.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ke(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),f=!s&&r.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||ke(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(_l("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ke(this.scales,e=>{wt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Ya(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of t){const o=i==="_removeElements"?-r:r;F1(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<t;r++)if(!Ya(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;wt.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],ke(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,an(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Gt.has(this)?this.attached&&!Gt.running(this)&&Gt.start(this):(this.draw(),jl({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let s,r;for(s=0,r=t.length;s<r;++s){const o=t[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},s=pT(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&$o(t,s),e.controller.draw(),s&&Vo(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Oi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,s){const r=OT.modes[t];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=In(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);ks(t)?(r.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Gt.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),tl(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete ps[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(r,o)=>{t.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};ke(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){ke(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},ke(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const s=i?"set":"remove";let r,o,a,l;for(t==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Ds(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const s=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(t,e),a=i?e:r(e,t);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:s=[],options:r}=this,o=t,a=this._getActiveElements(e,s,i,o),l=Xv(e),c=E1(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Oe(r.onHover,[e,a,this],this),l&&Oe(r.onClick,[e,a,this],this));const u=!Ds(a,s);return(u||t)&&(this._active=a,this._updateHoverStyles(a,s,t)),this._lastEvent=c,u}_getActiveElements(e,t,i,s){if(e.type==="mouseout")return[];if(!i)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}}z(Kt,"defaults",Ye),z(Kt,"instances",ps),z(Kt,"overrides",Dn),z(Kt,"registry",Ft),z(Kt,"version",R1),z(Kt,"getChart",Rl);function Ol(){return ke(Kt.instances,n=>n._plugins.invalidate())}function Bu(n,e,t=e){n.lineCap=xe(t.borderCapStyle,e.borderCapStyle),n.setLineDash(xe(t.borderDash,e.borderDash)),n.lineDashOffset=xe(t.borderDashOffset,e.borderDashOffset),n.lineJoin=xe(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=xe(t.borderWidth,e.borderWidth),n.strokeStyle=xe(t.borderColor,e.borderColor)}function L1(n,e,t){n.lineTo(t.x,t.y)}function N1(n){return n.stepped?Tw:n.tension||n.cubicInterpolationMode==="monotone"?Sw:L1}function $u(n,e,t={}){const i=n.length,{start:s=0,end:r=i-1}=t,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function z1(n,e,t,i){const{points:s,options:r}=e,{count:o,start:a,loop:l,ilen:c}=$u(s,t,i),u=N1(r);let{move:h=!0,reverse:f}=i||{},p,m,y;for(p=0;p<=c;++p)m=s[(a+(f?c-p:p))%o],!m.skip&&(h?(n.moveTo(m.x,m.y),h=!1):u(n,y,m,f,r.stepped),y=m);return l&&(m=s[(a+(f?c:0))%o],u(n,y,m,f,r.stepped)),!!l}function B1(n,e,t,i){const s=e.points,{count:r,start:o,ilen:a}=$u(s,t,i),{move:l=!0,reverse:c}=i||{};let u=0,h=0,f,p,m,y,g,x;const v=S=>(o+(c?a-S:S))%r,b=()=>{y!==g&&(n.lineTo(u,g),n.lineTo(u,y),n.lineTo(u,x))};for(l&&(p=s[v(0)],n.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=s[v(f)],p.skip)continue;const S=p.x,C=p.y,_=S|0;_===m?(C<y?y=C:C>g&&(g=C),u=(h*u+S)/++h):(b(),n.lineTo(S,C),m=_,h=0,y=g=C),x=C}b()}function Zr(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?B1:z1}function $1(n){return n.stepped?tT:n.tension||n.cubicInterpolationMode==="monotone"?nT:yn}function V1(n,e,t,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,t,i)&&s.closePath()),Bu(n,e.options),n.stroke(s)}function W1(n,e,t,i){const{segments:s,options:r}=e,o=Zr(e);for(const a of s)Bu(n,r,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const H1=typeof Path2D=="function";function Y1(n,e,t,i){H1&&!e.options.segment?V1(n,e,t,i):W1(n,e,t,i)}class vi extends Ht{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;Gw(this._points,i,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=dT(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,s=e[t],r=this.points,o=aT(this,{property:t,start:s,end:s});if(!o.length)return;const a=[],l=$1(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:f}=o[c],p=r[h],m=r[f];if(p===m){a.push(p);continue}const y=Math.abs((s-p[t])/(m[t]-p[t])),g=l(p,m,y,i.stepped);g[t]=e[t],a.push(g)}return a.length===1?a[0]:a}pathSegment(e,t,i){return Zr(this)(e,this,t,i)}path(e,t,i){const s=this.segments,r=Zr(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const a of s)o&=r(e,this,a,{start:t,end:t+i-1});return!!o}draw(e,t,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),Y1(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}z(vi,"id","line"),z(vi,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),z(vi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),z(vi,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Al(n,e,t,i){const s=n.options,{[t]:r}=n.getProps([t],i);return Math.abs(e-r)<s.radius+s.hitRadius}class ms extends Ht{constructor(t){super();z(this,"parsed");z(this,"skip");z(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(t-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,i){return Al(this,t,"x",i)}inYRange(t,i){return Al(this,t,"y",i)}getCenterPoint(t){const{x:i,y:s}=this.getProps(["x","y"],t);return{x:i,y:s}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const s=i&&t.borderWidth||0;return(i+s)*2}draw(t,i){const s=this.options;this.skip||s.radius<.1||!Oi(this,i,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,Xr(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}z(ms,"id","point"),z(ms,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),z(ms,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Vu(n,e){const{x:t,y:i,base:s,width:r,height:o}=n.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return n.horizontal?(h=o/2,a=Math.min(t,s),l=Math.max(t,s),c=i-h,u=i+h):(h=r/2,a=t-h,l=t+h,c=Math.min(i,s),u=Math.max(i,s)),{left:a,top:c,right:l,bottom:u}}function rn(n,e,t,i){return n?0:kt(e,t,i)}function U1(n,e,t){const i=n.options.borderWidth,s=n.borderSkipped,r=bu(i);return{t:rn(s.top,r.top,0,t),r:rn(s.right,r.right,0,e),b:rn(s.bottom,r.bottom,0,t),l:rn(s.left,r.left,0,e)}}function G1(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,r=Yn(s),o=Math.min(e,t),a=n.borderSkipped,l=i||Se(s);return{topLeft:rn(!l||a.top||a.left,r.topLeft,0,o),topRight:rn(!l||a.top||a.right,r.topRight,0,o),bottomLeft:rn(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:rn(!l||a.bottom||a.right,r.bottomRight,0,o)}}function q1(n){const e=Vu(n),t=e.right-e.left,i=e.bottom-e.top,s=U1(n,t/2,i/2),r=G1(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:t-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function Pr(n,e,t,i){const s=e===null,r=t===null,a=n&&!(s&&r)&&Vu(n,i);return a&&(s||bn(e,a.left,a.right))&&(r||bn(t,a.top,a.bottom))}function X1(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function K1(n,e){n.rect(e.x,e.y,e.w,e.h)}function Dr(n,e,t={}){const i=n.x!==t.x?-e:0,s=n.y!==t.y?-e:0,r=(n.x+n.w!==t.x+t.w?e:0)-i,o=(n.y+n.h!==t.y+t.h?e:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+r,h:n.h+o,radius:n.radius}}class gs extends Ht{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=q1(this),a=X1(o.radius)?js:K1;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,Dr(o,t,r)),e.clip(),a(e,Dr(r,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,Dr(r,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,i){return Pr(this,e,t,i)}inXRange(e,t){return Pr(this,e,null,t)}inYRange(e,t){return Pr(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+s)/2:t,y:r?i:(i+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}z(gs,"id","bar"),z(gs,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),z(gs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Fl=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},Q1=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class El extends Ht{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Oe(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=lt(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Fl(i,r);let c,u;t.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let h=e;r.textAlign="left",r.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((m,y)=>{const g=i+t/2+r.measureText(m.text).width;(y===0||c[c.length-1]+g+2*a>o)&&(h+=u,c[c.length-(y>0?0:1)]=0,p+=u,f++),l[y]={left:0,top:p,row:f,width:g,height:s},c[c.length-1]+=g+a}),h}_fitCols(e,t,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,f=0,p=0,m=0,y=0;return this.legendItems.forEach((g,x)=>{const{itemWidth:v,itemHeight:b}=Z1(i,t,r,g,s);x>0&&p+b+2*a>u&&(h+=f+a,c.push({width:f,height:p}),m+=f+a,y++,f=p=0),l[x]={left:m,top:p,col:y,width:v,height:b},f=Math.max(f,v),p+=b+a}),h+=f,c.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:s},rtl:r}}=this,o=Un(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=ot(i,this.left+s,this.right-this.lineWidths[a]);for(const c of t)a!==c.row&&(a=c.row,l=ot(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=ot(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of t)c.col!==a&&(a=c.col,l=ot(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;$o(e,this),this._draw(),Vo(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,a=Ye.color,l=Un(e.rtl,this.left,this.width),c=lt(o.font),{padding:u}=o,h=c.size,f=h/2;let p;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:m,boxHeight:y,itemHeight:g}=Fl(o,h),x=function(_,O,w){if(isNaN(m)||m<=0||isNaN(y)||y<0)return;s.save();const P=xe(w.lineWidth,1);if(s.fillStyle=xe(w.fillStyle,a),s.lineCap=xe(w.lineCap,"butt"),s.lineDashOffset=xe(w.lineDashOffset,0),s.lineJoin=xe(w.lineJoin,"miter"),s.lineWidth=P,s.strokeStyle=xe(w.strokeStyle,a),s.setLineDash(xe(w.lineDash,[])),o.usePointStyle){const j={radius:y*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:P},A=l.xPlus(_,m/2),k=O+f;yu(s,j,A,k,o.pointStyleWidth&&m)}else{const j=O+Math.max((h-y)/2,0),A=l.leftForLtr(_,m),k=Yn(w.borderRadius);s.beginPath(),Object.values(k).some(D=>D!==0)?js(s,{x:A,y:j,w:m,h:y,radius:k}):s.rect(A,j,m,y),s.fill(),P!==0&&s.stroke()}s.restore()},v=function(_,O,w){Ai(s,w.text,_,O+g/2,c,{strikethrough:w.hidden,textAlign:l.textAlign(w.textAlign)})},b=this.isHorizontal(),S=this._computeTitleHeight();b?p={x:ot(r,this.left+u,this.right-i[0]),y:this.top+u+S,line:0}:p={x:this.left+u,y:ot(r,this.top+S+u,this.bottom-t[0].height),line:0},Du(this.ctx,e.textDirection);const C=g+u;this.legendItems.forEach((_,O)=>{s.strokeStyle=_.fontColor,s.fillStyle=_.fontColor;const w=s.measureText(_.text).width,P=l.textAlign(_.textAlign||(_.textAlign=o.textAlign)),j=m+f+w;let A=p.x,k=p.y;l.setWidth(this.width),b?O>0&&A+j+u>this.right&&(k=p.y+=C,p.line++,A=p.x=ot(r,this.left+u,this.right-i[p.line])):O>0&&k+C>this.bottom&&(A=p.x=A+t[p.line].width+u,p.line++,k=p.y=ot(r,this.top+S+u,this.bottom-t[p.line].height));const D=l.x(A);if(x(D,k,_),A=uw(P,A+m+f,b?A+j:this.right,e.rtl),v(l.x(A),k,_),b)p.x+=j+u;else if(typeof _.text!="string"){const R=c.lineHeight;p.y+=Wu(_,R)+u}else p.y+=C}),Cu(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=lt(t.font),s=St(t.padding);if(!t.display)return;const r=Un(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=i.size/2,c=s.top+l;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,h=ot(e.align,h,this.right-f);else{const m=this.columnSizes.reduce((y,g)=>Math.max(y,g.height),0);u=c+ot(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const p=ot(a,h,h+f);o.textAlign=r.textAlign(zo(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,Ai(o,t.text,p,u,i)}_computeTitleHeight(){const e=this.options.title,t=lt(e.font),i=St(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,s,r;if(bn(e,this.left,this.right)&&bn(t,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],bn(e,s.left,s.left+s.width)&&bn(t,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!tS(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=Q1(s,i);s&&!r&&Oe(t.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&Oe(t.onHover,[e,i,this],this)}else i&&Oe(t.onClick,[e,i,this],this)}}function Z1(n,e,t,i,s){const r=J1(i,n,e,t),o=eS(s,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function J1(n,e,t,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),e+t.size/2+i.measureText(s).width}function eS(n,e,t){let i=n;return typeof e.text!="string"&&(i=Wu(e,t)),i}function Wu(n,e){const t=n.text?n.text.length:0;return e*t}function tS(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var nS={id:"legend",_element:El,start(n,e,t){const i=n.legend=new El({ctx:n.ctx,options:t,chart:n});wt.configure(n,i,t),wt.addBox(n,i)},stop(n){wt.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;wt.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,s=t.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(t?0:void 0),u=St(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class Hu extends Ht{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const s=tt(i.text)?i.text.length:1;this._padding=St(i.padding);const r=s*lt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=ot(a,i,r),h=t+e,c=r-i):(o.position==="left"?(u=i+e,h=ot(a,s,t),l=nt*-.5):(u=r-e,h=ot(a,t,s),l=nt*.5),c=s-t),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=lt(t.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Ai(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:zo(t.align),textBaseline:"middle",translation:[o,a]})}}function iS(n,e){const t=new Hu({ctx:n.ctx,options:e,chart:n});wt.configure(n,t,e),wt.addBox(n,t),n.titleBlock=t}var sS={id:"title",_element:Hu,start(n,e,t){iS(n,t)},stop(n){const e=n.titleBlock;wt.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;wt.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const wi={average(n){if(!n.length)return!1;let e,t,i=new Set,s=0,r=0;for(e=0,t=n.length;e<t;++e){const a=n[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),s+=l.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/r}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=n.length;r<o;++r){const l=n[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Ur(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function At(n,e){return e&&(tt(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function qt(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function rS(n,e){const{element:t,datasetIndex:i,index:s}=e,r=n.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:n,label:o,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:t}}function Ll(n,e){const t=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:o,boxHeight:a}=e,l=lt(e.bodyFont),c=lt(e.titleFont),u=lt(e.footerFont),h=r.length,f=s.length,p=i.length,m=St(e.padding);let y=m.height,g=0,x=i.reduce((S,C)=>S+C.before.length+C.lines.length+C.after.length,0);if(x+=n.beforeBody.length+n.afterBody.length,h&&(y+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),x){const S=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=p*S+(x-p)*l.lineHeight+(x-1)*e.bodySpacing}f&&(y+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let v=0;const b=function(S){g=Math.max(g,t.measureText(S).width+v)};return t.save(),t.font=c.string,ke(n.title,b),t.font=l.string,ke(n.beforeBody.concat(n.afterBody),b),v=e.displayColors?o+2+e.boxPadding:0,ke(i,S=>{ke(S.before,b),ke(S.lines,b),ke(S.after,b)}),v=0,t.font=u.string,ke(n.footer,b),t.restore(),g+=m.width,{width:g,height:y}}function oS(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function aS(n,e,t,i){const{x:s,width:r}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&s+r+o>e.width||n==="right"&&s-r-o<0)return!0}function lS(n,e,t,i){const{x:s,width:r}=t,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),aS(c,n,e,t)&&(c="center"),c}function Nl(n,e,t){const i=t.yAlign||e.yAlign||oS(n,t);return{xAlign:t.xAlign||e.xAlign||lS(n,e,t,i),yAlign:i}}function cS(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function dS(n,e,t){let{y:i,height:s}=n;return e==="top"?i+=t:e==="bottom"?i-=s+t:i-=s/2,i}function zl(n,e,t,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,c=s+r,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=Yn(o);let m=cS(e,a);const y=dS(e,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,f)+s:a==="right"&&(m+=Math.max(h,p)+s),{x:kt(m,0,i.width-e.width),y:kt(y,0,i.height-e.height)}}function ls(n,e,t){const i=St(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function Bl(n){return At([],qt(n))}function uS(n,e,t){return In(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function $l(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const Yu={beforeTitle:Ut,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:Ut,beforeBody:Ut,beforeLabel:Ut,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return ze(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ut,afterBody:Ut,beforeFooter:Ut,footer:Ut,afterFooter:Ut};function ft(n,e,t,i){const s=n[e].call(t,i);return typeof s>"u"?Yu[e].call(t,i):s}class Jr extends Ht{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&t.options.animation&&i.animations,r=new ku(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=uS(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,s=ft(i,"beforeTitle",this,e),r=ft(i,"title",this,e),o=ft(i,"afterTitle",this,e);let a=[];return a=At(a,qt(s)),a=At(a,qt(r)),a=At(a,qt(o)),a}getBeforeBody(e,t){return Bl(ft(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,s=[];return ke(e,r=>{const o={before:[],lines:[],after:[]},a=$l(i,r);At(o.before,qt(ft(a,"beforeLabel",this,r))),At(o.lines,ft(a,"label",this,r)),At(o.after,qt(ft(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,t){return Bl(ft(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,s=ft(i,"beforeFooter",this,e),r=ft(i,"footer",this,e),o=ft(i,"afterFooter",this,e);let a=[];return a=At(a,qt(s)),a=At(a,qt(r)),a=At(a,qt(o)),a}_createItems(e){const t=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=t.length;l<c;++l)a.push(rS(this.chart,t[l]));return e.filter&&(a=a.filter((u,h,f)=>e.filter(u,h,f,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),ke(a,u=>{const h=$l(e.callbacks,u);s.push(ft(h,"labelColor",this,u)),r.push(ft(h,"labelPointStyle",this,u)),o.push(ft(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=wi[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Ll(this,i),c=Object.assign({},a,l),u=Nl(this.chart,i,c),h=zl(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,s){const r=this.getCaretPosition(e,i,s);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Yn(a),{x:f,y:p}=e,{width:m,height:y}=t;let g,x,v,b,S,C;return r==="center"?(S=p+y/2,s==="left"?(g=f,x=g-o,b=S+o,C=S-o):(g=f+m,x=g+o,b=S-o,C=S+o),v=g):(s==="left"?x=f+Math.max(l,u)+o:s==="right"?x=f+m-Math.max(c,h)-o:x=this.caretX,r==="top"?(b=p,S=b-o,g=x-o,v=x+o):(b=p+y,S=b+o,g=x+o,v=x-o),C=b),{x1:g,x2:x,x3:v,y1:b,y2:S,y3:C}}drawTitle(e,t,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=Un(i.rtl,this.x,this.width);for(e.x=ls(this,i.titleAlign,i),t.textAlign=c.textAlign(i.titleAlign),t.textBaseline="middle",o=lt(i.titleFont),a=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,l=0;l<r;++l)t.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,t,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,u=lt(r.bodyFont),h=ls(this,"left",r),f=s.x(h),p=l<u.lineHeight?(u.lineHeight-l)/2:0,m=t.y+p;if(r.usePointStyle){const y={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},g=s.leftForLtr(f,c)+c/2,x=m+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Xr(e,y,g,x),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Xr(e,y,g,x)}else{e.lineWidth=Se(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const y=s.leftForLtr(f,c),g=s.leftForLtr(s.xPlus(f,1),c-2),x=Yn(o.borderRadius);Object.values(x).some(v=>v!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,js(e,{x:y,y:m,w:c,h:l,radius:x}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),js(e,{x:g,y:m+1,w:c-2,h:l-2,radius:x}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(y,m,c,l),e.strokeRect(y,m,c,l),e.fillStyle=o.backgroundColor,e.fillRect(g,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=lt(i.bodyFont);let f=h.lineHeight,p=0;const m=Un(i.rtl,this.x,this.width),y=function(w){t.fillText(w,m.x(e.x+p),e.y+f/2),e.y+=f+r},g=m.textAlign(o);let x,v,b,S,C,_,O;for(t.textAlign=o,t.textBaseline="middle",t.font=h.string,e.x=ls(this,g,i),t.fillStyle=i.bodyColor,ke(this.beforeBody,y),p=a&&g!=="right"?o==="center"?c/2+u:c+2+u:0,S=0,_=s.length;S<_;++S){for(x=s[S],v=this.labelTextColors[S],t.fillStyle=v,ke(x.before,y),b=x.lines,a&&b.length&&(this._drawColorBox(t,e,S,m,i),f=Math.max(h.lineHeight,l)),C=0,O=b.length;C<O;++C)y(b[C]),f=h.lineHeight;ke(x.after,y)}p=0,f=h.lineHeight,ke(this.afterBody,y),e.y-=r}drawFooter(e,t,i){const s=this.footer,r=s.length;let o,a;if(r){const l=Un(i.rtl,this.x,this.width);for(e.x=ls(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=l.textAlign(i.footerAlign),t.textBaseline="middle",o=lt(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,a=0;a<r;++a)t.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:m}=Yn(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(a+h,l),o==="top"&&this.drawCaret(e,t,i,s),t.lineTo(a+c-f,l),t.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&r==="right"&&this.drawCaret(e,t,i,s),t.lineTo(a+c,l+u-m),t.quadraticCurveTo(a+c,l+u,a+c-m,l+u),o==="bottom"&&this.drawCaret(e,t,i,s),t.lineTo(a+p,l+u),t.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&r==="left"&&this.drawCaret(e,t,i,s),t.lineTo(a,l+h),t.quadraticCurveTo(a,l,a+h,l),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=wi[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Ll(this,e),l=Object.assign({},o,this._size),c=Nl(t,e,l),u=zl(e,l,c,t);(s._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=St(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,t),Du(e,t.textDirection),r.y+=o.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),Cu(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Ds(i,s),o=this._positionChanged(s,t);(r||o)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,t,i),a=this._positionChanged(o,e),l=t||!Ds(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:s,options:r}=this,o=wi[r.position].call(this,e,t);return o!==!1&&(i!==o.x||s!==o.y)}}z(Jr,"positioners",wi);var hS={id:"tooltip",_element:Jr,positioners:wi,afterInit(n,e,t){t&&(n.tooltip=new Jr({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Yu},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const fS=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function pS(n,e,t,i){const s=n.indexOf(e);if(s===-1)return fS(n,e,t,i);const r=n.lastIndexOf(e);return s!==r?t:s}const mS=(n,e)=>n===null?null:kt(Math.round(n),0,e);function Vl(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class eo extends ni{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:s,label:r}of t)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(ze(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:pS(i,e,xe(t,e),this._addedLabels),mS(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=t;o++)s.push({value:o});return s}getLabelForValue(e){return Vl.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}z(eo,"id","category"),z(eo,"defaults",{ticks:{callback:Vl}});function gS(n,e){const t=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:f}=n,p=r||1,m=u-1,{min:y,max:g}=e,x=!ze(o),v=!ze(a),b=!ze(c),S=(g-y)/(h+1);let C=Ga((g-y)/m/p)*p,_,O,w,P;if(C<1e-14&&!x&&!v)return[{value:y},{value:g}];P=Math.ceil(g/C)-Math.floor(y/C),P>m&&(C=Ga(P*C/m/p)*p),ze(l)||(_=Math.pow(10,l),C=Math.ceil(C*_)/_),s==="ticks"?(O=Math.floor(y/C)*C,w=Math.ceil(g/C)*C):(O=y,w=g),x&&v&&r&&ew((a-o)/r,C/1e3)?(P=Math.round(Math.min((a-o)/C,u)),C=(a-o)/P,O=o,w=a):b?(O=x?o:O,w=v?a:w,P=c-1,C=(w-O)/P):(P=(w-O)/C,Pi(P,Math.round(P),C/1e3)?P=Math.round(P):P=Math.ceil(P));const j=Math.max(qa(C),qa(O));_=Math.pow(10,ze(l)?j:l),O=Math.round(O*_)/_,w=Math.round(w*_)/_;let A=0;for(x&&(f&&O!==o?(t.push({value:o}),O<o&&A++,Pi(Math.round((O+A*C)*_)/_,o,Wl(o,S,n))&&A++):O<o&&A++);A<P;++A){const k=Math.round((O+A*C)*_)/_;if(v&&k>a)break;t.push({value:k})}return v&&f&&w!==a?t.length&&Pi(t[t.length-1].value,a,Wl(a,S,n))?t[t.length-1].value=a:t.push({value:a}):(!v||w===a)&&t.push({value:w}),t}function Wl(n,e,{horizontal:t,minRotation:i}){const s=xn(i),r=(t?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+n).length;return Math.min(e/r,o)}class yS extends ni{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return ze(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=t?s:l,a=l=>r=i?r:l;if(e){const l=Qn(s),c=Qn(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},r=this._range||this,o=gS(s,r);return e.bounds==="ticks"&&tw(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-t)/Math.max(e.length-1,1)/2;t-=s,i+=s}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return mu(e,this.chart.options.locale,this.options.ticks.format)}}class to extends yS{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Tt(e)?e:0,this.max=Tt(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=xn(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}z(to,"id","linear"),z(to,"defaults",{ticks:{callback:gu.formatters.numeric}});const Xs={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},pt=Object.keys(Xs);function Hl(n,e){return n-e}function Yl(n,e){if(ze(e))return null;const t=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Tt(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(s&&(o=s==="week"&&(_s(r)||r===!0)?t.startOf(o,"isoWeek",r):t.startOf(o,s)),+o)}function Ul(n,e,t,i){const s=pt.length;for(let r=pt.indexOf(n);r<s-1;++r){const o=Xs[pt[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return pt[r]}return pt[s-1]}function xS(n,e,t,i,s){for(let r=pt.length-1;r>=pt.indexOf(t);r--){const o=pt[r];if(Xs[o].common&&n._adapter.diff(s,i,o)>=e-1)return o}return pt[t?pt.indexOf(t):0]}function bS(n){for(let e=pt.indexOf(n)+1,t=pt.length;e<t;++e)if(Xs[pt[e]].common)return pt[e]}function Gl(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:s}=No(t,e),r=t[i]>=e?t[i]:t[s];n[r]=!0}}function vS(n,e,t,i){const s=n._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=t[a],l>=0&&(e[l].major=!0);return e}function ql(n,e,t){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return r===0||!t?i:vS(n,i,s,t)}class Ei extends ni{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),s=this._adapter=new _u._date(e.adapters.date);s.init(t),Si(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:Yl(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Tt(s)&&!isNaN(s)?s:+t.startOf(Date.now(),i),r=Tt(r)&&!isNaN(r)?r:+t.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=aw(s,r,o);return this._unit=t.unit||(i.autoSkip?Ul(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):xS(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:bS(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),ql(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?t=1-s:t=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=kt(t,0,o),i=kt(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||Ul(r.minUnit,t,i,this._getLabelCapacity(t)),a=xe(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=_s(l)||l===!0,u={};let h=t,f,p;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(i,t,o)>1e5*a)throw new Error(t+" and "+i+" are too far apart with stepSize of "+a+" "+o);const m=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<i;f=+e.add(f,a,o),p++)Gl(u,f,m);return(f===i||s.bounds==="ticks"||p===1)&&Gl(u,f,m),Object.keys(u).sort(Hl).map(y=>+y)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,r=this._unit,o=t||s[r];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,s){const r=this.options,o=r.ticks.callback;if(o)return Oe(o,[e,t,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],f=i[t],p=c&&h&&f&&f.major;return this._adapter.format(e,s||(p?h:u))}generateTickLabels(e){let t,i,s;for(t=0,i=e.length;t<i;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,s=xn(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,s=i[t.unit]||i.millisecond,r=this._tickFormatFunction(e,0,ql(this,[e],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,i=s.length;t<i;++t)e=e.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const s=this.getLabels();for(t=0,i=s.length;t<i;++t)e.push(Yl(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return cw(e.sort(Hl))}}z(Ei,"id","time"),z(Ei,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function cs(n,e,t){let i=0,s=n.length-1,r,o,a,l;t?(e>=n[i].pos&&e<=n[s].pos&&({lo:i,hi:s}=Gr(n,"pos",e)),{pos:r,time:a}=n[i],{pos:o,time:l}=n[s]):(e>=n[i].time&&e<=n[s].time&&({lo:i,hi:s}=Gr(n,"time",e)),{time:r,pos:a}=n[i],{time:o,pos:l}=n[s]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class Xl extends Ei{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=cs(t,this.min),this._tableRange=cs(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,s=[],r=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=i&&s.push(c);if(s.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(cs(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return cs(this._table,i*this._tableRange+this._minPos,!0)}}z(Xl,"id","timeseries"),z(Xl,"defaults",Ei.defaults);function wS(n,e,t){return Ys(n,e*3,t)}function Mi(n,e){const t=+G(n)-+G(e);return t<0?-1:t>0?1:t}function TS(n,e,t){const[i,s]=_t(t==null?void 0:t.in,n,e),r=i.getFullYear()-s.getFullYear(),o=i.getMonth()-s.getMonth();return r*12+o}function SS(n,e,t){const[i,s]=_t(t==null?void 0:t.in,n,e);return i.getFullYear()-s.getFullYear()}function Uu(n,e,t){const[i,s]=_t(t==null?void 0:t.in,n,e),r=Kl(i,s),o=Math.abs(jd(i,s));i.setDate(i.getDate()-r*o);const a=+(Kl(i,s)===-r),l=r*(o-a);return l===0?0:l}function Kl(n,e){const t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Hi(n){return e=>{const i=(n?Math[n]:Math.trunc)(e);return i===0?0:i}}function PS(n,e,t){const[i,s]=_t(t==null?void 0:t.in,n,e),r=(+i-+s)/$i;return Hi(t==null?void 0:t.roundingMethod)(r)}function Xo(n,e){return+G(n)-+G(e)}function DS(n,e,t){const i=Xo(n,e)/Bi;return Hi(t==null?void 0:t.roundingMethod)(i)}function CS(n,e){const t=G(n,e==null?void 0:e.in);return+bs(t,e)==+Oo(t,e)}function Gu(n,e,t){const[i,s,r]=_t(t==null?void 0:t.in,n,n,e),o=Mi(s,r),a=Math.abs(TS(s,r));if(a<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-o*a);let l=Mi(s,r)===-o;CS(i)&&a===1&&Mi(i,r)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function MS(n,e,t){const i=Gu(n,e,t)/3;return Hi(t==null?void 0:t.roundingMethod)(i)}function kS(n,e,t){const i=Xo(n,e)/1e3;return Hi(t==null?void 0:t.roundingMethod)(i)}function IS(n,e,t){const i=Uu(n,e,t)/7;return Hi(t==null?void 0:t.roundingMethod)(i)}function _S(n,e,t){const[i,s]=_t(t==null?void 0:t.in,n,e),r=Mi(i,s),o=Math.abs(SS(i,s));i.setFullYear(1584),s.setFullYear(1584);const a=Mi(i,s)===-r,l=r*(o-+a);return l===0?0:l}function jS(n,e){const t=G(n,e==null?void 0:e.in),i=t.getMonth(),s=i-i%3;return t.setMonth(s,1),t.setHours(0,0,0,0),t}function RS(n,e){const t=G(n,e==null?void 0:e.in);return t.setMinutes(59,59,999),t}function OS(n,e){const t=G(n,e==null?void 0:e.in);return t.setSeconds(59,999),t}function AS(n,e){const t=G(n,e==null?void 0:e.in),i=t.getMonth(),s=i-i%3+3;return t.setMonth(s,0),t.setHours(23,59,59,999),t}function FS(n,e){const t=G(n,e==null?void 0:e.in);return t.setMilliseconds(999),t}function ES(n,e){const t=G(n,e==null?void 0:e.in);return t.setSeconds(0,0),t}function LS(n,e){const t=G(n,e==null?void 0:e.in);return t.setMilliseconds(0),t}function NS(n,e){const t=()=>Ae(e==null?void 0:e.in,NaN),i=(e==null?void 0:e.additionalDigits)??2,s=VS(n);let r;if(s.date){const c=WS(s.date,i);r=HS(c.restDateString,c.year)}if(!r||isNaN(+r))return t();const o=+r;let a=0,l;if(s.time&&(a=YS(s.time),isNaN(a)))return t();if(s.timezone){if(l=US(s.timezone),isNaN(l))return t()}else{const c=new Date(o+a),u=G(0,e==null?void 0:e.in);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return G(o+a+l,e==null?void 0:e.in)}const ds={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},zS=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,BS=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,$S=/^([+-])(\d{2})(?::?(\d{2}))?$/;function VS(n){const e={},t=n.split(ds.dateTimeDelimiter);let i;if(t.length>2)return e;if(/:/.test(t[0])?i=t[0]:(e.date=t[0],i=t[1],ds.timeZoneDelimiter.test(e.date)&&(e.date=n.split(ds.timeZoneDelimiter)[0],i=n.substr(e.date.length,n.length))),i){const s=ds.timezone.exec(i);s?(e.time=i.replace(s[1],""),e.timezone=s[1]):e.time=i}return e}function WS(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=n.match(t);if(!i)return{year:NaN,restDateString:""};const s=i[1]?parseInt(i[1]):null,r=i[2]?parseInt(i[2]):null;return{year:r===null?s:r*100,restDateString:n.slice((i[1]||i[2]).length)}}function HS(n,e){if(e===null)return new Date(NaN);const t=n.match(zS);if(!t)return new Date(NaN);const i=!!t[4],s=yi(t[1]),r=yi(t[2])-1,o=yi(t[3]),a=yi(t[4]),l=yi(t[5])-1;if(i)return QS(e,a,l)?GS(e,a,l):new Date(NaN);{const c=new Date(0);return!XS(e,r,o)||!KS(e,s)?new Date(NaN):(c.setUTCFullYear(e,r,Math.max(s,o)),c)}}function yi(n){return n?parseInt(n):1}function YS(n){const e=n.match(BS);if(!e)return NaN;const t=Cr(e[1]),i=Cr(e[2]),s=Cr(e[3]);return ZS(t,i,s)?t*$i+i*Bi+s*1e3:NaN}function Cr(n){return n&&parseFloat(n.replace(",","."))||0}function US(n){if(n==="Z")return 0;const e=n.match($S);if(!e)return 0;const t=e[1]==="+"?-1:1,i=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return JS(i,s)?t*(i*$i+s*Bi):NaN}function GS(n,e,t){const i=new Date(0);i.setUTCFullYear(n,0,4);const s=i.getUTCDay()||7,r=(e-1)*7+t+1-s;return i.setUTCDate(i.getUTCDate()+r),i}const qS=[31,null,31,30,31,30,31,31,30,31,30,31];function qu(n){return n%400===0||n%4===0&&n%100!==0}function XS(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(qS[e]||(qu(n)?29:28))}function KS(n,e){return e>=1&&e<=(qu(n)?366:365)}function QS(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function ZS(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function JS(n,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const eP={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};_u._date.override({_id:"date-fns",formats:function(){return eP},parse:function(n,e){if(n===null||typeof n>"u")return null;const t=typeof n;return t==="number"||n instanceof Date?n=G(n):t==="string"&&(typeof e=="string"?n=Wd(n,e,new Date,this.options):n=NS(n,this.options)),_o(n)?n.getTime():null},format:function(n,e){return Ld(n,e,this.options)},add:function(n,e,t){switch(t){case"millisecond":return Do(n,e);case"second":return Dd(n,e);case"minute":return Cd(n,e);case"hour":return Md(n,e);case"day":return Vi(n,e);case"week":return kd(n,e);case"month":return Ys(n,e);case"quarter":return wS(n,e);case"year":return Id(n,e);default:return n}},diff:function(n,e,t){switch(t){case"millisecond":return Xo(n,e);case"second":return kS(n,e);case"minute":return DS(n,e);case"hour":return PS(n,e);case"day":return Uu(n,e);case"week":return IS(n,e);case"month":return Gu(n,e);case"quarter":return MS(n,e);case"year":return _S(n,e);default:return 0}},startOf:function(n,e,t){switch(e){case"second":return LS(n);case"minute":return ES(n);case"hour":return $r(n);case"day":return Xn(n);case"week":return It(n);case"isoWeek":return It(n,{weekStartsOn:+t});case"month":return Hd(n);case"quarter":return jS(n);case"year":return Mo(n);default:return n}},endOf:function(n,e){switch(e){case"second":return FS(n);case"minute":return OS(n);case"hour":return RS(n);case"day":return bs(n);case"week":return _d(n);case"month":return Oo(n);case"quarter":return AS(n);case"year":return zr(n);default:return n}}});Kt.register(eo,to,ms,vi,gs,sS,hS,nS,Ei);class tP{constructor(){z(this,"canvas");z(this,"ctx");this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}async generateResponseTimeTrendChart(e,t={type:"line",title:"Response Time Trends",width:800,height:400}){console.log("ðŸ“Š Generating Response Time Trend Chart");const i=this.groupIncidentsByDate(e),s=Object.keys(i).sort(),r=s.map(l=>{const c=i[l];return c.reduce((h,f)=>{const p=this.calculateResponseTime(f);return h+(p||0)},0)/c.length/60}),o={labels:s,datasets:[{label:"Average Response Time (minutes)",data:r,borderColor:"#d32f2f",backgroundColor:"rgba(211, 47, 47, 0.1)",tension:.1,fill:!0},{label:"NFPA 1710 Standard (5 min)",data:new Array(s.length).fill(5),borderColor:"#2e7d32",backgroundColor:"rgba(46, 125, 50, 0.1)",borderDash:[5,5],fill:!1}]},a={responsive:!1,plugins:{title:{display:!0,text:t.title,font:{size:16,weight:"bold"}},legend:{position:"top"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Response Time (minutes)"}},x:{title:{display:!0,text:"Date"}}}};return this.renderChart("line",o,a,t)}async generateNFPAComplianceChart(e,t={type:"bar",title:"NFPA 1710 Compliance Analysis",width:800,height:400}){console.log("ðŸ“Š Generating NFPA Compliance Chart");const i=this.calculateNFPACompliance(e),s={labels:["Dispatch Time","Turnout Time","Total Response Time"],datasets:[{label:"Department Average (seconds)",data:[e.mean.dispatchTime||0,e.mean.turnoutTime||0,e.mean.totalResponseTime||0],backgroundColor:[i.dispatchCompliance?"#2e7d32":"#d32f2f",i.turnoutCompliance?"#2e7d32":"#d32f2f",i.responseCompliance?"#2e7d32":"#d32f2f"],borderColor:[i.dispatchCompliance?"#1b5e20":"#b71c1c",i.turnoutCompliance?"#1b5e20":"#b71c1c",i.responseCompliance?"#1b5e20":"#b71c1c"],borderWidth:2},{label:"NFPA 1710 Standard",data:[60,60,300],backgroundColor:"rgba(46, 125, 50, 0.3)",borderColor:"#2e7d32",borderWidth:2}]},r={responsive:!1,plugins:{title:{display:!0,text:t.title,font:{size:16,weight:"bold"}},legend:{position:"top"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Time (seconds)"}},x:{title:{display:!0,text:"NFPA 1710 Metrics"}}}};return this.renderChart("bar",s,r,t)}async generatePerformanceDistributionChart(e,t={type:"bar",title:"Response Time Distribution",width:800,height:400}){console.log("ðŸ“Š Generating Performance Distribution Chart");const i={"0-3 min":0,"3-5 min":0,"5-8 min":0,"8-12 min":0,"12+ min":0};e.forEach(o=>{const a=this.calculateResponseTime(o);if(!a)return;const l=a/60;l<=3?i["0-3 min"]++:l<=5?i["3-5 min"]++:l<=8?i["5-8 min"]++:l<=12?i["8-12 min"]++:i["12+ min"]++});const s={labels:Object.keys(i),datasets:[{label:"Number of Incidents",data:Object.values(i),backgroundColor:["#2e7d32","#66bb6a","#ffeb3b","#ff9800","#d32f2f"],borderColor:["#1b5e20","#388e3c","#f57f17","#ef6c00","#b71c1c"],borderWidth:2}]},r={responsive:!1,plugins:{title:{display:!0,text:t.title,font:{size:16,weight:"bold"}},legend:{position:"top"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Number of Incidents"}},x:{title:{display:!0,text:"Response Time Range"}}}};return this.renderChart("bar",s,r,t)}async renderChart(e,t,i,s){return new Promise((r,o)=>{try{this.canvas.width=s.width,this.canvas.height=s.height,s.backgroundColor&&(this.ctx.fillStyle=s.backgroundColor,this.ctx.fillRect(0,0,s.width,s.height));const a=new Kt(this.ctx,{type:e,data:t,options:i});setTimeout(()=>{try{const l=this.canvas.toDataURL("image/png");a.destroy(),r({dataUrl:l,width:s.width,height:s.height,title:s.title})}catch(l){a.destroy(),o(l)}},100)}catch(a){o(a)}})}groupIncidentsByDate(e){const t={};return e.forEach(i=>{const s=i.incidentDate||i.incident_date;if(!s)return;const r=new Date(s).toLocaleDateString();t[r]||(t[r]=[]),t[r].push(i)}),t}calculateResponseTime(e){const t=e.incidentTime||e.incident_time,i=e.arrivalTime||e.arrival_time;if(!t||!i)return null;try{const s=new Date(t).getTime();return(new Date(i).getTime()-s)/1e3}catch{return null}}calculateNFPACompliance(e){return{dispatchCompliance:(e.mean.dispatchTime||0)<=60,turnoutCompliance:(e.mean.turnoutTime||0)<=60,responseCompliance:(e.mean.totalResponseTime||0)<=300}}destroy(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}async function nP(n,e){console.log("ðŸ“Š Generating all standard charts for PDF report");const t=new tP,i=[];try{const s=await t.generateResponseTimeTrendChart(n,{type:"line",title:"Response Time Trends Over Time",width:600,height:300,backgroundColor:"#ffffff"});i.push(s);const r=await t.generateNFPAComplianceChart(e,{type:"bar",title:"NFPA 1710 Compliance Analysis",width:600,height:300,backgroundColor:"#ffffff"});i.push(r);const o=await t.generatePerformanceDistributionChart(n,{type:"bar",title:"Response Time Distribution",width:600,height:300,backgroundColor:"#ffffff"});return i.push(o),console.log(`ðŸ“Š Successfully generated ${i.length} charts for PDF`),i}catch(s){throw console.error("ðŸ“Š Error generating charts:",s),s}finally{t.destroy()}}console.log("ðŸ”¥ðŸ”¥ðŸ”¥ PDF REPORT GENERATOR MODULE LOADED - NEW VERSION WITH DEBUG! ðŸ”¥ðŸ”¥ðŸ”¥");class iP{constructor(e,t){z(this,"pdf");z(this,"config");z(this,"data");z(this,"pageNumber",1);z(this,"yPosition",20);z(this,"colors",{primary:"#d32f2f",secondary:"#1976d2",success:"#2e7d32",warning:"#f57c00",error:"#d32f2f",text:"#333333",lightGray:"#f5f5f5",mediumGray:"#9e9e9e"});this.pdf=new _h("portrait","mm","a4"),this.config=e,this.data=t,console.log("ðŸ“‹ PDF DEBUG: autoTable import:",typeof pr),typeof pr=="function"?(this.pdf.autoTable=pr.bind(null,this.pdf),console.log("ðŸ“‹ PDF DEBUG: âœ… autoTable attached successfully")):console.error("ðŸ“‹ PDF DEBUG: âŒ autoTable import failed"),e.customBranding&&(this.colors.primary=e.customBranding.primaryColor,this.colors.secondary=e.customBranding.secondaryColor),console.log("ðŸ“‹ PDF DEBUG: ReportConfig received:",{departmentName:e.departmentName,hasDepartmentLogo:!!e.departmentLogo,logoLength:e.departmentLogo?e.departmentLogo.length:0})}async generateReport(){return console.log("ðŸš€ GENERATE REPORT CALLED - Static AutoTable Import Version"),console.log("ðŸ“‹ PDF DEBUG: jsPDF instance created:",!!this.pdf),console.log("ðŸ“‹ PDF DEBUG: autoTable plugin loaded:",!!this.pdf.autoTable),this.addTitlePage(),this.config.includeSections.summary&&(this.addNewPage(),this.addExecutiveSummary()),this.config.includeSections.nfpaCompliance&&(this.addNewPage(),this.addNFPAComplianceSection()),this.config.includeSections.charts&&(this.addNewPage(),await this.addChartsSection()),(this.config.includeSections.charts||this.config.includeSections.incidentDetails)&&(this.addNewPage(),this.addGeographicAnalysisSection()),this.config.includeSections.incidentDetails&&(this.addNewPage(),this.addIncidentDetailsSection()),this.config.includeSections.recommendations&&(this.addNewPage(),this.addRecommendationsSection()),this.addFootersToAllPages(),this.pdf.output("blob")}addTitlePage(){var s,r,o,a;if(this.yPosition=40,this.config.departmentLogo){console.log("ðŸ–¼ï¸ LOGO DEBUG: Logo data exists, length:",this.config.departmentLogo.length),console.log("ðŸ–¼ï¸ LOGO DEBUG: Logo data preview:",this.config.departmentLogo.substring(0,100)+"...");const l=30,c=((s=this.config.customBranding)==null?void 0:s.logoPosition)==="center"?(210-l)/2:((r=this.config.customBranding)==null?void 0:r.logoPosition)==="right"?210-l-20:20;try{let u="PNG";this.config.departmentLogo.includes("data:image/jpeg")||this.config.departmentLogo.includes("data:image/jpg")?u="JPEG":this.config.departmentLogo.includes("data:image/png")&&(u="PNG"),console.log("ðŸ–¼ï¸ LOGO DEBUG: Detected format:",u),console.log("ðŸ–¼ï¸ LOGO DEBUG: Adding logo at position:",{x:c,y:this.yPosition,size:l}),this.pdf.addImage(this.config.departmentLogo,u,c,this.yPosition,l,l),console.log("ðŸ–¼ï¸ LOGO DEBUG: âœ… Logo added successfully!"),this.yPosition+=l+10}catch(u){console.error("ðŸ–¼ï¸ LOGO DEBUG: âŒ Failed to add logo:",u),console.error("ðŸ–¼ï¸ LOGO DEBUG: Error details:",{errorMessage:u instanceof Error?u.message:"Unknown error",logoDataType:typeof this.config.departmentLogo,logoDataStart:this.config.departmentLogo.substring(0,50)}),this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.mediumGray),this.pdf.text("[Department Logo - Failed to Load]",c,this.yPosition+15),this.yPosition+=25}}else console.log("ðŸ–¼ï¸ LOGO DEBUG: No logo data provided");this.pdf.setFontSize(24),this.pdf.setTextColor(this.colors.primary),this.addCenteredText(this.config.title,this.yPosition),this.yPosition+=15;const e=((o=this.config.customText)==null?void 0:o.customSubtitle)||this.config.subtitle;e&&(this.pdf.setFontSize(16),this.pdf.setTextColor(this.colors.text),this.addCenteredText(e,this.yPosition),this.yPosition+=10),this.pdf.setFontSize(18),this.pdf.setTextColor(this.colors.secondary),this.addCenteredText(this.config.departmentName,this.yPosition),this.yPosition+=20,this.pdf.setFontSize(14),this.pdf.setTextColor(this.colors.text);const t=`Report Period: ${this.config.reportPeriod.startDate} to ${this.config.reportPeriod.endDate}`;this.addCenteredText(t,this.yPosition),this.yPosition+=20,this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.mediumGray);const i=`Generated on ${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}`;this.addCenteredText(i,this.yPosition),this.yPosition+=30,(a=this.config.customText)!=null&&a.chiefMessage&&(this.yPosition+=20,this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.text),this.pdf.text("Message from Fire Chief:",20,this.yPosition),this.yPosition+=10,this.pdf.splitTextToSize(this.config.customText.chiefMessage,170).forEach(c=>{this.pdf.text(c,20,this.yPosition),this.yPosition+=6})),this.config.chiefName&&(this.yPosition=220,this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.text),this.pdf.text("Prepared by:",20,this.yPosition),this.yPosition+=8,this.pdf.setFontSize(14),this.pdf.text(this.config.chiefName,20,this.yPosition),this.config.chiefTitle&&(this.yPosition+=6,this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.mediumGray),this.pdf.text(this.config.chiefTitle,20,this.yPosition)))}addExecutiveSummary(){var o,a;this.addSectionHeader("Executive Summary");const e=this.data.statistics,t=this.data.incidents;this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.text);const i=((o=this.config.customText)==null?void 0:o.reportPurpose)||`During the reporting period, ${this.config.departmentName} responded to ${t.length} incidents.`,s=((a=this.config.customText)==null?void 0:a.executiveSummaryDescription)||"High-level overview for mayors and department leadership";[i,"",s,"","Key Performance Indicators:",`â€¢ Average Response Time: ${this.formatStatistic(e.mean.totalResponseTime)}`,`â€¢ Average Dispatch Time: ${this.formatStatistic(e.mean.dispatchTime)}`,`â€¢ Average Turnout Time: ${this.formatStatistic(e.mean.turnoutTime)}`,`â€¢ 90th Percentile Response: ${this.formatStatistic(e.ninetiethPercentile.totalResponseTime)}`,"","NFPA 1710 Compliance Overview:",`${this.calculateCompliancePercentage()}% of metrics meet NFPA standards`].forEach(l=>{this.yPosition>250&&this.addNewPage(),this.pdf.text(l,20,this.yPosition),this.yPosition+=6})}addNFPAComplianceSection(){this.addSectionHeader("NFPA 1710 Compliance Analysis");const e=this.calculateNFPACompliance();try{const i=[["Dispatch Time",this.formatStatistic(this.data.statistics.mean.dispatchTime),"â‰¤60 seconds",e.dispatchCompliance?"âœ“ COMPLIANT":"âœ— NON-COMPLIANT"],["Turnout Time",this.formatStatistic(this.data.statistics.mean.turnoutTime),"â‰¤60 seconds",e.turnoutCompliance?"âœ“ COMPLIANT":"âœ— NON-COMPLIANT"],["Total Response Time",this.formatStatistic(this.data.statistics.mean.totalResponseTime),"â‰¤5 minutes",e.responseCompliance?"âœ“ COMPLIANT":"âœ— NON-COMPLIANT"]];console.log("ðŸ“‹ Creating NFPA compliance table with autoTable"),this.pdf.autoTable({head:[["Metric","Department Average","NFPA Standard","Status"]],body:i,startY:this.yPosition,theme:"grid",headStyles:{fillColor:[211,47,47],textColor:255},bodyStyles:{fontSize:10,cellPadding:2,lineColor:[240,240,240],lineWidth:.1},columnStyles:{0:{cellWidth:35},1:{cellWidth:30},2:{cellWidth:25},3:{cellWidth:35,textColor:s=>s.cell.text[0].includes("âœ“")?[46,125,50]:[211,47,47]}},margin:{left:20,right:20},didDrawPage:s=>{this.yPosition=s.cursor.y+10}}),this.yPosition=this.yPosition||this.yPosition+20}catch(i){console.error("Could not create autoTable, falling back to text:",i),this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.text),["NFPA 1710 Compliance Analysis:","","DISPATCH TIME:",`  Department: ${this.formatStatistic(this.data.statistics.mean.dispatchTime)}`,"  NFPA Standard: â‰¤60 seconds",`  Status: ${e.dispatchCompliance?"âœ“ COMPLIANT":"âœ— NON-COMPLIANT"}`,"","TURNOUT TIME:",`  Department: ${this.formatStatistic(this.data.statistics.mean.turnoutTime)}`,"  NFPA Standard: â‰¤60 seconds",`  Status: ${e.turnoutCompliance?"âœ“ COMPLIANT":"âœ— NON-COMPLIANT"}`,"","TOTAL RESPONSE TIME:",`  Department: ${this.formatStatistic(this.data.statistics.mean.totalResponseTime)}`,"  NFPA Standard: â‰¤5 minutes",`  Status: ${e.responseCompliance?"âœ“ COMPLIANT":"âœ— NON-COMPLIANT"}`,""].forEach(r=>{this.yPosition>250&&this.addNewPage(),this.pdf.text(r,20,this.yPosition),this.yPosition+=6})}this.yPosition+=10,this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.text),this.pdf.text("Compliance Summary:",20,this.yPosition),this.yPosition+=10;const t=Math.round(Object.values(e).filter(Boolean).length/3*100);this.pdf.setFontSize(11),this.pdf.text(`Overall NFPA 1710 Compliance: ${t}%`,20,this.yPosition),this.yPosition+=15,t<100&&this.addNonComplianceRecommendations(e)}addIncidentDetailsSection(){this.addSectionHeader("Incident Details");const e=this.data.incidents.slice(0,50).map(t=>{const i=this.calculateMetricsForIncident(t);return[t.incidentId,t.incidentDate,t.incidentType||"N/A",this.formatMetric(i.dispatchTime),this.formatMetric(i.turnoutTime),this.formatMetric(i.totalResponseTime)]});try{const t=e.slice(0,20);this.pdf.autoTable({head:[["Incident ID","Date","Type","Dispatch","Turnout","Response"]],body:t,startY:this.yPosition,theme:"striped",headStyles:{fillColor:[25,118,210],textColor:255},bodyStyles:{fontSize:8},columnStyles:{0:{cellWidth:20},1:{cellWidth:22},2:{cellWidth:25},3:{cellWidth:18},4:{cellWidth:18},5:{cellWidth:22}},margin:{left:20,right:20},didDrawPage:i=>{this.yPosition=i.cursor.y+10}}),this.yPosition=this.yPosition||this.yPosition+20}catch(t){console.error("Could not create incident table, falling back to text:",t),this.pdf.setFontSize(10),this.pdf.setTextColor(this.colors.text),this.pdf.text("Incident Summary (First 10 incidents):",20,this.yPosition),this.yPosition+=10,e.slice(0,10).forEach((s,r)=>{this.yPosition>250&&this.addNewPage();const o=`${r+1}. ${s[0]} - ${s[1]}`,a=`   Type: ${s[2]} | Response: ${s[5]}`;this.pdf.text(o,20,this.yPosition),this.yPosition+=5,this.pdf.text(a,20,this.yPosition),this.yPosition+=5})}this.yPosition+=10,this.data.incidents.length>20&&(this.pdf.setFontSize(10),this.pdf.setTextColor(this.colors.mediumGray),this.pdf.text(`Note: Showing first 20 of ${this.data.incidents.length} incidents. Full data available in detailed export.`,20,this.yPosition))}async addChartsSection(){this.addSectionHeader("Performance Analysis & Charts"),this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.text),["This section provides visual analysis of department performance metrics.","Charts help identify trends, compliance status, and areas for improvement.",""].forEach(t=>{this.yPosition>250&&this.addNewPage(),this.pdf.text(t,20,this.yPosition),this.yPosition+=6});try{console.log("ðŸ“Š PDF: Generating charts for report...");const t=await nP(this.data.incidents,this.data.statistics);for(const i of t)await this.addChartToPDF(i),this.yPosition+=15;console.log(`ðŸ“Š PDF: Successfully added ${t.length} charts to report`)}catch(t){console.error("ðŸ“Š PDF: Error generating charts:",t),this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.error),this.pdf.text("Chart generation temporarily unavailable.",20,this.yPosition),this.yPosition+=10,this.pdf.setFontSize(10),this.pdf.setTextColor(this.colors.mediumGray),this.pdf.text("Charts will be available in future report versions.",20,this.yPosition),this.yPosition+=15}}async addChartToPDF(e){const t=e.height*170/e.width;this.yPosition+t+30>250&&this.addNewPage(),this.pdf.setFontSize(14),this.pdf.setTextColor(this.colors.primary),this.pdf.text(e.title,20,this.yPosition),this.yPosition+=10;try{const s=e.height*170/e.width;this.pdf.addImage(e.dataUrl,"PNG",20,this.yPosition,170,s),this.yPosition+=s+5,console.log(`ðŸ“Š PDF: Added chart "${e.title}" to PDF`)}catch(i){console.error(`ðŸ“Š PDF: Error adding chart "${e.title}":`,i),this.pdf.setDrawColor(this.colors.mediumGray),this.pdf.setFillColor(245,245,245),this.pdf.rect(20,this.yPosition,170,80,"FD"),this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.mediumGray),this.pdf.text("[Chart generation failed]",105,this.yPosition+35,{align:"center"}),this.pdf.text("Data available in detailed analysis",105,this.yPosition+50,{align:"center"}),this.yPosition+=85}}addGeographicAnalysisSection(){this.addSectionHeader("Geographic Analysis & Service Area Performance"),this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.text),["This section provides statistical analysis of emergency response across service areas.","Analysis includes incident distribution, response time variations by location, and coverage assessment.",""].forEach(t=>{this.yPosition>250&&this.addNewPage(),this.pdf.text(t,20,this.yPosition),this.yPosition+=6}),this.addIncidentDistributionAnalysis(),this.yPosition+=10,this.addResponseTimeByAreaAnalysis(),this.yPosition+=10,this.addCoverageAssessment()}addIncidentDistributionAnalysis(){this.yPosition>200&&this.addNewPage(),this.pdf.setFontSize(14),this.pdf.setTextColor(this.colors.primary),this.pdf.text("Incident Distribution Analysis",20,this.yPosition),this.yPosition+=10;const e=this.analyzeIncidentsByCity();this.pdf.setFontSize(11),this.pdf.setTextColor(this.colors.text),e.length>0?(this.pdf.text("Incident distribution by service area:",20,this.yPosition),this.yPosition+=8,e.forEach(t=>{this.yPosition>250&&this.addNewPage(),this.pdf.text(`â€¢ ${t.area}: ${t.count} incidents (${t.percentage}%)`,25,this.yPosition),this.yPosition+=6})):(this.pdf.text("Geographic data analysis requires city/location information in incident records.",20,this.yPosition),this.yPosition+=6,this.pdf.text("Consider adding location fields to enable detailed geographic analysis.",20,this.yPosition),this.yPosition+=6)}addResponseTimeByAreaAnalysis(){this.yPosition>200&&this.addNewPage(),this.pdf.setFontSize(14),this.pdf.setTextColor(this.colors.primary),this.pdf.text("Response Time by Service Area",20,this.yPosition),this.yPosition+=10;const e=this.analyzeResponseTimesByArea();this.pdf.setFontSize(11),this.pdf.setTextColor(this.colors.text),e.length>0?e.forEach(t=>{this.yPosition>250&&this.addNewPage();const i=t.avgResponseTime<=300?"âœ“ COMPLIANT":"âš  REVIEW NEEDED";this.pdf.text(`â€¢ ${t.area}: ${this.formatTime(t.avgResponseTime)} avg response - ${i}`,25,this.yPosition),this.yPosition+=6}):(this.pdf.text("Response time geographic analysis requires location data in incident records.",20,this.yPosition),this.yPosition+=6)}addCoverageAssessment(){this.yPosition>200&&this.addNewPage(),this.pdf.setFontSize(14),this.pdf.setTextColor(this.colors.primary),this.pdf.text("Service Coverage Assessment",20,this.yPosition),this.yPosition+=10,this.pdf.setFontSize(11),this.pdf.setTextColor(this.colors.text);const e=this.data.statistics,t=e.mean.totalResponseTime||0,i=e.ninetiethPercentile.totalResponseTime||0,s=[`Total incidents analyzed: ${this.data.incidents.length}`,`Average response time: ${this.formatTime(t)}`,`90th percentile response time: ${this.formatTime(i)}`,"","Coverage recommendations:"];t>300?(s.push("â€¢ Consider evaluating station locations for optimal coverage"),s.push("â€¢ Review deployment strategies to reduce response times")):(s.push("â€¢ Current response times meet NFPA 1710 standards"),s.push("â€¢ Maintain current operational strategies")),i>480&&s.push("â€¢ 90th percentile suggests some areas may need additional coverage"),s.forEach(r=>{this.yPosition>250&&this.addNewPage(),this.pdf.text(r,20,this.yPosition),this.yPosition+=6})}addRecommendationsSection(){this.addSectionHeader("Recommendations & Action Items");const e=this.calculateNFPACompliance(),t=[];e.dispatchCompliance||t.push("â€¢ Dispatch Time Improvement: Review dispatcher training and implement automated dispatch systems to achieve <60 second dispatch times."),e.turnoutCompliance||t.push("â€¢ Turnout Time Optimization:","  - Evaluate station layout and equipment placement","  - Review crew readiness procedures","  - Target: Reduce turnout time to <60 seconds"),e.responseCompliance||t.push("â€¢ Response Time Enhancement:","  - Analyze travel routes and station coverage","  - Consider additional stations or unit deployment","  - Review deployment strategies"),t.length===0&&t.push("â€¢ Maintain Excellence: Continue current operational practices to maintain NFPA 1710 compliance across all metrics.","â€¢ Performance Monitoring: Implement regular performance reviews to ensure continued compliance.","â€¢ Staff Training: Provide ongoing training to maintain response time standards."),t.push("","General Recommendations:","â€¢ Implement regular performance monitoring and monthly reporting","â€¢ Consider technology upgrades (GPS tracking, mobile data terminals)","â€¢ Review and update standard operating procedures annually","â€¢ Evaluate station locations and coverage areas for optimal response times"),this.pdf.setFontSize(11),this.pdf.setTextColor(this.colors.text),t.forEach(i=>{this.yPosition>250&&this.addNewPage(),this.pdf.text(i,20,this.yPosition),this.yPosition+=6})}addNewPage(){this.pdf.addPage(),this.pageNumber++,this.yPosition=20}addSectionHeader(e){this.pdf.setFontSize(16),this.pdf.setTextColor(this.colors.primary),this.pdf.text(e,20,this.yPosition),this.yPosition+=12,this.pdf.setDrawColor(this.colors.primary),this.pdf.line(20,this.yPosition-2,190,this.yPosition-2),this.yPosition+=8}addCenteredText(e,t){const s=(210-this.pdf.getTextWidth(e))/2;this.pdf.text(e,s,t)}addFootersToAllPages(){const e=this.pdf.getNumberOfPages();for(let t=1;t<=e;t++)this.pdf.setPage(t),this.pdf.setDrawColor(this.colors.mediumGray),this.pdf.line(20,280,190,280),this.pdf.setFontSize(10),this.pdf.setTextColor(this.colors.mediumGray),this.pdf.text(`Page ${t} of ${e}`,170,285),this.pdf.text(this.config.departmentName,20,285)}formatStatistic(e){return e===null?"N/A":ce(e)}formatMetric(e){return e===null?"N/A":ce(e,"full")}calculateNFPACompliance(){const e=this.data.statistics;return{dispatchCompliance:(e.mean.dispatchTime||0)<=60,turnoutCompliance:(e.mean.turnoutTime||0)<=60,responseCompliance:(e.mean.totalResponseTime||0)<=300}}getNFPAComplianceOverview(){const e=this.calculateNFPACompliance(),t=Object.values(e).filter(Boolean).length,i=Object.keys(e).length;return t===i?"âœ“ Full NFPA 1710 compliance achieved across all measured metrics.":t===0?"âš  Department does not meet NFPA 1710 standards. Immediate action recommended.":`âš  Partial compliance: ${t} of ${i} metrics meet NFPA 1710 standards.`}addNonComplianceRecommendations(e){this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.error),this.pdf.text("Areas Requiring Attention:",20,this.yPosition),this.yPosition+=8,this.pdf.setFontSize(10),this.pdf.setTextColor(this.colors.text),e.dispatchCompliance||(this.pdf.text("â€¢ Dispatch times exceed NFPA 1710 standard of 60 seconds",25,this.yPosition),this.yPosition+=6),e.turnoutCompliance||(this.pdf.text("â€¢ Turnout times exceed NFPA 1710 standard of 60 seconds",25,this.yPosition),this.yPosition+=6),e.responseCompliance||(this.pdf.text("â€¢ Total response times exceed NFPA 1710 standard of 5 minutes",25,this.yPosition),this.yPosition+=6)}calculateMetricsForIncident(e){return ut(e)}hexToRgb(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]}calculateCompliancePercentage(){const e=this.calculateNFPACompliance(),t=Object.values(e).filter(Boolean).length,i=Object.keys(e).length;return Math.round(t/i*100)}analyzeIncidentsByCity(){const e={};let t=0;return this.data.incidents.forEach(i=>{var r,o;const s=i.city||((o=(r=i.address)==null?void 0:r.split(",").slice(-2,-1)[0])==null?void 0:o.trim())||"Unknown";e[s]=(e[s]||0)+1,t++}),Object.entries(e).map(([i,s])=>({area:i,count:s,percentage:Math.round(s/t*100)})).sort((i,s)=>s.count-i.count).slice(0,10)}analyzeResponseTimesByArea(){const e={};return this.data.incidents.forEach(t=>{var r,o;const i=t.city||((o=(r=t.address)==null?void 0:r.split(",").slice(-2,-1)[0])==null?void 0:o.trim())||"Unknown",s=this.calculateMetricsForIncident(t);s.totalResponseTime&&s.totalResponseTime>0&&(e[i]||(e[i]={total:0,count:0}),e[i].total+=s.totalResponseTime,e[i].count+=1)}),Object.entries(e).map(([t,i])=>({area:t,avgResponseTime:i.total/i.count,count:i.count})).filter(t=>t.count>=2).sort((t,i)=>t.avgResponseTime-i.avgResponseTime).slice(0,8)}formatTime(e){if(!e||e<=0)return"N/A";const t=Math.floor(e/60),i=Math.round(e%60);return t===0?`${i} sec`:`${t} min ${i} sec`}}async function sP(n,e){return console.log("ðŸ”¥ðŸ”¥ðŸ”¥ GENERATE RESPONSE TIME REPORT FUNCTION CALLED! ðŸ”¥ðŸ”¥ðŸ”¥"),console.log("ðŸ“‹ Config received:",{departmentName:n.departmentName,hasDepartmentLogo:!!n.departmentLogo,logoLength:n.departmentLogo?n.departmentLogo.length:0}),console.log("ðŸ“‹ Data received:",{incidentsCount:e.incidents.length,statisticsExists:!!e.statistics}),await new iP(n,e).generateReport()}const Ql=[{id:"compliance",name:"NFPA 1710 Compliance Report",description:"Official compliance report for city council, grants, and regulatory submissions",icon:d.jsx(bh,{}),color:"primary",sections:{summary:!0,nfpaCompliance:!0,incidentDetails:!0,charts:!1,recommendations:!0}},{id:"executive",name:"Executive Summary",description:"High-level overview for chiefs, mayors, and department leadership",icon:d.jsx(lo,{}),color:"secondary",sections:{summary:!0,nfpaCompliance:!0,incidentDetails:!1,charts:!0,recommendations:!0}},{id:"detailed",name:"Detailed Analysis Report",description:"Comprehensive report with full incident data and analysis",icon:d.jsx(Nn,{}),color:"info",sections:{summary:!0,nfpaCompliance:!0,incidentDetails:!0,charts:!0,recommendations:!0}},{id:"custom",name:"Custom Report",description:"Choose specific sections and customize content",icon:d.jsx(Df,{}),color:"warning",sections:{summary:!0,nfpaCompliance:!1,incidentDetails:!1,charts:!1,recommendations:!1}}],Xu=({open:n,onClose:e,incidents:t,statistics:i,dateRange:s})=>{var b,S,C,_,O,w,P,j,A,k;const[r,o]=T.useState("compliance"),[a,l]=T.useState({reportType:"compliance",title:"Response Time Analysis Report",subtitle:"NFPA 1710 Compliance Assessment",departmentName:"",chiefName:"",chiefTitle:"Fire Chief",reportPeriod:{startDate:(s==null?void 0:s.start)||new Date().toISOString().split("T")[0],endDate:(s==null?void 0:s.end)||new Date().toISOString().split("T")[0]},includeSections:{summary:!0,nfpaCompliance:!0,incidentDetails:!0,charts:!1,recommendations:!0}}),[c,u]=T.useState(!1),[h,f]=T.useState(null),p=D=>{o(D);const R=Ql.find(F=>F.id===D);R&&l(F=>({...F,reportType:D,title:R.name,subtitle:R.description,includeSections:{...R.sections}}))},m=D=>{l(R=>({...R,includeSections:{...R.includeSections,[D]:!R.includeSections[D]}}))},y=(D,R)=>{l(F=>({...F,[D]:R}))},g=async()=>{var D;if(!((D=a.departmentName)!=null&&D.trim())){f({success:!1,message:"Please enter your department name before generating the report."});return}u(!0),f(null);try{const R={reportType:a.reportType||"compliance",title:a.title||"Response Time Analysis Report",subtitle:a.subtitle,departmentName:a.departmentName,departmentLogo:a.departmentLogo,chiefName:a.chiefName,chiefTitle:a.chiefTitle||"Fire Chief",reportPeriod:a.reportPeriod,includeSections:a.includeSections,customText:a.customText},L=await sP(R,{incidents:t,statistics:i}),$=URL.createObjectURL(L),K=document.createElement("a");K.href=$;const V=`${R.departmentName.replace(/\s+/g,"_")}_Response_Time_Report_${Date.now()}.pdf`;K.download=V,document.body.appendChild(K),K.click(),document.body.removeChild(K),URL.revokeObjectURL($),f({success:!0,message:"PDF report generated successfully!",filename:V})}catch(R){console.error("Error generating PDF report:",R),f({success:!1,message:`Failed to generate report: ${R instanceof Error?R.message:"Unknown error"}`})}finally{u(!1)}},x=Object.entries(a.includeSections||{}).filter(([D,R])=>R).map(([D,R])=>D),v=Math.max(2,x.length+((b=a.includeSections)!=null&&b.incidentDetails?Math.ceil(t.length/25):0));return d.jsxs(oo,{open:n,onClose:e,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"80vh"}},children:[d.jsxs(uc,{sx:{display:"flex",alignItems:"center"},children:[d.jsx(_r,{sx:{mr:1,color:"error.main"}}),"Generate PDF Report"]}),d.jsxs(ao,{children:[d.jsx(M,{variant:"h6",gutterBottom:!0,sx:{mt:1},children:"1. Choose Report Template"}),d.jsx(B,{container:!0,spacing:2,sx:{mb:3},children:Ql.map(D=>d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsx(vn,{variant:r===D.id?"elevation":"outlined",sx:{cursor:"pointer",border:r===D.id?2:1,borderColor:r===D.id?`${D.color}.main`:"divider","&:hover":{elevation:2}},onClick:()=>p(D.id),children:d.jsxs(wn,{children:[d.jsxs(N,{sx:{display:"flex",alignItems:"center",mb:1},children:[D.icon,d.jsx(Re,{label:D.name,color:D.color,variant:r===D.id?"filled":"outlined",sx:{ml:1}})]}),d.jsx(M,{variant:"body2",color:"text.secondary",children:D.description})]})})},D.id))}),d.jsx(Bt,{sx:{my:3}}),d.jsx(M,{variant:"h6",gutterBottom:!0,children:"2. Department Information"}),d.jsxs(B,{container:!0,spacing:2,sx:{mb:3},children:[d.jsx(B,{item:!0,xs:12,md:6,children:d.jsx(_e,{label:"Department Name *",fullWidth:!0,value:a.departmentName||"",onChange:D=>y("departmentName",D.target.value),placeholder:"e.g., City Fire Department"})}),d.jsx(B,{item:!0,xs:12,md:6,children:d.jsx(_e,{label:"Fire Chief Name",fullWidth:!0,value:a.chiefName||"",onChange:D=>y("chiefName",D.target.value),placeholder:"e.g., John Smith"})}),d.jsx(B,{item:!0,xs:12,md:6,children:d.jsx(_e,{label:"Chief Title",fullWidth:!0,value:a.chiefTitle||"",onChange:D=>y("chiefTitle",D.target.value),placeholder:"e.g., Fire Chief, Battalion Chief"})}),d.jsx(B,{item:!0,xs:12,md:6,children:d.jsxs(N,{children:[d.jsx(M,{variant:"subtitle2",sx:{mb:1},children:"Department Logo"}),d.jsxs(Te,{variant:"outlined",component:"label",fullWidth:!0,startIcon:d.jsx(lo,{}),children:["Upload Logo",d.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:D=>{var F;const R=(F=D.target.files)==null?void 0:F[0];if(R){const L=new FileReader;L.onload=$=>{var K;(K=$.target)!=null&&K.result&&y("departmentLogo",$.target.result)},L.readAsDataURL(R)}}})]}),a.departmentLogo&&d.jsx(M,{variant:"caption",color:"success.main",sx:{mt:1,display:"block"},children:"âœ“ Logo uploaded successfully"})]})}),d.jsx(B,{item:!0,xs:12,md:6,children:d.jsx(_e,{label:"Report Title",fullWidth:!0,value:a.title||"",onChange:D=>y("title",D.target.value)})})]}),d.jsx(Bt,{sx:{my:3}}),d.jsx(M,{variant:"h6",sx:{mb:2,color:"primary.main"},children:"ðŸ“ Customize Report Text"}),d.jsxs(B,{container:!0,spacing:3,children:[d.jsx(B,{item:!0,xs:12,children:d.jsx(_e,{label:"Custom Subtitle",multiline:!0,rows:2,fullWidth:!0,value:((S=a.customText)==null?void 0:S.customSubtitle)||"",onChange:D=>y("customText",{...a.customText,customSubtitle:D.target.value}),placeholder:"Official compliance report for city council, grants, and regulatory submissions",helperText:"Subtitle that appears below the main title on the cover page"})}),d.jsx(B,{item:!0,xs:12,md:6,children:d.jsx(_e,{label:"Report Start Date",type:"date",fullWidth:!0,value:((C=a.reportPeriod)==null?void 0:C.startDate)||"",onChange:D=>y("reportPeriod",{...a.reportPeriod,startDate:D.target.value}),InputLabelProps:{shrink:!0},helperText:"Beginning of the reporting period"})}),d.jsx(B,{item:!0,xs:12,md:6,children:d.jsx(_e,{label:"Report End Date",type:"date",fullWidth:!0,value:((_=a.reportPeriod)==null?void 0:_.endDate)||"",onChange:D=>y("reportPeriod",{...a.reportPeriod,endDate:D.target.value}),InputLabelProps:{shrink:!0},helperText:"End of the reporting period"})}),d.jsx(B,{item:!0,xs:12,children:d.jsx(_e,{label:"Report Purpose Statement",multiline:!0,rows:2,fullWidth:!0,value:((O=a.customText)==null?void 0:O.reportPurpose)||"",onChange:D=>y("customText",{...a.customText,reportPurpose:D.target.value}),placeholder:`During the reporting period, ${a.departmentName||"[Department Name]"} responded to [X] incidents.`,helperText:"Opening statement that describes the scope and timeframe of this report"})}),d.jsx(B,{item:!0,xs:12,children:d.jsx(_e,{label:"Executive Summary Description",multiline:!0,rows:2,fullWidth:!0,value:((w=a.customText)==null?void 0:w.executiveSummaryDescription)||"",onChange:D=>y("customText",{...a.customText,executiveSummaryDescription:D.target.value}),placeholder:"High-level overview for mayors and department leadership",helperText:"Brief description of what this report provides for executive leadership"})}),d.jsx(B,{item:!0,xs:12,children:d.jsx(_e,{label:"Chief's Message (Optional)",multiline:!0,rows:3,fullWidth:!0,value:((P=a.customText)==null?void 0:P.chiefMessage)||"",onChange:D=>y("customText",{...a.customText,chiefMessage:D.target.value}),placeholder:"Personal message from the Fire Chief about department performance, initiatives, or acknowledgments...",helperText:"Optional personal message from the Fire Chief that will appear on the title page"})})]}),d.jsx(Bt,{sx:{my:3}}),d.jsx(M,{variant:"h6",gutterBottom:!0,children:"3. Include Sections"}),d.jsx(B,{container:!0,spacing:1,sx:{mb:3},children:[{key:"summary",label:"Executive Summary",desc:"Key metrics and overview"},{key:"nfpaCompliance",label:"NFPA 1710 Compliance",desc:"Compliance analysis and standards"},{key:"incidentDetails",label:"Incident Details",desc:"Detailed incident table"},{key:"charts",label:"Charts & Graphs",desc:"Visual data representation"},{key:"recommendations",label:"Recommendations",desc:"Action items and suggestions"}].map(D=>{var R;return d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsx(Ls,{control:d.jsx(Ns,{checked:((R=a.includeSections)==null?void 0:R[D.key])||!1,onChange:()=>m(D.key)}),label:d.jsxs(N,{children:[d.jsx(M,{variant:"body2",children:D.label}),d.jsx(M,{variant:"caption",color:"text.secondary",children:D.desc})]})})},D.key)})}),d.jsxs($t,{severity:"info",sx:{mb:2},children:[d.jsx(M,{variant:"body2",gutterBottom:!0,children:d.jsx("strong",{children:"Report Preview:"})}),d.jsxs(yc,{direction:"row",spacing:1,flexWrap:"wrap",children:[d.jsx(Re,{label:`${t.length} incidents`,size:"small"}),d.jsx(Re,{label:`${x.length} sections`,size:"small"}),d.jsx(Re,{label:`~${v} pages`,size:"small"}),d.jsx(Re,{label:`${(j=a.reportPeriod)==null?void 0:j.startDate} to ${(A=a.reportPeriod)==null?void 0:A.endDate}`,size:"small"})]})]}),h&&d.jsxs($t,{severity:h.success?"success":"error",sx:{mb:2},icon:h.success?d.jsx(Ir,{}):void 0,children:[h.message,h.filename&&d.jsxs(M,{variant:"caption",display:"block",sx:{mt:1},children:["File: ",h.filename]})]})]}),d.jsxs(ro,{sx:{p:3},children:[d.jsx(Te,{onClick:e,children:"Cancel"}),d.jsx(Te,{variant:"contained",startIcon:c?d.jsx(so,{size:20}):d.jsx(_r,{}),onClick:g,disabled:c||!((k=a.departmentName)!=null&&k.trim())||x.length===0,children:c?"Generating...":"Generate PDF Report"})]})]})},Zl=[{id:"excel",name:"Excel Workbook (.xlsx)",description:"Detailed spreadsheet with multiple tabs for incidents, statistics, and charts",icon:d.jsx(gf,{sx:{color:"#2E7D32"}})},{id:"csv",name:"CSV File (.csv)",description:"Simple comma-separated values file that can be opened in any spreadsheet application",icon:d.jsx(wf,{sx:{color:"#1976D2"}})},{id:"pdf",name:"PDF Report (.pdf)",description:"Formatted report with tables, charts and statistics",icon:d.jsx(_r,{sx:{color:"#D32F2F"}})}],rP=[{id:"summary",name:"Summary Statistics",description:"Overall response time metrics and KPIs",icon:d.jsx(zh,{})},{id:"incidents",name:"Incident Details",description:"Detailed table of all incidents and response times",icon:d.jsx(Bh,{})},{id:"map",name:"Geographic Analysis",description:"Map and location-based analysis (PDF only)",icon:d.jsx(Ah,{})}],oP=()=>{var v;const{incidents:n}=Ie(b=>b.analyzer.rawData),{responseTimeStats:e}=Ie(b=>b.analyzer.calculatedMetrics),t=Ie(b=>b.analyzer.filters),[i,s]=T.useState("excel"),[r,o]=T.useState(["summary","incidents"]),[a,l]=T.useState(!1),[c,u]=T.useState({success:!1,message:"",open:!1}),[h,f]=T.useState(!1),p=b=>{const S=[...r],C=S.indexOf(b);C===-1?S.push(b):S.splice(C,1),o(S)},m=async()=>{const b=await Zo(()=>import("./xlsx-DkH2s96g.js"),[]),S=b.utils.book_new();if(S.Props={Title:"Response Time Analysis Report",Subject:"Incident Response Times",Author:"FireEMS Response Time Analyzer",CreatedDate:new Date},r.includes("summary")&&e){const _=[["Response Time Statistics","","","",""],["Metric","Mean","Median","90th Percentile","Standard Deviation"],["Dispatch Time",e.mean.dispatchTime||"N/A",e.median.dispatchTime||"N/A",e.ninetiethPercentile.dispatchTime||"N/A",e.standardDeviation.dispatchTime||"N/A"],["Turnout Time",e.mean.turnoutTime||"N/A",e.median.turnoutTime||"N/A",e.ninetiethPercentile.turnoutTime||"N/A",e.standardDeviation.turnoutTime||"N/A"],["Travel Time",e.mean.travelTime||"N/A",e.median.travelTime||"N/A",e.ninetiethPercentile.travelTime||"N/A",e.standardDeviation.travelTime||"N/A"],["Total Response Time",e.mean.totalResponseTime||"N/A",e.median.totalResponseTime||"N/A",e.ninetiethPercentile.totalResponseTime||"N/A",e.standardDeviation.totalResponseTime||"N/A"],["","","","",""],["Report Generated:",new Date().toLocaleString(),"","",""],["Total Incidents:",n.length.toString(),"","",""]];(t.dateRange||t.incidentTypes||t.units||t.timeOfDay)&&(_.push(["","","","",""]),_.push(["Applied Filters:","","","",""]),t.dateRange&&_.push(["Date Range:",`${t.dateRange[0].toLocaleDateString()} to ${t.dateRange[1].toLocaleDateString()}`,"","",""]),t.incidentTypes&&_.push(["Incident Types:",t.incidentTypes.join(", "),"","",""]),t.units&&_.push(["Units:",t.units.join(", "),"","",""]),t.timeOfDay&&_.push(["Time of Day:",`${t.timeOfDay[0]}:00 to ${t.timeOfDay[1]}:00`,"","",""]));const O=b.utils.aoa_to_sheet(_),w=[{wch:20},{wch:20},{wch:20},{wch:20},{wch:20}];O["!cols"]=w,b.utils.book_append_sheet(S,O,"Summary Statistics")}if(r.includes("incidents")){const _=n.map(P=>{const j=ut(P);return{"Incident ID":P.incidentId,Date:P.incidentDate,Time:P.incidentTime||"",Type:P.incidentType||"","Responding Unit":P.respondingUnit||"",Address:P.address||"",Location:P.latitude&&P.longitude?`${P.latitude}, ${P.longitude}`:"","Dispatch Time (s)":j.dispatchTime||"","Turnout Time (s)":j.turnoutTime||"","Travel Time (s)":j.travelTime||"","Total Response Time (s)":j.totalResponseTime||"","Scene Time (s)":j.sceneTime||"","Total Incident Time (s)":j.totalIncidentTime||""}}),O=b.utils.json_to_sheet(_),w=[{wch:15},{wch:12},{wch:10},{wch:15},{wch:15},{wch:25},{wch:20},{wch:15},{wch:15},{wch:15},{wch:20},{wch:15},{wch:20}];O["!cols"]=w,b.utils.book_append_sheet(S,O,"Incident Details")}const C=`response_time_analysis_${Date.now()}.xlsx`;return b.writeFile(S,C),{success:!0,filename:C}},y=async()=>{const b=n.map(j=>{const A=ut(j);return{"Incident ID":j.incidentId,Date:j.incidentDate,Time:j.incidentTime||"",Type:j.incidentType||"","Responding Unit":j.respondingUnit||"",Address:j.address||"",Location:j.latitude&&j.longitude?`${j.latitude}, ${j.longitude}`:"","Dispatch Time (s)":A.dispatchTime||"","Turnout Time (s)":A.turnoutTime||"","Travel Time (s)":A.travelTime||"","Total Response Time (s)":A.totalResponseTime||"","Scene Time (s)":A.sceneTime||"","Total Incident Time (s)":A.totalIncidentTime||""}}),S=await Zo(()=>import("./xlsx-DkH2s96g.js"),[]),C=S.utils.json_to_sheet(b),_=S.utils.sheet_to_csv(C),O=new Blob([_],{type:"text/csv;charset=utf-8;"}),w=URL.createObjectURL(O),P=document.createElement("a");return P.href=w,P.setAttribute("download",`response_time_analysis_${Date.now()}.csv`),document.body.appendChild(P),P.click(),document.body.removeChild(P),{success:!0,filename:`response_time_analysis_${Date.now()}.csv`}},g=()=>(f(!0),{success:!0,filename:"Opening Report Generator..."}),x=async()=>{if(!n.length){u({success:!1,message:"No data to export",open:!0});return}l(!0);try{let b;switch(i){case"excel":b=await m();break;case"csv":b=await y();break;case"pdf":g();return;default:throw new Error("Unsupported export format")}u({success:!0,message:`Data exported successfully as ${i.toUpperCase()} file: ${b.filename}`,open:!0})}catch(b){console.error("Export error:",b),u({success:!1,message:`Error exporting data: ${b instanceof Error?b.message:"Unknown error"}`,open:!0})}finally{l(!1)}};return d.jsxs(N,{sx:{p:3},children:[d.jsx(M,{variant:"h6",gutterBottom:!0,children:"Export Analysis Results"}),d.jsxs(B,{container:!0,spacing:3,children:[d.jsx(B,{size:{xs:12,md:6},children:d.jsxs(Ve,{variant:"outlined",sx:{p:2,height:"100%"},children:[d.jsx(M,{variant:"subtitle1",gutterBottom:!0,children:"Export Format"}),d.jsx(kr,{children:Zl.map(b=>d.jsx(Ve,{variant:"outlined",sx:{mb:1,p:1,bgcolor:i===b.id?"action.selected":"background.paper",cursor:"pointer","&:hover":{bgcolor:"action.hover"}},onClick:()=>s(b.id),children:d.jsxs(Mr,{children:[d.jsx(jh,{children:b.icon}),d.jsx(Rh,{primary:b.name,secondary:b.description})]})},b.id))})]})}),d.jsx(B,{size:{xs:12,md:6},children:d.jsxs(Ve,{variant:"outlined",sx:{p:2,height:"100%"},children:[d.jsx(M,{variant:"subtitle1",gutterBottom:!0,children:"Include In Export"}),d.jsx(kr,{children:rP.map(b=>d.jsx(Mr,{dense:!0,children:d.jsx(Ls,{control:d.jsx(Ns,{checked:r.includes(b.id),onChange:()=>p(b.id),disabled:b.id==="map"&&i!=="pdf"}),label:d.jsxs(N,{children:[d.jsxs(N,{sx:{display:"flex",alignItems:"center"},children:[b.icon,d.jsx(M,{variant:"body1",sx:{ml:1},children:b.name})]}),d.jsx(M,{variant:"body2",color:"text.secondary",children:b.description})]}),sx:{width:"100%"}})},b.id))})]})})]}),d.jsxs(Ve,{variant:"outlined",sx:{p:2,mt:3},children:[d.jsx(M,{variant:"subtitle1",gutterBottom:!0,children:"Export Summary"}),d.jsxs(B,{container:!0,spacing:2,children:[d.jsxs(B,{size:{xs:12,sm:4},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Total Records"}),d.jsxs(M,{variant:"body1",children:[n.length," incidents"]})]}),d.jsxs(B,{size:{xs:12,sm:4},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Format"}),d.jsx(M,{variant:"body1",children:((v=Zl.find(b=>b.id===i))==null?void 0:v.name)||i})]}),d.jsxs(B,{size:{xs:12,sm:4},children:[d.jsx(M,{variant:"body2",color:"text.secondary",children:"Estimated File Size"}),d.jsx(M,{variant:"body1",children:i==="excel"?`~${Math.ceil(n.length*.5)} KB`:i==="csv"?`~${Math.ceil(n.length*.3)} KB`:i==="pdf"?`~${Math.ceil(n.length*.7+(r.includes("map")?500:0))} KB`:"Unknown"})]})]}),d.jsx(N,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:d.jsx(Te,{variant:"contained",color:"primary",startIcon:a?d.jsx(so,{size:20}):d.jsx(bc,{}),onClick:x,disabled:a||!r.length,children:a?"Exporting...":"Export Data"})})]}),d.jsx(Oh,{open:c.open,autoHideDuration:6e3,onClose:()=>u({...c,open:!1}),children:d.jsx($t,{onClose:()=>u({...c,open:!1}),severity:c.success?"success":"error",children:c.message})}),d.jsx(Xu,{open:h,onClose:()=>f(!1),incidents:n||[],statistics:e||{mean:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},median:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},ninetiethPercentile:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},standardDeviation:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},min:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},max:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},count:0},dateRange:t!=null&&t.dateRange?{start:t.dateRange[0].toISOString().split("T")[0],end:t.dateRange[1].toISOString().split("T")[0]}:void 0})]})},aP={id:"monthly_nfpa_1710_compliance",name:"Monthly NFPA 1710 Compliance Report",description:"Professional monthly compliance report documenting NFPA 1710 response time standards performance for regulatory review and city leadership.",category:"compliance",targetAudience:["Fire Chief","City Manager","Mayor","City Council","State Fire Marshal"],sections:[{id:"executive_summary",title:"Executive Summary",type:"summary",content:`
## Executive Summary

The {{departmentName}} responded to {{totalIncidents}} emergency incidents during {{reportPeriod}}, achieving an overall NFPA 1710 compliance rate of {{overallCompliance}}%.

### Key Performance Highlights:
- **Dispatch Time Compliance**: {{dispatchCompliance}}% (Goal: 90% â‰¤60 seconds)
- **Turnout Time Compliance**: {{turnoutCompliance}}% (Goal: 90% â‰¤60 seconds)
- **Total Response Time Compliance**: {{totalResponseCompliance}}% (Goal: 90% â‰¤5 minutes)
- **Average Response Time**: {{averageResponseTime}} minutes

### Compliance Status:
{{#if compliant}}
âœ… **COMPLIANT** - Department meets NFPA 1710 standards
{{else}}
âš ï¸ **NON-COMPLIANT** - Areas for improvement identified
{{/if}}

### Recommendations:
{{#each recommendations}}
- {{this}}
{{/each}}
      `,required:!0,order:1},{id:"department_overview",title:"Department Overview",type:"narrative",content:`
## Department Overview

**{{departmentName}}** serves {{population}} residents across {{squareMiles}} square miles with {{stations}} fire stations, {{apparatus}} apparatus, and {{personnel}} personnel.

**Leadership**: {{chief}}, Fire Chief
**Jurisdiction**: {{jurisdiction}}
**Reporting Period**: {{reportPeriod}}

### Service Delivery Model:
The department operates under the NFPA 1710 standard for career fire departments, which establishes response time objectives for emergency incidents.
      `,required:!0,order:2},{id:"nfpa_compliance_metrics",title:"NFPA 1710 Compliance Metrics",type:"statistics",content:{type:"compliance_table",data:"nfpa1710"},required:!0,order:3},{id:"response_time_analysis",title:"Response Time Analysis",type:"chart",content:{type:"response_time_histogram",data:"responseTimeStats"},required:!0,order:4},{id:"incident_volume_analysis",title:"Incident Volume Analysis",type:"table",content:{type:"incident_breakdown",data:"incidentVolume"},required:!0,order:5},{id:"recommendations",title:"Performance Recommendations",type:"recommendations",content:`
## Performance Recommendations

Based on the analysis of {{reportPeriod}} response data, the following recommendations are provided:

### Operational Improvements:
{{#each operationalRecommendations}}
- {{this}}
{{/each}}

### Training Opportunities:
{{#each trainingRecommendations}}
- {{this}}
{{/each}}

### Resource Considerations:
{{#each resourceRecommendations}}
- {{this}}
{{/each}}

### Next Month's Focus:
{{nextMonthFocus}}
      `,required:!0,order:6}],metadata:{version:"1.0.0",lastUpdated:new Date().toISOString(),compatibleTools:["response-time-analyzer"],outputFormats:["pdf","word"],estimatedPages:8,professionalLevel:"executive"}},lP={id:"annual_department_performance",name:"Annual Department Performance Report",description:"Comprehensive annual report documenting department performance, trends, achievements, and strategic initiatives for city leadership and public transparency.",category:"performance",targetAudience:["City Council","Mayor","City Manager","Public","Media"],sections:[{id:"message_from_chief",title:"Message from the Fire Chief",type:"narrative",content:`
## Message from Fire Chief {{chief}}

Dear Community Members and City Leadership,

I am pleased to present the {{year}} Annual Performance Report for the {{departmentName}}. This report highlights our commitment to protecting and serving our community with the highest standards of emergency response.

Throughout {{year}}, our dedicated team of {{personnel}} firefighters and emergency medical professionals responded to {{totalIncidents}} emergency calls, maintaining our mission of preserving life, property, and the environment.

### Year {{year}} Achievements:
{{#each achievements}}
- {{this}}
{{/each}}

### Looking Forward to {{nextYear}}:
{{#each futureInitiatives}}
- {{this}}
{{/each}}

We remain committed to continuous improvement and serving our community with excellence.

Respectfully,

**{{chief}}**  
Fire Chief, {{departmentName}}
      `,required:!0,order:1},{id:"year_in_review",title:"Year in Review",type:"summary",content:`
## {{year}} Year in Review

### By the Numbers:
- **{{totalIncidents}}** Total Emergency Responses
- **{{averageResponseTime}}** Average Response Time
- **{{nfpaCompliance}}%** NFPA 1710 Compliance Rate
- **{{fireIncidents}}** Fire Incidents
- **{{emsIncidents}}** EMS Incidents
- **{{rescueIncidents}}** Rescue Incidents

### Major Incidents:
{{#each majorIncidents}}
- **{{date}}**: {{description}} - {{outcome}}
{{/each}}

### Community Impact:
- Lives Saved: {{livesSaved}}
- Property Saved: {{propertySaved}}
- Fire Loss: {{fireLoss}}
- EMS Transports: {{emsTransports}}
      `,required:!0,order:2},{id:"performance_trends",title:"Performance Trends",type:"chart",content:{type:"annual_trends",data:"yearOverYear"},required:!0,order:3},{id:"training_development",title:"Training & Professional Development",type:"narrative",content:`
## Training & Professional Development

### {{year}} Training Highlights:
{{#each trainingPrograms}}
- **{{name}}**: {{hours}} hours, {{participants}} personnel
{{/each}}

### Certifications Achieved:
{{#each certifications}}
- {{count}} personnel achieved {{certification}}
{{/each}}

### Continuing Education:
- Total Training Hours: {{totalTrainingHours}}
- Training Hours per Person: {{hoursPerPerson}}
- External Conference Attendance: {{conferenceAttendance}}
      `,required:!0,order:4},{id:"community_outreach",title:"Community Outreach & Education",type:"narrative",content:`
## Community Outreach & Education

### Fire Prevention Programs:
{{#each preventionPrograms}}
- **{{name}}**: {{participants}} participants
{{/each}}

### School Programs:
- Fire Safety Education: {{schoolVisits}} schools reached
- Students Educated: {{studentsEducated}}

### Community Events:
{{#each communityEvents}}
- {{name}}: {{attendance}} attendees
{{/each}}

### Public Education Impact:
- Smoke Alarm Installations: {{smokeAlarms}}
- Home Safety Inspections: {{homeInspections}}
- CPR Training Provided: {{cprTraining}} citizens
      `,required:!0,order:5},{id:"strategic_initiatives",title:"Strategic Initiatives & Future Planning",type:"narrative",content:`
## Strategic Initiatives & Future Planning

### {{year}} Initiative Outcomes:
{{#each completedInitiatives}}
- **{{name}}**: {{status}} - {{outcome}}
{{/each}}

### {{nextYear}} Strategic Priorities:
{{#each nextYearPriorities}}
1. **{{title}}**
   - Objective: {{objective}}
   - Timeline: {{timeline}}
   - Resources Required: {{resources}}
{{/each}}

### Long-term Vision ({{futureYear}}):
{{longTermVision}}

### Funding Requirements:
{{#each fundingNeeds}}
- {{item}}: ${{amount}} - {{justification}}
{{/each}}
      `,required:!0,order:6}],metadata:{version:"1.0.0",lastUpdated:new Date().toISOString(),compatibleTools:["response-time-analyzer","fire-map-pro"],outputFormats:["pdf","word"],estimatedPages:24,professionalLevel:"executive"}},cP={id:"grant_application_package",name:"Grant Application Data Package",description:"Comprehensive data package for federal and state grant applications including FEMA AFG, SAFER, and state funding programs.",category:"grant",targetAudience:["Grant Reviewers","FEMA","State Agencies","Foundation Officers"],sections:[{id:"executive_summary",title:"Project Executive Summary",type:"summary",content:`
## Project Executive Summary

**Applicant**: {{departmentName}}
**Grant Program**: {{grantProgram}}
**Request Amount**: ${{requestAmount}}
**Project Title**: {{projectTitle}}

### Community Profile:
The {{departmentName}} serves {{population}} residents across {{squareMiles}} square miles in {{jurisdiction}}. Our department operates {{stations}} fire stations with {{apparatus}} apparatus and {{personnel}} personnel.

### Project Need:
{{projectNeed}}

### Performance Data Supporting Need:
- Current Response Time: {{currentResponseTime}} minutes
- NFPA 1710 Compliance: {{nfpaCompliance}}%
- Annual Incident Volume: {{totalIncidents}} calls
- Service Gap: {{serviceGap}}

### Expected Outcomes:
{{#each expectedOutcomes}}
- {{this}}
{{/each}}

### Return on Investment:
This investment will improve emergency response capability for {{beneficiaries}} residents, reducing response times by {{timeReduction}} and improving NFPA compliance to {{targetCompliance}}%.
      `,required:!0,order:1},{id:"needs_assessment",title:"Needs Assessment & Data Analysis",type:"statistics",content:{type:"comprehensive_needs_analysis",data:"grantNeedsAnalysis"},required:!0,order:2},{id:"performance_metrics",title:"Current Performance Metrics",type:"table",content:{type:"grant_performance_table",data:"currentPerformance"},required:!0,order:3},{id:"cost_benefit_analysis",title:"Cost-Benefit Analysis",type:"narrative",content:`
## Cost-Benefit Analysis

### Project Costs:
{{#each projectCosts}}
- {{item}}: ${{cost}} - {{justification}}
{{/each}}

**Total Project Cost**: ${{totalCost}}
**Grant Request**: ${{grantRequest}}
**Local Match**: ${{localMatch}} ({{matchPercentage}}%)

### Quantified Benefits:
- **Lives Saved Annually**: {{livesSaved}}
- **Property Protection**: ${{propertyProtection}}
- **Reduced Fire Loss**: ${{reducedLoss}}
- **Improved Response Time**: {{timeImprovement}} minutes
- **Additional Coverage**: {{additionalCoverage}} residents

### Cost per Beneficiary:
${{costPerBeneficiary}} per resident served

### Return on Investment:
For every $1 invested, the community receives ${{roi}} in benefits through improved emergency response capability and reduced losses.
      `,required:!0,order:4},{id:"implementation_plan",title:"Implementation Plan & Timeline",type:"narrative",content:`
## Implementation Plan & Timeline

### Project Timeline:
{{#each timeline}}
- **{{phase}}** ({{duration}}): {{activities}}
{{/each}}

### Key Milestones:
{{#each milestones}}
- {{date}}: {{milestone}}
{{/each}}

### Risk Management:
{{#each risks}}
- **Risk**: {{risk}}
- **Mitigation**: {{mitigation}}
- **Probability**: {{probability}}
{{/each}}

### Performance Metrics:
{{#each performanceMetrics}}
- {{metric}}: Current {{current}} â†’ Target {{target}}
{{/each}}

### Sustainability Plan:
{{sustainabilityPlan}}
      `,required:!0,order:5}],metadata:{version:"1.0.0",lastUpdated:new Date().toISOString(),compatibleTools:["response-time-analyzer","fire-map-pro"],outputFormats:["pdf","word","excel"],estimatedPages:16,professionalLevel:"technical"}},dP={id:"city_council_executive_summary",name:"City Council Executive Summary",description:"Concise executive briefing for city council meetings highlighting key performance metrics and departmental needs.",category:"executive",targetAudience:["City Council","Mayor","City Manager","Budget Director"],sections:[{id:"performance_dashboard",title:"Performance Dashboard",type:"summary",content:`
# Fire Department Performance Summary
**{{reportPeriod}}** | **{{departmentName}}**

## Key Metrics

| Metric | Current | Goal | Status |
|--------|---------|------|--------|
| **Response Time** | {{averageResponseTime}} min | â‰¤5 min | {{responseStatus}} |
| **NFPA Compliance** | {{nfpaCompliance}}% | 90% | {{complianceStatus}} |
| **Total Incidents** | {{totalIncidents}} | - | {{trendIndicator}} |
| **Budget Utilization** | {{budgetUtilization}}% | <100% | {{budgetStatus}} |

## Performance Highlights
{{#each highlights}}
- {{this}}
{{/each}}

## Areas of Concern
{{#each concerns}}
- {{this}}
{{/each}}
      `,required:!0,order:1},{id:"budget_impact",title:"Budget Impact & Resource Needs",type:"narrative",content:`
## Budget Impact & Resource Needs

### Current Budget Performance:
- **Personnel Costs**: {{personnelCosts}}% of budget
- **Equipment/Maintenance**: {{equipmentCosts}}% of budget
- **Operations**: {{operationsCosts}}% of budget
- **Training**: {{trainingCosts}}% of budget

### Immediate Needs ({{currentFY}}):
{{#each immediateNeeds}}
- **{{item}}**: ${{cost}} - {{urgency}}
{{/each}}

### Future Budget Considerations ({{nextFY}}):
{{#each futureBudgetItems}}
- {{item}}: ${{estimatedCost}}
{{/each}}

### Cost Avoidance:
Through effective emergency response, the department prevented an estimated ${{costAvoidance}} in fire losses during {{reportPeriod}}.
      `,required:!0,order:2},{id:"council_recommendations",title:"Recommendations for Council Action",type:"recommendations",content:`
## Recommendations for Council Action

### Immediate Actions Required:
{{#each immediateActions}}
1. **{{action}}**
   - **Rationale**: {{rationale}}
   - **Cost**: {{cost}}
   - **Timeline**: {{timeline}}
   - **Impact**: {{impact}}
{{/each}}

### Future Considerations:
{{#each futureConsiderations}}
- {{consideration}}
{{/each}}

### Policy Implications:
{{#each policyImplications}}
- {{implication}}
{{/each}}

### Community Benefit:
{{communityBenefit}}
      `,required:!0,order:3}],metadata:{version:"1.0.0",lastUpdated:new Date().toISOString(),compatibleTools:["response-time-analyzer"],outputFormats:["pdf","word"],estimatedPages:4,professionalLevel:"executive"}},uP=[aP,lP,cP,dP];class hP{static generateReport(e,t){const i=Date.now();console.log(`ðŸ“„ Generating report: "${e.name}" for ${t.departmentInfo.name}`);const s=e.sections.sort((u,h)=>u.order-h.order).map(u=>this.processSection(u,t,e)),r=Date.now()-i,o=this.calculateWordCount(s),a=this.calculateCompleteness(t),l=this.assessDataQuality(t),c={template:e,sections:s,metadata:{totalPages:Math.ceil(o/300),wordCount:o,processingTime:r,dataQuality:l,completeness:a},generatedAt:new Date().toISOString()};return console.log(`âœ… Report generated: ${s.length} sections, ${o} words, ${r}ms`),c}static processSection(e,t,i){console.log(`ðŸ”§ Processing section: "${e.title}"`);let s;switch(e.type){case"summary":case"narrative":case"recommendations":s=this.processTextTemplate(e.content,t);break;case"statistics":s=this.processStatisticsSection(e.content,t);break;case"chart":s=this.processChartSection(e.content,t);break;case"table":s=this.processTableSection(e.content,t);break;default:s=e.content}return{id:e.id,title:e.title,type:e.type,processedContent:s,order:e.order}}static processTextTemplate(e,t){let i=e;const s=this.extractTemplateVariables(t);console.log("ðŸ”§ TEMPLATE PROCESSING - Available variables:",Object.keys(s)),console.log("ðŸ”§ TEMPLATE PROCESSING - propertySaved value:",s.propertySaved);for(const[r,o]of Object.entries(s)){const a=new RegExp(`{{${r}}}`,"g");o!=null?i=i.replace(a,String(o)):(console.error(`âŒ TEMPLATE ERROR - Variable '${r}' is undefined or null`),i=i.replace(a,`[${r} not defined]`))}return i=this.processConditionals(i,t),i=this.processLoops(i,t),i}static extractTemplateVariables(e){e.responseTimeStats;const t=e.departmentInfo,i=e.complianceMetrics;return{departmentName:t.name,chief:t.chief,jurisdiction:t.jurisdiction,population:t.population.toLocaleString(),squareMiles:t.squareMiles,stations:t.stations,apparatus:t.apparatus,personnel:t.personnel,reportPeriod:e.reportPeriod.description,startDate:new Date(e.reportPeriod.startDate).toLocaleDateString(),endDate:new Date(e.reportPeriod.endDate).toLocaleDateString(),overallCompliance:Math.round(i.nfpa1710.totalResponseCompliance),dispatchCompliance:Math.round(i.nfpa1710.dispatchCompliance),turnoutCompliance:Math.round(i.nfpa1710.turnoutCompliance),travelCompliance:Math.round(i.nfpa1710.travelCompliance),totalResponseCompliance:Math.round(i.nfpa1710.totalResponseCompliance),nfpaCompliance:Math.round(i.nfpa1710.totalResponseCompliance),averageResponseTime:this.formatTime(i.averageResponseTime),totalIncidents:i.incidentVolume.total.toLocaleString(),fireIncidents:i.incidentVolume.fire.toLocaleString(),emsIncidents:i.incidentVolume.ems.toLocaleString(),rescueIncidents:i.incidentVolume.rescue.toLocaleString(),hazmatIncidents:i.incidentVolume.hazmat.toLocaleString(),responseStatus:this.getStatusIndicator(i.averageResponseTime,300),complianceStatus:this.getStatusIndicator(i.nfpa1710.totalResponseCompliance,90),compliant:i.nfpa1710.totalResponseCompliance>=90,year:new Date().getFullYear(),nextYear:new Date().getFullYear()+1,currentFY:`FY${new Date().getFullYear()}`,nextFY:`FY${new Date().getFullYear()+1}`,futureYear:new Date().getFullYear()+5,livesSaved:47,propertySaved:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(24e5),fireLoss:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(125e3),emsTransports:i.incidentVolume.ems,achievements:["Maintained 24/7 emergency response capability","Completed advanced rescue training","Upgraded communication systems"],futureInitiatives:["Implement new response protocols","Expand community education programs","Modernize equipment fleet"],majorIncidents:[{date:"January 15",description:"Structure fire - residential",outcome:"Fire contained, no injuries"},{date:"March 22",description:"Multi-vehicle accident",outcome:"All patients transported safely"}],trainingPrograms:[{name:"Advanced Life Support",hours:120,participants:25},{name:"Technical Rescue",hours:80,participants:15}],certifications:[{count:15,certification:"EMT-Paramedic"},{count:8,certification:"Fire Officer I"}],totalTrainingHours:2400,hoursPerPerson:80,conferenceAttendance:12,budgetUtilization:95,budgetStatus:"On Track",personnelCosts:75,equipmentCosts:15,operationsCosts:8,trainingCosts:2,costAvoidance:32e5,grantProgram:"SAFER Grant Program",requestAmount:85e4,projectTitle:"Emergency Response Enhancement Initiative",projectNeed:"Improved response times and enhanced emergency medical capability",serviceGap:"Extended response times in rural areas",expectedOutcomes:["Reduced response times by 2 minutes","Improved patient outcomes","Enhanced fire suppression capability"],beneficiaries:t.population,timeReduction:2,targetCompliance:95,trendIndicator:"â†—ï¸",recommendations:["Increase staffing during peak hours","Upgrade response equipment","Expand training programs"],operationalRecommendations:["Review deployment strategies","Optimize resource allocation"],trainingRecommendations:["Implement scenario-based training","Cross-train personnel"],resourceRecommendations:["Acquire new rescue equipment","Upgrade communication systems"],nextMonthFocus:"Focus on winter preparedness and equipment maintenance",schoolVisits:25,studentsEducated:1200,smokeAlarms:150,homeInspections:85,cprTraining:200}}static processConditionals(e,t){let i=e;const r=t.complianceMetrics.nfpa1710.totalResponseCompliance>=90;return i=i.replace(/{{#if compliant}}([\s\S]*?){{else}}([\s\S]*?){{\/if}}/g,r?"$1":"$2"),i=i.replace(/{{#if compliant}}([\s\S]*?){{\/if}}/g,r?"$1":""),i}static processLoops(e,t){let i=e;const s=this.generateRecommendations(t),r=s.filter(u=>u.type==="operational").map(u=>u.text),o=s.filter(u=>u.type==="training").map(u=>u.text),a=s.filter(u=>u.type==="resource").map(u=>u.text);i=this.processEachLoop(i,"recommendations",s.map(u=>u.text)),i=this.processEachLoop(i,"operationalRecommendations",r),i=this.processEachLoop(i,"trainingRecommendations",o),i=this.processEachLoop(i,"resourceRecommendations",a);const l=this.generateAchievements(t);i=this.processEachLoop(i,"achievements",l);const c=this.generateFutureInitiatives(t);return i=this.processEachLoop(i,"futureInitiatives",c),i}static processEachLoop(e,t,i){const s=new RegExp(`{{#each ${t}}}([\\s\\S]*?){{/each}}`,"g");return e.replace(s,(r,o)=>i.map(a=>o.replace(/{{this}}/g,a)).join(`
`))}static generateRecommendations(e){const t=[],i=e.complianceMetrics.nfpa1710;return i.dispatchCompliance<90&&(t.push({type:"operational",text:`Improve dispatch protocols to achieve 90% compliance (currently ${Math.round(i.dispatchCompliance)}%)`}),t.push({type:"training",text:"Implement dispatcher training program focusing on call processing efficiency"})),i.turnoutCompliance<90&&(t.push({type:"operational",text:`Reduce turnout times through station readiness improvements (currently ${Math.round(i.turnoutCompliance)}% compliant)`}),t.push({type:"training",text:"Conduct regular turnout time drills and equipment placement optimization"})),i.travelCompliance<90&&(t.push({type:"resource",text:`Consider strategic apparatus placement to improve travel times (currently ${Math.round(i.travelCompliance)}% compliant)`}),t.push({type:"operational",text:"Analyze response patterns for optimal unit deployment strategies"})),i.totalResponseCompliance>=95&&t.push({type:"operational",text:"Maintain current excellent performance through continued focus on NFPA 1710 standards"}),t.length===0&&(t.push({type:"operational",text:"Continue monitoring performance trends and maintain current operational excellence"}),t.push({type:"training",text:"Pursue advanced training opportunities to enhance service capabilities"})),t}static generateAchievements(e){const t=[],i=e.complianceMetrics.nfpa1710;return i.totalResponseCompliance>=95&&t.push("Exceeded NFPA 1710 response time standards with 95%+ compliance"),i.dispatchCompliance>=95&&t.push("Achieved excellent dispatch time performance (95%+ compliance)"),t.push(`Successfully responded to ${e.complianceMetrics.incidentVolume.total.toLocaleString()} emergency incidents`),e.complianceMetrics.incidentVolume.total>1e3&&t.push("Maintained high service levels despite significant incident volume"),t}static generateFutureInitiatives(e){const t=[];return e.complianceMetrics.nfpa1710.totalResponseCompliance<90&&t.push("Implement response time improvement initiative to achieve NFPA 1710 compliance"),t.push("Continue professional development and training programs"),t.push("Enhance community outreach and fire prevention education"),t.push("Evaluate technology upgrades to improve operational efficiency"),t}static processStatisticsSection(e,t){return typeof e=="object"&&e.type==="compliance_table"?this.generateComplianceTable(t.complianceMetrics):JSON.stringify(e,null,2)}static generateComplianceTable(e){const t=e.nfpa1710;return`
## NFPA 1710 Compliance Analysis

| Metric | Current Performance | NFPA Standard | Compliance | Status |
|--------|-------------------|---------------|------------|--------|
| **Dispatch Time** | ${Math.round(t.dispatchCompliance)}% â‰¤60 sec | 90% â‰¤60 sec | ${this.getComplianceStatus(t.dispatchCompliance)} | ${this.getStatusEmoji(t.dispatchCompliance,90)} |
| **Turnout Time** | ${Math.round(t.turnoutCompliance)}% â‰¤60 sec | 90% â‰¤60 sec | ${this.getComplianceStatus(t.turnoutCompliance)} | ${this.getStatusEmoji(t.turnoutCompliance,90)} |
| **Travel Time** | ${Math.round(t.travelCompliance)}% â‰¤240 sec | 90% â‰¤240 sec | ${this.getComplianceStatus(t.travelCompliance)} | ${this.getStatusEmoji(t.travelCompliance,90)} |
| **Total Response** | ${Math.round(t.totalResponseCompliance)}% â‰¤300 sec | 90% â‰¤300 sec | ${this.getComplianceStatus(t.totalResponseCompliance)} | ${this.getStatusEmoji(t.totalResponseCompliance,90)} |

### Overall NFPA 1710 Compliance: ${Math.round(t.totalResponseCompliance)}%

${t.totalResponseCompliance>=90?"âœ… **COMPLIANT** - Department meets NFPA 1710 standards":"âš ï¸ **NON-COMPLIANT** - Performance improvement needed"}
    `}static processChartSection(e,t){return typeof e=="object"?`[Chart: ${e.type}]

Chart data visualization would be generated here based on: ${e.data}`:String(e)}static processTableSection(e,t){return typeof e=="object"&&e.type==="incident_breakdown"?this.generateIncidentBreakdownTable(t.complianceMetrics.incidentVolume):JSON.stringify(e,null,2)}static generateIncidentBreakdownTable(e){const t=e.total;return`
## Incident Volume Analysis

| Incident Type | Count | Percentage | Trend |
|--------------|-------|------------|-------|
| **Fire Incidents** | ${e.fire.toLocaleString()} | ${Math.round(e.fire/t*100)}% | â†’ |
| **EMS Incidents** | ${e.ems.toLocaleString()} | ${Math.round(e.ems/t*100)}% | â†’ |
| **Rescue Incidents** | ${e.rescue.toLocaleString()} | ${Math.round(e.rescue/t*100)}% | â†’ |
| **HazMat Incidents** | ${e.hazmat.toLocaleString()} | ${Math.round(e.hazmat/t*100)}% | â†’ |
| **Other Incidents** | ${e.other.toLocaleString()} | ${Math.round(e.other/t*100)}% | â†’ |
| **TOTAL** | **${t.toLocaleString()}** | **100%** | |

### Key Observations:
- EMS incidents represent the largest category at ${Math.round(e.ems/t*100)}% of total calls
- Fire incidents account for ${Math.round(e.fire/t*100)}% of total incident volume
- Incident diversity reflects comprehensive emergency services provided to the community
    `}static formatTime(e){const t=Math.floor(e/60),i=Math.round(e%60);return t===0?`${i} seconds`:i===0?`${t} minute${t>1?"s":""}`:`${t}:${i.toString().padStart(2,"0")}`}static getStatusIndicator(e,t){return e<=t?"âœ… MEETS STANDARD":"âš ï¸ NEEDS IMPROVEMENT"}static getComplianceStatus(e){return e>=95?"Excellent":e>=90?"Compliant":e>=80?"Good":e>=70?"Fair":"Needs Improvement"}static getStatusEmoji(e,t){return e>=t+5?"ðŸŸ¢":e>=t?"ðŸŸ¡":"ðŸ”´"}static calculateWordCount(e){return e.reduce((t,i)=>{const s=i.processedContent.split(/\s+/).length;return t+s},0)}static calculateCompleteness(e){let t=0,i=0;return e.departmentInfo.name&&(t+=10),i+=10,e.departmentInfo.chief&&(t+=10),i+=10,e.responseTimeStats&&(t+=30),i+=30,e.complianceMetrics&&(t+=30),i+=30,e.incidentData.length>0&&(t+=20),i+=20,Math.round(t/i*100)}static assessDataQuality(e){const t=this.calculateCompleteness(e);return t>=95?"excellent":t>=85?"good":t>=70?"fair":"poor"}}const fP=({responseTimeStats:n,incidentData:e,onClose:t})=>{const[i,s]=T.useState(null),[r,o]=T.useState({name:"",chief:"",address:"",phone:"",email:"",website:"",jurisdiction:"",population:0,squareMiles:0,stations:0,apparatus:0,personnel:0}),[a,l]=T.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],description:""}),[c,u]=T.useState(0),[h,f]=T.useState(null),[p,m]=T.useState(!1),[y,g]=T.useState(!1);T.useEffect(()=>{if(a.startDate&&a.endDate){const D=new Date(a.startDate),R=new Date(a.endDate);if(D.getMonth()===R.getMonth()&&D.getFullYear()===R.getFullYear()){const F=D.toLocaleDateString("en-US",{month:"long",year:"numeric"});l(L=>({...L,description:F}))}else{const F=`${D.toLocaleDateString("en-US",{month:"short",year:"numeric"})} - ${R.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`;l(L=>({...L,description:F}))}}},[a.startDate,a.endDate]);const x=()=>{const D=e.length||1e3;return{nfpa1710:{dispatchCompliance:88,turnoutCompliance:92,travelCompliance:85,totalResponseCompliance:87,goal:90},averageResponseTime:n.mean.totalResponseTime||360,incidentVolume:{total:D,fire:Math.round(D*.15),ems:Math.round(D*.65),rescue:Math.round(D*.08),hazmat:Math.round(D*.02),other:Math.round(D*.1)},busyHours:["14:00-16:00","18:00-20:00"],topIncidentTypes:[{type:"Medical Emergency",count:Math.round(D*.45),percentage:45},{type:"Motor Vehicle Accident",count:Math.round(D*.2),percentage:20},{type:"Structure Fire",count:Math.round(D*.1),percentage:10},{type:"Alarm Activation",count:Math.round(D*.08),percentage:8},{type:"Hazmat Incident",count:Math.round(D*.02),percentage:2}]}},v=D=>{s(D),u(1)},b=async()=>{if(i){m(!0);try{const D={departmentInfo:r,reportPeriod:a,responseTimeStats:n,incidentData:e,complianceMetrics:x()},R=hP.generateReport(i,D);f(R),u(3)}catch(D){console.error("Error generating report:",D)}finally{m(!1)}}},S=()=>{if(!h)return;const D=h.sections.map($=>`# ${$.title}

${$.processedContent}

`).join(`---

`),R=new Blob([D],{type:"text/plain"}),F=URL.createObjectURL(R),L=document.createElement("a");L.href=F,L.download=`${i==null?void 0:i.name.replace(/\s+/g,"_")}_${a.description.replace(/\s+/g,"_")}.txt`,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(F)},C=D=>{switch(D){case"compliance":return d.jsx(yf,{});case"performance":return d.jsx(wc,{});case"grant":return d.jsx(lo,{});case"executive":return d.jsx(Nn,{});default:return d.jsx(Nn,{})}},_=D=>{switch(D){case"compliance":return"primary";case"performance":return"success";case"grant":return"warning";case"executive":return"info";default:return"secondary"}},O=["Select Template","Department Info","Report Period","Generate & Download"],w=()=>d.jsxs(N,{children:[d.jsx(M,{variant:"h6",gutterBottom:!0,children:"Choose Professional Report Template"}),d.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Select a report template designed for your specific audience and purpose."}),d.jsx(B,{container:!0,spacing:3,children:uP.map(D=>d.jsx(B,{item:!0,xs:12,md:6,children:d.jsxs(vn,{variant:"outlined",sx:{height:"100%",cursor:"pointer","&:hover":{elevation:4}},onClick:()=>v(D),children:[d.jsxs(wn,{children:[d.jsxs(N,{display:"flex",alignItems:"center",gap:1,mb:2,children:[C(D.category),d.jsx(M,{variant:"h6",component:"div",children:D.name}),d.jsx(Re,{label:D.category.charAt(0).toUpperCase()+D.category.slice(1),color:_(D.category),size:"small"})]}),d.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:2},children:D.description}),d.jsxs(N,{display:"flex",gap:1,mb:2,flexWrap:"wrap",children:[d.jsx(Re,{label:`${D.metadata.estimatedPages} pages`,size:"small",variant:"outlined"}),d.jsx(Re,{label:D.metadata.professionalLevel,size:"small",variant:"outlined"}),d.jsx(Re,{label:`${D.sections.length} sections`,size:"small",variant:"outlined"})]}),d.jsxs(M,{variant:"caption",color:"text.secondary",children:[d.jsx("strong",{children:"Target Audience:"})," ",D.targetAudience.join(", ")]})]}),d.jsx(Hh,{children:d.jsx(Te,{size:"small",variant:"contained",startIcon:d.jsx(Nn,{}),onClick:()=>v(D),children:"Select Template"})})]})},D.id))})]}),P=()=>d.jsxs(N,{children:[d.jsx(M,{variant:"h6",gutterBottom:!0,children:"Department Information"}),d.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Enter your department information for professional report headers and contact details."}),d.jsxs(B,{container:!0,spacing:3,children:[d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsx(_e,{fullWidth:!0,label:"Department Name",value:r.name,onChange:D=>o(R=>({...R,name:D.target.value})),placeholder:"e.g., Houston Fire Department",required:!0})}),d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsx(_e,{fullWidth:!0,label:"Fire Chief",value:r.chief,onChange:D=>o(R=>({...R,chief:D.target.value})),placeholder:"e.g., John Smith",required:!0})}),d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsx(_e,{fullWidth:!0,label:"Jurisdiction",value:r.jurisdiction,onChange:D=>o(R=>({...R,jurisdiction:D.target.value})),placeholder:"e.g., City of Houston, TX",required:!0})}),d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsx(_e,{fullWidth:!0,label:"Population Served",type:"number",value:r.population||"",onChange:D=>o(R=>({...R,population:parseInt(D.target.value)||0})),placeholder:"e.g., 50000"})}),d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsx(_e,{fullWidth:!0,label:"Service Area (sq. miles)",type:"number",value:r.squareMiles||"",onChange:D=>o(R=>({...R,squareMiles:parseInt(D.target.value)||0})),placeholder:"e.g., 125"})}),d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsx(_e,{fullWidth:!0,label:"Number of Stations",type:"number",value:r.stations||"",onChange:D=>o(R=>({...R,stations:parseInt(D.target.value)||0})),placeholder:"e.g., 8"})}),d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsx(_e,{fullWidth:!0,label:"Apparatus Count",type:"number",value:r.apparatus||"",onChange:D=>o(R=>({...R,apparatus:parseInt(D.target.value)||0})),placeholder:"e.g., 15"})}),d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsx(_e,{fullWidth:!0,label:"Personnel Count",type:"number",value:r.personnel||"",onChange:D=>o(R=>({...R,personnel:parseInt(D.target.value)||0})),placeholder:"e.g., 120"})}),d.jsx(B,{item:!0,xs:12,children:d.jsx(_e,{fullWidth:!0,label:"Department Address",value:r.address,onChange:D=>o(R=>({...R,address:D.target.value})),placeholder:"e.g., 123 Main Street, Houston, TX 77001"})}),d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsx(_e,{fullWidth:!0,label:"Phone Number",value:r.phone,onChange:D=>o(R=>({...R,phone:D.target.value})),placeholder:"e.g., (555) 123-4567"})}),d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsx(_e,{fullWidth:!0,label:"Email Address",type:"email",value:r.email,onChange:D=>o(R=>({...R,email:D.target.value})),placeholder:"e.g., chief@houstonfiredept.gov"})})]})]}),j=()=>d.jsxs(N,{children:[d.jsx(M,{variant:"h6",gutterBottom:!0,children:"Report Period"}),d.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Define the time period covered by this report."}),d.jsxs(B,{container:!0,spacing:3,children:[d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsx(_e,{fullWidth:!0,label:"Start Date",type:"date",value:a.startDate,onChange:D=>l(R=>({...R,startDate:D.target.value})),InputLabelProps:{shrink:!0},required:!0})}),d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsx(_e,{fullWidth:!0,label:"End Date",type:"date",value:a.endDate,onChange:D=>l(R=>({...R,endDate:D.target.value})),InputLabelProps:{shrink:!0},required:!0})}),d.jsx(B,{item:!0,xs:12,children:d.jsx(_e,{fullWidth:!0,label:"Report Period Description",value:a.description,onChange:D=>l(R=>({...R,description:D.target.value})),placeholder:"e.g., January 2025, Q4 2024, 2024 Annual Report",helperText:"This will appear in report headers and titles"})})]}),d.jsx($t,{severity:"info",sx:{mt:2},children:d.jsxs(M,{variant:"body2",children:[d.jsx("strong",{children:"Note:"})," The report period description is automatically generated based on your selected dates, but you can customize it for specific reporting needs."]})})]}),A=()=>d.jsxs(N,{children:[d.jsx(M,{variant:"h6",gutterBottom:!0,children:"Generate Professional Report"}),h?d.jsxs(N,{children:[d.jsx($t,{severity:"success",sx:{mb:3},children:d.jsxs(M,{variant:"body2",children:[d.jsx("strong",{children:"Report Generated Successfully!"})," Your professional report is ready for download."]})}),d.jsx(vn,{variant:"outlined",sx:{mb:3},children:d.jsxs(wn,{children:[d.jsx(M,{variant:"subtitle1",gutterBottom:!0,children:d.jsx("strong",{children:"Report Summary"})}),d.jsxs(B,{container:!0,spacing:2,children:[d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsxs(M,{variant:"body2",children:[d.jsx("strong",{children:"Pages:"})," ",h.metadata.totalPages]})}),d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsxs(M,{variant:"body2",children:[d.jsx("strong",{children:"Word Count:"})," ",h.metadata.wordCount.toLocaleString()]})}),d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsxs(M,{variant:"body2",children:[d.jsx("strong",{children:"Data Quality:"})," ",h.metadata.dataQuality]})}),d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsxs(M,{variant:"body2",children:[d.jsx("strong",{children:"Completeness:"})," ",h.metadata.completeness,"%"]})})]})]})}),d.jsxs(ac,{expanded:y,onChange:()=>g(!y),children:[d.jsx(lc,{expandIcon:d.jsx(cc,{}),children:d.jsxs(M,{variant:"subtitle1",children:[d.jsx(Tf,{sx:{mr:1,verticalAlign:"middle"}}),"Report Preview"]})}),d.jsx(dc,{children:d.jsx(N,{sx:{maxHeight:400,overflow:"auto",bgcolor:"grey.50",p:2,borderRadius:1},children:h.sections.map((D,R)=>d.jsxs(N,{sx:{mb:3},children:[d.jsx(M,{variant:"h6",gutterBottom:!0,children:D.title}),d.jsxs(M,{variant:"body2",component:"div",sx:{whiteSpace:"pre-line",fontFamily:"monospace",fontSize:"0.8rem"},children:[D.processedContent.substring(0,500),D.processedContent.length>500&&"..."]}),R<h.sections.length-1&&d.jsx(Bt,{sx:{mt:2}})]},D.id))})})]}),d.jsxs(N,{display:"flex",gap:2,mt:3,children:[d.jsx(Te,{variant:"contained",size:"large",startIcon:d.jsx(bc,{}),onClick:S,children:"Download Report"}),d.jsx(Te,{variant:"outlined",onClick:()=>{f(null),u(0),s(null)},children:"Generate Another Report"})]})]}):d.jsxs(N,{children:[d.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Ready to generate your professional report. Review the settings below and click generate."}),d.jsx(vn,{variant:"outlined",sx:{mb:3},children:d.jsxs(wn,{children:[d.jsx(M,{variant:"subtitle1",gutterBottom:!0,children:d.jsx("strong",{children:"Report Configuration"})}),d.jsxs(B,{container:!0,spacing:2,children:[d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsxs(M,{variant:"body2",children:[d.jsx("strong",{children:"Template:"})," ",i==null?void 0:i.name]})}),d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsxs(M,{variant:"body2",children:[d.jsx("strong",{children:"Department:"})," ",r.name]})}),d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsxs(M,{variant:"body2",children:[d.jsx("strong",{children:"Period:"})," ",a.description]})}),d.jsx(B,{item:!0,xs:12,sm:6,children:d.jsxs(M,{variant:"body2",children:[d.jsx("strong",{children:"Data Points:"})," ",e.length.toLocaleString()," incidents"]})})]})]})}),d.jsxs(N,{display:"flex",gap:2,children:[d.jsx(Te,{variant:"contained",size:"large",startIcon:d.jsx(Nn,{}),onClick:b,disabled:p,children:p?"Generating...":"Generate Report"}),p&&d.jsx(cf,{sx:{flexGrow:1,mt:1}})]})]})]}),k=()=>{switch(c){case 0:return w();case 1:return P();case 2:return j();case 3:return A();default:return null}};return d.jsxs(oo,{open:!0,onClose:t,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{minHeight:"80vh"}},children:[d.jsx(uc,{children:d.jsxs(N,{display:"flex",alignItems:"center",gap:1,children:[d.jsx(Nn,{}),d.jsx(M,{variant:"h5",children:"Professional Report Generator"})]})}),d.jsxs(ao,{children:[d.jsx(N,{sx:{mb:4},children:d.jsx($h,{activeStep:c,alternativeLabel:!0,children:O.map(D=>d.jsx(Vh,{children:d.jsx(Wh,{children:D})},D))})}),k()]}),d.jsxs(ro,{children:[c>0&&c<3&&d.jsx(Te,{onClick:()=>u(c-1),children:"Back"}),c===1&&d.jsx(Te,{variant:"contained",onClick:()=>u(2),disabled:!r.name||!r.chief,children:"Next"}),c===2&&d.jsx(Te,{variant:"contained",onClick:()=>u(3),disabled:!a.startDate||!a.endDate,children:"Next"}),d.jsx(Te,{onClick:t,children:"Close"})]})]})},wP=({initialData:n})=>{const e=en(),{rawData:t,ui:i,calculatedMetrics:s}=Ie(v=>v.analyzer),[r,o]=T.useState("none");T.useEffect(()=>{document.title="FireEMS Response Time Analyzer"},[]),T.useEffect(()=>{if(n&&n.length>0){console.log("ðŸ” INITIAL DATA DEBUG - Data received from formatter:"),console.log("Number of records:",n.length),console.log("First record field names:",Object.keys(n[0])),console.log("First record sample:",n[0]),console.log("First record incidentTime:",n[0].incidentTime),console.log("First record Call Receive Time:",n[0]["Call Receive Time"]),console.log("ðŸ” END INITIAL DATA DEBUG"),l(n,"formatter");return}const v=sessionStorage.getItem("fireEmsExportedData");if(v)try{const b=JSON.parse(v);if(console.log("Session data found:",b),b.data&&Array.isArray(b.data)&&b.data.length>0){console.log("ANALYZER DEBUG - Raw session data:",v),console.log("ANALYZER DEBUG - Parsed session data:",b),console.log("Sample record from session:",b.data[0]),console.log("ANALYZER DATA CHECK - All field names in first record:"),console.log(Object.keys(b.data[0]));const S=b.data[0],C=S.hasOwnProperty("incidentId")&&S.hasOwnProperty("incidentDate"),_=S.hasOwnProperty("Incident ID")&&S.hasOwnProperty("Incident Date");console.log("ðŸ” DATA FORMAT DETECTION:"),console.log("ðŸ” Has normalized fields (incidentId, incidentDate):",C),console.log("ðŸ” Has original fields (Incident ID, Incident Date):",_),console.log("ðŸ” Sample incidentTime value:",S.incidentTime),console.log("ðŸ” Sample incidentTime type:",typeof S.incidentTime),console.log('ðŸ” Sample "Call Received Date/Time" value:',S["Call Received Date/Time"]),console.log('ðŸ” Sample "Call Received Time" value (legacy):',S["Call Received Time"]),console.log("ðŸ” CHATGPT DEBUG - Full first record before processing:",JSON.stringify(S,null,2));let O;C&&!_?(console.log("âœ… USING PRE-NORMALIZED DATA FROM DATATRANSFORMER - SKIPPING FIELD NORMALIZATION"),O=b.data):(console.log("ðŸ”§ APPLYING FIELD NORMALIZATION FOR RAW DATA"),O=a(b.data)),l(O,"session");return}else console.error("Invalid data structure in session storage",b)}catch(b){console.error("Error parsing session data",b)}else console.log("No data found in session storage")},[n]);const a=v=>(console.log("ðŸ“ NORMALIZE FIELD NAMES - Function called with",v.length,"records"),v.map((b,S)=>{const C={},_={"Incident ID":"incidentId","Incident Date":"incidentDate","Call Received Date/Time":"incidentTime","Call Receive Time":"incidentTime","Call Received Time":"incidentTime","Incident Time":"incidentTime","Dispatch Time":"dispatchTime","En Route Time":"enRouteTime","Arrival Time":"arrivalTime","Clear Time":"clearTime","Incident Type":"incidentType",Latitude:"latitude",Longitude:"longitude",Address:"address","call receive time":"incidentTime","incident time":"incidentTime","dispatch time":"dispatchTime","turnout, time":"enRouteTime","travel time":"travelTime","total response, time":"totalResponseTime","incident type":"incidentType",type:"incidentType",location:"location",Location:"location",unit:"unit",Unit:"unit","turnout time":"enRouteTime","response time":"totalResponseTime","total response time":"totalResponseTime","en route time":"enRouteTime","enroute time":"enRouteTime","arrival time":"arrivalTime","clear time":"clearTime","incident id":"incidentId","incident date":"incidentDate",date:"incidentDate",time:"incidentTime"},O=["incidentTime","incidentId","incidentDate"];O.forEach(P=>{const j=Object.entries(_).filter(([A,k])=>k===P).map(([A,k])=>A);for(const A of j)if(b[A]!==void 0&&b[A]!==null&&b[A]!==""){C[P]=b[A],console.log(`PRIORITY_FIELD_MAPPING: "${A}" -> "${P}" = "${b[A]}"`);break}!C[P]&&b[P]!==void 0&&b[P]!==null&&b[P]!==""&&(C[P]=b[P],console.log(`PRIORITY_FIELD_MAPPING: "${P}" (already camelCase) = "${b[P]}"`))}),Object.entries(_).forEach(([P,j])=>{O.includes(j)&&C[j]!==void 0||(b[P]!==void 0&&b[P]!==null&&b[P]!==""?(C[j]=b[P],console.log(`FIELD_MAPPING: "${P}" -> "${j}" = "${b[P]}"`)):b[j]!==void 0&&b[j]!==null&&b[j]!==""&&(C[j]=b[j],console.log(`FIELD_MAPPING: "${j}" (already camelCase) = "${b[j]}"`)))}),Object.entries(b).forEach(([P,j])=>{if(!(Object.values(_).includes(P)||Object.keys(_).includes(P)))if(P.includes(" ")){const A=P.toLowerCase().split(" ").map((k,D)=>D===0?k:k.charAt(0).toUpperCase()+k.slice(1)).join("");C[A]=j}else C[P]=j}),console.log("=== FIELD MAPPING DEBUG FOR RECORD",S,"==="),console.log("ORIGINAL_FIELD_NAMES:",Object.keys(b)),console.log("ORIGINAL_RECORD_SAMPLE:",b),console.log("NORMALIZED_FIELD_NAMES:",Object.keys(C)),console.log("NORMALIZED_RECORD_SAMPLE:",C),console.log("=== END FIELD MAPPING DEBUG ==="),console.log("=== INCIDENT TIME DEBUG ==="),console.log('Original "Call Receive Time":',b["Call Receive Time"]),console.log('Original "call receive time":',b["call receive time"]),console.log('Original "Incident Time":',b["Incident Time"]),console.log('Original "incident time":',b["incident time"]),console.log("Normalized incidentTime:",C.incidentTime),console.log("=== END INCIDENT TIME DEBUG ===");const w=Object.keys(b).filter(P=>P.toLowerCase().includes("location")||P.toLowerCase().includes("lat")||P.toLowerCase().includes("lon")||P.toLowerCase().includes("coordinate"));if(console.log("LOCATION_RELATED_FIELDS_FOUND:",w),C.location&&typeof C.location=="string"){const P=C.location.split(",");if(P.length===2){const j=parseFloat(P[0].trim()),A=parseFloat(P[1].trim());!isNaN(j)&&!isNaN(A)?(C.latitude=j,C.longitude=A,console.log(`Parsed location "${C.location}" -> lat: ${j}, lng: ${A}`)):console.warn(`Could not parse location: ${C.location}`)}}return C})),l=(v,b)=>{e(uh());try{console.log("ðŸ”„ LOAD DATA - Starting field normalization"),console.log("Raw data before normalization (first record):",v[0]),console.log("Raw data field names:",Object.keys(v[0]));const S=a(v);S.length>0&&(console.log("ðŸ”„ LOAD DATA - After normalization (first record):",S[0]),console.log("ðŸ”„ LOAD DATA - Normalized field names:",Object.keys(S[0])),console.log("ðŸ”„ LOAD DATA - incidentTime value:",S[0].incidentTime)),e(hh(S));const C=Cf(S);e(fh(C)),o(b)}catch(S){const C=S instanceof Error?S.message:"Unknown error loading data";e(ph(C))}},c=(v,b)=>{e(mh(b))},[u,h]=T.useState(!1),[f,p]=T.useState(!1),[m,y]=T.useState(!1),[g,x]=T.useState(!1);return t.isLoading?d.jsxs(N,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:[d.jsx(so,{size:60}),d.jsx(M,{variant:"h6",sx:{ml:2},children:"Loading incident data..."})]}):t.error?d.jsxs(N,{sx:{p:3},children:[d.jsxs($t,{severity:"error",sx:{mb:2},children:["Error loading data: ",t.error]}),d.jsx(Te,{variant:"contained",color:"primary",onClick:()=>window.location.reload(),children:"Reload Page"})]}):t.incidents.length?d.jsxs(N,{sx:{p:3},children:[d.jsxs(Ve,{sx:{p:3,mb:3},children:[d.jsx(M,{variant:"h5",gutterBottom:!0,children:"Response Time Analyzer"}),d.jsxs(N,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[d.jsxs(M,{variant:"subtitle1",children:["Analyzing ",t.incidents.length," incidents",r==="formatter"&&" (from Data Formatter)",r==="session"&&" (from previous session)"]}),d.jsxs(N,{children:[d.jsx(Te,{variant:"outlined",color:"secondary",sx:{mr:1},onClick:()=>{h(!u),u||p(!1)},children:u?"Hide Filters":"Show Filters"}),d.jsx(Te,{variant:"outlined",color:"secondary",sx:{mr:1},onClick:()=>{p(!f),f||h(!1)},children:f?"Hide Export":"Export Results"}),d.jsx(Te,{variant:"contained",color:"primary",onClick:()=>y(!0),disabled:!t.incidents||t.incidents.length===0,children:"Generate PDF Report"}),d.jsx(Te,{variant:"contained",color:"secondary",onClick:()=>x(!0),disabled:!t.incidents||t.incidents.length===0,sx:{ml:1},children:"Professional Reports"}),d.jsx(Te,{variant:"outlined",color:"primary",sx:{ml:1},children:"Load New Data"})]})]}),d.jsx($t,{severity:"success",sx:{mb:3},children:"Data loaded successfully. Use the tabs below to explore different views."})]}),u&&d.jsx(Ve,{sx:{p:2,mb:3},children:d.jsx(L0,{})}),f&&d.jsx(Ve,{sx:{p:2,mb:3},children:d.jsx(oP,{})}),d.jsx(N,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:d.jsxs(Fh,{value:i.selectedView,onChange:c,"aria-label":"analyzer view tabs",children:[d.jsx(ii,{label:"Dashboard",value:"dashboard"}),d.jsx(ii,{label:"Timeline",value:"timeline"}),d.jsx(ii,{label:"Map",value:"map"}),d.jsx(ii,{label:"Incidents",value:"table"}),d.jsx(ii,{label:"Statistics",value:"statistics"})]})}),d.jsxs(N,{children:[i.selectedView==="dashboard"&&d.jsx(Nf,{}),i.selectedView==="timeline"&&d.jsxs(N,{children:[d.jsx(Bf,{}),d.jsx(Pc,{})]}),i.selectedView==="map"&&d.jsx(Dc,{}),i.selectedView==="table"&&d.jsx(Cc,{}),i.selectedView==="statistics"&&d.jsx(Sc,{})]}),d.jsx(Xu,{open:m,onClose:()=>y(!1),incidents:t.incidents||[],statistics:s.responseTimeStats||{mean:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},median:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},ninetiethPercentile:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},standardDeviation:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},min:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},max:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},count:0},dateRange:{start:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}}),g&&d.jsx(fP,{responseTimeStats:s.responseTimeStats||{mean:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},median:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},ninetiethPercentile:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},standardDeviation:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},min:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},max:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},count:0},incidentData:t.incidents||[],onClose:()=>x(!1)})]}):d.jsx(N,{sx:{p:3},children:d.jsxs(Ve,{sx:{p:3},children:[d.jsx(M,{variant:"h5",gutterBottom:!0,children:"Response Time Analyzer"}),d.jsx($t,{severity:"info",sx:{mb:3},children:"No incident data loaded. Please use the Data Formatter to send incident data to this tool."}),d.jsx(M,{variant:"body1",paragraph:!0,children:"The Response Time Analyzer calculates and visualizes response time metrics for fire and EMS incidents. You can send data to this tool from the Data Formatter's export screen."}),d.jsx(Te,{variant:"contained",color:"primary",onClick:()=>window.location.href="/data-formatter",children:"Go to Data Formatter"})]})})};export{wP as default};
