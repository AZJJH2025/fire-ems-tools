var ot=Object.defineProperty;var at=(i,a,l)=>a in i?ot(i,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[a]=l;var ce=(i,a,l)=>at(i,typeof a!="symbol"?a+"":a,l);import{e as de,j as e,r as D,t as n,v as t,b7 as ie,G as y,a9 as Q,cN as st,aM as ct,a$ as lt,aG as ne,aH as oe,bE as Se,V as w,a6 as Y,aI as ae,cO as Ce,aW as Ie,P as N,H as K,I as X,au as se,at as L,b1 as W,b2 as $,ch as Je,a0 as je,Z as re,L as Z,cP as ee,K as J,ab as fe,w as dt,bB as pt,y as xt,z as ut,A as ht,C as ye,E as te,F as mt,aV as ft,D as et,aS as gt,aC as jt,aT as yt,bW as bt,aE as vt,W as Ze,as as St,aa as ve,a4 as tt,a1 as le,a5 as Ct,a7 as it,a8 as It,ac as Rt,Q as Ft,R as q,c1 as kt,c5 as Pt,be as Dt,bf as be,b3 as Ot}from"./index-B6XOhqXj.js";import{S as P,A as wt,a as Et}from"./A11yProvider-D9UsVWkS.js";import{T as At,u as Tt,I as Mt}from"./useAIService-CXKdBzk3.js";import{a as he}from"./jspdf.plugin.autotable-CtA5BUKo.js";import{E as rt,M as zt,D as Lt}from"./Menu-BNXM1W0z.js";import{u as Wt,F as $t,a as Bt}from"./FullscreenExit-DXz_yWQz.js";const Gt=de(e.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"})),qt=de(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5.97 4.06L14.09 6l1.41 1.41L16.91 6l1.06 1.06-1.41 1.41 1.41 1.41-1.06 1.06-1.41-1.4-1.41 1.41-1.06-1.06 1.41-1.41zm-6.78.66h5v1.5h-5zM11.5 16h-2v2H8v-2H6v-1.5h2v-2h1.5v2h2zm6.5 1.25h-5v-1.5h5zm0-2.5h-5v-1.5h5z"})),Re=de(e.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"})),Nt=de([e.jsx("circle",{cx:"12",cy:"19",r:"2"},"0"),e.jsx("path",{d:"M10 3h4v12h-4z"},"1")]),Fe=de(e.jsx("path",{d:"M5 13.18v4L12 21l7-3.82v-4L12 17zM12 3 1 9l11 6 9-4.91V17h2V9z"})),Ht=({mode:i="assessment",onAssessmentChange:a,onScoreChange:l,onClassificationChange:p})=>{const[d,C]=D.useState({fireDepartment:{staffing:0,equipment:0,training:0,distribution:0},waterSupply:{capacity:0,distribution:0,alternative:0},communications:{dispatch:0,alerting:0},communityRiskReduction:{prevention:0,education:0,investigation:0}}),[k,h]=D.useState("fire-department"),[E,z]=D.useState(!0);D.useEffect(()=>{a(d),E&&g()},[d,E]);const g=()=>{const r=Object.values(d.fireDepartment).reduce((A,M)=>A+M,0),o=Object.values(d.waterSupply).reduce((A,M)=>A+M,0),u=Object.values(d.communications).reduce((A,M)=>A+M,0),f=Object.values(d.communityRiskReduction).reduce((A,M)=>A+M,0),S=r+o+u+f,v=j(S);l(S),p(v)},j=r=>{const o=r/105.5*100;return o>=90?1:o>=80?2:o>=70?3:o>=60?4:o>=50?5:o>=40?6:o>=30?7:o>=20?8:o>=10?9:10},b=r=>(o,u)=>{h(u?r:"")},m=(r,o)=>{C(u=>({...u,fireDepartment:{...u.fireDepartment,[r]:o}}))},F=(r,o)=>{C(u=>({...u,waterSupply:{...u.waterSupply,[r]:o}}))},I=(r,o)=>{C(u=>({...u,communications:{...u.communications,[r]:o}}))},O=(r,o)=>{C(u=>({...u,communityRiskReduction:{...u.communityRiskReduction,[r]:o}}))},x=()=>{C({fireDepartment:{staffing:0,equipment:0,training:0,distribution:0},waterSupply:{capacity:0,distribution:0,alternative:0},communications:{dispatch:0,alerting:0},communityRiskReduction:{prevention:0,education:0,investigation:0}})},R=()=>Object.values(d.fireDepartment).reduce((r,o)=>r+o,0)+Object.values(d.waterSupply).reduce((r,o)=>r+o,0)+Object.values(d.communications).reduce((r,o)=>r+o,0)+Object.values(d.communityRiskReduction).reduce((r,o)=>r+o,0);return e.jsxs(n,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(n,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"ISO Assessment Input"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"Enter your fire department's capabilities to calculate ISO classification"}),e.jsxs(n,{sx:{mt:2},children:[e.jsxs(t,{variant:"body2",gutterBottom:!0,children:["Current Score: ",R().toFixed(1)," / 105.5"]}),e.jsx(ie,{variant:"determinate",value:R()/105.5*100,sx:{height:6,borderRadius:3}})]})]}),e.jsxs(n,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:[e.jsxs(y,{container:!0,spacing:1,children:[e.jsx(y,{size:{xs:6},children:e.jsx(Q,{variant:"outlined",size:"small",startIcon:e.jsx(qt,{}),onClick:g,disabled:E,fullWidth:!0,children:"Calculate"})}),e.jsx(y,{size:{xs:6},children:e.jsx(Q,{variant:"outlined",size:"small",startIcon:e.jsx(st,{}),onClick:x,fullWidth:!0,children:"Reset"})})]}),e.jsx(ct,{control:e.jsx(lt,{checked:E,onChange:r=>z(r.target.checked),size:"small"}),label:"Auto-calculate",sx:{mt:1}})]}),e.jsxs(n,{sx:{flexGrow:1,overflow:"auto"},children:[e.jsxs(ne,{expanded:k==="fire-department",onChange:b("fire-department"),children:[e.jsx(oe,{expandIcon:e.jsx(Y,{}),children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(Se,{sx:{color:"#ff5722"}}),e.jsxs(n,{sx:{flexGrow:1},children:[e.jsx(t,{variant:"subtitle1",children:"Fire Department"}),e.jsxs(t,{variant:"caption",color:"text.secondary",children:[Object.values(d.fireDepartment).reduce((r,o)=>r+o,0).toFixed(1)," / 50 points"]})]}),e.jsx(w,{label:"50 pts",size:"small",sx:{bgcolor:"#ff5722",color:"white"}})]})}),e.jsx(ae,{children:e.jsxs(n,{sx:{space:2},children:[e.jsxs(n,{sx:{mb:3},children:[e.jsx(t,{variant:"body2",gutterBottom:!0,children:"Staffing & Personnel Deployment (12.5 pts)"}),e.jsx(P,{value:d.fireDepartment.staffing,onChange:(r,o)=>m("staffing",o),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Personnel availability, response times, staffing levels"})]}),e.jsxs(n,{sx:{mb:3},children:[e.jsx(t,{variant:"body2",gutterBottom:!0,children:"Equipment & Apparatus (12.5 pts)"}),e.jsx(P,{value:d.fireDepartment.equipment,onChange:(r,o)=>m("equipment",o),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"NFPA 1901 compliance, maintenance, testing"})]}),e.jsxs(n,{sx:{mb:3},children:[e.jsx(t,{variant:"body2",gutterBottom:!0,children:"Training Programs (12.5 pts)"}),e.jsx(P,{value:d.fireDepartment.training,onChange:(r,o)=>m("training",o),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"20+ hours/month structure fire training = 2.25 pts"})]}),e.jsxs(n,{sx:{mb:3},children:[e.jsx(t,{variant:"body2",gutterBottom:!0,children:"Station Distribution & Coverage (12.5 pts)"}),e.jsx(P,{value:d.fireDepartment.distribution,onChange:(r,o)=>m("distribution",o),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Station locations, response coverage, mutual aid"})]})]})})]}),e.jsxs(ne,{expanded:k==="water-supply",onChange:b("water-supply"),children:[e.jsx(oe,{expandIcon:e.jsx(Y,{}),children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(Ce,{sx:{color:"#2196f3"}}),e.jsxs(n,{sx:{flexGrow:1},children:[e.jsx(t,{variant:"subtitle1",children:"Water Supply"}),e.jsxs(t,{variant:"caption",color:"text.secondary",children:[Object.values(d.waterSupply).reduce((r,o)=>r+o,0).toFixed(1)," / 40 points"]})]}),e.jsx(w,{label:"40 pts",size:"small",sx:{bgcolor:"#2196f3",color:"white"}})]})}),e.jsx(ae,{children:e.jsxs(n,{sx:{space:2},children:[e.jsxs(n,{sx:{mb:3},children:[e.jsx(t,{variant:"body2",gutterBottom:!0,children:"Water Capacity & Flow (20 pts)"}),e.jsx(P,{value:d.waterSupply.capacity,onChange:(r,o)=>F("capacity",o),min:0,max:20,step:.1,valueLabelDisplay:"auto",sx:{color:"#2196f3"}}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Minimum 250 GPM for 2 hours (Class 8B: 200 GPM for 20 min)"})]}),e.jsxs(n,{sx:{mb:3},children:[e.jsx(t,{variant:"body2",gutterBottom:!0,children:"Hydrant Distribution (15 pts)"}),e.jsx(P,{value:d.waterSupply.distribution,onChange:(r,o)=>F("distribution",o),min:0,max:15,step:.1,valueLabelDisplay:"auto",sx:{color:"#2196f3"}}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Hydrant spacing max 1,000 feet from incidents"})]}),e.jsxs(n,{sx:{mb:3},children:[e.jsx(t,{variant:"body2",gutterBottom:!0,children:"Alternative Water Supply (5 pts)"}),e.jsx(P,{value:d.waterSupply.alternative,onChange:(r,o)=>F("alternative",o),min:0,max:5,step:.1,valueLabelDisplay:"auto",sx:{color:"#2196f3"}}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Dry hydrants, tanker shuttles, rural supplies"})]})]})})]}),e.jsxs(ne,{expanded:k==="communications",onChange:b("communications"),children:[e.jsx(oe,{expandIcon:e.jsx(Y,{}),children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(Re,{sx:{color:"#9c27b0"}}),e.jsxs(n,{sx:{flexGrow:1},children:[e.jsx(t,{variant:"subtitle1",children:"Communications"}),e.jsxs(t,{variant:"caption",color:"text.secondary",children:[Object.values(d.communications).reduce((r,o)=>r+o,0).toFixed(1)," / 10 points"]})]}),e.jsx(w,{label:"10 pts",size:"small",sx:{bgcolor:"#9c27b0",color:"white"}})]})}),e.jsx(ae,{children:e.jsxs(n,{sx:{space:2},children:[e.jsxs(n,{sx:{mb:3},children:[e.jsx(t,{variant:"body2",gutterBottom:!0,children:"911 Dispatch Center (7 pts)"}),e.jsx(P,{value:d.communications.dispatch,onChange:(r,o)=>I("dispatch",o),min:0,max:7,step:.1,valueLabelDisplay:"auto",sx:{color:"#9c27b0"}}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Call processing, dispatch times, capabilities"})]}),e.jsxs(n,{sx:{mb:3},children:[e.jsx(t,{variant:"body2",gutterBottom:!0,children:"Alerting Systems (3 pts)"}),e.jsx(P,{value:d.communications.alerting,onChange:(r,o)=>I("alerting",o),min:0,max:3,step:.1,valueLabelDisplay:"auto",sx:{color:"#9c27b0"}}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Radio systems, pagers, notification equipment"})]})]})})]}),e.jsxs(ne,{expanded:k==="community-risk",onChange:b("community-risk"),children:[e.jsx(oe,{expandIcon:e.jsx(Y,{}),children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(Fe,{sx:{color:"#4caf50"}}),e.jsxs(n,{sx:{flexGrow:1},children:[e.jsx(t,{variant:"subtitle1",children:"Community Risk Reduction"}),e.jsxs(t,{variant:"caption",color:"text.secondary",children:[Object.values(d.communityRiskReduction).reduce((r,o)=>r+o,0).toFixed(1)," / 5.5 points"]})]}),e.jsx(w,{label:"BONUS",size:"small",sx:{bgcolor:"#4caf50",color:"white"}})]})}),e.jsx(ae,{children:e.jsxs(n,{sx:{space:2},children:[e.jsxs(n,{sx:{mb:3},children:[e.jsx(t,{variant:"body2",gutterBottom:!0,children:"Fire Prevention (2.5 pts)"}),e.jsx(P,{value:d.communityRiskReduction.prevention,onChange:(r,o)=>O("prevention",o),min:0,max:2.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#4caf50"}}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Code enforcement, inspections, prevention programs"})]}),e.jsxs(n,{sx:{mb:3},children:[e.jsx(t,{variant:"body2",gutterBottom:!0,children:"Public Education (2 pts)"}),e.jsx(P,{value:d.communityRiskReduction.education,onChange:(r,o)=>O("education",o),min:0,max:2,step:.1,valueLabelDisplay:"auto",sx:{color:"#4caf50"}}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Community outreach, education programs"})]}),e.jsxs(n,{sx:{mb:3},children:[e.jsx(t,{variant:"body2",gutterBottom:!0,children:"Fire Investigation (1 pt)"}),e.jsx(P,{value:d.communityRiskReduction.investigation,onChange:(r,o)=>O("investigation",o),min:0,max:1,step:.1,valueLabelDisplay:"auto",sx:{color:"#4caf50"}}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Fire investigation capabilities and training"})]})]})})]})]})]})},Ut=({assessment:i,currentScore:a,classification:l,sidebarOpen:p,isMobile:d})=>{var o,u,f,S,v,A,M,T,G,pe,_,xe,ke,Pe,De,Oe,we,Ee,Ae,Te,Me,ze,Le,We,$e,Be,Ge,qe,Ne,He,Ue,_e,Ve,Ye,Ke,Xe,Qe;const C=()=>{if(!i)return 0;const{staffing:s,equipment:c,training:B,distribution:H}=i.fireDepartment,U=Math.min(s,12.5),V=Math.min(c,12.5),ge=Math.min(B,12.5),ue=Math.min(H,12.5);return U+V+ge+ue},k=()=>{if(!i)return 0;const{capacity:s,distribution:c,alternative:B}=i.waterSupply,H=Math.min(s,20),U=Math.min(c,15),V=Math.min(B,5);return H+U+V},h=()=>{if(!i)return 0;const{dispatch:s,alerting:c}=i.communications,B=Math.min(s,7),H=Math.min(c,3);return B+H},E=()=>{if(!i)return 0;const{prevention:s,education:c,investigation:B}=i.communityRiskReduction,H=Math.min(s,2.5),U=Math.min(c,2),V=Math.min(B,1);return H+U+V},z=()=>{const s=C(),c=k(),B=h(),H=E();let U=s+c+B;const V=s/50,ge=c/40,ue=Math.abs(V-ge);if(ue>.1){const nt=ue*10;U=Math.max(0,U-nt)}return U+H},g=s=>{const c=s/105.5*100;return c>=90?1:c>=80?2:c>=70?3:c>=60?4:c>=50?5:c>=40?6:c>=30?7:c>=20?8:c>=10?9:10},j=(s,c)=>{const B=s/c*100;return B>=90?{level:"EXCELLENT",color:"#1b5e20",bg:"#e8f5e8",icon:e.jsx(re,{}),description:"Top 10% of departments"}:B>=75?{level:"GOOD",color:"#2e7d32",bg:"#f1f8e9",icon:e.jsx(re,{}),description:"Above average performance"}:B>=60?{level:"NEEDS IMPROVEMENT",color:"#ff8f00",bg:"#fff8e1",icon:e.jsx(je,{}),description:"Below average - opportunity exists"}:{level:"CRITICAL",color:"#d32f2f",bg:"#ffebee",icon:e.jsx(Je,{}),description:"Major deficiency affecting rating"}},b=s=>{switch(s){case 1:return{color:"#1b5e20",bg:"#e8f5e8",desc:"Superior Protection",icon:e.jsx(re,{}),benchmark:"Elite - Top 1% of departments"};case 2:case 3:return{color:"#2e7d32",bg:"#f1f8e9",desc:"Excellent Protection",icon:e.jsx(re,{}),benchmark:"Top 25% of departments"};case 4:case 5:return{color:"#558b2f",bg:"#f9fbe7",desc:"Good Protection",icon:e.jsx(re,{}),benchmark:"Above average for community size"};case 6:case 7:return{color:"#ff8f00",bg:"#fff8e1",desc:"Fair Protection",icon:e.jsx(je,{}),benchmark:"Below average - improvement needed"};case 8:case 9:return{color:"#f57c00",bg:"#fff3e0",desc:"Poor Protection",icon:e.jsx(je,{}),benchmark:"Bottom 25% - significant gaps"};case 10:default:return{color:"#d32f2f",bg:"#ffebee",desc:"Inadequate Protection",icon:e.jsx(Je,{}),benchmark:"Critical deficiencies present"}}},m=C(),F=k(),I=h(),O=E(),x=z(),R=g(x),r=b(R);return e.jsxs(n,{sx:{p:3,height:"100%",overflow:"auto"},children:[e.jsxs(n,{sx:{mb:4},children:[e.jsxs(t,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Ie,{sx:{fontSize:40,color:"primary.main"}}),"ISO Fire Rating Assessment"]}),e.jsx(t,{variant:"subtitle1",color:"text.secondary",children:"Fire Suppression Rating Schedule (FSRS) Analysis - 105.5 Point System"})]}),e.jsx(N,{elevation:3,sx:{p:3,mb:4,background:`linear-gradient(135deg, ${r.bg} 0%, #ffffff 100%)`,border:`2px solid ${r.color}`},children:e.jsxs(y,{container:!0,spacing:3,alignItems:"center",children:[e.jsx(y,{size:{xs:12,md:4},children:e.jsxs(n,{sx:{textAlign:"center"},children:[e.jsx(t,{variant:"h2",sx:{color:r.color,fontWeight:"bold",mb:1},children:R}),e.jsx(w,{icon:r.icon,label:`Class ${R}`,sx:{bgcolor:r.color,color:"white",fontSize:"1.1rem",px:2,py:1}})]})}),e.jsxs(y,{size:{xs:12,md:8},children:[e.jsx(t,{variant:"h5",sx:{color:r.color,mb:1},children:r.desc}),e.jsxs(t,{variant:"body1",sx:{color:"text.secondary",mb:2,fontStyle:"italic"},children:["ðŸ“Š ",r.benchmark]}),e.jsxs(t,{variant:"h6",gutterBottom:!0,children:["Total Score: ",x.toFixed(1)," / 105.5 points"]}),e.jsx(ie,{variant:"determinate",value:x/105.5*100,sx:{height:10,borderRadius:5,bgcolor:"rgba(0,0,0,0.1)","& .MuiLinearProgress-bar":{bgcolor:r.color}}}),e.jsxs(t,{variant:"body2",sx:{mt:1,color:"text.secondary"},children:[(x/105.5*100).toFixed(1),"% of maximum possible score"]}),R>1&&e.jsxs(n,{sx:{mt:2,p:2,bgcolor:"rgba(0,0,0,0.05)",borderRadius:1},children:[e.jsxs(t,{variant:"body2",sx:{fontWeight:"bold",color:"primary.main"},children:["ðŸŽ¯ Path to Class ",R-1,":"]}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:["Need ",(Math.ceil((R-1)*10.55)-x).toFixed(1)," more points",R===5&&" (90+ points for Class 4 - significant insurance savings)",R===2&&" (95+ points for Class 1 - elite rating)"]})]})]})]})}),e.jsxs(y,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(y,{size:{xs:12,md:6},children:e.jsx(K,{elevation:2,children:e.jsxs(X,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Se,{sx:{color:"#ff5722",mr:1}}),e.jsx(t,{variant:"h6",children:"Fire Department Operations"})]}),(()=>{const s=j(m,50);return e.jsx(w,{icon:s.icon,label:s.level,size:"small",sx:{bgcolor:s.color,color:"white",fontWeight:"bold"}})})()]}),e.jsxs(t,{variant:"h4",sx:{color:"#ff5722",mb:1},children:[m.toFixed(1)," / 50"]}),e.jsxs(t,{variant:"body2",sx:{color:"text.secondary",mb:2},children:[(m/50*100).toFixed(0),"% â€¢ ",j(m,50).description]}),e.jsx(ie,{variant:"determinate",value:m/50*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#ff5722"}}}),e.jsxs(se,{dense:!0,children:[e.jsxs(L,{children:[e.jsx(W,{children:(()=>{var c;const s=j(((c=i==null?void 0:i.fireDepartment)==null?void 0:c.staffing)||0,12.5);return e.jsx(n,{sx:{color:s.color},children:s.icon})})()}),e.jsx($,{primary:`Staffing: ${((u=(o=i==null?void 0:i.fireDepartment)==null?void 0:o.staffing)==null?void 0:u.toFixed(1))||"0.0"} / 12.5`,secondary:e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Requirements:"})}),e.jsxs(t,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",e.jsx("strong",{children:"Engine Company:"})," Minimum 3 firefighters + 1 officer (4 total)"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Ladder Company:"})," Minimum 3 firefighters + 1 officer (4 total)"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"On-Duty Staffing:"})," 24/7 coverage with sufficient personnel"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Response Goal:"})," 15 firefighters within 8 minutes for structure fires"]}),((f=i==null?void 0:i.fireDepartment)==null?void 0:f.staffing)&&i.fireDepartment.staffing<9.5&&e.jsxs(t,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:["ðŸ’¡ Need: +",Math.ceil((9.5-i.fireDepartment.staffing)/2)," firefighters per shift"]})]})})]}),e.jsxs(L,{children:[e.jsx(W,{children:(()=>{var c;const s=j(((c=i==null?void 0:i.fireDepartment)==null?void 0:c.equipment)||0,12.5);return e.jsx(n,{sx:{color:s.color},children:s.icon})})()}),e.jsx($,{primary:`Equipment: ${((v=(S=i==null?void 0:i.fireDepartment)==null?void 0:S.equipment)==null?void 0:v.toFixed(1))||"0.0"} / 12.5`,secondary:e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Equipment Requirements:"})}),e.jsxs(t,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",e.jsx("strong",{children:"Engine Companies:"})," 1,000+ GPM pump, 300+ gallons water tank"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Ladder Companies:"})," 75-100 ft aerial ladder or platform"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Ground Ladders:"})," 115 ft total (various lengths)"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"SCBA:"})," 10 sets minimum per engine/ladder company"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Hose:"}),' 3,000 ft of 2Â½" hose per engine company']}),(A=i==null?void 0:i.fireDepartment)!=null&&A.equipment&&i.fireDepartment.equipment>=10?e.jsx(t,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Equipment meets community requirements"}):e.jsx(t,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"âš ï¸ Review apparatus compliance with NFPA 1901 standards"})]})})]}),e.jsxs(L,{children:[e.jsx(W,{children:(()=>{var c;const s=j(((c=i==null?void 0:i.fireDepartment)==null?void 0:c.training)||0,12.5);return e.jsx(n,{sx:{color:s.color},children:s.icon})})()}),e.jsx($,{primary:`Training: ${((T=(M=i==null?void 0:i.fireDepartment)==null?void 0:M.training)==null?void 0:T.toFixed(1))||"0.0"} / 12.5`,secondary:e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Training Requirements:"})}),e.jsxs(t,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",e.jsx("strong",{children:"Structure Fire:"})," 20+ hours per firefighter per month"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Basic Training:"})," Firefighter I & II certification required"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Officer Training:"})," Fire Officer I minimum for company officers"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Specialized Training:"})," Hazmat, rescue, EMS as applicable"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Documentation:"})," Detailed training records maintained"]}),(G=i==null?void 0:i.fireDepartment)!=null&&G.training&&i.fireDepartment.training<9.5?e.jsxs(t,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:["ðŸ“š Need: +",Math.ceil((10-i.fireDepartment.training)*2)," additional training hours/month"]}):e.jsx(t,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Training program meets ISO standards"})]})})]}),e.jsxs(L,{children:[e.jsx(W,{children:(()=>{var c;const s=j(((c=i==null?void 0:i.fireDepartment)==null?void 0:c.distribution)||0,12.5);return e.jsx(n,{sx:{color:s.color},children:s.icon})})()}),e.jsx($,{primary:`Distribution: ${((_=(pe=i==null?void 0:i.fireDepartment)==null?void 0:pe.distribution)==null?void 0:_.toFixed(1))||"0.0"} / 12.5`,secondary:e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Distribution Requirements:"})}),e.jsxs(t,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",e.jsx("strong",{children:"Engine Coverage:"})," â‰¤1.5 mile road distance for engines"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Ladder Coverage:"})," â‰¤2.5 mile road distance for aerials"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Response Time:"})," â‰¤5 minutes (240 seconds) travel time"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"First Due Area:"})," â‰¤5 square miles per engine company"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Station Location:"})," Strategically placed for optimal coverage"]}),(xe=i==null?void 0:i.fireDepartment)!=null&&xe.distribution&&i.fireDepartment.distribution>=10?e.jsx(t,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Station distribution meets ISO standards"}):e.jsx(t,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"ðŸ“ Consider additional station or relocate existing station"})]})})]})]})]})})}),e.jsx(y,{size:{xs:12,md:6},children:e.jsx(K,{elevation:2,children:e.jsxs(X,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Ce,{sx:{color:"#2196f3",mr:1}}),e.jsx(t,{variant:"h6",children:"Water Supply"})]}),(()=>{const s=j(F,40);return e.jsx(w,{icon:s.icon,label:s.level,size:"small",sx:{bgcolor:s.color,color:"white",fontWeight:"bold"}})})()]}),e.jsxs(t,{variant:"h4",sx:{color:"#2196f3",mb:1},children:[F.toFixed(1)," / 40"]}),e.jsxs(t,{variant:"body2",sx:{color:"text.secondary",mb:2},children:[(F/40*100).toFixed(0),"% â€¢ ",j(F,40).description]}),e.jsx(ie,{variant:"determinate",value:F/40*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#2196f3"}}}),e.jsxs(se,{dense:!0,children:[e.jsxs(L,{children:[e.jsx(W,{children:(()=>{var c;const s=j(((c=i==null?void 0:i.waterSupply)==null?void 0:c.capacity)||0,20);return e.jsx(n,{sx:{color:s.color},children:s.icon})})()}),e.jsx($,{primary:`Capacity: ${((Pe=(ke=i==null?void 0:i.waterSupply)==null?void 0:ke.capacity)==null?void 0:Pe.toFixed(1))||"0.0"} / 20`,secondary:e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Water Flow Requirements:"})}),e.jsxs(t,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",e.jsx("strong",{children:"Minimum Flow:"})," 250 GPM for 2 hours (Class 8B areas)"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Residential:"})," 500-750 GPM for typical single-family homes"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Commercial:"})," 1,500-3,500+ GPM for large buildings"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Pressure:"})," 20 PSI residual minimum during flow test"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Duration:"})," Maintain flow for minimum 2 hours"]}),(De=i==null?void 0:i.waterSupply)!=null&&De.capacity&&i.waterSupply.capacity>=15?e.jsx(t,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Water system meets ISO flow requirements"}):e.jsx(t,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"ðŸ’§ Need: Water main upgrades or booster pump systems"})]})})]}),e.jsxs(L,{children:[e.jsx(W,{children:(()=>{var c;const s=j(((c=i==null?void 0:i.waterSupply)==null?void 0:c.distribution)||0,15);return e.jsx(n,{sx:{color:s.color},children:s.icon})})()}),e.jsx($,{primary:`Distribution: ${((we=(Oe=i==null?void 0:i.waterSupply)==null?void 0:Oe.distribution)==null?void 0:we.toFixed(1))||"0.0"} / 15`,secondary:e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Hydrant Distribution Standards:"})}),e.jsxs(t,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",e.jsx("strong",{children:"Spacing:"})," â‰¤1,000 ft from any point to nearest hydrant"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Commercial Areas:"})," â‰¤500 ft spacing between hydrants"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Residential Areas:"})," â‰¤800 ft spacing between hydrants"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Arterial Streets:"})," â‰¤600 ft maximum spacing"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Dead End Streets:"})," â‰¤500 ft from end of street"]}),(Ee=i==null?void 0:i.waterSupply)!=null&&Ee.distribution&&i.waterSupply.distribution>=12?e.jsx(t,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Hydrant distribution meets ISO standards"}):e.jsxs(t,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:["ðŸ”§ Need: ",Math.ceil((12-(((Ae=i==null?void 0:i.waterSupply)==null?void 0:Ae.distribution)||0))*2)," additional hydrants"]})]})})]}),e.jsxs(L,{children:[e.jsx(W,{children:(()=>{var c;const s=j(((c=i==null?void 0:i.waterSupply)==null?void 0:c.alternative)||0,5);return e.jsx(n,{sx:{color:s.color},children:s.icon})})()}),e.jsx($,{primary:`Alternative: ${((Me=(Te=i==null?void 0:i.waterSupply)==null?void 0:Te.alternative)==null?void 0:Me.toFixed(1))||"0.0"} / 5`,secondary:e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Alternative Water Supply Options:"})}),e.jsxs(t,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",e.jsx("strong",{children:"Dry Hydrants:"}),' 6" minimum diameter, 500+ GPM capacity']}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Tanker Shuttles:"})," 1,000+ gallon capacity per tanker"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Static Sources:"})," Ponds, lakes with â‰¥30,000 gallons"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Mobile Supply:"})," Portable tanks, fold-a-tanks for operations"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Fill Sites:"})," Designated locations for tanker refill"]}),(ze=i==null?void 0:i.waterSupply)!=null&&ze.alternative&&i.waterSupply.alternative>=3?e.jsx(t,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Alternative water supply systems adequate"}):e.jsx(t,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"ðŸš› Need: Additional tankers or dry hydrant installation"})]})})]})]})]})})}),e.jsx(y,{size:{xs:12,md:6},children:e.jsx(K,{elevation:2,children:e.jsxs(X,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Re,{sx:{color:"#9c27b0",mr:1}}),e.jsx(t,{variant:"h6",children:"Emergency Communications"})]}),(()=>{const s=j(I,10);return e.jsx(w,{icon:s.icon,label:s.level,size:"small",sx:{bgcolor:s.color,color:"white",fontWeight:"bold"}})})()]}),e.jsxs(t,{variant:"h4",sx:{color:"#9c27b0",mb:1},children:[I.toFixed(1)," / 10"]}),e.jsxs(t,{variant:"body2",sx:{color:"text.secondary",mb:2},children:[(I/10*100).toFixed(0),"% â€¢ ",j(I,10).description]}),e.jsx(ie,{variant:"determinate",value:I/10*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#9c27b0"}}}),e.jsxs(se,{dense:!0,children:[e.jsxs(L,{children:[e.jsx(W,{children:(()=>{var c;const s=j(((c=i==null?void 0:i.communications)==null?void 0:c.dispatch)||0,7);return e.jsx(n,{sx:{color:s.color},children:s.icon})})()}),e.jsx($,{primary:`Dispatch: ${((We=(Le=i==null?void 0:i.communications)==null?void 0:Le.dispatch)==null?void 0:We.toFixed(1))||"0.0"} / 7`,secondary:e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO 911 Dispatch Requirements:"})}),e.jsxs(t,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",e.jsx("strong",{children:"24/7 Operations:"})," Full-time dispatchers on duty"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Call Processing:"})," Emergency calls answered within 15 seconds"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Dispatch Time:"})," Units dispatched within 60 seconds"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Equipment:"})," CAD system, mapping, multiple phone lines"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Training:"})," EMD certification, continuing education"]}),($e=i==null?void 0:i.communications)!=null&&$e.dispatch&&i.communications.dispatch>=6?e.jsx(t,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Dispatch center meets ISO standards"}):e.jsx(t,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"ðŸ“ž Need: Enhanced dispatch training and equipment upgrades"})]})})]}),e.jsxs(L,{children:[e.jsx(W,{children:(()=>{var c;const s=j(((c=i==null?void 0:i.communications)==null?void 0:c.alerting)||0,3);return e.jsx(n,{sx:{color:s.color},children:s.icon})})()}),e.jsx($,{primary:`Alerting: ${((Ge=(Be=i==null?void 0:i.communications)==null?void 0:Be.alerting)==null?void 0:Ge.toFixed(1))||"0.0"} / 3`,secondary:e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Alerting System Requirements:"})}),e.jsxs(t,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",e.jsx("strong",{children:"Radio System:"})," VHF/UHF digital trunked preferred"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Coverage:"})," 95%+ mobile and portable coverage area"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Backup Power:"})," 24-hour minimum battery backup"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Station Alerting:"})," Automated station notification systems"]}),(qe=i==null?void 0:i.communications)!=null&&qe.alerting&&i.communications.alerting>=2.5?e.jsx(t,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Communication systems meet ISO standards"}):e.jsx(t,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"ðŸ“¡ Need: Radio system upgrades or coverage improvements"})]})})]})]})]})})}),e.jsx(y,{size:{xs:12,md:6},children:e.jsx(K,{elevation:2,children:e.jsxs(X,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Fe,{sx:{color:"#4caf50",mr:1}}),e.jsx(t,{variant:"h6",children:"Community Risk Reduction"}),e.jsx(w,{label:"BONUS",size:"small",sx:{ml:1,bgcolor:"#4caf50",color:"white"}})]}),(()=>{const s=j(O,5.5);return e.jsx(w,{icon:s.icon,label:s.level,size:"small",sx:{bgcolor:s.color,color:"white",fontWeight:"bold"}})})()]}),e.jsxs(t,{variant:"h4",sx:{color:"#4caf50",mb:1},children:[O.toFixed(1)," / 5.5"]}),e.jsxs(t,{variant:"body2",sx:{color:"text.secondary",mb:2},children:[(O/5.5*100).toFixed(0),"% â€¢ Bonus points toward total score"]}),e.jsx(ie,{variant:"determinate",value:O/5.5*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#4caf50"}}}),e.jsxs(se,{dense:!0,children:[e.jsxs(L,{children:[e.jsx(W,{children:(()=>{var c;const s=j(((c=i==null?void 0:i.communityRiskReduction)==null?void 0:c.prevention)||0,2.5);return e.jsx(n,{sx:{color:s.color},children:s.icon})})()}),e.jsx($,{primary:`Prevention: ${((He=(Ne=i==null?void 0:i.communityRiskReduction)==null?void 0:Ne.prevention)==null?void 0:He.toFixed(1))||"0.0"} / 2.5`,secondary:e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Fire Prevention Requirements:"})}),e.jsxs(t,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",e.jsx("strong",{children:"Fire Inspector:"})," Certified fire inspector on staff"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Code Enforcement:"})," Adopt current fire codes (IFC/NFPA)"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Plan Review:"})," Review building plans for fire safety"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Inspections:"})," Annual inspections of commercial buildings"]}),(Ue=i==null?void 0:i.communityRiskReduction)!=null&&Ue.prevention&&i.communityRiskReduction.prevention>=2?e.jsx(t,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Fire prevention program meets ISO standards"}):e.jsx(t,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"ðŸ” Need: Certified fire inspector and active inspection program"})]})})]}),e.jsxs(L,{children:[e.jsx(W,{children:(()=>{var c;const s=j(((c=i==null?void 0:i.communityRiskReduction)==null?void 0:c.education)||0,2);return e.jsx(n,{sx:{color:s.color},children:s.icon})})()}),e.jsx($,{primary:`Education: ${((Ve=(_e=i==null?void 0:i.communityRiskReduction)==null?void 0:_e.education)==null?void 0:Ve.toFixed(1))||"0.0"} / 2`,secondary:e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Public Education Requirements:"})}),e.jsxs(t,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",e.jsx("strong",{children:"School Programs:"})," Fire safety education in schools K-12"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Public Outreach:"})," Community fire safety events/programs"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"High-Risk Groups:"})," Senior citizens, disabled residents"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Documentation:"})," Maintain records of education activities"]}),(Ye=i==null?void 0:i.communityRiskReduction)!=null&&Ye.education&&i.communityRiskReduction.education>=1.5?e.jsx(t,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Public education program meets ISO standards"}):e.jsx(t,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"ðŸ« Need: Expand school programs and community outreach"})]})})]}),e.jsxs(L,{children:[e.jsx(W,{children:(()=>{var c;const s=j(((c=i==null?void 0:i.communityRiskReduction)==null?void 0:c.investigation)||0,1);return e.jsx(n,{sx:{color:s.color},children:s.icon})})()}),e.jsx($,{primary:`Investigation: ${((Xe=(Ke=i==null?void 0:i.communityRiskReduction)==null?void 0:Ke.investigation)==null?void 0:Xe.toFixed(1))||"0.0"} / 1`,secondary:e.jsxs(n,{children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Fire Investigation Requirements:"})}),e.jsxs(t,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",e.jsx("strong",{children:"Trained Investigator:"})," Fire investigator certification"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Origin & Cause:"})," Determine fire cause and origin"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Documentation:"})," Detailed investigation reports"]}),e.jsxs(t,{variant:"caption",sx:{display:"block"},children:["â€¢ ",e.jsx("strong",{children:"Evidence Collection:"})," Proper evidence handling procedures"]}),(Qe=i==null?void 0:i.communityRiskReduction)!=null&&Qe.investigation&&i.communityRiskReduction.investigation>=.8?e.jsx(t,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Fire investigation program meets ISO standards"}):e.jsx(t,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"ðŸ” Need: Train certified fire investigator"})]})})]})]})]})})})]}),!i&&e.jsxs(N,{elevation:1,sx:{p:3,textAlign:"center",bgcolor:"#f5f5f5"},children:[e.jsx(t,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Assessment Data"}),e.jsx(t,{variant:"body1",color:"text.secondary",children:"Use the sidebar to input your fire department's capabilities and generate an ISO score assessment."})]})]})},_t=({assessment:i,currentScore:a,classification:l,communityProfile:p})=>{const[d,C]=D.useState([]),[k,h]=D.useState(!1),[E,z]=D.useState(!0),[g,j]=D.useState({firefighterAnnualCost:75e3,apparatusCost:8e5,trainingProgramCost:8e3,hydrantInstallationCost:12e3,waterSystemUpgradeCost:15e5,constructionMultiplier:1}),b=(r,o)=>{j(u=>({...u,[r]:o}))},m=()=>{if(!i)return[];const r=[];return i.fireDepartment.staffing<10&&r.push({category:"Fire Department",subcategory:"Staffing",title:"Increase Minimum Staffing Levels",description:"Add firefighters to meet NFPA 1720 minimum staffing requirements for initial response",pointsGain:10-i.fireDepartment.staffing,estimatedCost:(10-i.fireDepartment.staffing)*g.firefighterAnnualCost,implementationTime:"6-12 months",priority:"HIGH",difficulty:"COMPLEX",requirements:["Budget approval from city council","Recruitment and hiring process","Training and certification programs","Additional equipment and PPE"],benefits:["Faster initial response times","Improved firefighter safety","Better emergency scene management","Enhanced public confidence"],fundingSources:["FEMA Assistance to Firefighters Grant (AFG)","FEMA Staffing for Adequate Fire and Emergency Response (SAFER)","State fire department grants","Municipal bond financing"]}),i.fireDepartment.training<10&&r.push({category:"Fire Department",subcategory:"Training",title:"Implement Structured Training Program",description:"Establish documented training program with minimum 20 hours monthly per firefighter",pointsGain:10-i.fireDepartment.training,estimatedCost:g.trainingProgramCost,implementationTime:"3-6 months",priority:"HIGH",difficulty:"MODERATE",requirements:["Training officer designation","Training facility or agreements","Record keeping system","Curriculum development"],benefits:["Improved firefighter competency","Better emergency outcomes","Reduced liability exposure","ISO credit improvement"],fundingSources:["FEMA AFG Training grants","State fire training academies","Regional training consortiums","Municipal training budgets"]}),i.fireDepartment.equipment<10&&r.push({category:"Fire Department",subcategory:"Equipment",title:"Upgrade Apparatus and Equipment",description:"Purchase NFPA 1901 compliant apparatus and maintain proper equipment inventory",pointsGain:10-i.fireDepartment.equipment,estimatedCost:g.apparatusCost,implementationTime:"12-24 months",priority:"HIGH",difficulty:"COMPLEX",requirements:["Capital improvement planning","Specifications development","Procurement process","Training on new equipment"],benefits:["Improved fire suppression capability","Enhanced equipment reliability","Better firefighter safety","Community protection upgrade"],fundingSources:["FEMA AFG Equipment grants","Municipal bonds","State equipment grants","Regional equipment sharing"]}),i.waterSupply.capacity<15&&r.push({category:"Water Supply",subcategory:"Capacity",title:"Improve Water System Capacity",description:"Upgrade water mains and pumping capacity to meet fire flow requirements",pointsGain:15-i.waterSupply.capacity,estimatedCost:g.waterSystemUpgradeCost*g.constructionMultiplier,implementationTime:"18-36 months",priority:"HIGH",difficulty:"COMPLEX",requirements:["Water system engineering study","Municipal utility coordination","Construction permits","Public works coordination"],benefits:["Increased fire suppression capability","Better residential water pressure","Enhanced commercial protection","Significant ISO improvement"],fundingSources:["EPA Drinking Water State Revolving Fund","USDA Rural Development grants","Municipal utility bonds","State infrastructure grants"]}),i.waterSupply.distribution<12&&r.push({category:"Water Supply",subcategory:"Distribution",title:"Install Additional Fire Hydrants",description:"Add hydrants to reduce spacing and improve coverage areas",pointsGain:12-i.waterSupply.distribution,estimatedCost:(12-i.waterSupply.distribution)*g.hydrantInstallationCost*g.constructionMultiplier,implementationTime:"6-12 months",priority:"MEDIUM",difficulty:"MODERATE",requirements:["Hydrant spacing analysis","Water main connections","Installation permits","Ongoing maintenance program"],benefits:["Reduced hose lay distances","Faster fire attack setup","Better neighborhood protection","Lower insurance rates for residents"],fundingSources:["Municipal capital improvements","Water utility funds","Community development grants","Special assessment districts"]}),i.communications.dispatch<6&&r.push({category:"Communications",subcategory:"Dispatch",title:"Improve Dispatch Operations",description:"Upgrade dispatch protocols, training, and equipment for faster call processing",pointsGain:6-i.communications.dispatch,estimatedCost:15e4*g.constructionMultiplier,implementationTime:"6-12 months",priority:"MEDIUM",difficulty:"MODERATE",requirements:["Dispatch training enhancement","Protocol documentation","Equipment upgrades","Quality assurance program"],benefits:["Faster emergency response","Better call processing times","Improved coordination","Enhanced public safety"],fundingSources:["FEMA Emergency Communications grants","State 911 improvement funds","Regional communications consortiums","Municipal emergency services budget"]}),i.communityRiskReduction.prevention<2&&r.push({category:"Community Risk Reduction",subcategory:"Prevention",title:"Establish Fire Prevention Program",description:"Implement code enforcement and fire prevention inspection program",pointsGain:2-i.communityRiskReduction.prevention,estimatedCost:85e3*g.constructionMultiplier,implementationTime:"6-12 months",priority:"LOW",difficulty:"MODERATE",requirements:["Fire prevention officer training","Code adoption and enforcement","Inspection scheduling system","Public education materials"],benefits:["Reduced fire incidents","Better building code compliance","Enhanced community safety","Bonus ISO points"],fundingSources:["FEMA Fire Prevention grants","Municipal code enforcement budget","State fire prevention programs","Community foundation grants"]}),r.sort((o,u)=>{const f={HIGH:3,MEDIUM:2,LOW:1},S=f[o.priority],v=f[u.priority];if(S!==v)return v-S;const A=o.pointsGain/o.estimatedCost;return u.pointsGain/u.estimatedCost-A})},F=r=>{const u=r*.07,f=p.population*.4*p.avgHomePremium*u,S=p.commercialPremiums*u;return f+S},I=r=>{switch(r){case"HIGH":return"#d32f2f";case"MEDIUM":return"#ff8f00";case"LOW":return"#2e7d32";default:return"#757575"}},O=r=>{switch(r){case"Fire Department":return e.jsx(Se,{});case"Water Supply":return e.jsx(Ce,{});case"Communications":return e.jsx(Re,{});case"Community Risk Reduction":return e.jsx(Fe,{});default:return e.jsx(fe,{})}},x=r=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),R=m();return i?e.jsxs(n,{sx:{p:3},children:[e.jsxs(n,{sx:{mb:3},children:[e.jsx(t,{variant:"h4",gutterBottom:!0,children:"ISO Improvement Planner"}),e.jsx(t,{variant:"body1",color:"text.secondary",children:"Strategic recommendations to improve your ISO classification with cost-benefit analysis"})]}),e.jsx(N,{sx:{p:3,mb:3},children:e.jsxs(y,{container:!0,spacing:3,children:[e.jsx(y,{size:{xs:12,md:4},children:e.jsxs(n,{sx:{textAlign:"center"},children:[e.jsx(t,{variant:"h6",color:"text.secondary",children:"Current Score"}),e.jsx(t,{variant:"h3",color:"primary",children:a.toFixed(1)}),e.jsx(t,{variant:"body2",children:"out of 105.5 points"})]})}),e.jsx(y,{size:{xs:12,md:4},children:e.jsxs(n,{sx:{textAlign:"center"},children:[e.jsx(t,{variant:"h6",color:"text.secondary",children:"Current Classification"}),e.jsxs(t,{variant:"h3",color:"primary",children:["Class ",l]}),e.jsx(t,{variant:"body2",children:"ISO rating"})]})}),e.jsx(y,{size:{xs:12,md:4},children:e.jsxs(n,{sx:{textAlign:"center"},children:[e.jsx(t,{variant:"h6",color:"text.secondary",children:"Improvement Opportunities"}),e.jsx(t,{variant:"h3",color:"secondary",children:R.length}),e.jsx(t,{variant:"body2",children:"recommendations available"})]})})]})}),e.jsxs(ne,{sx:{mb:3},expanded:E,onChange:()=>z(!E),children:[e.jsx(oe,{expandIcon:e.jsx(Y,{}),children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(At,{color:"primary"}),e.jsxs(n,{children:[e.jsx(t,{variant:"h6",children:"Customize Cost Parameters"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"Adjust costs based on your regional market conditions and department specifications"})]})]})}),e.jsxs(ae,{children:[e.jsxs(y,{container:!0,spacing:4,children:[e.jsxs(y,{size:{xs:12,md:6},children:[e.jsxs(Z,{fullWidth:!0,sx:{mb:3},children:[e.jsxs(ee,{children:["Firefighter Annual Cost (salary + benefits): ",x(g.firefighterAnnualCost)]}),e.jsx(P,{value:g.firefighterAnnualCost,onChange:(r,o)=>b("firefighterAnnualCost",o),min:4e4,max:12e4,step:5e3,valueLabelDisplay:"auto",valueLabelFormat:x,marks:[{value:4e4,label:"$40k"},{value:75e3,label:"$75k"},{value:12e4,label:"$120k"}]}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Rural departments: $40-60k | Suburban: $60-85k | Urban/High COL: $85-120k"})]}),e.jsxs(Z,{fullWidth:!0,sx:{mb:3},children:[e.jsxs(ee,{children:["Fire Apparatus Cost (per unit): ",x(g.apparatusCost)]}),e.jsx(P,{value:g.apparatusCost,onChange:(r,o)=>b("apparatusCost",o),min:2e5,max:3e6,step:5e4,valueLabelDisplay:"auto",valueLabelFormat:x,marks:[{value:2e5,label:"$200k"},{value:8e5,label:"$800k"},{value:15e5,label:"$1.5M"},{value:27e5,label:"$2.7M"},{value:3e6,label:"$3M"}]}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Engine: $200-600k | Pumper: $400-800k | Ladder: $750k-2.7M | Specialty: $1M-3M (cost per apparatus - departments typically need multiple units)"})]}),e.jsxs(Z,{fullWidth:!0,sx:{mb:3},children:[e.jsxs(ee,{children:["Training Program Implementation: ",x(g.trainingProgramCost)]}),e.jsx(P,{value:g.trainingProgramCost,onChange:(r,o)=>b("trainingProgramCost",o),min:2e3,max:2e4,step:1e3,valueLabelDisplay:"auto",valueLabelFormat:x,marks:[{value:2e3,label:"$2k"},{value:8e3,label:"$8k"},{value:2e4,label:"$20k"}]}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Basic program: $2-5k | Comprehensive: $8-15k | Advanced multi-discipline: $15-20k"})]})]}),e.jsxs(y,{size:{xs:12,md:6},children:[e.jsxs(Z,{fullWidth:!0,sx:{mb:3},children:[e.jsxs(ee,{children:["Hydrant Installation Cost: ",x(g.hydrantInstallationCost)]}),e.jsx(P,{value:g.hydrantInstallationCost,onChange:(r,o)=>b("hydrantInstallationCost",o),min:6e3,max:25e3,step:1e3,valueLabelDisplay:"auto",valueLabelFormat:x,marks:[{value:6e3,label:"$6k"},{value:12e3,label:"$12k"},{value:25e3,label:"$25k"}]}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Easy access: $6-10k | Standard: $10-15k | Difficult terrain/deep lines: $15-25k"})]}),e.jsxs(Z,{fullWidth:!0,sx:{mb:3},children:[e.jsxs(ee,{children:["Water System Upgrade: ",x(g.waterSystemUpgradeCost)]}),e.jsx(P,{value:g.waterSystemUpgradeCost,onChange:(r,o)=>b("waterSystemUpgradeCost",o),min:8e5,max:5e6,step:1e5,valueLabelDisplay:"auto",valueLabelFormat:r=>`$${(r/1e6).toFixed(1)}M`,marks:[{value:8e5,label:"$0.8M"},{value:15e5,label:"$1.5M"},{value:5e6,label:"$5M"}]}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Minor upgrades: $0.8-1.2M | Major infrastructure: $1.5-3M | Complete overhaul: $3-5M"})]}),e.jsxs(Z,{fullWidth:!0,sx:{mb:3},children:[e.jsxs(ee,{children:["Regional Cost Multiplier: ",g.constructionMultiplier.toFixed(1),"x"]}),e.jsx(P,{value:g.constructionMultiplier,onChange:(r,o)=>b("constructionMultiplier",o),min:.7,max:1.8,step:.1,valueLabelDisplay:"auto",marks:[{value:.7,label:"0.7x"},{value:1,label:"1.0x"},{value:1.5,label:"1.5x"},{value:1.8,label:"1.8x"}]}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Rural/Low COL: 0.7-0.9x | National average: 1.0x | High COL areas: 1.2-1.8x"})]})]})]}),e.jsx(J,{severity:"info",sx:{mt:2},children:e.jsxs(t,{variant:"body2",children:[e.jsx("strong",{children:"Regional Examples:"})," Rural Alabama (0.7x), National Average (1.0x), San Francisco Bay Area (1.6x), Manhattan (1.8x). Adjust based on local contractor quotes and labor market conditions."]})})]})]}),e.jsxs(t,{variant:"h5",gutterBottom:!0,sx:{mt:4,mb:2},children:["Improvement Recommendations",e.jsx(t,{variant:"body2",color:"text.secondary",component:"span",sx:{ml:2},children:"(Updated with your cost parameters)"})]}),R.map((r,o)=>e.jsxs(ne,{sx:{mb:2},children:[e.jsx(oe,{expandIcon:e.jsx(Y,{}),children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[e.jsx(n,{sx:{mr:2},children:O(r.category)}),e.jsxs(n,{sx:{flexGrow:1},children:[e.jsx(t,{variant:"h6",children:r.title}),e.jsxs(n,{sx:{display:"flex",gap:1,mt:1},children:[e.jsx(w,{label:r.priority,size:"small",sx:{backgroundColor:I(r.priority),color:"white"}}),e.jsx(w,{label:`+${r.pointsGain} points`,size:"small",color:"primary"}),e.jsx(w,{label:x(r.estimatedCost),size:"small",variant:"outlined"})]})]})]})}),e.jsx(ae,{children:e.jsxs(y,{container:!0,spacing:3,children:[e.jsxs(y,{size:{xs:12,md:8},children:[e.jsx(t,{variant:"body1",paragraph:!0,children:r.description}),e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Requirements"}),e.jsx(se,{dense:!0,children:r.requirements.map((u,f)=>e.jsxs(L,{children:[e.jsx(W,{children:e.jsx(re,{fontSize:"small"})}),e.jsx($,{primary:u})]},f))}),e.jsx(t,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Benefits"}),e.jsx(se,{dense:!0,children:r.benefits.map((u,f)=>e.jsxs(L,{children:[e.jsx(W,{children:e.jsx(fe,{fontSize:"small",color:"primary"})}),e.jsx($,{primary:u})]},f))})]}),e.jsx(y,{size:{xs:12,md:4},children:e.jsx(K,{variant:"outlined",children:e.jsxs(X,{children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Project Details"}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Gt,{sx:{mr:1}}),e.jsxs(t,{variant:"body2",children:[e.jsx("strong",{children:"Cost:"})," ",x(r.estimatedCost)]})]}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(dt,{sx:{mr:1}}),e.jsxs(t,{variant:"body2",children:[e.jsx("strong",{children:"Timeline:"})," ",r.implementationTime]})]}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Nt,{sx:{mr:1}}),e.jsxs(t,{variant:"body2",children:[e.jsx("strong",{children:"Difficulty:"})," ",r.difficulty]})]}),e.jsx(t,{variant:"subtitle2",gutterBottom:!0,children:"Funding Sources"}),r.fundingSources.map((u,f)=>e.jsx(w,{label:u,size:"small",variant:"outlined",sx:{mr:.5,mb:.5}},f))]})})})]})})]},o)),e.jsx(n,{sx:{mt:4,textAlign:"center"},children:e.jsxs(Q,{variant:"contained",color:"secondary",size:"large",startIcon:e.jsx(pt,{}),onClick:()=>h(!k),children:[k?"Hide":"Show"," Cost-Benefit Analysis"]})}),k&&e.jsxs(N,{sx:{p:3,mt:3},children:[e.jsx(t,{variant:"h5",gutterBottom:!0,children:"Community Insurance Savings Analysis"}),e.jsx(J,{severity:"info",sx:{mb:3},children:e.jsxs(t,{variant:"body2",children:[e.jsx("strong",{children:"Cost-Benefit Analysis Disclaimer:"})," ISO classification improvements typically reduce property insurance premiums by 3-10% per class improvement (industry-validated). Cost estimates are based on national averages and should be refined with local contractor quotes. Actual savings vary by insurance company - some insurers don't use ISO ratings."]})}),e.jsxs(y,{container:!0,spacing:3,children:[e.jsxs(y,{size:{xs:12,md:6},children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Implementation Costs"}),e.jsx(xt,{children:e.jsxs(ut,{size:"small",children:[e.jsx(ht,{children:e.jsxs(ye,{children:[e.jsx(te,{children:"Category"}),e.jsx(te,{align:"right",children:"Estimated Cost"})]})}),e.jsxs(mt,{children:[R.slice(0,5).map((r,o)=>e.jsxs(ye,{children:[e.jsx(te,{children:r.title}),e.jsx(te,{align:"right",children:x(r.estimatedCost)})]},o)),e.jsxs(ye,{children:[e.jsx(te,{children:e.jsx("strong",{children:"Total Estimated Cost"})}),e.jsx(te,{align:"right",children:e.jsx("strong",{children:x(R.reduce((r,o)=>r+o.estimatedCost,0))})})]})]})]})})]}),e.jsxs(y,{size:{xs:12,md:6},children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Projected Benefits"}),e.jsxs(n,{sx:{mb:2},children:[e.jsxs(t,{variant:"body2",color:"text.secondary",children:["Current Classification: Class ",l]}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:["Projected Classification: Class ",Math.max(1,l-2)]}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:["Classification Improvement: ",Math.min(2,l-1)," classes"]})]}),e.jsx(K,{variant:"outlined",children:e.jsxs(X,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(ft,{sx:{mr:1,color:"primary.main"}}),e.jsx(t,{variant:"h6",children:"Annual Community Savings"})]}),e.jsx(t,{variant:"h4",color:"primary",gutterBottom:!0,children:x(F(Math.min(2,l-1)))}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:["Based on ",p.population.toLocaleString()," residents and average premiums"]}),e.jsx(et,{sx:{my:2}}),e.jsxs(t,{variant:"body2",children:[e.jsx("strong",{children:"Payback Period:"})," ",(R.reduce((r,o)=>r+o.estimatedCost,0)/F(Math.min(2,l-1))).toFixed(1)," years"]})]})})]})]})]})]}):e.jsx(n,{sx:{p:3,textAlign:"center"},children:e.jsx(t,{variant:"h6",color:"text.secondary",children:"Complete your ISO assessment to see improvement recommendations"})})};let Vt=class{constructor(a,l){ce(this,"pdf");ce(this,"config");ce(this,"data");ce(this,"yPosition",20);this.pdf=new gt("portrait","mm","a4"),this.config=a,this.data=l,console.log("ðŸ“‹ PDF DEBUG: autoTable import:",typeof he),typeof he=="function"?(this.pdf.autoTable=he.bind(null,this.pdf),console.log("ðŸ“‹ PDF DEBUG: âœ… autoTable attached successfully")):console.error("ðŸ“‹ PDF DEBUG: âŒ autoTable is not a function:",he)}generateReport(){return new Promise((a,l)=>{try{console.log("ðŸš€ GENERATING ISO CREDIT CALCULATOR REPORT"),this.addHeader(),this.addExecutiveSummary(),this.addISOScoreBreakdown(),this.addComplianceAnalysis(),this.addRecommendations();const p=new Blob([this.pdf.output("blob")],{type:"application/pdf"});console.log("âœ… ISO PDF REPORT GENERATED SUCCESSFULLY"),a(p)}catch(p){console.error("âŒ ISO PDF GENERATION ERROR:",p),l(p)}})}addHeader(){try{if(this.config.logoDataUrl)try{this.pdf.addImage(this.config.logoDataUrl,"PNG",15,15,25,25)}catch(a){console.warn("Could not add department logo:",a)}this.pdf.setFontSize(20),this.pdf.setFont("helvetica","bold"),this.pdf.text("ISO Fire Suppression Rating Report",50,25),this.pdf.setFontSize(14),this.pdf.setFont("helvetica","normal"),this.pdf.text(this.config.departmentName,50,32),this.pdf.text(`Fire Chief: ${this.config.chiefName}`,50,38),this.pdf.text(`Report Date: ${this.config.reportDate}`,50,44),this.pdf.setLineWidth(.5),this.pdf.line(15,50,195,50),this.yPosition=60}catch(a){console.error("Error adding header:",a),this.yPosition=60}}addExecutiveSummary(){try{this.pdf.setFontSize(16),this.pdf.setFont("helvetica","bold"),this.pdf.text("Executive Summary",15,this.yPosition),this.yPosition+=10,this.pdf.setFontSize(12),this.pdf.setFont("helvetica","normal"),[`Current ISO Classification: Class ${this.data.classification}`,`Total Score: ${this.data.currentScore.toFixed(1)} out of 105.5 points`,`Overall Performance: ${this.getPerformanceLevel()}`,"","This report provides a comprehensive analysis of your fire department's","ISO Fire Suppression Rating Schedule (FSRS) compliance and identifies","specific opportunities for classification improvement."].forEach(l=>{this.pdf.text(l,15,this.yPosition),this.yPosition+=6}),this.yPosition+=10}catch(a){console.error("Error adding executive summary:",a),this.yPosition+=50}}addISOScoreBreakdown(){try{this.pdf.setFontSize(16),this.pdf.setFont("helvetica","bold"),this.pdf.text("ISO Score Breakdown",15,this.yPosition),this.yPosition+=10;const a=[["Fire Department Operations","50.0",this.getTotalFireDeptScore().toFixed(1),this.getComplianceStatus(this.getTotalFireDeptScore(),50)],["Water Supply","40.0",this.getTotalWaterSupplyScore().toFixed(1),this.getComplianceStatus(this.getTotalWaterSupplyScore(),40)],["Emergency Communications","10.0",this.getTotalCommunicationsScore().toFixed(1),this.getComplianceStatus(this.getTotalCommunicationsScore(),10)],["Community Risk Reduction","5.5",this.getTotalCRRScore().toFixed(1),this.getComplianceStatus(this.getTotalCRRScore(),5.5)],["","","",""],["TOTAL SCORE","105.5",this.data.currentScore.toFixed(1),`Class ${this.data.classification}`]];this.pdf.autoTable?(this.pdf.autoTable({startY:this.yPosition,head:[["Category","Max Points","Current Score","Status"]],body:a,styles:{fontSize:10,cellPadding:3},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},columnStyles:{0:{cellWidth:80},1:{cellWidth:30,halign:"center"},2:{cellWidth:30,halign:"center"},3:{cellWidth:40,halign:"center"}},didParseCell:l=>{l.row.index===a.length-1&&(l.cell.styles.fillColor=[241,196,15],l.cell.styles.fontStyle="bold")}}),this.yPosition=this.pdf.lastAutoTable.finalY+15):(console.warn("AutoTable not available, using text fallback"),this.addTextFallbackTable("ISO Score Breakdown",a))}catch(a){console.error("Could not create ISO score breakdown table:",a),this.addTextFallbackTable("ISO Score Breakdown",[])}}addComplianceAnalysis(){try{this.pdf.setFontSize(16),this.pdf.setFont("helvetica","bold"),this.pdf.text("Compliance Analysis",15,this.yPosition),this.yPosition+=10,this.pdf.setFontSize(12),this.pdf.setFont("helvetica","normal"),this.generateComplianceAnalysis().forEach(l=>{this.pdf.text(l,15,this.yPosition),this.yPosition+=6}),this.yPosition+=10}catch(a){console.error("Error adding compliance analysis:",a),this.yPosition+=30}}addRecommendations(){try{this.pdf.setFontSize(16),this.pdf.setFont("helvetica","bold"),this.pdf.text("Improvement Recommendations",15,this.yPosition),this.yPosition+=10,this.pdf.setFontSize(12),this.pdf.setFont("helvetica","normal"),this.generateRecommendations().forEach(l=>{this.pdf.text(`â€¢ ${l}`,20,this.yPosition),this.yPosition+=6})}catch(a){console.error("Error adding recommendations:",a),this.yPosition+=30}}addTextFallbackTable(a,l){this.pdf.setFontSize(12),this.pdf.setFont("helvetica","bold"),this.pdf.text(a,15,this.yPosition),this.yPosition+=10,this.pdf.setFont("helvetica","normal"),this.pdf.text("(Professional table format not available - data summary)",15,this.yPosition),this.yPosition+=10,l.forEach(p=>{p.length>0&&(this.pdf.text(p.join(" | "),20,this.yPosition),this.yPosition+=5)}),this.yPosition+=10}getTotalFireDeptScore(){return this.data.assessment.fireDepartment.staffing+this.data.assessment.fireDepartment.equipment+this.data.assessment.fireDepartment.training+this.data.assessment.fireDepartment.distribution}getTotalWaterSupplyScore(){return this.data.assessment.waterSupply.capacity+this.data.assessment.waterSupply.distribution+this.data.assessment.waterSupply.alternative}getTotalCommunicationsScore(){return this.data.assessment.communications.dispatch+this.data.assessment.communications.alerting}getTotalCRRScore(){return this.data.assessment.communityRiskReduction.prevention+this.data.assessment.communityRiskReduction.education+this.data.assessment.communityRiskReduction.investigation}getPerformanceLevel(){const a=this.data.currentScore/105.5*100;return a>=90?"Excellent (Class 1-2)":a>=70?"Good (Class 3-4)":a>=50?"Fair (Class 5-6)":"Needs Improvement (Class 7-10)"}getComplianceStatus(a,l){const p=a/l*100;return p>=90?"Excellent":p>=70?"Good":p>=50?"Fair":"Poor"}generateComplianceAnalysis(){const a=[];a.push(`Your department achieved ${this.data.currentScore.toFixed(1)} out of 105.5 possible points,`),a.push(`resulting in a Class ${this.data.classification} ISO rating.`),a.push("");const l=this.getTotalFireDeptScore();a.push(`Fire Department Operations: ${l.toFixed(1)}/50.0 points (${(l/50*100).toFixed(1)}%)`);const p=this.getTotalWaterSupplyScore();a.push(`Water Supply: ${p.toFixed(1)}/40.0 points (${(p/40*100).toFixed(1)}%)`);const d=this.getTotalCommunicationsScore();return a.push(`Communications: ${d.toFixed(1)}/10.0 points (${(d/10*100).toFixed(1)}%)`),a}generateRecommendations(){const a=[],l=this.getTotalFireDeptScore(),p=this.getTotalWaterSupplyScore();return l<40&&a.push("Focus on fire department operations - consider staffing and equipment upgrades"),p<30&&a.push("Water supply improvements could significantly impact your ISO rating"),this.data.classification>=6&&a.push("Consider comprehensive assessment with ISO improvement consultant"),a.push("Regular training and equipment maintenance support continued compliance"),a}};const Yt=({open:i,onClose:a,assessment:l,score:p,classification:d})=>{const[C,k]=D.useState(!1),[h,E]=D.useState("Fire Department"),[z,g]=D.useState("Fire Chief"),j=async()=>{console.log("ðŸ† Generating ISO Credit Report:",{assessment:l,score:p,classification:d}),k(!0);try{const b={template:"iso_assessment_report",departmentName:h,chiefName:z,reportDate:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},m={currentScore:p,classification:d,assessment:l,communityProfile:{population:25e3,avgHomePremium:1200,commercialPremiums:125e3}},I=await new Vt(b,m).generateReport(),O=URL.createObjectURL(I),x=document.createElement("a");x.href=O,x.download=`ISO_Assessment_Report_${h.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(O),console.log("âœ… ISO PDF Report generated successfully")}catch(b){console.error("âŒ ISO PDF generation failed:",b),alert("Failed to generate PDF report. Please try again.")}finally{k(!1)}};return e.jsxs(jt,{open:i,onClose:a,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"60vh"}},children:[e.jsx(yt,{children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(t,{variant:"h6",children:"ISO Credit Report Generator"}),e.jsx(Q,{onClick:a,size:"small",sx:{minWidth:"auto",p:1},children:e.jsx(bt,{})})]})}),e.jsxs(vt,{children:[e.jsx(J,{severity:"success",sx:{mb:3},children:"Generate professional PDF reports for ISO assessments with customizable department information."}),e.jsxs(N,{elevation:1,sx:{p:3,mb:3},children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Department Information"}),e.jsxs(y,{container:!0,spacing:2,children:[e.jsx(y,{size:{xs:12,md:6},children:e.jsx(Ze,{fullWidth:!0,label:"Department Name",value:h,onChange:b=>E(b.target.value),variant:"outlined",placeholder:"Houston Fire Department"})}),e.jsx(y,{size:{xs:12,md:6},children:e.jsx(Ze,{fullWidth:!0,label:"Fire Chief Name",value:z,onChange:b=>g(b.target.value),variant:"outlined",placeholder:"Fire Chief John Smith"})})]})]}),e.jsxs(N,{elevation:1,sx:{p:3,mb:3},children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Report Features:"}),e.jsx(t,{component:"div",variant:"body1",children:e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"ISO Classification Analysis"})," - Current score breakdown and classification"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Category Performance"})," - Fire Department, Water Supply, Communications, CRR"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Compliance Analysis"})," - Detailed performance assessment"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Improvement Recommendations"})," - Specific areas for ISO score enhancement"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Professional Tables"})," - Structured data presentation"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Department Branding"})," - Custom department information"]})]})})]}),l&&e.jsxs(N,{elevation:1,sx:{p:3},children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Current Assessment Summary:"}),e.jsxs(t,{variant:"body1",children:[e.jsx("strong",{children:"ISO Classification:"})," Class ",d,e.jsx("br",{}),e.jsx("strong",{children:"Total Score:"})," ",p.toFixed(1)," / 105.5 points",e.jsx("br",{}),e.jsx("strong",{children:"Score Percentage:"})," ",(p/105.5*100).toFixed(1),"%"]})]})]}),e.jsxs(St,{sx:{p:3},children:[e.jsx(Q,{onClick:a,variant:"outlined",children:"Close"}),e.jsx(Q,{onClick:j,variant:"contained",startIcon:C?e.jsx(ve,{size:20,color:"inherit"}):e.jsx(rt,{}),disabled:!l||C,children:C?"Generating...":"Generate PDF Report"})]})]})},Kt=({assessment:i,currentScore:a,classification:l,className:p})=>{const{loading:d,error:C,analyzeData:k}=Tt(),[h,E]=D.useState(null),[z,g]=D.useState(!1),[j,b]=D.useState(null),m=i!==null&&a>0;D.useEffect(()=>{m&&!h&&!d&&F()},[m,a,l]);const F=async()=>{if(!m||!i)return;const f=`
Fire Department ISO Assessment Analysis:

OVERALL PERFORMANCE:
- Total Score: ${a.toFixed(1)}/105.5 points (${(a/105.5*100).toFixed(1)}%)
- Current Classification: Class ${l}
- Performance Level: ${r(a)}

FIRE DEPARTMENT OPERATIONS (${I(i)}/50 points):
- Staffing: ${i.fireDepartment.staffing.toFixed(1)}/12.5 points
- Equipment: ${i.fireDepartment.equipment.toFixed(1)}/12.5 points  
- Training: ${i.fireDepartment.training.toFixed(1)}/12.5 points
- Distribution: ${i.fireDepartment.distribution.toFixed(1)}/12.5 points

WATER SUPPLY (${O(i)}/40 points):
- Capacity: ${i.waterSupply.capacity.toFixed(1)}/20 points
- Distribution: ${i.waterSupply.distribution.toFixed(1)}/15 points
- Alternative Supply: ${i.waterSupply.alternative.toFixed(1)}/5 points

EMERGENCY COMMUNICATIONS (${x(i)}/10 points):
- Dispatch: ${i.communications.dispatch.toFixed(1)}/7 points
- Alerting: ${i.communications.alerting.toFixed(1)}/3 points

COMMUNITY RISK REDUCTION (${R(i)}/5.5 points):
- Prevention: ${i.communityRiskReduction.prevention.toFixed(1)}/2.5 points
- Education: ${i.communityRiskReduction.education.toFixed(1)}/2 points
- Investigation: ${i.communityRiskReduction.investigation.toFixed(1)}/1 points
    `.trim(),S=`
Analyze this fire department's ISO Fire Suppression Rating Schedule assessment. Provide:

1. PERFORMANCE ANALYSIS: Identify the department's strongest and weakest areas
2. IMPROVEMENT PRIORITIES: Top 3 specific recommendations for maximum classification improvement
3. COST-BENEFIT GUIDANCE: Which improvements offer the best return on investment
4. REGULATORY COMPLIANCE: Key ISO requirements this department should focus on
5. COMMUNITY IMPACT: How improvements would affect insurance costs and fire protection

Focus on practical, actionable recommendations that a fire chief can implement.
    `.trim();try{const v=await k(f,S);v&&(E(v),b(new Date().toLocaleString()))}catch(v){console.error("ISO AI Analysis Error:",v)}},I=f=>Object.values(f.fireDepartment).reduce((S,v)=>S+v,0),O=f=>Object.values(f.waterSupply).reduce((S,v)=>S+v,0),x=f=>Object.values(f.communications).reduce((S,v)=>S+v,0),R=f=>Object.values(f.communityRiskReduction).reduce((S,v)=>S+v,0),r=f=>f>=94.5?"Superior Protection (Class 1)":f>=84.5?"Excellent Protection (Class 2-3)":f>=69.5?"Good Protection (Class 4-5)":f>=39.5?"Fair Protection (Class 6-8)":"Limited Protection (Class 9-10)",o=()=>l<=3?"success":l<=5?"info":l<=7?"warning":"error",u=f=>f.split(`

`).map((v,A)=>{const M=v.split(`
`);return e.jsx(n,{sx:{mb:2},children:M.map((T,G)=>T.startsWith("###")?e.jsx(t,{variant:"h6",sx:{fontWeight:"bold",mb:1,color:"primary.main"},children:T.replace("###","").trim()},G):T.startsWith("##")?e.jsx(t,{variant:"h5",sx:{fontWeight:"bold",mb:1,color:"primary.main"},children:T.replace("##","").trim()},G):T.startsWith("- ")?e.jsxs(t,{variant:"body2",sx:{ml:2,mb:.5},children:["â€¢ ",T.replace("- ","")]},G):T.startsWith("**")&&T.endsWith("**")?e.jsx(t,{variant:"body2",sx:{fontWeight:"bold",mb:.5},children:T.replace(/\*\*/g,"")},G):T.trim()?e.jsx(t,{variant:"body2",sx:{mb:.5},children:T},G):null)},A)});return e.jsx(K,{className:p,children:e.jsxs(X,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(t,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(tt,{color:"primary"}),"AI ISO Analysis"]}),e.jsx(le,{onClick:()=>g(!z),size:"small",children:z?e.jsx(Ct,{}):e.jsx(Y,{})})]}),m&&e.jsxs(n,{sx:{mb:2},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(Ie,{fontSize:"small"}),e.jsx(t,{variant:"subtitle2",children:"ISO Classification"})]}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(w,{icon:e.jsx(it,{}),label:`Class ${l} - ${a.toFixed(1)}/105.5 pts`,color:o(),size:"small"}),e.jsx(t,{variant:"caption",color:"text.secondary",children:r(a)})]})]}),e.jsx(It,{in:z,children:e.jsxs(n,{children:[e.jsx(et,{sx:{my:2}}),e.jsx(n,{sx:{mb:2},children:e.jsx(Q,{fullWidth:!0,variant:"contained",onClick:F,disabled:!m||d,startIcon:d?e.jsx(ve,{size:16}):e.jsx(fe,{}),size:"small",children:d?"Analyzing ISO Assessment...":"Generate AI Insights"})}),d&&e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2,py:2},children:[e.jsx(ve,{size:24}),e.jsx(t,{variant:"body2",children:"Analyzing ISO assessment with AI..."})]}),C&&!d&&e.jsx(J,{severity:"error",sx:{mb:2},children:C}),!m&&!d&&e.jsx(J,{severity:"info",sx:{mb:2},children:"Complete your ISO assessment to get AI-powered improvement recommendations and classification analysis."}),h&&!d&&e.jsxs(n,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(Mt,{color:"primary",fontSize:"small"}),e.jsx(t,{variant:"subtitle2",children:"AI Analysis Results"}),e.jsx(w,{label:h.source==="ai"?"AI Analysis":"Fallback Analysis",color:h.source==="ai"?"primary":"default",size:"small"}),h.sanitized&&e.jsx(Rt,{title:"Data was sanitized for privacy",children:e.jsx(w,{label:"Sanitized",color:"info",size:"small"})})]}),h.success&&h.insight&&e.jsx(N,{sx:{p:2,bgcolor:"grey.50",minHeight:500,maxHeight:"80vh",overflow:"auto",border:"1px solid rgba(0, 0, 0, 0.12)"},children:u(h.insight)}),!h.success&&h.error&&e.jsx(J,{severity:"error",children:h.error}),j&&e.jsxs(t,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Last analyzed: ",j]})]})]})})]})})},me=320,ni=({initialAssessment:i,onAssessmentComplete:a,mode:l="assessment"})=>{const p=Ft(),d=Wt(p.breakpoints.down("md")),[C,k]=q.useState(!d),[h,E]=q.useState(!1),[z,g]=q.useState(!1),[j,b]=q.useState(0),[m,F]=q.useState(null),[I,O]=q.useState(0),[x,R]=q.useState(10),[r,o]=q.useState(!1),[u,f]=q.useState(null),[S]=q.useState({population:25e3,avgHomePremium:1200,commercialPremiums:5e5});D.useEffect(()=>{document.title="FireEMS ISO Credit Calculator"},[]),D.useEffect(()=>{i&&(F(i),console.log("Loading initial ISO assessment:",i))},[i]),D.useEffect(()=>{m&&a&&a(m)},[m,a]);const v=()=>{k(!C)},A=()=>{E(!h),h?document.fullscreenElement&&document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen&&document.documentElement.requestFullscreen()},M=()=>{const _={assessment:m,score:I,classification:x,timestamp:new Date};localStorage.setItem("iso_credit_calculator_autosave",JSON.stringify(_)),console.log("ISO assessment data saved")},T=()=>{console.log("ðŸ† ISO EXPORT BUTTON CLICKED - Starting export process");const _=m!==null;if(console.log("ðŸ† ISO EXPORT DATA CHECK:",{hasAssessment:_,currentScore:I,classification:x}),!_){console.log("ðŸ† NO ISO DATA - Showing alert"),alert("No ISO assessment data to export. Please complete the assessment first.");return}console.log("ðŸ† OPENING ISO REPORT GENERATOR - Setting state"),g(!0),console.log("ðŸ“Š Opening professional ISO credit report generator:",{score:I,classification:x,hasAssessment:!!m,showReportGenerator:!0})},G=()=>{f(null)},pe=(_,xe)=>{b(xe)};return e.jsx(wt,{children:e.jsxs(n,{sx:{display:"flex",height:"100vh",overflow:"hidden",bgcolor:"background.default",position:h?"fixed":"relative",top:h?0:"auto",left:h?0:"auto",right:h?0:"auto",bottom:h?0:"auto",zIndex:h?1300:"auto"},role:"main","aria-label":"ISO Credit Calculator Tool",children:[!h&&e.jsx(Et,{position:"fixed",sx:{zIndex:p.zIndex.drawer+1,bgcolor:"primary.main"},children:e.jsxs(kt,{children:[e.jsx(le,{color:"inherit","aria-label":"toggle sidebar",onClick:v,edge:"start",sx:{mr:2},children:e.jsx(zt,{})}),e.jsx(Ie,{sx:{mr:1}}),e.jsxs(t,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1},children:["ISO Credit Calculator",l==="planning"&&" - Planning Mode",l==="presentation"&&" - Presentation Mode"]}),e.jsxs(n,{sx:{display:"flex",gap:1},children:[e.jsx(le,{color:"inherit",onClick:M,title:"Save Assessment",children:e.jsx(Pt,{})}),e.jsx(le,{color:"inherit",onClick:T,title:"Generate Professional ISO Report",disabled:!m,children:e.jsx(rt,{})}),e.jsx(le,{color:"inherit",onClick:A,title:"Toggle Fullscreen",children:h?e.jsx($t,{}):e.jsx(Bt,{})})]})]})}),e.jsx(Lt,{variant:d?"temporary":"persistent",anchor:"left",open:C,onClose:v,sx:{width:me,flexShrink:0,"& .MuiDrawer-paper":{width:me,boxSizing:"border-box",marginTop:h?0:"56px",height:h?"100vh":"calc(100vh - 56px)",borderRight:`1px solid ${p.palette.divider}`}},ModalProps:{keepMounted:!0,disablePortal:!1,hideBackdrop:!d,disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0},PaperProps:{"aria-hidden":!1,role:"complementary","aria-label":"ISO Credit Calculator Tools"},children:e.jsx(Ht,{mode:l,onAssessmentChange:F,onScoreChange:O,onClassificationChange:R})}),e.jsxs(n,{component:"main",sx:{flexGrow:1,position:"relative",marginLeft:!d&&C?`${me}px`:0,width:!d&&C?`calc(100% - ${me}px)`:"100%",marginTop:h?0:"56px",height:h?"100vh":"calc(100vh - 56px)",transition:p.transitions.create(["margin","width"],{easing:p.transitions.easing.sharp,duration:p.transitions.duration.leavingScreen}),display:"flex",flexDirection:"column"},children:[e.jsx(N,{elevation:1,sx:{borderRadius:0,borderBottom:`1px solid ${p.palette.divider}`},children:e.jsxs(Dt,{value:j,onChange:pe,"aria-label":"ISO Credit Calculator Tabs",sx:{px:2},children:[e.jsx(be,{icon:e.jsx(it,{}),label:"Score Calculator",id:"iso-tab-0","aria-controls":"iso-tabpanel-0"}),e.jsx(be,{icon:e.jsx(fe,{}),label:"Improvement Planner",id:"iso-tab-1","aria-controls":"iso-tabpanel-1",disabled:!m}),e.jsx(be,{icon:e.jsx(tt,{}),label:"AI Insights",id:"iso-tab-2","aria-controls":"iso-tabpanel-2",disabled:!m})]})}),e.jsxs(n,{sx:{flexGrow:1,overflow:"auto",position:"relative"},children:[j===0&&e.jsx(N,{elevation:0,sx:{height:"100%",width:"100%",borderRadius:0,overflow:"auto",position:"relative",minHeight:"500px",display:"flex",flexDirection:"column"},role:"tabpanel",id:"iso-tabpanel-0","aria-labelledby":"iso-tab-0",children:e.jsx(Ut,{assessment:m,currentScore:I,classification:x,sidebarOpen:C,isMobile:d})}),j===1&&e.jsx(n,{sx:{height:"100%",overflow:"auto"},role:"tabpanel",id:"iso-tabpanel-1","aria-labelledby":"iso-tab-1",children:e.jsx(_t,{assessment:m,currentScore:I,classification:x,communityProfile:S})}),j===2&&e.jsx(n,{sx:{height:"100%",overflow:"auto",p:2},role:"tabpanel",id:"iso-tabpanel-2","aria-labelledby":"iso-tab-2",children:e.jsx(Kt,{assessment:m,currentScore:I,classification:x})})]}),r&&e.jsx(n,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(255, 255, 255, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsx(t,{variant:"h6",children:"Calculating ISO Score..."})})]}),e.jsx(Ot,{open:!!u,autoHideDuration:6e3,onClose:G,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(J,{onClose:G,severity:"error",sx:{width:"100%"},children:u})}),e.jsx(Yt,{open:z,onClose:()=>g(!1),assessment:m,score:I,classification:x})]})})};export{ni as default};
