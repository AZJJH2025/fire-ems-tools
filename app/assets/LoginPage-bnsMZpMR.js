import{a as T,g as $,bo as w,p as C,r as x,u as B,j as e,s as R,c as H,E as z,b as N,m as q,aK as U,bn as O,bp as J,B as n,y as A}from"./index-B0MqE5YV.js";import{L as K}from"./LocalFireDepartment-BQwJDryG.js";import{u as G,T as i,c as I,P as Q}from"./Typography-Dk44IOkC.js";import{A as L,T as P,a as X}from"./TextField-Dfjc__pI.js";import{I as Y}from"./InputAdornment-DhZNpdBL.js";import{a as Z,V as _}from"./VisibilityOff-NnS8bQ37.js";import{i as D,B as k}from"./List-CbCz2FBJ.js";import{D as ee}from"./Divider-B3mIDgHj.js";function re(r){return $("MuiLink",r)}const te=T("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),se=({theme:r,ownerState:s})=>{const t=s.color,l=w(r,`palette.${t}.main`,!1)||w(r,`palette.${t}`,!1)||s.color,a=w(r,`palette.${t}.mainChannel`)||w(r,`palette.${t}Channel`);return"vars"in r&&a?`rgba(${a} / 0.4)`:C(l,.4)},V={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},oe=r=>{const{classes:s,component:t,focusVisible:l,underline:a}=r,p={root:["root",`underline${z(a)}`,t==="button"&&"button",l&&"focusVisible"]};return N(p,re,s)},ne=R(i,{name:"MuiLink",slot:"Root",overridesResolver:(r,s)=>{const{ownerState:t}=r;return[s.root,s[`underline${z(t.underline)}`],t.component==="button"&&s.button]}})(q(({theme:r})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:s,ownerState:t})=>s==="always"&&t.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(r.palette).filter(U()).map(([s])=>({props:{underline:"always",color:s},style:{"--Link-underlineColor":r.vars?`rgba(${r.vars.palette[s].mainChannel} / 0.4)`:C(r.palette[s].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":r.vars?`rgba(${r.vars.palette.text.primaryChannel} / 0.4)`:C(r.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":r.vars?`rgba(${r.vars.palette.text.secondaryChannel} / 0.4)`:C(r.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(r.vars||r).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${te.focusVisible}`]:{outline:"auto"}}}]}))),F=x.forwardRef(function(s,t){const l=B({props:s,name:"MuiLink"}),a=G(),{className:p,color:c="primary",component:y="a",onBlur:m,onFocus:f,TypographyClasses:b,underline:v="always",variant:j="inherit",sx:h,...o}=l,[d,u]=x.useState(!1),W=g=>{D(g.target)||u(!1),m&&m(g)},E=g=>{D(g.target)&&u(!0),f&&f(g)},S={...l,color:c,component:y,focusVisible:d,underline:v,variant:j},M=oe(S);return e.jsx(ne,{color:c,className:H(M.root,p),classes:b,component:y,onBlur:W,onFocus:E,ref:t,ownerState:S,variant:j,...o,sx:[...V[c]===void 0?[{color:c}]:[],...Array.isArray(h)?h:[h]],style:{...o.style,...v==="always"&&c!=="inherit"&&!V[c]&&{"--Link-underlineColor":se({theme:a,ownerState:S})}}})}),ae=I(e.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"})),ie=I(e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"})),ge=()=>{const r=O(),s=J(),[t,l]=x.useState({email:"",password:""}),[a,p]=x.useState([]),[c,y]=x.useState(!1),[m,f]=x.useState(!1);x.useEffect(()=>{new URLSearchParams(s.search).get("signup")==="success"&&y(!0)},[s]);const b=(o,d)=>{l(u=>({...u,[o]:d}))},v=()=>{const o=[];return t.email.trim()?t.email.includes("@")||o.push("Valid email is required"):o.push("Email is required"),t.password||o.push("Password is required"),p(o),o.length===0},j=async o=>{if(o.preventDefault(),!!v())try{const u=await(await fetch("/auth/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,password:t.password,remember:!1})})).json();u.success?(console.log("Login successful:",u.user),r("/")):p([u.message||"Login failed"])}catch(d){console.error("Login error:",d),p(["An error occurred during login. Please try again."])}},h=()=>{alert("Forgot password functionality will be implemented soon. Please contact support for now.")};return e.jsxs(n,{sx:{minHeight:"100vh",bgcolor:"#f5f5f5"},children:[e.jsx(n,{sx:{background:"linear-gradient(135deg, #1565c0 0%, #1976d2 50%, #1e88e5 100%)",minHeight:"40vh",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:e.jsx(A,{maxWidth:"lg",children:e.jsxs(n,{sx:{textAlign:"center",color:"white"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:[e.jsx(K,{sx:{fontSize:60,mr:2}}),e.jsx(i,{variant:"h3",sx:{fontWeight:"bold"},children:"FireEMS.AI"})]}),e.jsx(i,{variant:"h5",sx:{opacity:.9},children:"Welcome back to your fire department analytics suite"})]})})}),e.jsx(A,{maxWidth:"sm",sx:{mt:-8,position:"relative",zIndex:1},children:e.jsxs(Q,{sx:{p:4,boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:[e.jsxs(n,{sx:{textAlign:"center",mb:4},children:[e.jsx(i,{variant:"h4",gutterBottom:!0,sx:{fontWeight:"bold",color:"#1565c0"},children:"Sign In"}),e.jsx(i,{variant:"body1",color:"text.secondary",children:"Access your department's analytics and reporting tools"})]}),c&&e.jsx(L,{severity:"success",sx:{mb:3},children:"Account created successfully! Please sign in with your credentials."}),a.length>0&&e.jsx(L,{severity:"error",sx:{mb:3},children:e.jsx(n,{children:a.map((o,d)=>e.jsxs(i,{variant:"body2",children:["â€¢ ",o]},d))})}),e.jsxs("form",{onSubmit:j,children:[e.jsxs(n,{sx:{mb:3},children:[e.jsx(P,{fullWidth:!0,label:"Email Address",type:"email",value:t.email,onChange:o=>b("email",o.target.value),placeholder:"chief@department.gov",required:!0,InputProps:{startAdornment:e.jsx(ae,{sx:{color:"#757575",mr:1}})},sx:{mb:2}}),e.jsx(P,{fullWidth:!0,label:"Password",type:m?"text":"password",value:t.password,onChange:o=>b("password",o.target.value),required:!0,InputProps:{startAdornment:e.jsx(ie,{sx:{color:"#757575",mr:1}}),endAdornment:e.jsx(Y,{position:"end",children:e.jsx(X,{"aria-label":"toggle password visibility",onClick:()=>f(!m),edge:"end",size:"small",children:m?e.jsx(Z,{}):e.jsx(_,{})})})}})]}),e.jsx(k,{type:"submit",fullWidth:!0,variant:"contained",size:"large",sx:{py:1.5,fontSize:"1.1rem",fontWeight:"bold",mb:2,bgcolor:"#1565c0","&:hover":{bgcolor:"#1976d2"}},children:"Sign In"}),e.jsx(n,{sx:{textAlign:"center",mb:3},children:e.jsx(F,{component:"button",type:"button",onClick:h,sx:{color:"#1565c0",textDecoration:"none",fontSize:"0.95rem"},children:"Forgot your password?"})}),e.jsx(ee,{sx:{mb:3},children:e.jsx(i,{variant:"body2",color:"text.secondary",children:"New to FireEMS.AI?"})}),e.jsx(k,{fullWidth:!0,variant:"outlined",size:"large",onClick:()=>r("/signup"),sx:{py:1.5,fontSize:"1.1rem",fontWeight:"bold",borderColor:"#1565c0",color:"#1565c0","&:hover":{borderColor:"#1976d2",bgcolor:"rgba(21, 101, 192, 0.04)"}},children:"Create New Account"})]}),e.jsxs(n,{sx:{mt:4,p:3,bgcolor:"#f5f5f5",borderRadius:2},children:[e.jsxs(i,{variant:"body2",color:"text.secondary",align:"center",gutterBottom:!0,children:[e.jsx("strong",{children:"Demo Access:"})," While in development, you can access tools directly from the homepage."]}),e.jsx(k,{variant:"text",size:"small",onClick:()=>r("/"),sx:{display:"block",mx:"auto",color:"#1565c0"},children:"Return to Homepage"})]})]})}),e.jsx(n,{sx:{py:6,textAlign:"center"},children:e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Need help? Contact our support team at"," ",e.jsx(F,{href:"mailto:support@fireems.ai",sx:{color:"#1565c0"},children:"support@fireems.ai"})]})})]})};export{ge as default};
