import{a as T,g as $,bo as w,p as C,r as m,u as B,j as e,s as R,c as H,E as z,b as N,m as q,aK as U,bn as O,bp as J,B as a,y as A}from"./index-B5lWbLwU.js";import{L as K}from"./LocalFireDepartment-ByADK0iD.js";import{u as _,T as l,c as I,P as G}from"./Typography-DMki5wnW.js";import{A as L,T as P,a as Q}from"./TextField-IG2KVE_R.js";import{I as X}from"./InputAdornment-BCMbdPi4.js";import{a as Y,V as Z}from"./VisibilityOff-GwsyLsRu.js";import{i as D,B as k}from"./List-CQy5Q7ZD.js";import{D as ee}from"./Divider-ENMwQoXd.js";function re(r){return $("MuiLink",r)}const se=T("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),te=({theme:r,ownerState:t})=>{const s=t.color,c=w(r,`palette.${s}.main`,!1)||w(r,`palette.${s}`,!1)||t.color,i=w(r,`palette.${s}.mainChannel`)||w(r,`palette.${s}Channel`);return"vars"in r&&i?`rgba(${i} / 0.4)`:C(c,.4)},V={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},oe=r=>{const{classes:t,component:s,focusVisible:c,underline:i}=r,p={root:["root",`underline${z(i)}`,s==="button"&&"button",c&&"focusVisible"]};return N(p,re,t)},ne=R(l,{name:"MuiLink",slot:"Root",overridesResolver:(r,t)=>{const{ownerState:s}=r;return[t.root,t[`underline${z(s.underline)}`],s.component==="button"&&t.button]}})(q(({theme:r})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:t,ownerState:s})=>t==="always"&&s.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(r.palette).filter(U()).map(([t])=>({props:{underline:"always",color:t},style:{"--Link-underlineColor":r.vars?`rgba(${r.vars.palette[t].mainChannel} / 0.4)`:C(r.palette[t].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":r.vars?`rgba(${r.vars.palette.text.primaryChannel} / 0.4)`:C(r.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":r.vars?`rgba(${r.vars.palette.text.secondaryChannel} / 0.4)`:C(r.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(r.vars||r).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${se.focusVisible}`]:{outline:"auto"}}}]}))),F=m.forwardRef(function(t,s){const c=B({props:t,name:"MuiLink"}),i=_(),{className:p,color:d="primary",component:y="a",onBlur:x,onFocus:f,TypographyClasses:b,underline:v="always",variant:j="inherit",sx:h,...o}=c,[u,n]=m.useState(!1),W=g=>{D(g.target)||n(!1),x&&x(g)},E=g=>{D(g.target)&&n(!0),f&&f(g)},S={...c,color:d,component:y,focusVisible:u,underline:v,variant:j},M=oe(S);return e.jsx(ne,{color:d,className:H(M.root,p),classes:b,component:y,onBlur:W,onFocus:E,ref:s,ownerState:S,variant:j,...o,sx:[...V[d]===void 0?[{color:d}]:[],...Array.isArray(h)?h:[h]],style:{...o.style,...v==="always"&&d!=="inherit"&&!V[d]&&{"--Link-underlineColor":te({theme:i,ownerState:S})}}})}),ae=I(e.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"})),ie=I(e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"})),ge=()=>{const r=O(),t=J(),[s,c]=m.useState({email:"",password:""}),[i,p]=m.useState([]),[d,y]=m.useState(!1),[x,f]=m.useState(!1);m.useEffect(()=>{new URLSearchParams(t.search).get("signup")==="success"&&y(!0)},[t]);const b=(o,u)=>{c(n=>({...n,[o]:u}))},v=()=>{const o=[];return s.email.trim()?s.email.includes("@")||o.push("Valid email is required"):o.push("Email is required"),s.password||o.push("Password is required"),p(o),o.length===0},j=async o=>{if(o.preventDefault(),!!v())try{const n=await(await fetch("/auth/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.email,password:s.password,remember:!1})})).json();n.success?(console.log("Login successful:",n.user),n.user.role==="super_admin"||n.user.role==="admin"?r("/app/admin"):r("/")):p([n.message||"Login failed"])}catch(u){console.error("Login error:",u),p(["An error occurred during login. Please try again."])}},h=()=>{alert("Forgot password functionality will be implemented soon. Please contact support for now.")};return e.jsxs(a,{sx:{minHeight:"100vh",bgcolor:"#f5f5f5"},children:[e.jsx(a,{sx:{background:"linear-gradient(135deg, #1565c0 0%, #1976d2 50%, #1e88e5 100%)",minHeight:"40vh",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:e.jsx(A,{maxWidth:"lg",children:e.jsxs(a,{sx:{textAlign:"center",color:"white"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:[e.jsx(K,{sx:{fontSize:60,mr:2}}),e.jsx(l,{variant:"h3",sx:{fontWeight:"bold"},children:"FireEMS.AI"})]}),e.jsx(l,{variant:"h5",sx:{opacity:.9},children:"Welcome back to your fire department analytics suite"})]})})}),e.jsx(A,{maxWidth:"sm",sx:{mt:-8,position:"relative",zIndex:1},children:e.jsxs(G,{sx:{p:4,boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:[e.jsxs(a,{sx:{textAlign:"center",mb:4},children:[e.jsx(l,{variant:"h4",gutterBottom:!0,sx:{fontWeight:"bold",color:"#1565c0"},children:"Sign In"}),e.jsx(l,{variant:"body1",color:"text.secondary",children:"Access your department's analytics and reporting tools"})]}),d&&e.jsx(L,{severity:"success",sx:{mb:3},children:"Account created successfully! Please sign in with your credentials."}),i.length>0&&e.jsx(L,{severity:"error",sx:{mb:3},children:e.jsx(a,{children:i.map((o,u)=>e.jsxs(l,{variant:"body2",children:["â€¢ ",o]},u))})}),e.jsxs("form",{onSubmit:j,children:[e.jsxs(a,{sx:{mb:3},children:[e.jsx(P,{fullWidth:!0,label:"Email Address",type:"email",value:s.email,onChange:o=>b("email",o.target.value),placeholder:"chief@department.gov",required:!0,InputProps:{startAdornment:e.jsx(ae,{sx:{color:"#757575",mr:1}})},sx:{mb:2}}),e.jsx(P,{fullWidth:!0,label:"Password",type:x?"text":"password",value:s.password,onChange:o=>b("password",o.target.value),required:!0,InputProps:{startAdornment:e.jsx(ie,{sx:{color:"#757575",mr:1}}),endAdornment:e.jsx(X,{position:"end",children:e.jsx(Q,{"aria-label":"toggle password visibility",onClick:()=>f(!x),edge:"end",size:"small",children:x?e.jsx(Y,{}):e.jsx(Z,{})})})}})]}),e.jsx(k,{type:"submit",fullWidth:!0,variant:"contained",size:"large",sx:{py:1.5,fontSize:"1.1rem",fontWeight:"bold",mb:2,bgcolor:"#1565c0","&:hover":{bgcolor:"#1976d2"}},children:"Sign In"}),e.jsx(a,{sx:{textAlign:"center",mb:3},children:e.jsx(F,{component:"button",type:"button",onClick:h,sx:{color:"#1565c0",textDecoration:"none",fontSize:"0.95rem"},children:"Forgot your password?"})}),e.jsx(ee,{sx:{mb:3},children:e.jsx(l,{variant:"body2",color:"text.secondary",children:"New to FireEMS.AI?"})}),e.jsx(k,{fullWidth:!0,variant:"outlined",size:"large",onClick:()=>r("/signup"),sx:{py:1.5,fontSize:"1.1rem",fontWeight:"bold",borderColor:"#1565c0",color:"#1565c0","&:hover":{borderColor:"#1976d2",bgcolor:"rgba(21, 101, 192, 0.04)"}},children:"Create New Account"})]}),e.jsxs(a,{sx:{mt:4,p:3,bgcolor:"#f5f5f5",borderRadius:2},children:[e.jsxs(l,{variant:"body2",color:"text.secondary",align:"center",gutterBottom:!0,children:[e.jsx("strong",{children:"Demo Access:"})," While in development, you can access tools directly from the homepage."]}),e.jsx(k,{variant:"text",size:"small",onClick:()=>r("/"),sx:{display:"block",mx:"auto",color:"#1565c0"},children:"Return to Homepage"})]})]})}),e.jsx(a,{sx:{py:6,textAlign:"center"},children:e.jsxs(l,{variant:"body2",color:"text.secondary",children:["Need help? Contact our support team at"," ",e.jsx(F,{href:"mailto:support@fireems.ai",sx:{color:"#1565c0"},children:"support@fireems.ai"})]})})]})};export{ge as default};
