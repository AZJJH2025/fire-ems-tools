import{j as e,r as H,B as r,R as q}from"./index-DKRsxaC2.js";import{S as E,E as Ve,A as Qe,a as Je,M as Ye,D as Ze}from"./A11yProvider-Cz98LTRz.js";import{c as V,T as i,P as U,u as ei}from"./Typography-DG91cqUz.js";import{L as K}from"./LinearProgress-CTzOj1FQ.js";import{G as g,F as ii,C as w,L as J,j as k,k as R,l as D,A as me,D as ti,e as ri,f as ni,g as oi,h as ai,z as ci,I as le,T as si,i as Ue,n as li}from"./Tabs-DhuYpNCh.js";import{B as ee}from"./Button-CnzWdMas.js";import{S as di,a as xi}from"./Save-B9mw7Sv8.js";import{A as te,a as re,E as ne,b as oe,W as pe,I as pi}from"./Warning-DFaFNwRh.js";import{L as fe}from"./LocalFireDepartment-WtrEmFnr.js";import{S as Xe}from"./Security-BytxqT0b.js";import{C as Y,a as Z}from"./CardContent-DLVs1A9k.js";import{E as _e}from"./Error-D9mz7vxm.js";import{C as Q,f as ui,e as hi,T as mi,a as fi,b as ue,c as X,d as gi}from"./CheckCircle-C5UtK0eO.js";import{A as ji}from"./AttachMoney-DA2-lb13.js";import{T as yi}from"./Timeline-CNCAYBoO.js";import{C as bi}from"./Close-CK0mF1Yj.js";import{u as vi,F as Si,a as Ci}from"./FullscreenExit-CrsQHvww.js";import{A as Ii}from"./Assessment-DV4cJnXE.js";const ki=V(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5.97 4.06L14.09 6l1.41 1.41L16.91 6l1.06 1.06-1.41 1.41 1.41 1.41-1.06 1.06-1.41-1.4-1.41 1.41-1.06-1.06 1.41-1.41zm-6.78.66h5v1.5h-5zM11.5 16h-2v2H8v-2H6v-1.5h2v-2h1.5v2h2zm6.5 1.25h-5v-1.5h5zm0-2.5h-5v-1.5h5z"})),ge=V(e.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"})),Ri=V([e.jsx("circle",{cx:"12",cy:"19",r:"2"},"0"),e.jsx("path",{d:"M10 3h4v12h-4z"},"1")]),Di=V(e.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"})),je=V(e.jsx("path",{d:"M5 13.18v4L12 21l7-3.82v-4L12 17zM12 3 1 9l11 6 9-4.91V17h2V9z"})),he=V(e.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"})),ye=V(e.jsx("path",{d:"M21.98 14H22zM5.35 13c1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.4.98 3.31 1v-2c-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1v2c1.9 0 2.17-1 3.35-1m13.32 2c-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.1 1-3.34 1s-1.38-1-3.33-1-2.1 1-3.34 1v2c1.95 0 2.11-1 3.34-1 1.24 0 1.38 1 3.33 1s2.1-1 3.34-1c1.19 0 1.42 1 3.33 1 1.94 0 2.09-1 3.33-1 1.19 0 1.42 1 3.33 1v-2c-1.24 0-1.38-1-3.33-1M5.35 9c1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.4.98 3.31 1V8c-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1C3.38 7 3.24 8 2 8v2c1.9 0 2.17-1 3.35-1"})),wi=({mode:t="assessment",onAssessmentChange:C,onScoreChange:v,onClassificationChange:j})=>{const[d,S]=H.useState({fireDepartment:{staffing:0,equipment:0,training:0,distribution:0},waterSupply:{capacity:0,distribution:0,alternative:0},communications:{dispatch:0,alerting:0},communityRiskReduction:{prevention:0,education:0,investigation:0}}),[P,m]=H.useState("fire-department"),[O,L]=H.useState(!0);H.useEffect(()=>{C(d),O&&W()},[d,O]);const W=()=>{const o=Object.values(d.fireDepartment).reduce((I,b)=>I+b,0),n=Object.values(d.waterSupply).reduce((I,b)=>I+b,0),u=Object.values(d.communications).reduce((I,b)=>I+b,0),M=Object.values(d.communityRiskReduction).reduce((I,b)=>I+b,0),A=o+n+u+M,B=p(A);v(A),j(B)},p=o=>{const n=o/105.5*100;return n>=90?1:n>=80?2:n>=70?3:n>=60?4:n>=50?5:n>=40?6:n>=30?7:n>=20?8:n>=10?9:10},T=o=>(n,u)=>{m(u?o:"")},h=(o,n)=>{S(u=>({...u,fireDepartment:{...u.fireDepartment,[o]:n}}))},y=(o,n)=>{S(u=>({...u,waterSupply:{...u.waterSupply,[o]:n}}))},f=(o,n)=>{S(u=>({...u,communications:{...u.communications,[o]:n}}))},s=(o,n)=>{S(u=>({...u,communityRiskReduction:{...u.communityRiskReduction,[o]:n}}))},l=()=>{S({fireDepartment:{staffing:0,equipment:0,training:0,distribution:0},waterSupply:{capacity:0,distribution:0,alternative:0},communications:{dispatch:0,alerting:0},communityRiskReduction:{prevention:0,education:0,investigation:0}})},x=()=>Object.values(d.fireDepartment).reduce((o,n)=>o+n,0)+Object.values(d.waterSupply).reduce((o,n)=>o+n,0)+Object.values(d.communications).reduce((o,n)=>o+n,0)+Object.values(d.communityRiskReduction).reduce((o,n)=>o+n,0);return e.jsxs(r,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(r,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"ISO Assessment Input"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Enter your fire department's capabilities to calculate ISO classification"}),e.jsxs(r,{sx:{mt:2},children:[e.jsxs(i,{variant:"body2",gutterBottom:!0,children:["Current Score: ",x().toFixed(1)," / 105.5"]}),e.jsx(K,{variant:"determinate",value:x()/105.5*100,sx:{height:6,borderRadius:3}})]})]}),e.jsxs(r,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:[e.jsxs(g,{container:!0,spacing:1,children:[e.jsx(g,{item:!0,xs:6,children:e.jsx(ee,{variant:"outlined",size:"small",startIcon:e.jsx(ki,{}),onClick:W,disabled:O,fullWidth:!0,children:"Calculate"})}),e.jsx(g,{item:!0,xs:6,children:e.jsx(ee,{variant:"outlined",size:"small",startIcon:e.jsx(Di,{}),onClick:l,fullWidth:!0,children:"Reset"})})]}),e.jsx(ii,{control:e.jsx(di,{checked:O,onChange:o=>L(o.target.checked),size:"small"}),label:"Auto-calculate",sx:{mt:1}})]}),e.jsxs(r,{sx:{flexGrow:1,overflow:"auto"},children:[e.jsxs(te,{expanded:P==="fire-department",onChange:T("fire-department"),children:[e.jsx(re,{expandIcon:e.jsx(ne,{}),children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(fe,{sx:{color:"#ff5722"}}),e.jsxs(r,{sx:{flexGrow:1},children:[e.jsx(i,{variant:"subtitle1",children:"Fire Department"}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[Object.values(d.fireDepartment).reduce((o,n)=>o+n,0).toFixed(1)," / 50 points"]})]}),e.jsx(w,{label:"50 pts",size:"small",sx:{bgcolor:"#ff5722",color:"white"}})]})}),e.jsx(oe,{children:e.jsxs(r,{sx:{space:2},children:[e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Staffing & Personnel Deployment (12.5 pts)"}),e.jsx(E,{value:d.fireDepartment.staffing,onChange:(o,n)=>h("staffing",n),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Personnel availability, response times, staffing levels"})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Equipment & Apparatus (12.5 pts)"}),e.jsx(E,{value:d.fireDepartment.equipment,onChange:(o,n)=>h("equipment",n),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"NFPA 1901 compliance, maintenance, testing"})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Training Programs (12.5 pts)"}),e.jsx(E,{value:d.fireDepartment.training,onChange:(o,n)=>h("training",n),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"20+ hours/month structure fire training = 2.25 pts"})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Station Distribution & Coverage (12.5 pts)"}),e.jsx(E,{value:d.fireDepartment.distribution,onChange:(o,n)=>h("distribution",n),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Station locations, response coverage, mutual aid"})]})]})})]}),e.jsxs(te,{expanded:P==="water-supply",onChange:T("water-supply"),children:[e.jsx(re,{expandIcon:e.jsx(ne,{}),children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(ye,{sx:{color:"#2196f3"}}),e.jsxs(r,{sx:{flexGrow:1},children:[e.jsx(i,{variant:"subtitle1",children:"Water Supply"}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[Object.values(d.waterSupply).reduce((o,n)=>o+n,0).toFixed(1)," / 40 points"]})]}),e.jsx(w,{label:"40 pts",size:"small",sx:{bgcolor:"#2196f3",color:"white"}})]})}),e.jsx(oe,{children:e.jsxs(r,{sx:{space:2},children:[e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Water Capacity & Flow (20 pts)"}),e.jsx(E,{value:d.waterSupply.capacity,onChange:(o,n)=>y("capacity",n),min:0,max:20,step:.1,valueLabelDisplay:"auto",sx:{color:"#2196f3"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Minimum 250 GPM for 2 hours (Class 8B: 200 GPM for 20 min)"})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Hydrant Distribution (15 pts)"}),e.jsx(E,{value:d.waterSupply.distribution,onChange:(o,n)=>y("distribution",n),min:0,max:15,step:.1,valueLabelDisplay:"auto",sx:{color:"#2196f3"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Hydrant spacing max 1,000 feet from incidents"})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Alternative Water Supply (5 pts)"}),e.jsx(E,{value:d.waterSupply.alternative,onChange:(o,n)=>y("alternative",n),min:0,max:5,step:.1,valueLabelDisplay:"auto",sx:{color:"#2196f3"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Dry hydrants, tanker shuttles, rural supplies"})]})]})})]}),e.jsxs(te,{expanded:P==="communications",onChange:T("communications"),children:[e.jsx(re,{expandIcon:e.jsx(ne,{}),children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(ge,{sx:{color:"#9c27b0"}}),e.jsxs(r,{sx:{flexGrow:1},children:[e.jsx(i,{variant:"subtitle1",children:"Communications"}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[Object.values(d.communications).reduce((o,n)=>o+n,0).toFixed(1)," / 10 points"]})]}),e.jsx(w,{label:"10 pts",size:"small",sx:{bgcolor:"#9c27b0",color:"white"}})]})}),e.jsx(oe,{children:e.jsxs(r,{sx:{space:2},children:[e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"911 Dispatch Center (7 pts)"}),e.jsx(E,{value:d.communications.dispatch,onChange:(o,n)=>f("dispatch",n),min:0,max:7,step:.1,valueLabelDisplay:"auto",sx:{color:"#9c27b0"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Call processing, dispatch times, capabilities"})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Alerting Systems (3 pts)"}),e.jsx(E,{value:d.communications.alerting,onChange:(o,n)=>f("alerting",n),min:0,max:3,step:.1,valueLabelDisplay:"auto",sx:{color:"#9c27b0"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Radio systems, pagers, notification equipment"})]})]})})]}),e.jsxs(te,{expanded:P==="community-risk",onChange:T("community-risk"),children:[e.jsx(re,{expandIcon:e.jsx(ne,{}),children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(je,{sx:{color:"#4caf50"}}),e.jsxs(r,{sx:{flexGrow:1},children:[e.jsx(i,{variant:"subtitle1",children:"Community Risk Reduction"}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[Object.values(d.communityRiskReduction).reduce((o,n)=>o+n,0).toFixed(1)," / 5.5 points"]})]}),e.jsx(w,{label:"BONUS",size:"small",sx:{bgcolor:"#4caf50",color:"white"}})]})}),e.jsx(oe,{children:e.jsxs(r,{sx:{space:2},children:[e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Fire Prevention (2.5 pts)"}),e.jsx(E,{value:d.communityRiskReduction.prevention,onChange:(o,n)=>s("prevention",n),min:0,max:2.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#4caf50"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Code enforcement, inspections, prevention programs"})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Public Education (2 pts)"}),e.jsx(E,{value:d.communityRiskReduction.education,onChange:(o,n)=>s("education",n),min:0,max:2,step:.1,valueLabelDisplay:"auto",sx:{color:"#4caf50"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Community outreach, education programs"})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Fire Investigation (1 pt)"}),e.jsx(E,{value:d.communityRiskReduction.investigation,onChange:(o,n)=>s("investigation",n),min:0,max:1,step:.1,valueLabelDisplay:"auto",sx:{color:"#4caf50"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Fire investigation capabilities and training"})]})]})})]})]})]})},Pi=({assessment:t,currentScore:C,classification:v,sidebarOpen:j,isMobile:d})=>{var n,u,M,A,B,I,b,N,ie,ae,$,ce,be,ve,Se,Ce,Ie,ke,Re,De,we,Pe,Fe,Oe,Ee,Me,Ae,Te,Be,qe,Le,We,Ge,ze,He,Ne,$e;const S=()=>{if(!t)return 0;const{staffing:a,equipment:c,training:F,distribution:G}=t.fireDepartment,z=Math.min(a,12.5),_=Math.min(c,12.5),xe=Math.min(F,12.5),se=Math.min(G,12.5);return z+_+xe+se},P=()=>{if(!t)return 0;const{capacity:a,distribution:c,alternative:F}=t.waterSupply,G=Math.min(a,20),z=Math.min(c,15),_=Math.min(F,5);return G+z+_},m=()=>{if(!t)return 0;const{dispatch:a,alerting:c}=t.communications,F=Math.min(a,7),G=Math.min(c,3);return F+G},O=()=>{if(!t)return 0;const{prevention:a,education:c,investigation:F}=t.communityRiskReduction,G=Math.min(a,2.5),z=Math.min(c,2),_=Math.min(F,1);return G+z+_},L=()=>{const a=S(),c=P(),F=m(),G=O();let z=a+c+F;const _=a/50,xe=c/40,se=Math.abs(_-xe);if(se>.1){const Ke=se*10;z=Math.max(0,z-Ke)}return z+G},W=a=>{const c=a/105.5*100;return c>=90?1:c>=80?2:c>=70?3:c>=60?4:c>=50?5:c>=40?6:c>=30?7:c>=20?8:c>=10?9:10},p=(a,c)=>{const F=a/c*100;return F>=90?{level:"EXCELLENT",color:"#1b5e20",bg:"#e8f5e8",icon:e.jsx(Q,{}),description:"Top 10% of departments"}:F>=75?{level:"GOOD",color:"#2e7d32",bg:"#f1f8e9",icon:e.jsx(Q,{}),description:"Above average performance"}:F>=60?{level:"NEEDS IMPROVEMENT",color:"#ff8f00",bg:"#fff8e1",icon:e.jsx(pe,{}),description:"Below average - opportunity exists"}:{level:"CRITICAL",color:"#d32f2f",bg:"#ffebee",icon:e.jsx(_e,{}),description:"Major deficiency affecting rating"}},T=a=>{switch(a){case 1:return{color:"#1b5e20",bg:"#e8f5e8",desc:"Superior Protection",icon:e.jsx(Q,{}),benchmark:"Elite - Top 1% of departments"};case 2:case 3:return{color:"#2e7d32",bg:"#f1f8e9",desc:"Excellent Protection",icon:e.jsx(Q,{}),benchmark:"Top 25% of departments"};case 4:case 5:return{color:"#558b2f",bg:"#f9fbe7",desc:"Good Protection",icon:e.jsx(Q,{}),benchmark:"Above average for community size"};case 6:case 7:return{color:"#ff8f00",bg:"#fff8e1",desc:"Fair Protection",icon:e.jsx(pe,{}),benchmark:"Below average - improvement needed"};case 8:case 9:return{color:"#f57c00",bg:"#fff3e0",desc:"Poor Protection",icon:e.jsx(pe,{}),benchmark:"Bottom 25% - significant gaps"};case 10:default:return{color:"#d32f2f",bg:"#ffebee",desc:"Inadequate Protection",icon:e.jsx(_e,{}),benchmark:"Critical deficiencies present"}}},h=S(),y=P(),f=m(),s=O(),l=L(),x=W(l),o=T(x);return e.jsxs(r,{sx:{p:3,height:"100%",overflow:"auto"},children:[e.jsxs(r,{sx:{mb:4},children:[e.jsxs(i,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Xe,{sx:{fontSize:40,color:"primary.main"}}),"ISO Fire Rating Assessment"]}),e.jsx(i,{variant:"subtitle1",color:"text.secondary",children:"Fire Suppression Rating Schedule (FSRS) Analysis - 105.5 Point System"})]}),e.jsx(U,{elevation:3,sx:{p:3,mb:4,background:`linear-gradient(135deg, ${o.bg} 0%, #ffffff 100%)`,border:`2px solid ${o.color}`},children:e.jsxs(g,{container:!0,spacing:3,alignItems:"center",children:[e.jsx(g,{item:!0,xs:12,md:4,children:e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(i,{variant:"h2",sx:{color:o.color,fontWeight:"bold",mb:1},children:x}),e.jsx(w,{icon:o.icon,label:`Class ${x}`,sx:{bgcolor:o.color,color:"white",fontSize:"1.1rem",px:2,py:1}})]})}),e.jsxs(g,{item:!0,xs:12,md:8,children:[e.jsx(i,{variant:"h5",sx:{color:o.color,mb:1},children:o.desc}),e.jsxs(i,{variant:"body1",sx:{color:"text.secondary",mb:2,fontStyle:"italic"},children:["📊 ",o.benchmark]}),e.jsxs(i,{variant:"h6",gutterBottom:!0,children:["Total Score: ",l.toFixed(1)," / 105.5 points"]}),e.jsx(K,{variant:"determinate",value:l/105.5*100,sx:{height:10,borderRadius:5,bgcolor:"rgba(0,0,0,0.1)","& .MuiLinearProgress-bar":{bgcolor:o.color}}}),e.jsxs(i,{variant:"body2",sx:{mt:1,color:"text.secondary"},children:[(l/105.5*100).toFixed(1),"% of maximum possible score"]}),x>1&&e.jsxs(r,{sx:{mt:2,p:2,bgcolor:"rgba(0,0,0,0.05)",borderRadius:1},children:[e.jsxs(i,{variant:"body2",sx:{fontWeight:"bold",color:"primary.main"},children:["🎯 Path to Class ",x-1,":"]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Need ",(Math.ceil((x-1)*10.55)-l).toFixed(1)," more points",x===5&&" (90+ points for Class 4 - significant insurance savings)",x===2&&" (95+ points for Class 1 - elite rating)"]})]})]})]})}),e.jsxs(g,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(Y,{elevation:2,children:e.jsxs(Z,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(fe,{sx:{color:"#ff5722",mr:1}}),e.jsx(i,{variant:"h6",children:"Fire Department Operations"})]}),(()=>{const a=p(h,50);return e.jsx(w,{icon:a.icon,label:a.level,size:"small",sx:{bgcolor:a.color,color:"white",fontWeight:"bold"}})})()]}),e.jsxs(i,{variant:"h4",sx:{color:"#ff5722",mb:1},children:[h.toFixed(1)," / 50"]}),e.jsxs(i,{variant:"body2",sx:{color:"text.secondary",mb:2},children:[(h/50*100).toFixed(0),"% • ",p(h,50).description]}),e.jsx(K,{variant:"determinate",value:h/50*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#ff5722"}}}),e.jsxs(J,{dense:!0,children:[e.jsxs(k,{children:[e.jsx(R,{children:(()=>{var c;const a=p(((c=t==null?void 0:t.fireDepartment)==null?void 0:c.staffing)||0,12.5);return e.jsx(r,{sx:{color:a.color},children:a.icon})})()}),e.jsx(D,{primary:`Staffing: ${((u=(n=t==null?void 0:t.fireDepartment)==null?void 0:n.staffing)==null?void 0:u.toFixed(1))||"0.0"} / 12.5`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Engine Company:"})," Minimum 3 firefighters + 1 officer (4 total)"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Ladder Company:"})," Minimum 3 firefighters + 1 officer (4 total)"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"On-Duty Staffing:"})," 24/7 coverage with sufficient personnel"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Response Goal:"})," 15 firefighters within 8 minutes for structure fires"]}),((M=t==null?void 0:t.fireDepartment)==null?void 0:M.staffing)&&t.fireDepartment.staffing<9.5&&e.jsxs(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:["💡 Need: +",Math.ceil((9.5-t.fireDepartment.staffing)/2)," firefighters per shift"]})]})})]}),e.jsxs(k,{children:[e.jsx(R,{children:(()=>{var c;const a=p(((c=t==null?void 0:t.fireDepartment)==null?void 0:c.equipment)||0,12.5);return e.jsx(r,{sx:{color:a.color},children:a.icon})})()}),e.jsx(D,{primary:`Equipment: ${((B=(A=t==null?void 0:t.fireDepartment)==null?void 0:A.equipment)==null?void 0:B.toFixed(1))||"0.0"} / 12.5`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Equipment Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Engine Companies:"})," 1,000+ GPM pump, 300+ gallons water tank"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Ladder Companies:"})," 75-100 ft aerial ladder or platform"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Ground Ladders:"})," 115 ft total (various lengths)"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"SCBA:"})," 10 sets minimum per engine/ladder company"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Hose:"}),' 3,000 ft of 2½" hose per engine company']}),(I=t==null?void 0:t.fireDepartment)!=null&&I.equipment&&t.fireDepartment.equipment>=10?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Equipment meets community requirements"}):e.jsx(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"⚠️ Review apparatus compliance with NFPA 1901 standards"})]})})]}),e.jsxs(k,{children:[e.jsx(R,{children:(()=>{var c;const a=p(((c=t==null?void 0:t.fireDepartment)==null?void 0:c.training)||0,12.5);return e.jsx(r,{sx:{color:a.color},children:a.icon})})()}),e.jsx(D,{primary:`Training: ${((N=(b=t==null?void 0:t.fireDepartment)==null?void 0:b.training)==null?void 0:N.toFixed(1))||"0.0"} / 12.5`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Training Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Structure Fire:"})," 20+ hours per firefighter per month"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Basic Training:"})," Firefighter I & II certification required"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Officer Training:"})," Fire Officer I minimum for company officers"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Specialized Training:"})," Hazmat, rescue, EMS as applicable"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Documentation:"})," Detailed training records maintained"]}),(ie=t==null?void 0:t.fireDepartment)!=null&&ie.training&&t.fireDepartment.training<9.5?e.jsxs(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:["📚 Need: +",Math.ceil((10-t.fireDepartment.training)*2)," additional training hours/month"]}):e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Training program meets ISO standards"})]})})]}),e.jsxs(k,{children:[e.jsx(R,{children:(()=>{var c;const a=p(((c=t==null?void 0:t.fireDepartment)==null?void 0:c.distribution)||0,12.5);return e.jsx(r,{sx:{color:a.color},children:a.icon})})()}),e.jsx(D,{primary:`Distribution: ${(($=(ae=t==null?void 0:t.fireDepartment)==null?void 0:ae.distribution)==null?void 0:$.toFixed(1))||"0.0"} / 12.5`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Distribution Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Engine Coverage:"})," ≤1.5 mile road distance for engines"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Ladder Coverage:"})," ≤2.5 mile road distance for aerials"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Response Time:"})," ≤5 minutes (240 seconds) travel time"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"First Due Area:"})," ≤5 square miles per engine company"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Station Location:"})," Strategically placed for optimal coverage"]}),(ce=t==null?void 0:t.fireDepartment)!=null&&ce.distribution&&t.fireDepartment.distribution>=10?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Station distribution meets ISO standards"}):e.jsx(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"📍 Consider additional station or relocate existing station"})]})})]})]})]})})}),e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(Y,{elevation:2,children:e.jsxs(Z,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ye,{sx:{color:"#2196f3",mr:1}}),e.jsx(i,{variant:"h6",children:"Water Supply"})]}),(()=>{const a=p(y,40);return e.jsx(w,{icon:a.icon,label:a.level,size:"small",sx:{bgcolor:a.color,color:"white",fontWeight:"bold"}})})()]}),e.jsxs(i,{variant:"h4",sx:{color:"#2196f3",mb:1},children:[y.toFixed(1)," / 40"]}),e.jsxs(i,{variant:"body2",sx:{color:"text.secondary",mb:2},children:[(y/40*100).toFixed(0),"% • ",p(y,40).description]}),e.jsx(K,{variant:"determinate",value:y/40*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#2196f3"}}}),e.jsxs(J,{dense:!0,children:[e.jsxs(k,{children:[e.jsx(R,{children:(()=>{var c;const a=p(((c=t==null?void 0:t.waterSupply)==null?void 0:c.capacity)||0,20);return e.jsx(r,{sx:{color:a.color},children:a.icon})})()}),e.jsx(D,{primary:`Capacity: ${((ve=(be=t==null?void 0:t.waterSupply)==null?void 0:be.capacity)==null?void 0:ve.toFixed(1))||"0.0"} / 20`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Water Flow Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Minimum Flow:"})," 250 GPM for 2 hours (Class 8B areas)"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Residential:"})," 500-750 GPM for typical single-family homes"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Commercial:"})," 1,500-3,500+ GPM for large buildings"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Pressure:"})," 20 PSI residual minimum during flow test"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Duration:"})," Maintain flow for minimum 2 hours"]}),(Se=t==null?void 0:t.waterSupply)!=null&&Se.capacity&&t.waterSupply.capacity>=15?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Water system meets ISO flow requirements"}):e.jsx(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"💧 Need: Water main upgrades or booster pump systems"})]})})]}),e.jsxs(k,{children:[e.jsx(R,{children:(()=>{var c;const a=p(((c=t==null?void 0:t.waterSupply)==null?void 0:c.distribution)||0,15);return e.jsx(r,{sx:{color:a.color},children:a.icon})})()}),e.jsx(D,{primary:`Distribution: ${((Ie=(Ce=t==null?void 0:t.waterSupply)==null?void 0:Ce.distribution)==null?void 0:Ie.toFixed(1))||"0.0"} / 15`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Hydrant Distribution Standards:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Spacing:"})," ≤1,000 ft from any point to nearest hydrant"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Commercial Areas:"})," ≤500 ft spacing between hydrants"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Residential Areas:"})," ≤800 ft spacing between hydrants"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Arterial Streets:"})," ≤600 ft maximum spacing"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Dead End Streets:"})," ≤500 ft from end of street"]}),(ke=t==null?void 0:t.waterSupply)!=null&&ke.distribution&&t.waterSupply.distribution>=12?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Hydrant distribution meets ISO standards"}):e.jsxs(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:["🔧 Need: ",Math.ceil((12-(((Re=t==null?void 0:t.waterSupply)==null?void 0:Re.distribution)||0))*2)," additional hydrants"]})]})})]}),e.jsxs(k,{children:[e.jsx(R,{children:(()=>{var c;const a=p(((c=t==null?void 0:t.waterSupply)==null?void 0:c.alternative)||0,5);return e.jsx(r,{sx:{color:a.color},children:a.icon})})()}),e.jsx(D,{primary:`Alternative: ${((we=(De=t==null?void 0:t.waterSupply)==null?void 0:De.alternative)==null?void 0:we.toFixed(1))||"0.0"} / 5`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Alternative Water Supply Options:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Dry Hydrants:"}),' 6" minimum diameter, 500+ GPM capacity']}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Tanker Shuttles:"})," 1,000+ gallon capacity per tanker"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Static Sources:"})," Ponds, lakes with ≥30,000 gallons"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Mobile Supply:"})," Portable tanks, fold-a-tanks for operations"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Fill Sites:"})," Designated locations for tanker refill"]}),(Pe=t==null?void 0:t.waterSupply)!=null&&Pe.alternative&&t.waterSupply.alternative>=3?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Alternative water supply systems adequate"}):e.jsx(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"🚛 Need: Additional tankers or dry hydrant installation"})]})})]})]})]})})}),e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(Y,{elevation:2,children:e.jsxs(Z,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ge,{sx:{color:"#9c27b0",mr:1}}),e.jsx(i,{variant:"h6",children:"Emergency Communications"})]}),(()=>{const a=p(f,10);return e.jsx(w,{icon:a.icon,label:a.level,size:"small",sx:{bgcolor:a.color,color:"white",fontWeight:"bold"}})})()]}),e.jsxs(i,{variant:"h4",sx:{color:"#9c27b0",mb:1},children:[f.toFixed(1)," / 10"]}),e.jsxs(i,{variant:"body2",sx:{color:"text.secondary",mb:2},children:[(f/10*100).toFixed(0),"% • ",p(f,10).description]}),e.jsx(K,{variant:"determinate",value:f/10*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#9c27b0"}}}),e.jsxs(J,{dense:!0,children:[e.jsxs(k,{children:[e.jsx(R,{children:(()=>{var c;const a=p(((c=t==null?void 0:t.communications)==null?void 0:c.dispatch)||0,7);return e.jsx(r,{sx:{color:a.color},children:a.icon})})()}),e.jsx(D,{primary:`Dispatch: ${((Oe=(Fe=t==null?void 0:t.communications)==null?void 0:Fe.dispatch)==null?void 0:Oe.toFixed(1))||"0.0"} / 7`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO 911 Dispatch Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"24/7 Operations:"})," Full-time dispatchers on duty"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Call Processing:"})," Emergency calls answered within 15 seconds"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Dispatch Time:"})," Units dispatched within 60 seconds"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Equipment:"})," CAD system, mapping, multiple phone lines"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Training:"})," EMD certification, continuing education"]}),(Ee=t==null?void 0:t.communications)!=null&&Ee.dispatch&&t.communications.dispatch>=6?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Dispatch center meets ISO standards"}):e.jsx(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"📞 Need: Enhanced dispatch training and equipment upgrades"})]})})]}),e.jsxs(k,{children:[e.jsx(R,{children:(()=>{var c;const a=p(((c=t==null?void 0:t.communications)==null?void 0:c.alerting)||0,3);return e.jsx(r,{sx:{color:a.color},children:a.icon})})()}),e.jsx(D,{primary:`Alerting: ${((Ae=(Me=t==null?void 0:t.communications)==null?void 0:Me.alerting)==null?void 0:Ae.toFixed(1))||"0.0"} / 3`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Alerting System Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Radio System:"})," VHF/UHF digital trunked preferred"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Coverage:"})," 95%+ mobile and portable coverage area"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Backup Power:"})," 24-hour minimum battery backup"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Station Alerting:"})," Automated station notification systems"]}),(Te=t==null?void 0:t.communications)!=null&&Te.alerting&&t.communications.alerting>=2.5?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Communication systems meet ISO standards"}):e.jsx(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"📡 Need: Radio system upgrades or coverage improvements"})]})})]})]})]})})}),e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(Y,{elevation:2,children:e.jsxs(Z,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(je,{sx:{color:"#4caf50",mr:1}}),e.jsx(i,{variant:"h6",children:"Community Risk Reduction"}),e.jsx(w,{label:"BONUS",size:"small",sx:{ml:1,bgcolor:"#4caf50",color:"white"}})]}),(()=>{const a=p(s,5.5);return e.jsx(w,{icon:a.icon,label:a.level,size:"small",sx:{bgcolor:a.color,color:"white",fontWeight:"bold"}})})()]}),e.jsxs(i,{variant:"h4",sx:{color:"#4caf50",mb:1},children:[s.toFixed(1)," / 5.5"]}),e.jsxs(i,{variant:"body2",sx:{color:"text.secondary",mb:2},children:[(s/5.5*100).toFixed(0),"% • Bonus points toward total score"]}),e.jsx(K,{variant:"determinate",value:s/5.5*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#4caf50"}}}),e.jsxs(J,{dense:!0,children:[e.jsxs(k,{children:[e.jsx(R,{children:(()=>{var c;const a=p(((c=t==null?void 0:t.communityRiskReduction)==null?void 0:c.prevention)||0,2.5);return e.jsx(r,{sx:{color:a.color},children:a.icon})})()}),e.jsx(D,{primary:`Prevention: ${((qe=(Be=t==null?void 0:t.communityRiskReduction)==null?void 0:Be.prevention)==null?void 0:qe.toFixed(1))||"0.0"} / 2.5`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Fire Prevention Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Fire Inspector:"})," Certified fire inspector on staff"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Code Enforcement:"})," Adopt current fire codes (IFC/NFPA)"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Plan Review:"})," Review building plans for fire safety"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Inspections:"})," Annual inspections of commercial buildings"]}),(Le=t==null?void 0:t.communityRiskReduction)!=null&&Le.prevention&&t.communityRiskReduction.prevention>=2?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Fire prevention program meets ISO standards"}):e.jsx(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"🔍 Need: Certified fire inspector and active inspection program"})]})})]}),e.jsxs(k,{children:[e.jsx(R,{children:(()=>{var c;const a=p(((c=t==null?void 0:t.communityRiskReduction)==null?void 0:c.education)||0,2);return e.jsx(r,{sx:{color:a.color},children:a.icon})})()}),e.jsx(D,{primary:`Education: ${((Ge=(We=t==null?void 0:t.communityRiskReduction)==null?void 0:We.education)==null?void 0:Ge.toFixed(1))||"0.0"} / 2`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Public Education Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"School Programs:"})," Fire safety education in schools K-12"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Public Outreach:"})," Community fire safety events/programs"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"High-Risk Groups:"})," Senior citizens, disabled residents"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Documentation:"})," Maintain records of education activities"]}),(ze=t==null?void 0:t.communityRiskReduction)!=null&&ze.education&&t.communityRiskReduction.education>=1.5?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Public education program meets ISO standards"}):e.jsx(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"🏫 Need: Expand school programs and community outreach"})]})})]}),e.jsxs(k,{children:[e.jsx(R,{children:(()=>{var c;const a=p(((c=t==null?void 0:t.communityRiskReduction)==null?void 0:c.investigation)||0,1);return e.jsx(r,{sx:{color:a.color},children:a.icon})})()}),e.jsx(D,{primary:`Investigation: ${((Ne=(He=t==null?void 0:t.communityRiskReduction)==null?void 0:He.investigation)==null?void 0:Ne.toFixed(1))||"0.0"} / 1`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Fire Investigation Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Trained Investigator:"})," Fire investigator certification"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Origin & Cause:"})," Determine fire cause and origin"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Documentation:"})," Detailed investigation reports"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Evidence Collection:"})," Proper evidence handling procedures"]}),($e=t==null?void 0:t.communityRiskReduction)!=null&&$e.investigation&&t.communityRiskReduction.investigation>=.8?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Fire investigation program meets ISO standards"}):e.jsx(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"🔍 Need: Train certified fire investigator"})]})})]})]})]})})})]}),!t&&e.jsxs(U,{elevation:1,sx:{p:3,textAlign:"center",bgcolor:"#f5f5f5"},children:[e.jsx(i,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Assessment Data"}),e.jsx(i,{variant:"body1",color:"text.secondary",children:"Use the sidebar to input your fire department's capabilities and generate an ISO score assessment."})]})]})},Fi=({assessment:t,currentScore:C,classification:v,communityProfile:j})=>{const[d,S]=H.useState([]),[P,m]=H.useState(!1),O=()=>{if(!t)return[];const s=[];return t.fireDepartment.staffing<10&&s.push({category:"Fire Department",subcategory:"Staffing",title:"Increase Minimum Staffing Levels",description:"Add firefighters to meet NFPA 1720 minimum staffing requirements for initial response",pointsGain:10-t.fireDepartment.staffing,estimatedCost:(10-t.fireDepartment.staffing)*65e3,implementationTime:"6-12 months",priority:"HIGH",difficulty:"COMPLEX",requirements:["Budget approval from city council","Recruitment and hiring process","Training and certification programs","Additional equipment and PPE"],benefits:["Faster initial response times","Improved firefighter safety","Better emergency scene management","Enhanced public confidence"],fundingSources:["FEMA Assistance to Firefighters Grant (AFG)","FEMA Staffing for Adequate Fire and Emergency Response (SAFER)","State fire department grants","Municipal bond financing"]}),t.fireDepartment.training<10&&s.push({category:"Fire Department",subcategory:"Training",title:"Implement Structured Training Program",description:"Establish documented training program with minimum 20 hours monthly per firefighter",pointsGain:10-t.fireDepartment.training,estimatedCost:25e3,implementationTime:"3-6 months",priority:"HIGH",difficulty:"MODERATE",requirements:["Training officer designation","Training facility or agreements","Record keeping system","Curriculum development"],benefits:["Improved firefighter competency","Better emergency outcomes","Reduced liability exposure","ISO credit improvement"],fundingSources:["FEMA AFG Training grants","State fire training academies","Regional training consortiums","Municipal training budgets"]}),t.fireDepartment.equipment<10&&s.push({category:"Fire Department",subcategory:"Equipment",title:"Upgrade Apparatus and Equipment",description:"Purchase NFPA 1901 compliant apparatus and maintain proper equipment inventory",pointsGain:10-t.fireDepartment.equipment,estimatedCost:75e4,implementationTime:"12-24 months",priority:"HIGH",difficulty:"COMPLEX",requirements:["Capital improvement planning","Specifications development","Procurement process","Training on new equipment"],benefits:["Improved fire suppression capability","Enhanced equipment reliability","Better firefighter safety","Community protection upgrade"],fundingSources:["FEMA AFG Equipment grants","Municipal bonds","State equipment grants","Regional equipment sharing"]}),t.waterSupply.capacity<15&&s.push({category:"Water Supply",subcategory:"Capacity",title:"Improve Water System Capacity",description:"Upgrade water mains and pumping capacity to meet fire flow requirements",pointsGain:15-t.waterSupply.capacity,estimatedCost:5e5,implementationTime:"18-36 months",priority:"HIGH",difficulty:"COMPLEX",requirements:["Water system engineering study","Municipal utility coordination","Construction permits","Public works coordination"],benefits:["Increased fire suppression capability","Better residential water pressure","Enhanced commercial protection","Significant ISO improvement"],fundingSources:["EPA Drinking Water State Revolving Fund","USDA Rural Development grants","Municipal utility bonds","State infrastructure grants"]}),t.waterSupply.distribution<12&&s.push({category:"Water Supply",subcategory:"Distribution",title:"Install Additional Fire Hydrants",description:"Add hydrants to reduce spacing and improve coverage areas",pointsGain:12-t.waterSupply.distribution,estimatedCost:(12-t.waterSupply.distribution)*3500,implementationTime:"6-12 months",priority:"MEDIUM",difficulty:"MODERATE",requirements:["Hydrant spacing analysis","Water main connections","Installation permits","Ongoing maintenance program"],benefits:["Reduced hose lay distances","Faster fire attack setup","Better neighborhood protection","Lower insurance rates for residents"],fundingSources:["Municipal capital improvements","Water utility funds","Community development grants","Special assessment districts"]}),t.communications.dispatch<6&&s.push({category:"Communications",subcategory:"Dispatch",title:"Improve Dispatch Operations",description:"Upgrade dispatch protocols, training, and equipment for faster call processing",pointsGain:6-t.communications.dispatch,estimatedCost:15e4,implementationTime:"6-12 months",priority:"MEDIUM",difficulty:"MODERATE",requirements:["Dispatch training enhancement","Protocol documentation","Equipment upgrades","Quality assurance program"],benefits:["Faster emergency response","Better call processing times","Improved coordination","Enhanced public safety"],fundingSources:["FEMA Emergency Communications grants","State 911 improvement funds","Regional communications consortiums","Municipal emergency services budget"]}),t.communityRiskReduction.prevention<2&&s.push({category:"Community Risk Reduction",subcategory:"Prevention",title:"Establish Fire Prevention Program",description:"Implement code enforcement and fire prevention inspection program",pointsGain:2-t.communityRiskReduction.prevention,estimatedCost:85e3,implementationTime:"6-12 months",priority:"LOW",difficulty:"MODERATE",requirements:["Fire prevention officer training","Code adoption and enforcement","Inspection scheduling system","Public education materials"],benefits:["Reduced fire incidents","Better building code compliance","Enhanced community safety","Bonus ISO points"],fundingSources:["FEMA Fire Prevention grants","Municipal code enforcement budget","State fire prevention programs","Community foundation grants"]}),s.sort((l,x)=>{const o={HIGH:3,MEDIUM:2,LOW:1},n=o[l.priority],u=o[x.priority];if(n!==u)return u-n;const M=l.pointsGain/l.estimatedCost;return x.pointsGain/x.estimatedCost-M})},L=s=>{const x=s*.05,o=j.population*.4*j.avgHomePremium*x,n=j.commercialPremiums*x;return o+n},W=()=>{const l=O().filter(b=>d.includes(b.title)),x=l.reduce((b,N)=>b+N.estimatedCost,0),o=l.reduce((b,N)=>b+N.pointsGain,0),n=C+o,u=p(C),M=p(n),A=Math.max(0,u-M),B=L(A),I=x/Math.max(B,1);return{totalCost:x,totalPointsGain:o,newScore:n,newClass:M,classImprovement:A,annualSavings:B,paybackPeriod:I}},p=s=>{const l=s/105.5*100;return l>=90?1:l>=80?2:l>=70?3:l>=60?4:l>=50?5:l>=40?6:l>=30?7:l>=20?8:l>=10?9:10},T=s=>{switch(s){case"HIGH":return"#d32f2f";case"MEDIUM":return"#ff8f00";case"LOW":return"#2e7d32";default:return"#757575"}},h=s=>{switch(s){case"Fire Department":return e.jsx(fe,{});case"Water Supply":return e.jsx(ye,{});case"Communications":return e.jsx(ge,{});case"Community Risk Reduction":return e.jsx(je,{});default:return e.jsx(he,{})}},y=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),f=O();return W(),t?e.jsxs(r,{sx:{p:3},children:[e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"h4",gutterBottom:!0,children:"ISO Improvement Planner"}),e.jsx(i,{variant:"body1",color:"text.secondary",children:"Strategic recommendations to improve your ISO classification with cost-benefit analysis"})]}),e.jsx(U,{sx:{p:3,mb:3},children:e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{item:!0,xs:12,md:4,children:e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(i,{variant:"h6",color:"text.secondary",children:"Current Score"}),e.jsx(i,{variant:"h3",color:"primary",children:C.toFixed(1)}),e.jsx(i,{variant:"body2",children:"out of 105.5 points"})]})}),e.jsx(g,{item:!0,xs:12,md:4,children:e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(i,{variant:"h6",color:"text.secondary",children:"Current Classification"}),e.jsxs(i,{variant:"h3",color:"primary",children:["Class ",v]}),e.jsx(i,{variant:"body2",children:"ISO rating"})]})}),e.jsx(g,{item:!0,xs:12,md:4,children:e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(i,{variant:"h6",color:"text.secondary",children:"Improvement Opportunities"}),e.jsx(i,{variant:"h3",color:"secondary",children:f.length}),e.jsx(i,{variant:"body2",children:"recommendations available"})]})})]})}),e.jsx(i,{variant:"h5",gutterBottom:!0,sx:{mt:4,mb:2},children:"Improvement Recommendations"}),f.map((s,l)=>e.jsxs(te,{sx:{mb:2},children:[e.jsx(re,{expandIcon:e.jsx(ne,{}),children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[e.jsx(r,{sx:{mr:2},children:h(s.category)}),e.jsxs(r,{sx:{flexGrow:1},children:[e.jsx(i,{variant:"h6",children:s.title}),e.jsxs(r,{sx:{display:"flex",gap:1,mt:1},children:[e.jsx(w,{label:s.priority,size:"small",sx:{backgroundColor:T(s.priority),color:"white"}}),e.jsx(w,{label:`+${s.pointsGain} points`,size:"small",color:"primary"}),e.jsx(w,{label:y(s.estimatedCost),size:"small",variant:"outlined"})]})]})]})}),e.jsx(oe,{children:e.jsxs(g,{container:!0,spacing:3,children:[e.jsxs(g,{item:!0,xs:12,md:8,children:[e.jsx(i,{variant:"body1",paragraph:!0,children:s.description}),e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Requirements"}),e.jsx(J,{dense:!0,children:s.requirements.map((x,o)=>e.jsxs(k,{children:[e.jsx(R,{children:e.jsx(Q,{fontSize:"small"})}),e.jsx(D,{primary:x})]},o))}),e.jsx(i,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Benefits"}),e.jsx(J,{dense:!0,children:s.benefits.map((x,o)=>e.jsxs(k,{children:[e.jsx(R,{children:e.jsx(he,{fontSize:"small",color:"primary"})}),e.jsx(D,{primary:x})]},o))})]}),e.jsx(g,{item:!0,xs:12,md:4,children:e.jsx(Y,{variant:"outlined",children:e.jsxs(Z,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Project Details"}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(ji,{sx:{mr:1}}),e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Cost:"})," ",y(s.estimatedCost)]})]}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(ui,{sx:{mr:1}}),e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Timeline:"})," ",s.implementationTime]})]}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Ri,{sx:{mr:1}}),e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Difficulty:"})," ",s.difficulty]})]}),e.jsx(i,{variant:"subtitle2",gutterBottom:!0,children:"Funding Sources"}),s.fundingSources.map((x,o)=>e.jsx(w,{label:x,size:"small",variant:"outlined",sx:{mr:.5,mb:.5}},o))]})})})]})})]},l)),e.jsx(r,{sx:{mt:4,textAlign:"center"},children:e.jsxs(ee,{variant:"contained",color:"secondary",size:"large",startIcon:e.jsx(yi,{}),onClick:()=>m(!P),children:[P?"Hide":"Show"," Cost-Benefit Analysis"]})}),P&&e.jsxs(U,{sx:{p:3,mt:3},children:[e.jsx(i,{variant:"h5",gutterBottom:!0,children:"Community Insurance Savings Analysis"}),e.jsx(me,{severity:"info",sx:{mb:3},children:e.jsx(i,{variant:"body2",children:"ISO classification improvements typically reduce property insurance premiums by 5-10% per class improvement. This analysis estimates community-wide savings based on your population and average premium data."})}),e.jsxs(g,{container:!0,spacing:3,children:[e.jsxs(g,{item:!0,xs:12,md:6,children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Implementation Costs"}),e.jsx(hi,{children:e.jsxs(mi,{size:"small",children:[e.jsx(fi,{children:e.jsxs(ue,{children:[e.jsx(X,{children:"Category"}),e.jsx(X,{align:"right",children:"Estimated Cost"})]})}),e.jsxs(gi,{children:[f.slice(0,5).map((s,l)=>e.jsxs(ue,{children:[e.jsx(X,{children:s.title}),e.jsx(X,{align:"right",children:y(s.estimatedCost)})]},l)),e.jsxs(ue,{children:[e.jsx(X,{children:e.jsx("strong",{children:"Total Estimated Cost"})}),e.jsx(X,{align:"right",children:e.jsx("strong",{children:y(f.reduce((s,l)=>s+l.estimatedCost,0))})})]})]})]})})]}),e.jsxs(g,{item:!0,xs:12,md:6,children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Projected Benefits"}),e.jsxs(r,{sx:{mb:2},children:[e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Current Classification: Class ",v]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Projected Classification: Class ",Math.max(1,v-2)]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Classification Improvement: ",Math.min(2,v-1)," classes"]})]}),e.jsx(Y,{variant:"outlined",children:e.jsxs(Z,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(pi,{sx:{mr:1,color:"primary.main"}}),e.jsx(i,{variant:"h6",children:"Annual Community Savings"})]}),e.jsx(i,{variant:"h4",color:"primary",gutterBottom:!0,children:y(L(Math.min(2,v-1)))}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Based on ",j.population.toLocaleString()," residents and average premiums"]}),e.jsx(ti,{sx:{my:2}}),e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Payback Period:"})," ",(f.reduce((s,l)=>s+l.estimatedCost,0)/L(Math.min(2,v-1))).toFixed(1)," years"]})]})})]})]})]})]}):e.jsx(r,{sx:{p:3,textAlign:"center"},children:e.jsx(i,{variant:"h6",color:"text.secondary",children:"Complete your ISO assessment to see improvement recommendations"})})},Oi=({open:t,onClose:C,assessment:v,score:j,classification:d})=>{const S=()=>{console.log("🏆 Generating ISO Credit Report:",{assessment:v,score:j,classification:d}),alert(`ISO Report Generator - Coming in Phase 3!

Will generate professional PDF reports with:
• Current ISO classification analysis
• Improvement recommendations
• Cost-benefit analysis
• Community insurance savings projections`)};return e.jsxs(ri,{open:t,onClose:C,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"60vh"}},children:[e.jsx(ni,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(i,{variant:"h6",children:"ISO Credit Report Generator"}),e.jsx(ee,{onClick:C,size:"small",sx:{minWidth:"auto",p:1},children:e.jsx(bi,{})})]})}),e.jsxs(oi,{children:[e.jsx(me,{severity:"info",sx:{mb:3},children:"Professional PDF report generation will be implemented in Phase 3 of development."}),e.jsxs(U,{elevation:1,sx:{p:3,mb:3},children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Planned Report Features:"}),e.jsx(i,{component:"div",variant:"body1",children:e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"ISO Classification Analysis"})," - Current score breakdown and classification"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Improvement Recommendations"})," - Specific areas for ISO score enhancement"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Cost-Benefit Analysis"})," - ROI calculations for improvements"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Community Insurance Savings"})," - Projected premium reductions"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Grant Application Support"})," - Data formatted for funding requests"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"City Council Presentations"})," - Executive-ready presentation materials"]})]})})]}),v&&e.jsxs(U,{elevation:1,sx:{p:3},children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Current Assessment Summary:"}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"ISO Classification:"})," Class ",d,e.jsx("br",{}),e.jsx("strong",{children:"Total Score:"})," ",j.toFixed(1)," / 105.5 points",e.jsx("br",{}),e.jsx("strong",{children:"Score Percentage:"})," ",(j/105.5*100).toFixed(1),"%"]})]})]}),e.jsxs(ai,{sx:{p:3},children:[e.jsx(ee,{onClick:C,variant:"outlined",children:"Close"}),e.jsx(ee,{onClick:S,variant:"contained",startIcon:e.jsx(Ve,{}),disabled:!v,children:"Generate Report (Phase 3)"})]})]})},de=320,Qi=({initialAssessment:t,onAssessmentComplete:C,mode:v="assessment"})=>{const j=ei(),d=vi(j.breakpoints.down("md")),[S,P]=q.useState(!d),[m,O]=q.useState(!1),[L,W]=q.useState(!1),[p,T]=q.useState(0),[h,y]=q.useState(null),[f,s]=q.useState(0),[l,x]=q.useState(10),[o,n]=q.useState(!1),[u,M]=q.useState(null),[A]=q.useState({population:25e3,avgHomePremium:1200,commercialPremiums:5e5});H.useEffect(()=>{document.title="FireEMS ISO Credit Calculator"},[]),H.useEffect(()=>{t&&(y(t),console.log("Loading initial ISO assessment:",t))},[t]),H.useEffect(()=>{h&&C&&C(h)},[h,C]);const B=()=>{P(!S)},I=()=>{O(!m),m?document.fullscreenElement&&document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen&&document.documentElement.requestFullscreen()},b=()=>{const $={assessment:h,score:f,classification:l,timestamp:new Date};localStorage.setItem("iso_credit_calculator_autosave",JSON.stringify($)),console.log("ISO assessment data saved")},N=()=>{console.log("🏆 ISO EXPORT BUTTON CLICKED - Starting export process");const $=h!==null;if(console.log("🏆 ISO EXPORT DATA CHECK:",{hasAssessment:$,currentScore:f,classification:l}),!$){console.log("🏆 NO ISO DATA - Showing alert"),alert("No ISO assessment data to export. Please complete the assessment first.");return}console.log("🏆 OPENING ISO REPORT GENERATOR - Setting state"),W(!0),console.log("📊 Opening professional ISO credit report generator:",{score:f,classification:l,hasAssessment:!!h,showReportGenerator:!0})},ie=()=>{M(null)},ae=($,ce)=>{T(ce)};return e.jsx(Qe,{children:e.jsxs(r,{sx:{display:"flex",height:"100vh",overflow:"hidden",bgcolor:"background.default",position:m?"fixed":"relative",top:m?0:"auto",left:m?0:"auto",right:m?0:"auto",bottom:m?0:"auto",zIndex:m?1300:"auto"},role:"main","aria-label":"ISO Credit Calculator Tool",children:[!m&&e.jsx(Je,{position:"fixed",sx:{zIndex:j.zIndex.drawer+1,bgcolor:"primary.main"},children:e.jsxs(ci,{children:[e.jsx(le,{color:"inherit","aria-label":"toggle sidebar",onClick:B,edge:"start",sx:{mr:2},children:e.jsx(Ye,{})}),e.jsx(Xe,{sx:{mr:1}}),e.jsxs(i,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1},children:["ISO Credit Calculator",v==="planning"&&" - Planning Mode",v==="presentation"&&" - Presentation Mode"]}),e.jsxs(r,{sx:{display:"flex",gap:1},children:[e.jsx(le,{color:"inherit",onClick:b,title:"Save Assessment",children:e.jsx(xi,{})}),e.jsx(le,{color:"inherit",onClick:N,title:"Generate Professional ISO Report",disabled:!h,children:e.jsx(Ve,{})}),e.jsx(le,{color:"inherit",onClick:I,title:"Toggle Fullscreen",children:m?e.jsx(Si,{}):e.jsx(Ci,{})})]})]})}),e.jsx(Ze,{variant:d?"temporary":"persistent",anchor:"left",open:S,onClose:B,sx:{width:de,flexShrink:0,"& .MuiDrawer-paper":{width:de,boxSizing:"border-box",marginTop:m?0:"56px",height:m?"100vh":"calc(100vh - 56px)",borderRight:`1px solid ${j.palette.divider}`}},ModalProps:{keepMounted:!0,disablePortal:!1,hideBackdrop:!d,disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0},PaperProps:{"aria-hidden":!1,role:"complementary","aria-label":"ISO Credit Calculator Tools"},children:e.jsx(wi,{mode:v,onAssessmentChange:y,onScoreChange:s,onClassificationChange:x})}),e.jsxs(r,{component:"main",sx:{flexGrow:1,position:"relative",marginLeft:!d&&S?`${de}px`:0,width:!d&&S?`calc(100% - ${de}px)`:"100%",marginTop:m?0:"56px",height:m?"100vh":"calc(100vh - 56px)",transition:j.transitions.create(["margin","width"],{easing:j.transitions.easing.sharp,duration:j.transitions.duration.leavingScreen}),display:"flex",flexDirection:"column"},children:[e.jsx(U,{elevation:1,sx:{borderRadius:0,borderBottom:`1px solid ${j.palette.divider}`},children:e.jsxs(si,{value:p,onChange:ae,"aria-label":"ISO Credit Calculator Tabs",sx:{px:2},children:[e.jsx(Ue,{icon:e.jsx(Ii,{}),label:"Score Calculator",id:"iso-tab-0","aria-controls":"iso-tabpanel-0"}),e.jsx(Ue,{icon:e.jsx(he,{}),label:"Improvement Planner",id:"iso-tab-1","aria-controls":"iso-tabpanel-1",disabled:!h})]})}),e.jsxs(r,{sx:{flexGrow:1,overflow:"auto",position:"relative"},children:[p===0&&e.jsx(U,{elevation:0,sx:{height:"100%",width:"100%",borderRadius:0,overflow:"auto",position:"relative",minHeight:"500px",display:"flex",flexDirection:"column"},role:"tabpanel",id:"iso-tabpanel-0","aria-labelledby":"iso-tab-0",children:e.jsx(Pi,{assessment:h,currentScore:f,classification:l,sidebarOpen:S,isMobile:d})}),p===1&&e.jsx(r,{sx:{height:"100%",overflow:"auto"},role:"tabpanel",id:"iso-tabpanel-1","aria-labelledby":"iso-tab-1",children:e.jsx(Fi,{assessment:h,currentScore:f,classification:l,communityProfile:A})})]}),o&&e.jsx(r,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(255, 255, 255, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsx(i,{variant:"h6",children:"Calculating ISO Score..."})})]}),e.jsx(li,{open:!!u,autoHideDuration:6e3,onClose:ie,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(me,{onClose:ie,severity:"error",sx:{width:"100%"},children:u})}),e.jsx(Oi,{open:L,onClose:()=>W(!1),assessment:h,score:f,classification:l})]})})};export{Qi as default};
