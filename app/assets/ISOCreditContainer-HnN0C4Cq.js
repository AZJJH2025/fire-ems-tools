import{j as e,r as z,B as o,R as A}from"./index-BzZzDY6U.js";import{S as g,E as Se,A as Pe,a as ke,M as Me,D as Ae}from"./A11yProvider-DPBxIAes.js";import{c as V,T as r,P as H,u as Ee}from"./Typography-zQT9bMHm.js";import{L as $}from"./LinearProgress-BcK9Bayj.js";import{G as S,F as Le,C as _,L as K,h as v,i as b,D as Be,e as Te,f as ze,A as Ce,g as Ge,t as We,I as X,k as $e}from"./Toolbar-ikIMVPkI.js";import{B as N}from"./Button-GIYAk9f8.js";import{S as _e,a as qe}from"./Save-DFC2IwNI.js";import{A as J,a as Q,E as Y,b as Z,W as ye}from"./Warning-B9fvhjyQ.js";import{L as Ie}from"./LocalFireDepartment-DBRQ0L-D.js";import{S as De}from"./Security-BtcAa_KN.js";import{C as ee,a as te}from"./CardContent-BodzOjHG.js";import{E as Ne}from"./Error-DgKu7wWy.js";import{C as ne}from"./CheckCircle-B7UjJNuF.js";import{C as He}from"./Close-9VZi_TGp.js";import{u as Ve,F as Ue,a as Ke}from"./FullscreenExit-1bKF0H_R.js";const Xe=V(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5.97 4.06L14.09 6l1.41 1.41L16.91 6l1.06 1.06-1.41 1.41 1.41 1.41-1.06 1.06-1.41-1.4-1.41 1.41-1.06-1.06 1.41-1.41zm-6.78.66h5v1.5h-5zM11.5 16h-2v2H8v-2H6v-1.5h2v-2h1.5v2h2zm6.5 1.25h-5v-1.5h5zm0-2.5h-5v-1.5h5z"})),Re=V(e.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"})),Je=V(e.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"})),we=V(e.jsx("path",{d:"M5 13.18v4L12 21l7-3.82v-4L12 17zM12 3 1 9l11 6 9-4.91V17h2V9z"})),Fe=V(e.jsx("path",{d:"M21.98 14H22zM5.35 13c1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.4.98 3.31 1v-2c-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1v2c1.9 0 2.17-1 3.35-1m13.32 2c-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.1 1-3.34 1s-1.38-1-3.33-1-2.1 1-3.34 1v2c1.95 0 2.11-1 3.34-1 1.24 0 1.38 1 3.33 1s2.1-1 3.34-1c1.19 0 1.42 1 3.33 1 1.94 0 2.09-1 3.33-1 1.19 0 1.42 1 3.33 1v-2c-1.24 0-1.38-1-3.33-1M5.35 9c1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.4.98 3.31 1V8c-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1C3.38 7 3.24 8 2 8v2c1.9 0 2.17-1 3.35-1"})),Qe=({mode:i="assessment",onAssessmentChange:C,onScoreChange:I,onClassificationChange:p})=>{const[a,d]=z.useState({fireDepartment:{staffing:0,equipment:0,training:0,distribution:0},waterSupply:{capacity:0,distribution:0,alternative:0},communications:{dispatch:0,alerting:0},communityRiskReduction:{prevention:0,education:0,investigation:0}}),[w,l]=z.useState("fire-department"),[F,q]=z.useState(!0);z.useEffect(()=>{C(a),F&&E()},[a,F]);const E=()=>{const n=Object.values(a.fireDepartment).reduce((j,x)=>j+x,0),t=Object.values(a.waterSupply).reduce((j,x)=>j+x,0),s=Object.values(a.communications).reduce((j,x)=>j+x,0),G=Object.values(a.communityRiskReduction).reduce((j,x)=>j+x,0),B=n+t+s+G,W=h(B);I(B),p(W)},h=n=>{const t=n/105.5*100;return t>=90?1:t>=80?2:t>=70?3:t>=60?4:t>=50?5:t>=40?6:t>=30?7:t>=20?8:t>=10?9:10},D=n=>(t,s)=>{l(s?n:"")},m=(n,t)=>{d(s=>({...s,fireDepartment:{...s.fireDepartment,[n]:t}}))},M=(n,t)=>{d(s=>({...s,waterSupply:{...s.waterSupply,[n]:t}}))},y=(n,t)=>{d(s=>({...s,communications:{...s.communications,[n]:t}}))},R=(n,t)=>{d(s=>({...s,communityRiskReduction:{...s.communityRiskReduction,[n]:t}}))},L=()=>{d({fireDepartment:{staffing:0,equipment:0,training:0,distribution:0},waterSupply:{capacity:0,distribution:0,alternative:0},communications:{dispatch:0,alerting:0},communityRiskReduction:{prevention:0,education:0,investigation:0}})},f=()=>Object.values(a.fireDepartment).reduce((n,t)=>n+t,0)+Object.values(a.waterSupply).reduce((n,t)=>n+t,0)+Object.values(a.communications).reduce((n,t)=>n+t,0)+Object.values(a.communityRiskReduction).reduce((n,t)=>n+t,0);return e.jsxs(o,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(o,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"ISO Assessment Input"}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"Enter your fire department's capabilities to calculate ISO classification"}),e.jsxs(o,{sx:{mt:2},children:[e.jsxs(r,{variant:"body2",gutterBottom:!0,children:["Current Score: ",f().toFixed(1)," / 105.5"]}),e.jsx($,{variant:"determinate",value:f()/105.5*100,sx:{height:6,borderRadius:3}})]})]}),e.jsxs(o,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:[e.jsxs(S,{container:!0,spacing:1,children:[e.jsx(S,{item:!0,xs:6,children:e.jsx(N,{variant:"outlined",size:"small",startIcon:e.jsx(Xe,{}),onClick:E,disabled:F,fullWidth:!0,children:"Calculate"})}),e.jsx(S,{item:!0,xs:6,children:e.jsx(N,{variant:"outlined",size:"small",startIcon:e.jsx(Je,{}),onClick:L,fullWidth:!0,children:"Reset"})})]}),e.jsx(Le,{control:e.jsx(_e,{checked:F,onChange:n=>q(n.target.checked),size:"small"}),label:"Auto-calculate",sx:{mt:1}})]}),e.jsxs(o,{sx:{flexGrow:1,overflow:"auto"},children:[e.jsxs(J,{expanded:w==="fire-department",onChange:D("fire-department"),children:[e.jsx(Q,{expandIcon:e.jsx(Y,{}),children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(Ie,{sx:{color:"#ff5722"}}),e.jsxs(o,{sx:{flexGrow:1},children:[e.jsx(r,{variant:"subtitle1",children:"Fire Department"}),e.jsxs(r,{variant:"caption",color:"text.secondary",children:[Object.values(a.fireDepartment).reduce((n,t)=>n+t,0).toFixed(1)," / 50 points"]})]}),e.jsx(_,{label:"50 pts",size:"small",sx:{bgcolor:"#ff5722",color:"white"}})]})}),e.jsx(Z,{children:e.jsxs(o,{sx:{space:2},children:[e.jsxs(o,{sx:{mb:3},children:[e.jsx(r,{variant:"body2",gutterBottom:!0,children:"Staffing & Personnel Deployment (12.5 pts)"}),e.jsx(g,{value:a.fireDepartment.staffing,onChange:(n,t)=>m("staffing",t),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Personnel availability, response times, staffing levels"})]}),e.jsxs(o,{sx:{mb:3},children:[e.jsx(r,{variant:"body2",gutterBottom:!0,children:"Equipment & Apparatus (12.5 pts)"}),e.jsx(g,{value:a.fireDepartment.equipment,onChange:(n,t)=>m("equipment",t),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"NFPA 1901 compliance, maintenance, testing"})]}),e.jsxs(o,{sx:{mb:3},children:[e.jsx(r,{variant:"body2",gutterBottom:!0,children:"Training Programs (12.5 pts)"}),e.jsx(g,{value:a.fireDepartment.training,onChange:(n,t)=>m("training",t),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"20+ hours/month structure fire training = 2.25 pts"})]}),e.jsxs(o,{sx:{mb:3},children:[e.jsx(r,{variant:"body2",gutterBottom:!0,children:"Station Distribution & Coverage (12.5 pts)"}),e.jsx(g,{value:a.fireDepartment.distribution,onChange:(n,t)=>m("distribution",t),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Station locations, response coverage, mutual aid"})]})]})})]}),e.jsxs(J,{expanded:w==="water-supply",onChange:D("water-supply"),children:[e.jsx(Q,{expandIcon:e.jsx(Y,{}),children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(Fe,{sx:{color:"#2196f3"}}),e.jsxs(o,{sx:{flexGrow:1},children:[e.jsx(r,{variant:"subtitle1",children:"Water Supply"}),e.jsxs(r,{variant:"caption",color:"text.secondary",children:[Object.values(a.waterSupply).reduce((n,t)=>n+t,0).toFixed(1)," / 40 points"]})]}),e.jsx(_,{label:"40 pts",size:"small",sx:{bgcolor:"#2196f3",color:"white"}})]})}),e.jsx(Z,{children:e.jsxs(o,{sx:{space:2},children:[e.jsxs(o,{sx:{mb:3},children:[e.jsx(r,{variant:"body2",gutterBottom:!0,children:"Water Capacity & Flow (20 pts)"}),e.jsx(g,{value:a.waterSupply.capacity,onChange:(n,t)=>M("capacity",t),min:0,max:20,step:.1,valueLabelDisplay:"auto",sx:{color:"#2196f3"}}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Minimum 250 GPM for 2 hours (Class 8B: 200 GPM for 20 min)"})]}),e.jsxs(o,{sx:{mb:3},children:[e.jsx(r,{variant:"body2",gutterBottom:!0,children:"Hydrant Distribution (15 pts)"}),e.jsx(g,{value:a.waterSupply.distribution,onChange:(n,t)=>M("distribution",t),min:0,max:15,step:.1,valueLabelDisplay:"auto",sx:{color:"#2196f3"}}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Hydrant spacing max 1,000 feet from incidents"})]}),e.jsxs(o,{sx:{mb:3},children:[e.jsx(r,{variant:"body2",gutterBottom:!0,children:"Alternative Water Supply (5 pts)"}),e.jsx(g,{value:a.waterSupply.alternative,onChange:(n,t)=>M("alternative",t),min:0,max:5,step:.1,valueLabelDisplay:"auto",sx:{color:"#2196f3"}}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Dry hydrants, tanker shuttles, rural supplies"})]})]})})]}),e.jsxs(J,{expanded:w==="communications",onChange:D("communications"),children:[e.jsx(Q,{expandIcon:e.jsx(Y,{}),children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(Re,{sx:{color:"#9c27b0"}}),e.jsxs(o,{sx:{flexGrow:1},children:[e.jsx(r,{variant:"subtitle1",children:"Communications"}),e.jsxs(r,{variant:"caption",color:"text.secondary",children:[Object.values(a.communications).reduce((n,t)=>n+t,0).toFixed(1)," / 10 points"]})]}),e.jsx(_,{label:"10 pts",size:"small",sx:{bgcolor:"#9c27b0",color:"white"}})]})}),e.jsx(Z,{children:e.jsxs(o,{sx:{space:2},children:[e.jsxs(o,{sx:{mb:3},children:[e.jsx(r,{variant:"body2",gutterBottom:!0,children:"911 Dispatch Center (7 pts)"}),e.jsx(g,{value:a.communications.dispatch,onChange:(n,t)=>y("dispatch",t),min:0,max:7,step:.1,valueLabelDisplay:"auto",sx:{color:"#9c27b0"}}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Call processing, dispatch times, capabilities"})]}),e.jsxs(o,{sx:{mb:3},children:[e.jsx(r,{variant:"body2",gutterBottom:!0,children:"Alerting Systems (3 pts)"}),e.jsx(g,{value:a.communications.alerting,onChange:(n,t)=>y("alerting",t),min:0,max:3,step:.1,valueLabelDisplay:"auto",sx:{color:"#9c27b0"}}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Radio systems, pagers, notification equipment"})]})]})})]}),e.jsxs(J,{expanded:w==="community-risk",onChange:D("community-risk"),children:[e.jsx(Q,{expandIcon:e.jsx(Y,{}),children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(we,{sx:{color:"#4caf50"}}),e.jsxs(o,{sx:{flexGrow:1},children:[e.jsx(r,{variant:"subtitle1",children:"Community Risk Reduction"}),e.jsxs(r,{variant:"caption",color:"text.secondary",children:[Object.values(a.communityRiskReduction).reduce((n,t)=>n+t,0).toFixed(1)," / 5.5 points"]})]}),e.jsx(_,{label:"BONUS",size:"small",sx:{bgcolor:"#4caf50",color:"white"}})]})}),e.jsx(Z,{children:e.jsxs(o,{sx:{space:2},children:[e.jsxs(o,{sx:{mb:3},children:[e.jsx(r,{variant:"body2",gutterBottom:!0,children:"Fire Prevention (2.5 pts)"}),e.jsx(g,{value:a.communityRiskReduction.prevention,onChange:(n,t)=>R("prevention",t),min:0,max:2.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#4caf50"}}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Code enforcement, inspections, prevention programs"})]}),e.jsxs(o,{sx:{mb:3},children:[e.jsx(r,{variant:"body2",gutterBottom:!0,children:"Public Education (2 pts)"}),e.jsx(g,{value:a.communityRiskReduction.education,onChange:(n,t)=>R("education",t),min:0,max:2,step:.1,valueLabelDisplay:"auto",sx:{color:"#4caf50"}}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Community outreach, education programs"})]}),e.jsxs(o,{sx:{mb:3},children:[e.jsx(r,{variant:"body2",gutterBottom:!0,children:"Fire Investigation (1 pt)"}),e.jsx(g,{value:a.communityRiskReduction.investigation,onChange:(n,t)=>R("investigation",t),min:0,max:1,step:.1,valueLabelDisplay:"auto",sx:{color:"#4caf50"}}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Fire investigation capabilities and training"})]})]})})]})]})]})},Ye=({assessment:i,currentScore:C,classification:I,sidebarOpen:p,isMobile:a})=>{var n,t,s,G,B,W,j,x,oe,ae,se,ce,le,de,xe,ue,pe,he,me,je,fe,ge,ve,be;const d=()=>{if(!i)return 0;const{staffing:u,equipment:c,training:O,distribution:P}=i.fireDepartment,k=Math.min(u,12.5),T=Math.min(c,12.5),ie=Math.min(O,12.5),U=Math.min(P,12.5);return k+T+ie+U},w=()=>{if(!i)return 0;const{capacity:u,distribution:c,alternative:O}=i.waterSupply,P=Math.min(u,20),k=Math.min(c,15),T=Math.min(O,5);return P+k+T},l=()=>{if(!i)return 0;const{dispatch:u,alerting:c}=i.communications,O=Math.min(u,7),P=Math.min(c,3);return O+P},F=()=>{if(!i)return 0;const{prevention:u,education:c,investigation:O}=i.communityRiskReduction,P=Math.min(u,2.5),k=Math.min(c,2),T=Math.min(O,1);return P+k+T},q=()=>{const u=d(),c=w(),O=l(),P=F();let k=u+c+O;const T=u/50,ie=c/40,U=Math.abs(T-ie);if(U>.1){const Oe=U*10;k=Math.max(0,k-Oe)}return k+P},E=u=>{const c=u/105.5*100;return c>=90?1:c>=80?2:c>=70?3:c>=60?4:c>=50?5:c>=40?6:c>=30?7:c>=20?8:c>=10?9:10},h=u=>{switch(u){case 1:return{color:"#1b5e20",bg:"#e8f5e8",desc:"Superior Protection",icon:e.jsx(ne,{})};case 2:case 3:return{color:"#2e7d32",bg:"#f1f8e9",desc:"Excellent Protection",icon:e.jsx(ne,{})};case 4:case 5:return{color:"#558b2f",bg:"#f9fbe7",desc:"Good Protection",icon:e.jsx(ne,{})};case 6:case 7:return{color:"#ff8f00",bg:"#fff8e1",desc:"Fair Protection",icon:e.jsx(ye,{})};case 8:case 9:return{color:"#f57c00",bg:"#fff3e0",desc:"Poor Protection",icon:e.jsx(ye,{})};case 10:default:return{color:"#d32f2f",bg:"#ffebee",desc:"Inadequate Protection",icon:e.jsx(Ne,{})}}},D=d(),m=w(),M=l(),y=F(),R=q(),L=E(R),f=h(L);return e.jsxs(o,{sx:{p:3,height:"100%",overflow:"auto"},children:[e.jsxs(o,{sx:{mb:4},children:[e.jsxs(r,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(De,{sx:{fontSize:40,color:"primary.main"}}),"ISO Fire Rating Assessment"]}),e.jsx(r,{variant:"subtitle1",color:"text.secondary",children:"Fire Suppression Rating Schedule (FSRS) Analysis - 105.5 Point System"})]}),e.jsx(H,{elevation:3,sx:{p:3,mb:4,background:`linear-gradient(135deg, ${f.bg} 0%, #ffffff 100%)`,border:`2px solid ${f.color}`},children:e.jsxs(S,{container:!0,spacing:3,alignItems:"center",children:[e.jsx(S,{item:!0,xs:12,md:4,children:e.jsxs(o,{sx:{textAlign:"center"},children:[e.jsx(r,{variant:"h2",sx:{color:f.color,fontWeight:"bold",mb:1},children:L}),e.jsx(_,{icon:f.icon,label:`Class ${L}`,sx:{bgcolor:f.color,color:"white",fontSize:"1.1rem",px:2,py:1}})]})}),e.jsxs(S,{item:!0,xs:12,md:8,children:[e.jsx(r,{variant:"h5",sx:{color:f.color,mb:1},children:f.desc}),e.jsxs(r,{variant:"h6",gutterBottom:!0,children:["Total Score: ",R.toFixed(1)," / 105.5 points"]}),e.jsx($,{variant:"determinate",value:R/105.5*100,sx:{height:10,borderRadius:5,bgcolor:"rgba(0,0,0,0.1)","& .MuiLinearProgress-bar":{bgcolor:f.color}}}),e.jsxs(r,{variant:"body2",sx:{mt:1,color:"text.secondary"},children:[(R/105.5*100).toFixed(1),"% of maximum possible score"]})]})]})}),e.jsxs(S,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(S,{item:!0,xs:12,md:6,children:e.jsx(ee,{elevation:2,children:e.jsxs(te,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Ie,{sx:{color:"#ff5722",mr:1}}),e.jsx(r,{variant:"h6",children:"Fire Department Operations"})]}),e.jsxs(r,{variant:"h4",sx:{color:"#ff5722",mb:1},children:[D.toFixed(1)," / 50"]}),e.jsx($,{variant:"determinate",value:D/50*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#ff5722"}}}),e.jsxs(K,{dense:!0,children:[e.jsx(v,{children:e.jsx(b,{primary:`Staffing: ${((t=(n=i==null?void 0:i.fireDepartment)==null?void 0:n.staffing)==null?void 0:t.toFixed(1))||"0.0"} / 12.5`,secondary:"Personnel deployment and availability"})}),e.jsx(v,{children:e.jsx(b,{primary:`Equipment: ${((G=(s=i==null?void 0:i.fireDepartment)==null?void 0:s.equipment)==null?void 0:G.toFixed(1))||"0.0"} / 12.5`,secondary:"NFPA 1901 apparatus requirements"})}),e.jsx(v,{children:e.jsx(b,{primary:`Training: ${((W=(B=i==null?void 0:i.fireDepartment)==null?void 0:B.training)==null?void 0:W.toFixed(1))||"0.0"} / 12.5`,secondary:"Training hours and certification"})}),e.jsx(v,{children:e.jsx(b,{primary:`Distribution: ${((x=(j=i==null?void 0:i.fireDepartment)==null?void 0:j.distribution)==null?void 0:x.toFixed(1))||"0.0"} / 12.5`,secondary:"Station coverage and response"})})]})]})})}),e.jsx(S,{item:!0,xs:12,md:6,children:e.jsx(ee,{elevation:2,children:e.jsxs(te,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Fe,{sx:{color:"#2196f3",mr:1}}),e.jsx(r,{variant:"h6",children:"Water Supply"})]}),e.jsxs(r,{variant:"h4",sx:{color:"#2196f3",mb:1},children:[m.toFixed(1)," / 40"]}),e.jsx($,{variant:"determinate",value:m/40*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#2196f3"}}}),e.jsxs(K,{dense:!0,children:[e.jsx(v,{children:e.jsx(b,{primary:`Capacity: ${((ae=(oe=i==null?void 0:i.waterSupply)==null?void 0:oe.capacity)==null?void 0:ae.toFixed(1))||"0.0"} / 20`,secondary:"Flow rates and pressure"})}),e.jsx(v,{children:e.jsx(b,{primary:`Distribution: ${((ce=(se=i==null?void 0:i.waterSupply)==null?void 0:se.distribution)==null?void 0:ce.toFixed(1))||"0.0"} / 15`,secondary:"Hydrant spacing and coverage"})}),e.jsx(v,{children:e.jsx(b,{primary:`Alternative: ${((de=(le=i==null?void 0:i.waterSupply)==null?void 0:le.alternative)==null?void 0:de.toFixed(1))||"0.0"} / 5`,secondary:"Dry hydrants, tanker operations"})})]})]})})}),e.jsx(S,{item:!0,xs:12,md:6,children:e.jsx(ee,{elevation:2,children:e.jsxs(te,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Re,{sx:{color:"#9c27b0",mr:1}}),e.jsx(r,{variant:"h6",children:"Emergency Communications"})]}),e.jsxs(r,{variant:"h4",sx:{color:"#9c27b0",mb:1},children:[M.toFixed(1)," / 10"]}),e.jsx($,{variant:"determinate",value:M/10*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#9c27b0"}}}),e.jsxs(K,{dense:!0,children:[e.jsx(v,{children:e.jsx(b,{primary:`Dispatch: ${((ue=(xe=i==null?void 0:i.communications)==null?void 0:xe.dispatch)==null?void 0:ue.toFixed(1))||"0.0"} / 7`,secondary:"911 center capabilities"})}),e.jsx(v,{children:e.jsx(b,{primary:`Alerting: ${((he=(pe=i==null?void 0:i.communications)==null?void 0:pe.alerting)==null?void 0:he.toFixed(1))||"0.0"} / 3`,secondary:"Notification systems"})})]})]})})}),e.jsx(S,{item:!0,xs:12,md:6,children:e.jsx(ee,{elevation:2,children:e.jsxs(te,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(we,{sx:{color:"#4caf50",mr:1}}),e.jsx(r,{variant:"h6",children:"Community Risk Reduction"}),e.jsx(_,{label:"BONUS",size:"small",sx:{ml:1,bgcolor:"#4caf50",color:"white"}})]}),e.jsxs(r,{variant:"h4",sx:{color:"#4caf50",mb:1},children:[y.toFixed(1)," / 5.5"]}),e.jsx($,{variant:"determinate",value:y/5.5*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#4caf50"}}}),e.jsxs(K,{dense:!0,children:[e.jsx(v,{children:e.jsx(b,{primary:`Prevention: ${((je=(me=i==null?void 0:i.communityRiskReduction)==null?void 0:me.prevention)==null?void 0:je.toFixed(1))||"0.0"} / 2.5`,secondary:"Fire prevention programs"})}),e.jsx(v,{children:e.jsx(b,{primary:`Education: ${((ge=(fe=i==null?void 0:i.communityRiskReduction)==null?void 0:fe.education)==null?void 0:ge.toFixed(1))||"0.0"} / 2`,secondary:"Public education efforts"})}),e.jsx(v,{children:e.jsx(b,{primary:`Investigation: ${((be=(ve=i==null?void 0:i.communityRiskReduction)==null?void 0:ve.investigation)==null?void 0:be.toFixed(1))||"0.0"} / 1`,secondary:"Fire investigation capabilities"})})]})]})})})]}),!i&&e.jsxs(H,{elevation:1,sx:{p:3,textAlign:"center",bgcolor:"#f5f5f5"},children:[e.jsx(r,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Assessment Data"}),e.jsx(r,{variant:"body1",color:"text.secondary",children:"Use the sidebar to input your fire department's capabilities and generate an ISO score assessment."})]})]})},Ze=({open:i,onClose:C,assessment:I,score:p,classification:a})=>{const d=()=>{console.log("ðŸ† Generating ISO Credit Report:",{assessment:I,score:p,classification:a}),alert(`ISO Report Generator - Coming in Phase 3!

Will generate professional PDF reports with:
â€¢ Current ISO classification analysis
â€¢ Improvement recommendations
â€¢ Cost-benefit analysis
â€¢ Community insurance savings projections`)};return e.jsxs(Be,{open:i,onClose:C,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"60vh"}},children:[e.jsx(Te,{children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(r,{variant:"h6",children:"ISO Credit Report Generator"}),e.jsx(N,{onClick:C,size:"small",sx:{minWidth:"auto",p:1},children:e.jsx(He,{})})]})}),e.jsxs(ze,{children:[e.jsx(Ce,{severity:"info",sx:{mb:3},children:"Professional PDF report generation will be implemented in Phase 3 of development."}),e.jsxs(H,{elevation:1,sx:{p:3,mb:3},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Planned Report Features:"}),e.jsx(r,{component:"div",variant:"body1",children:e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"ISO Classification Analysis"})," - Current score breakdown and classification"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Improvement Recommendations"})," - Specific areas for ISO score enhancement"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Cost-Benefit Analysis"})," - ROI calculations for improvements"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Community Insurance Savings"})," - Projected premium reductions"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Grant Application Support"})," - Data formatted for funding requests"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"City Council Presentations"})," - Executive-ready presentation materials"]})]})})]}),I&&e.jsxs(H,{elevation:1,sx:{p:3},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Current Assessment Summary:"}),e.jsxs(r,{variant:"body1",children:[e.jsx("strong",{children:"ISO Classification:"})," Class ",a,e.jsx("br",{}),e.jsx("strong",{children:"Total Score:"})," ",p.toFixed(1)," / 105.5 points",e.jsx("br",{}),e.jsx("strong",{children:"Score Percentage:"})," ",(p/105.5*100).toFixed(1),"%"]})]})]}),e.jsxs(Ge,{sx:{p:3},children:[e.jsx(N,{onClick:C,variant:"outlined",children:"Close"}),e.jsx(N,{onClick:d,variant:"contained",startIcon:e.jsx(Se,{}),disabled:!I,children:"Generate Report (Phase 3)"})]})]})},re=320,mt=({initialAssessment:i,onAssessmentComplete:C,mode:I="assessment"})=>{const p=Ee(),a=Ve(p.breakpoints.down("md")),[d,w]=A.useState(!a),[l,F]=A.useState(!1),[q,E]=A.useState(!1),[h,D]=A.useState(null),[m,M]=A.useState(0),[y,R]=A.useState(10),[L,f]=A.useState(!1),[n,t]=A.useState(null);z.useEffect(()=>{document.title="FireEMS ISO Credit Calculator"},[]),z.useEffect(()=>{i&&(D(i),console.log("Loading initial ISO assessment:",i))},[i]),z.useEffect(()=>{h&&C&&C(h)},[h,C]);const s=()=>{w(!d)},G=()=>{F(!l),l?document.fullscreenElement&&document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen&&document.documentElement.requestFullscreen()},B=()=>{const x={assessment:h,score:m,classification:y,timestamp:new Date};localStorage.setItem("iso_credit_calculator_autosave",JSON.stringify(x)),console.log("ISO assessment data saved")},W=()=>{console.log("ðŸ† ISO EXPORT BUTTON CLICKED - Starting export process");const x=h!==null;if(console.log("ðŸ† ISO EXPORT DATA CHECK:",{hasAssessment:x,currentScore:m,classification:y}),!x){console.log("ðŸ† NO ISO DATA - Showing alert"),alert("No ISO assessment data to export. Please complete the assessment first.");return}console.log("ðŸ† OPENING ISO REPORT GENERATOR - Setting state"),E(!0),console.log("ðŸ“Š Opening professional ISO credit report generator:",{score:m,classification:y,hasAssessment:!!h,showReportGenerator:!0})},j=()=>{t(null)};return e.jsx(Pe,{children:e.jsxs(o,{sx:{display:"flex",height:"100vh",overflow:"hidden",bgcolor:"background.default",position:l?"fixed":"relative",top:l?0:"auto",left:l?0:"auto",right:l?0:"auto",bottom:l?0:"auto",zIndex:l?1300:"auto"},role:"main","aria-label":"ISO Credit Calculator Tool",children:[!l&&e.jsx(ke,{position:"fixed",sx:{zIndex:p.zIndex.drawer+1,bgcolor:"primary.main"},children:e.jsxs(We,{children:[e.jsx(X,{color:"inherit","aria-label":"toggle sidebar",onClick:s,edge:"start",sx:{mr:2},children:e.jsx(Me,{})}),e.jsx(De,{sx:{mr:1}}),e.jsxs(r,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1},children:["ISO Credit Calculator",I==="planning"&&" - Planning Mode",I==="presentation"&&" - Presentation Mode"]}),e.jsxs(o,{sx:{display:"flex",gap:1},children:[e.jsx(X,{color:"inherit",onClick:B,title:"Save Assessment",children:e.jsx(qe,{})}),e.jsx(X,{color:"inherit",onClick:W,title:"Generate Professional ISO Report",disabled:!h,children:e.jsx(Se,{})}),e.jsx(X,{color:"inherit",onClick:G,title:"Toggle Fullscreen",children:l?e.jsx(Ue,{}):e.jsx(Ke,{})})]})]})}),e.jsx(Ae,{variant:a?"temporary":"persistent",anchor:"left",open:d,onClose:s,sx:{width:re,flexShrink:0,"& .MuiDrawer-paper":{width:re,boxSizing:"border-box",marginTop:l?0:"56px",height:l?"100vh":"calc(100vh - 56px)",borderRight:`1px solid ${p.palette.divider}`}},ModalProps:{keepMounted:!0,disablePortal:!1,hideBackdrop:!a,disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0},PaperProps:{"aria-hidden":!1,role:"complementary","aria-label":"ISO Credit Calculator Tools"},children:e.jsx(Qe,{mode:I,onAssessmentChange:D,onScoreChange:M,onClassificationChange:R})}),e.jsxs(o,{component:"main",sx:{flexGrow:1,position:"relative",marginLeft:!a&&d?`${re}px`:0,width:!a&&d?`calc(100% - ${re}px)`:"100%",marginTop:l?0:"56px",height:l?"100vh":"calc(100vh - 56px)",transition:p.transitions.create(["margin","width"],{easing:p.transitions.easing.sharp,duration:p.transitions.duration.leavingScreen})},children:[e.jsx(H,{elevation:0,sx:{height:"100%",width:"100%",borderRadius:0,overflow:"hidden",position:"relative",minHeight:"500px",display:"flex",flexDirection:"column"},children:e.jsx(Ye,{assessment:h,currentScore:m,classification:y,sidebarOpen:d,isMobile:a})}),L&&e.jsx(o,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(255, 255, 255, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsx(r,{variant:"h6",children:"Calculating ISO Score..."})})]}),e.jsx($e,{open:!!n,autoHideDuration:6e3,onClose:j,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(Ce,{onClose:j,severity:"error",sx:{width:"100%"},children:n})}),e.jsx(Ze,{open:q,onClose:()=>E(!1),assessment:h,score:m,classification:y})]})})};export{mt as default};
