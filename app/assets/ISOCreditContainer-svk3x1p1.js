import{j as e,r as W,B as r,R as $}from"./index-OjOEpN23.js";import{S as b,E as Ke,A as Ye,a as Ze,M as ei,D as ii}from"./A11yProvider-C0WC3qeC.js";import{c as Q,T as i,P as _,u as ti}from"./Typography-DFR-rgzR.js";import{L as ie}from"./LinearProgress-DzEV0TdL.js";import{G as m,h as ri,C as A,L as re,k as F,l as M,m as O,F as Y,R as Z,A as he,D as ni,e as oi,f as ai,g as si,i as ci,B as li,I as pe,T as di,j as Ve,o as xi}from"./Tabs-BDe7_qvO.js";import{B as de}from"./Button-CDe_Qvgw.js";import{S as pi,a as ui}from"./Save-BqznJHfX.js";import{A as ne,a as oe,E as ae,b as se,W as ge,I as hi}from"./Warning-CJHSjyMC.js";import{L as ye}from"./LocalFireDepartment-DCxBt2Mr.js";import{S as Qe}from"./Security-CxkvBXZ0.js";import{C as ce,a as le}from"./CardContent-RfRmkiOA.js";import{E as Xe}from"./Error-BrJyLOy-.js";import{C as te,f as mi,e as gi,T as ji,a as fi,b as je,c as ee,d as yi}from"./CheckCircle-CRnC0rzK.js";import{T as bi}from"./Tune-DS9PSmEW.js";import{A as vi}from"./AttachMoney-BXNWY9Hw.js";import{T as Si}from"./Timeline-BxHC69_H.js";import{C as Ci}from"./Close-BeQJNkvV.js";import{u as Ii,F as ki,a as Ri}from"./FullscreenExit-6sCcjMyO.js";import{A as Di}from"./Assessment-CChQARhL.js";const wi=Q(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5.97 4.06L14.09 6l1.41 1.41L16.91 6l1.06 1.06-1.41 1.41 1.41 1.41-1.06 1.06-1.41-1.4-1.41 1.41-1.06-1.06 1.41-1.41zm-6.78.66h5v1.5h-5zM11.5 16h-2v2H8v-2H6v-1.5h2v-2h1.5v2h2zm6.5 1.25h-5v-1.5h5zm0-2.5h-5v-1.5h5z"})),be=Q(e.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"})),Pi=Q([e.jsx("circle",{cx:"12",cy:"19",r:"2"},"0"),e.jsx("path",{d:"M10 3h4v12h-4z"},"1")]),Fi=Q(e.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"})),ve=Q(e.jsx("path",{d:"M5 13.18v4L12 21l7-3.82v-4L12 17zM12 3 1 9l11 6 9-4.91V17h2V9z"})),fe=Q(e.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"})),Se=Q(e.jsx("path",{d:"M21.98 14H22zM5.35 13c1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.4.98 3.31 1v-2c-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1v2c1.9 0 2.17-1 3.35-1m13.32 2c-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.1 1-3.34 1s-1.38-1-3.33-1-2.1 1-3.34 1v2c1.95 0 2.11-1 3.34-1 1.24 0 1.38 1 3.33 1s2.1-1 3.34-1c1.19 0 1.42 1 3.33 1 1.94 0 2.09-1 3.33-1 1.19 0 1.42 1 3.33 1v-2c-1.24 0-1.38-1-3.33-1M5.35 9c1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.4.98 3.31 1V8c-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1C3.38 7 3.24 8 2 8v2c1.9 0 2.17-1 3.35-1"})),Mi=({mode:t="assessment",onAssessmentChange:P,onScoreChange:v,onClassificationChange:y})=>{const[d,S]=W.useState({fireDepartment:{staffing:0,equipment:0,training:0,distribution:0},waterSupply:{capacity:0,distribution:0,alternative:0},communications:{dispatch:0,alerting:0},communityRiskReduction:{prevention:0,education:0,investigation:0}}),[E,g]=W.useState("fire-department"),[B,V]=W.useState(!0);W.useEffect(()=>{P(d),B&&x()},[d,B]);const x=()=>{const o=Object.values(d.fireDepartment).reduce((f,I)=>f+I,0),a=Object.values(d.waterSupply).reduce((f,I)=>f+I,0),n=Object.values(d.communications).reduce((f,I)=>f+I,0),l=Object.values(d.communityRiskReduction).reduce((f,I)=>f+I,0),h=o+a+n+l,j=p(h);v(h),y(j)},p=o=>{const a=o/105.5*100;return a>=90?1:a>=80?2:a>=70?3:a>=60?4:a>=50?5:a>=40?6:a>=30?7:a>=20?8:a>=10?9:10},D=o=>(a,n)=>{g(n?o:"")},u=(o,a)=>{S(n=>({...n,fireDepartment:{...n.fireDepartment,[o]:a}}))},k=(o,a)=>{S(n=>({...n,waterSupply:{...n.waterSupply,[o]:a}}))},C=(o,a)=>{S(n=>({...n,communications:{...n.communications,[o]:a}}))},T=(o,a)=>{S(n=>({...n,communityRiskReduction:{...n.communityRiskReduction,[o]:a}}))},R=()=>{S({fireDepartment:{staffing:0,equipment:0,training:0,distribution:0},waterSupply:{capacity:0,distribution:0,alternative:0},communications:{dispatch:0,alerting:0},communityRiskReduction:{prevention:0,education:0,investigation:0}})},w=()=>Object.values(d.fireDepartment).reduce((o,a)=>o+a,0)+Object.values(d.waterSupply).reduce((o,a)=>o+a,0)+Object.values(d.communications).reduce((o,a)=>o+a,0)+Object.values(d.communityRiskReduction).reduce((o,a)=>o+a,0);return e.jsxs(r,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(r,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"ISO Assessment Input"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Enter your fire department's capabilities to calculate ISO classification"}),e.jsxs(r,{sx:{mt:2},children:[e.jsxs(i,{variant:"body2",gutterBottom:!0,children:["Current Score: ",w().toFixed(1)," / 105.5"]}),e.jsx(ie,{variant:"determinate",value:w()/105.5*100,sx:{height:6,borderRadius:3}})]})]}),e.jsxs(r,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:[e.jsxs(m,{container:!0,spacing:1,children:[e.jsx(m,{item:!0,xs:6,children:e.jsx(de,{variant:"outlined",size:"small",startIcon:e.jsx(wi,{}),onClick:x,disabled:B,fullWidth:!0,children:"Calculate"})}),e.jsx(m,{item:!0,xs:6,children:e.jsx(de,{variant:"outlined",size:"small",startIcon:e.jsx(Fi,{}),onClick:R,fullWidth:!0,children:"Reset"})})]}),e.jsx(ri,{control:e.jsx(pi,{checked:B,onChange:o=>V(o.target.checked),size:"small"}),label:"Auto-calculate",sx:{mt:1}})]}),e.jsxs(r,{sx:{flexGrow:1,overflow:"auto"},children:[e.jsxs(ne,{expanded:E==="fire-department",onChange:D("fire-department"),children:[e.jsx(oe,{expandIcon:e.jsx(ae,{}),children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(ye,{sx:{color:"#ff5722"}}),e.jsxs(r,{sx:{flexGrow:1},children:[e.jsx(i,{variant:"subtitle1",children:"Fire Department"}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[Object.values(d.fireDepartment).reduce((o,a)=>o+a,0).toFixed(1)," / 50 points"]})]}),e.jsx(A,{label:"50 pts",size:"small",sx:{bgcolor:"#ff5722",color:"white"}})]})}),e.jsx(se,{children:e.jsxs(r,{sx:{space:2},children:[e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Staffing & Personnel Deployment (12.5 pts)"}),e.jsx(b,{value:d.fireDepartment.staffing,onChange:(o,a)=>u("staffing",a),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Personnel availability, response times, staffing levels"})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Equipment & Apparatus (12.5 pts)"}),e.jsx(b,{value:d.fireDepartment.equipment,onChange:(o,a)=>u("equipment",a),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"NFPA 1901 compliance, maintenance, testing"})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Training Programs (12.5 pts)"}),e.jsx(b,{value:d.fireDepartment.training,onChange:(o,a)=>u("training",a),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"20+ hours/month structure fire training = 2.25 pts"})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Station Distribution & Coverage (12.5 pts)"}),e.jsx(b,{value:d.fireDepartment.distribution,onChange:(o,a)=>u("distribution",a),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Station locations, response coverage, mutual aid"})]})]})})]}),e.jsxs(ne,{expanded:E==="water-supply",onChange:D("water-supply"),children:[e.jsx(oe,{expandIcon:e.jsx(ae,{}),children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(Se,{sx:{color:"#2196f3"}}),e.jsxs(r,{sx:{flexGrow:1},children:[e.jsx(i,{variant:"subtitle1",children:"Water Supply"}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[Object.values(d.waterSupply).reduce((o,a)=>o+a,0).toFixed(1)," / 40 points"]})]}),e.jsx(A,{label:"40 pts",size:"small",sx:{bgcolor:"#2196f3",color:"white"}})]})}),e.jsx(se,{children:e.jsxs(r,{sx:{space:2},children:[e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Water Capacity & Flow (20 pts)"}),e.jsx(b,{value:d.waterSupply.capacity,onChange:(o,a)=>k("capacity",a),min:0,max:20,step:.1,valueLabelDisplay:"auto",sx:{color:"#2196f3"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Minimum 250 GPM for 2 hours (Class 8B: 200 GPM for 20 min)"})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Hydrant Distribution (15 pts)"}),e.jsx(b,{value:d.waterSupply.distribution,onChange:(o,a)=>k("distribution",a),min:0,max:15,step:.1,valueLabelDisplay:"auto",sx:{color:"#2196f3"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Hydrant spacing max 1,000 feet from incidents"})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Alternative Water Supply (5 pts)"}),e.jsx(b,{value:d.waterSupply.alternative,onChange:(o,a)=>k("alternative",a),min:0,max:5,step:.1,valueLabelDisplay:"auto",sx:{color:"#2196f3"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Dry hydrants, tanker shuttles, rural supplies"})]})]})})]}),e.jsxs(ne,{expanded:E==="communications",onChange:D("communications"),children:[e.jsx(oe,{expandIcon:e.jsx(ae,{}),children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(be,{sx:{color:"#9c27b0"}}),e.jsxs(r,{sx:{flexGrow:1},children:[e.jsx(i,{variant:"subtitle1",children:"Communications"}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[Object.values(d.communications).reduce((o,a)=>o+a,0).toFixed(1)," / 10 points"]})]}),e.jsx(A,{label:"10 pts",size:"small",sx:{bgcolor:"#9c27b0",color:"white"}})]})}),e.jsx(se,{children:e.jsxs(r,{sx:{space:2},children:[e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"911 Dispatch Center (7 pts)"}),e.jsx(b,{value:d.communications.dispatch,onChange:(o,a)=>C("dispatch",a),min:0,max:7,step:.1,valueLabelDisplay:"auto",sx:{color:"#9c27b0"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Call processing, dispatch times, capabilities"})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Alerting Systems (3 pts)"}),e.jsx(b,{value:d.communications.alerting,onChange:(o,a)=>C("alerting",a),min:0,max:3,step:.1,valueLabelDisplay:"auto",sx:{color:"#9c27b0"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Radio systems, pagers, notification equipment"})]})]})})]}),e.jsxs(ne,{expanded:E==="community-risk",onChange:D("community-risk"),children:[e.jsx(oe,{expandIcon:e.jsx(ae,{}),children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(ve,{sx:{color:"#4caf50"}}),e.jsxs(r,{sx:{flexGrow:1},children:[e.jsx(i,{variant:"subtitle1",children:"Community Risk Reduction"}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[Object.values(d.communityRiskReduction).reduce((o,a)=>o+a,0).toFixed(1)," / 5.5 points"]})]}),e.jsx(A,{label:"BONUS",size:"small",sx:{bgcolor:"#4caf50",color:"white"}})]})}),e.jsx(se,{children:e.jsxs(r,{sx:{space:2},children:[e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Fire Prevention (2.5 pts)"}),e.jsx(b,{value:d.communityRiskReduction.prevention,onChange:(o,a)=>T("prevention",a),min:0,max:2.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#4caf50"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Code enforcement, inspections, prevention programs"})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Public Education (2 pts)"}),e.jsx(b,{value:d.communityRiskReduction.education,onChange:(o,a)=>T("education",a),min:0,max:2,step:.1,valueLabelDisplay:"auto",sx:{color:"#4caf50"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Community outreach, education programs"})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Fire Investigation (1 pt)"}),e.jsx(b,{value:d.communityRiskReduction.investigation,onChange:(o,a)=>T("investigation",a),min:0,max:1,step:.1,valueLabelDisplay:"auto",sx:{color:"#4caf50"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Fire investigation capabilities and training"})]})]})})]})]})]})},Oi=({assessment:t,currentScore:P,classification:v,sidebarOpen:y,isMobile:d})=>{var a,n,l,h,j,f,I,z,H,X,q,G,J,Ce,Ie,ke,Re,De,we,Pe,Fe,Me,Oe,Ae,Ee,Te,Le,Be,We,qe,Ge,$e,ze,He,Ne,Ue,_e;const S=()=>{if(!t)return 0;const{staffing:s,equipment:c,training:L,distribution:N}=t.fireDepartment,U=Math.min(s,12.5),K=Math.min(c,12.5),me=Math.min(L,12.5),xe=Math.min(N,12.5);return U+K+me+xe},E=()=>{if(!t)return 0;const{capacity:s,distribution:c,alternative:L}=t.waterSupply,N=Math.min(s,20),U=Math.min(c,15),K=Math.min(L,5);return N+U+K},g=()=>{if(!t)return 0;const{dispatch:s,alerting:c}=t.communications,L=Math.min(s,7),N=Math.min(c,3);return L+N},B=()=>{if(!t)return 0;const{prevention:s,education:c,investigation:L}=t.communityRiskReduction,N=Math.min(s,2.5),U=Math.min(c,2),K=Math.min(L,1);return N+U+K},V=()=>{const s=S(),c=E(),L=g(),N=B();let U=s+c+L;const K=s/50,me=c/40,xe=Math.abs(K-me);if(xe>.1){const Je=xe*10;U=Math.max(0,U-Je)}return U+N},x=s=>{const c=s/105.5*100;return c>=90?1:c>=80?2:c>=70?3:c>=60?4:c>=50?5:c>=40?6:c>=30?7:c>=20?8:c>=10?9:10},p=(s,c)=>{const L=s/c*100;return L>=90?{level:"EXCELLENT",color:"#1b5e20",bg:"#e8f5e8",icon:e.jsx(te,{}),description:"Top 10% of departments"}:L>=75?{level:"GOOD",color:"#2e7d32",bg:"#f1f8e9",icon:e.jsx(te,{}),description:"Above average performance"}:L>=60?{level:"NEEDS IMPROVEMENT",color:"#ff8f00",bg:"#fff8e1",icon:e.jsx(ge,{}),description:"Below average - opportunity exists"}:{level:"CRITICAL",color:"#d32f2f",bg:"#ffebee",icon:e.jsx(Xe,{}),description:"Major deficiency affecting rating"}},D=s=>{switch(s){case 1:return{color:"#1b5e20",bg:"#e8f5e8",desc:"Superior Protection",icon:e.jsx(te,{}),benchmark:"Elite - Top 1% of departments"};case 2:case 3:return{color:"#2e7d32",bg:"#f1f8e9",desc:"Excellent Protection",icon:e.jsx(te,{}),benchmark:"Top 25% of departments"};case 4:case 5:return{color:"#558b2f",bg:"#f9fbe7",desc:"Good Protection",icon:e.jsx(te,{}),benchmark:"Above average for community size"};case 6:case 7:return{color:"#ff8f00",bg:"#fff8e1",desc:"Fair Protection",icon:e.jsx(ge,{}),benchmark:"Below average - improvement needed"};case 8:case 9:return{color:"#f57c00",bg:"#fff3e0",desc:"Poor Protection",icon:e.jsx(ge,{}),benchmark:"Bottom 25% - significant gaps"};case 10:default:return{color:"#d32f2f",bg:"#ffebee",desc:"Inadequate Protection",icon:e.jsx(Xe,{}),benchmark:"Critical deficiencies present"}}},u=S(),k=E(),C=g(),T=B(),R=V(),w=x(R),o=D(w);return e.jsxs(r,{sx:{p:3,height:"100%",overflow:"auto"},children:[e.jsxs(r,{sx:{mb:4},children:[e.jsxs(i,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Qe,{sx:{fontSize:40,color:"primary.main"}}),"ISO Fire Rating Assessment"]}),e.jsx(i,{variant:"subtitle1",color:"text.secondary",children:"Fire Suppression Rating Schedule (FSRS) Analysis - 105.5 Point System"})]}),e.jsx(_,{elevation:3,sx:{p:3,mb:4,background:`linear-gradient(135deg, ${o.bg} 0%, #ffffff 100%)`,border:`2px solid ${o.color}`},children:e.jsxs(m,{container:!0,spacing:3,alignItems:"center",children:[e.jsx(m,{item:!0,xs:12,md:4,children:e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(i,{variant:"h2",sx:{color:o.color,fontWeight:"bold",mb:1},children:w}),e.jsx(A,{icon:o.icon,label:`Class ${w}`,sx:{bgcolor:o.color,color:"white",fontSize:"1.1rem",px:2,py:1}})]})}),e.jsxs(m,{item:!0,xs:12,md:8,children:[e.jsx(i,{variant:"h5",sx:{color:o.color,mb:1},children:o.desc}),e.jsxs(i,{variant:"body1",sx:{color:"text.secondary",mb:2,fontStyle:"italic"},children:["📊 ",o.benchmark]}),e.jsxs(i,{variant:"h6",gutterBottom:!0,children:["Total Score: ",R.toFixed(1)," / 105.5 points"]}),e.jsx(ie,{variant:"determinate",value:R/105.5*100,sx:{height:10,borderRadius:5,bgcolor:"rgba(0,0,0,0.1)","& .MuiLinearProgress-bar":{bgcolor:o.color}}}),e.jsxs(i,{variant:"body2",sx:{mt:1,color:"text.secondary"},children:[(R/105.5*100).toFixed(1),"% of maximum possible score"]}),w>1&&e.jsxs(r,{sx:{mt:2,p:2,bgcolor:"rgba(0,0,0,0.05)",borderRadius:1},children:[e.jsxs(i,{variant:"body2",sx:{fontWeight:"bold",color:"primary.main"},children:["🎯 Path to Class ",w-1,":"]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Need ",(Math.ceil((w-1)*10.55)-R).toFixed(1)," more points",w===5&&" (90+ points for Class 4 - significant insurance savings)",w===2&&" (95+ points for Class 1 - elite rating)"]})]})]})]})}),e.jsxs(m,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(ce,{elevation:2,children:e.jsxs(le,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ye,{sx:{color:"#ff5722",mr:1}}),e.jsx(i,{variant:"h6",children:"Fire Department Operations"})]}),(()=>{const s=p(u,50);return e.jsx(A,{icon:s.icon,label:s.level,size:"small",sx:{bgcolor:s.color,color:"white",fontWeight:"bold"}})})()]}),e.jsxs(i,{variant:"h4",sx:{color:"#ff5722",mb:1},children:[u.toFixed(1)," / 50"]}),e.jsxs(i,{variant:"body2",sx:{color:"text.secondary",mb:2},children:[(u/50*100).toFixed(0),"% • ",p(u,50).description]}),e.jsx(ie,{variant:"determinate",value:u/50*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#ff5722"}}}),e.jsxs(re,{dense:!0,children:[e.jsxs(F,{children:[e.jsx(M,{children:(()=>{var c;const s=p(((c=t==null?void 0:t.fireDepartment)==null?void 0:c.staffing)||0,12.5);return e.jsx(r,{sx:{color:s.color},children:s.icon})})()}),e.jsx(O,{primary:`Staffing: ${((n=(a=t==null?void 0:t.fireDepartment)==null?void 0:a.staffing)==null?void 0:n.toFixed(1))||"0.0"} / 12.5`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Engine Company:"})," Minimum 3 firefighters + 1 officer (4 total)"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Ladder Company:"})," Minimum 3 firefighters + 1 officer (4 total)"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"On-Duty Staffing:"})," 24/7 coverage with sufficient personnel"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Response Goal:"})," 15 firefighters within 8 minutes for structure fires"]}),((l=t==null?void 0:t.fireDepartment)==null?void 0:l.staffing)&&t.fireDepartment.staffing<9.5&&e.jsxs(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:["💡 Need: +",Math.ceil((9.5-t.fireDepartment.staffing)/2)," firefighters per shift"]})]})})]}),e.jsxs(F,{children:[e.jsx(M,{children:(()=>{var c;const s=p(((c=t==null?void 0:t.fireDepartment)==null?void 0:c.equipment)||0,12.5);return e.jsx(r,{sx:{color:s.color},children:s.icon})})()}),e.jsx(O,{primary:`Equipment: ${((j=(h=t==null?void 0:t.fireDepartment)==null?void 0:h.equipment)==null?void 0:j.toFixed(1))||"0.0"} / 12.5`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Equipment Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Engine Companies:"})," 1,000+ GPM pump, 300+ gallons water tank"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Ladder Companies:"})," 75-100 ft aerial ladder or platform"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Ground Ladders:"})," 115 ft total (various lengths)"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"SCBA:"})," 10 sets minimum per engine/ladder company"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Hose:"}),' 3,000 ft of 2½" hose per engine company']}),(f=t==null?void 0:t.fireDepartment)!=null&&f.equipment&&t.fireDepartment.equipment>=10?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Equipment meets community requirements"}):e.jsx(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"⚠️ Review apparatus compliance with NFPA 1901 standards"})]})})]}),e.jsxs(F,{children:[e.jsx(M,{children:(()=>{var c;const s=p(((c=t==null?void 0:t.fireDepartment)==null?void 0:c.training)||0,12.5);return e.jsx(r,{sx:{color:s.color},children:s.icon})})()}),e.jsx(O,{primary:`Training: ${((z=(I=t==null?void 0:t.fireDepartment)==null?void 0:I.training)==null?void 0:z.toFixed(1))||"0.0"} / 12.5`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Training Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Structure Fire:"})," 20+ hours per firefighter per month"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Basic Training:"})," Firefighter I & II certification required"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Officer Training:"})," Fire Officer I minimum for company officers"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Specialized Training:"})," Hazmat, rescue, EMS as applicable"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Documentation:"})," Detailed training records maintained"]}),(H=t==null?void 0:t.fireDepartment)!=null&&H.training&&t.fireDepartment.training<9.5?e.jsxs(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:["📚 Need: +",Math.ceil((10-t.fireDepartment.training)*2)," additional training hours/month"]}):e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Training program meets ISO standards"})]})})]}),e.jsxs(F,{children:[e.jsx(M,{children:(()=>{var c;const s=p(((c=t==null?void 0:t.fireDepartment)==null?void 0:c.distribution)||0,12.5);return e.jsx(r,{sx:{color:s.color},children:s.icon})})()}),e.jsx(O,{primary:`Distribution: ${((q=(X=t==null?void 0:t.fireDepartment)==null?void 0:X.distribution)==null?void 0:q.toFixed(1))||"0.0"} / 12.5`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Distribution Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Engine Coverage:"})," ≤1.5 mile road distance for engines"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Ladder Coverage:"})," ≤2.5 mile road distance for aerials"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Response Time:"})," ≤5 minutes (240 seconds) travel time"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"First Due Area:"})," ≤5 square miles per engine company"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Station Location:"})," Strategically placed for optimal coverage"]}),(G=t==null?void 0:t.fireDepartment)!=null&&G.distribution&&t.fireDepartment.distribution>=10?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Station distribution meets ISO standards"}):e.jsx(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"📍 Consider additional station or relocate existing station"})]})})]})]})]})})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(ce,{elevation:2,children:e.jsxs(le,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Se,{sx:{color:"#2196f3",mr:1}}),e.jsx(i,{variant:"h6",children:"Water Supply"})]}),(()=>{const s=p(k,40);return e.jsx(A,{icon:s.icon,label:s.level,size:"small",sx:{bgcolor:s.color,color:"white",fontWeight:"bold"}})})()]}),e.jsxs(i,{variant:"h4",sx:{color:"#2196f3",mb:1},children:[k.toFixed(1)," / 40"]}),e.jsxs(i,{variant:"body2",sx:{color:"text.secondary",mb:2},children:[(k/40*100).toFixed(0),"% • ",p(k,40).description]}),e.jsx(ie,{variant:"determinate",value:k/40*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#2196f3"}}}),e.jsxs(re,{dense:!0,children:[e.jsxs(F,{children:[e.jsx(M,{children:(()=>{var c;const s=p(((c=t==null?void 0:t.waterSupply)==null?void 0:c.capacity)||0,20);return e.jsx(r,{sx:{color:s.color},children:s.icon})})()}),e.jsx(O,{primary:`Capacity: ${((Ce=(J=t==null?void 0:t.waterSupply)==null?void 0:J.capacity)==null?void 0:Ce.toFixed(1))||"0.0"} / 20`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Water Flow Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Minimum Flow:"})," 250 GPM for 2 hours (Class 8B areas)"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Residential:"})," 500-750 GPM for typical single-family homes"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Commercial:"})," 1,500-3,500+ GPM for large buildings"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Pressure:"})," 20 PSI residual minimum during flow test"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Duration:"})," Maintain flow for minimum 2 hours"]}),(Ie=t==null?void 0:t.waterSupply)!=null&&Ie.capacity&&t.waterSupply.capacity>=15?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Water system meets ISO flow requirements"}):e.jsx(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"💧 Need: Water main upgrades or booster pump systems"})]})})]}),e.jsxs(F,{children:[e.jsx(M,{children:(()=>{var c;const s=p(((c=t==null?void 0:t.waterSupply)==null?void 0:c.distribution)||0,15);return e.jsx(r,{sx:{color:s.color},children:s.icon})})()}),e.jsx(O,{primary:`Distribution: ${((Re=(ke=t==null?void 0:t.waterSupply)==null?void 0:ke.distribution)==null?void 0:Re.toFixed(1))||"0.0"} / 15`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Hydrant Distribution Standards:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Spacing:"})," ≤1,000 ft from any point to nearest hydrant"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Commercial Areas:"})," ≤500 ft spacing between hydrants"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Residential Areas:"})," ≤800 ft spacing between hydrants"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Arterial Streets:"})," ≤600 ft maximum spacing"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Dead End Streets:"})," ≤500 ft from end of street"]}),(De=t==null?void 0:t.waterSupply)!=null&&De.distribution&&t.waterSupply.distribution>=12?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Hydrant distribution meets ISO standards"}):e.jsxs(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:["🔧 Need: ",Math.ceil((12-(((we=t==null?void 0:t.waterSupply)==null?void 0:we.distribution)||0))*2)," additional hydrants"]})]})})]}),e.jsxs(F,{children:[e.jsx(M,{children:(()=>{var c;const s=p(((c=t==null?void 0:t.waterSupply)==null?void 0:c.alternative)||0,5);return e.jsx(r,{sx:{color:s.color},children:s.icon})})()}),e.jsx(O,{primary:`Alternative: ${((Fe=(Pe=t==null?void 0:t.waterSupply)==null?void 0:Pe.alternative)==null?void 0:Fe.toFixed(1))||"0.0"} / 5`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Alternative Water Supply Options:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Dry Hydrants:"}),' 6" minimum diameter, 500+ GPM capacity']}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Tanker Shuttles:"})," 1,000+ gallon capacity per tanker"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Static Sources:"})," Ponds, lakes with ≥30,000 gallons"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Mobile Supply:"})," Portable tanks, fold-a-tanks for operations"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Fill Sites:"})," Designated locations for tanker refill"]}),(Me=t==null?void 0:t.waterSupply)!=null&&Me.alternative&&t.waterSupply.alternative>=3?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Alternative water supply systems adequate"}):e.jsx(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"🚛 Need: Additional tankers or dry hydrant installation"})]})})]})]})]})})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(ce,{elevation:2,children:e.jsxs(le,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(be,{sx:{color:"#9c27b0",mr:1}}),e.jsx(i,{variant:"h6",children:"Emergency Communications"})]}),(()=>{const s=p(C,10);return e.jsx(A,{icon:s.icon,label:s.level,size:"small",sx:{bgcolor:s.color,color:"white",fontWeight:"bold"}})})()]}),e.jsxs(i,{variant:"h4",sx:{color:"#9c27b0",mb:1},children:[C.toFixed(1)," / 10"]}),e.jsxs(i,{variant:"body2",sx:{color:"text.secondary",mb:2},children:[(C/10*100).toFixed(0),"% • ",p(C,10).description]}),e.jsx(ie,{variant:"determinate",value:C/10*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#9c27b0"}}}),e.jsxs(re,{dense:!0,children:[e.jsxs(F,{children:[e.jsx(M,{children:(()=>{var c;const s=p(((c=t==null?void 0:t.communications)==null?void 0:c.dispatch)||0,7);return e.jsx(r,{sx:{color:s.color},children:s.icon})})()}),e.jsx(O,{primary:`Dispatch: ${((Ae=(Oe=t==null?void 0:t.communications)==null?void 0:Oe.dispatch)==null?void 0:Ae.toFixed(1))||"0.0"} / 7`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO 911 Dispatch Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"24/7 Operations:"})," Full-time dispatchers on duty"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Call Processing:"})," Emergency calls answered within 15 seconds"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Dispatch Time:"})," Units dispatched within 60 seconds"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Equipment:"})," CAD system, mapping, multiple phone lines"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Training:"})," EMD certification, continuing education"]}),(Ee=t==null?void 0:t.communications)!=null&&Ee.dispatch&&t.communications.dispatch>=6?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Dispatch center meets ISO standards"}):e.jsx(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"📞 Need: Enhanced dispatch training and equipment upgrades"})]})})]}),e.jsxs(F,{children:[e.jsx(M,{children:(()=>{var c;const s=p(((c=t==null?void 0:t.communications)==null?void 0:c.alerting)||0,3);return e.jsx(r,{sx:{color:s.color},children:s.icon})})()}),e.jsx(O,{primary:`Alerting: ${((Le=(Te=t==null?void 0:t.communications)==null?void 0:Te.alerting)==null?void 0:Le.toFixed(1))||"0.0"} / 3`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Alerting System Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Radio System:"})," VHF/UHF digital trunked preferred"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Coverage:"})," 95%+ mobile and portable coverage area"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Backup Power:"})," 24-hour minimum battery backup"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Station Alerting:"})," Automated station notification systems"]}),(Be=t==null?void 0:t.communications)!=null&&Be.alerting&&t.communications.alerting>=2.5?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Communication systems meet ISO standards"}):e.jsx(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"📡 Need: Radio system upgrades or coverage improvements"})]})})]})]})]})})}),e.jsx(m,{item:!0,xs:12,md:6,children:e.jsx(ce,{elevation:2,children:e.jsxs(le,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ve,{sx:{color:"#4caf50",mr:1}}),e.jsx(i,{variant:"h6",children:"Community Risk Reduction"}),e.jsx(A,{label:"BONUS",size:"small",sx:{ml:1,bgcolor:"#4caf50",color:"white"}})]}),(()=>{const s=p(T,5.5);return e.jsx(A,{icon:s.icon,label:s.level,size:"small",sx:{bgcolor:s.color,color:"white",fontWeight:"bold"}})})()]}),e.jsxs(i,{variant:"h4",sx:{color:"#4caf50",mb:1},children:[T.toFixed(1)," / 5.5"]}),e.jsxs(i,{variant:"body2",sx:{color:"text.secondary",mb:2},children:[(T/5.5*100).toFixed(0),"% • Bonus points toward total score"]}),e.jsx(ie,{variant:"determinate",value:T/5.5*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#4caf50"}}}),e.jsxs(re,{dense:!0,children:[e.jsxs(F,{children:[e.jsx(M,{children:(()=>{var c;const s=p(((c=t==null?void 0:t.communityRiskReduction)==null?void 0:c.prevention)||0,2.5);return e.jsx(r,{sx:{color:s.color},children:s.icon})})()}),e.jsx(O,{primary:`Prevention: ${((qe=(We=t==null?void 0:t.communityRiskReduction)==null?void 0:We.prevention)==null?void 0:qe.toFixed(1))||"0.0"} / 2.5`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Fire Prevention Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Fire Inspector:"})," Certified fire inspector on staff"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Code Enforcement:"})," Adopt current fire codes (IFC/NFPA)"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Plan Review:"})," Review building plans for fire safety"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Inspections:"})," Annual inspections of commercial buildings"]}),(Ge=t==null?void 0:t.communityRiskReduction)!=null&&Ge.prevention&&t.communityRiskReduction.prevention>=2?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Fire prevention program meets ISO standards"}):e.jsx(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"🔍 Need: Certified fire inspector and active inspection program"})]})})]}),e.jsxs(F,{children:[e.jsx(M,{children:(()=>{var c;const s=p(((c=t==null?void 0:t.communityRiskReduction)==null?void 0:c.education)||0,2);return e.jsx(r,{sx:{color:s.color},children:s.icon})})()}),e.jsx(O,{primary:`Education: ${((ze=($e=t==null?void 0:t.communityRiskReduction)==null?void 0:$e.education)==null?void 0:ze.toFixed(1))||"0.0"} / 2`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Public Education Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"School Programs:"})," Fire safety education in schools K-12"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Public Outreach:"})," Community fire safety events/programs"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"High-Risk Groups:"})," Senior citizens, disabled residents"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Documentation:"})," Maintain records of education activities"]}),(He=t==null?void 0:t.communityRiskReduction)!=null&&He.education&&t.communityRiskReduction.education>=1.5?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Public education program meets ISO standards"}):e.jsx(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"🏫 Need: Expand school programs and community outreach"})]})})]}),e.jsxs(F,{children:[e.jsx(M,{children:(()=>{var c;const s=p(((c=t==null?void 0:t.communityRiskReduction)==null?void 0:c.investigation)||0,1);return e.jsx(r,{sx:{color:s.color},children:s.icon})})()}),e.jsx(O,{primary:`Investigation: ${((Ue=(Ne=t==null?void 0:t.communityRiskReduction)==null?void 0:Ne.investigation)==null?void 0:Ue.toFixed(1))||"0.0"} / 1`,secondary:e.jsxs(r,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:e.jsx("strong",{children:"ISO Fire Investigation Requirements:"})}),e.jsxs(i,{variant:"caption",sx:{display:"block",mt:.5},children:["• ",e.jsx("strong",{children:"Trained Investigator:"})," Fire investigator certification"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Origin & Cause:"})," Determine fire cause and origin"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Documentation:"})," Detailed investigation reports"]}),e.jsxs(i,{variant:"caption",sx:{display:"block"},children:["• ",e.jsx("strong",{children:"Evidence Collection:"})," Proper evidence handling procedures"]}),(_e=t==null?void 0:t.communityRiskReduction)!=null&&_e.investigation&&t.communityRiskReduction.investigation>=.8?e.jsx(i,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"✅ Fire investigation program meets ISO standards"}):e.jsx(i,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"🔍 Need: Train certified fire investigator"})]})})]})]})]})})})]}),!t&&e.jsxs(_,{elevation:1,sx:{p:3,textAlign:"center",bgcolor:"#f5f5f5"},children:[e.jsx(i,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Assessment Data"}),e.jsx(i,{variant:"body1",color:"text.secondary",children:"Use the sidebar to input your fire department's capabilities and generate an ISO score assessment."})]})]})},Ai=({assessment:t,currentScore:P,classification:v,communityProfile:y})=>{const[d,S]=W.useState([]),[E,g]=W.useState(!1),[B,V]=W.useState(!0),[x,p]=W.useState({firefighterAnnualCost:75e3,apparatusCost:8e5,trainingProgramCost:8e3,hydrantInstallationCost:12e3,waterSystemUpgradeCost:15e5,constructionMultiplier:1}),D=(n,l)=>{p(h=>({...h,[n]:l}))},u=()=>{if(!t)return[];const n=[];return t.fireDepartment.staffing<10&&n.push({category:"Fire Department",subcategory:"Staffing",title:"Increase Minimum Staffing Levels",description:"Add firefighters to meet NFPA 1720 minimum staffing requirements for initial response",pointsGain:10-t.fireDepartment.staffing,estimatedCost:(10-t.fireDepartment.staffing)*x.firefighterAnnualCost,implementationTime:"6-12 months",priority:"HIGH",difficulty:"COMPLEX",requirements:["Budget approval from city council","Recruitment and hiring process","Training and certification programs","Additional equipment and PPE"],benefits:["Faster initial response times","Improved firefighter safety","Better emergency scene management","Enhanced public confidence"],fundingSources:["FEMA Assistance to Firefighters Grant (AFG)","FEMA Staffing for Adequate Fire and Emergency Response (SAFER)","State fire department grants","Municipal bond financing"]}),t.fireDepartment.training<10&&n.push({category:"Fire Department",subcategory:"Training",title:"Implement Structured Training Program",description:"Establish documented training program with minimum 20 hours monthly per firefighter",pointsGain:10-t.fireDepartment.training,estimatedCost:x.trainingProgramCost,implementationTime:"3-6 months",priority:"HIGH",difficulty:"MODERATE",requirements:["Training officer designation","Training facility or agreements","Record keeping system","Curriculum development"],benefits:["Improved firefighter competency","Better emergency outcomes","Reduced liability exposure","ISO credit improvement"],fundingSources:["FEMA AFG Training grants","State fire training academies","Regional training consortiums","Municipal training budgets"]}),t.fireDepartment.equipment<10&&n.push({category:"Fire Department",subcategory:"Equipment",title:"Upgrade Apparatus and Equipment",description:"Purchase NFPA 1901 compliant apparatus and maintain proper equipment inventory",pointsGain:10-t.fireDepartment.equipment,estimatedCost:x.apparatusCost,implementationTime:"12-24 months",priority:"HIGH",difficulty:"COMPLEX",requirements:["Capital improvement planning","Specifications development","Procurement process","Training on new equipment"],benefits:["Improved fire suppression capability","Enhanced equipment reliability","Better firefighter safety","Community protection upgrade"],fundingSources:["FEMA AFG Equipment grants","Municipal bonds","State equipment grants","Regional equipment sharing"]}),t.waterSupply.capacity<15&&n.push({category:"Water Supply",subcategory:"Capacity",title:"Improve Water System Capacity",description:"Upgrade water mains and pumping capacity to meet fire flow requirements",pointsGain:15-t.waterSupply.capacity,estimatedCost:x.waterSystemUpgradeCost*x.constructionMultiplier,implementationTime:"18-36 months",priority:"HIGH",difficulty:"COMPLEX",requirements:["Water system engineering study","Municipal utility coordination","Construction permits","Public works coordination"],benefits:["Increased fire suppression capability","Better residential water pressure","Enhanced commercial protection","Significant ISO improvement"],fundingSources:["EPA Drinking Water State Revolving Fund","USDA Rural Development grants","Municipal utility bonds","State infrastructure grants"]}),t.waterSupply.distribution<12&&n.push({category:"Water Supply",subcategory:"Distribution",title:"Install Additional Fire Hydrants",description:"Add hydrants to reduce spacing and improve coverage areas",pointsGain:12-t.waterSupply.distribution,estimatedCost:(12-t.waterSupply.distribution)*x.hydrantInstallationCost*x.constructionMultiplier,implementationTime:"6-12 months",priority:"MEDIUM",difficulty:"MODERATE",requirements:["Hydrant spacing analysis","Water main connections","Installation permits","Ongoing maintenance program"],benefits:["Reduced hose lay distances","Faster fire attack setup","Better neighborhood protection","Lower insurance rates for residents"],fundingSources:["Municipal capital improvements","Water utility funds","Community development grants","Special assessment districts"]}),t.communications.dispatch<6&&n.push({category:"Communications",subcategory:"Dispatch",title:"Improve Dispatch Operations",description:"Upgrade dispatch protocols, training, and equipment for faster call processing",pointsGain:6-t.communications.dispatch,estimatedCost:15e4*x.constructionMultiplier,implementationTime:"6-12 months",priority:"MEDIUM",difficulty:"MODERATE",requirements:["Dispatch training enhancement","Protocol documentation","Equipment upgrades","Quality assurance program"],benefits:["Faster emergency response","Better call processing times","Improved coordination","Enhanced public safety"],fundingSources:["FEMA Emergency Communications grants","State 911 improvement funds","Regional communications consortiums","Municipal emergency services budget"]}),t.communityRiskReduction.prevention<2&&n.push({category:"Community Risk Reduction",subcategory:"Prevention",title:"Establish Fire Prevention Program",description:"Implement code enforcement and fire prevention inspection program",pointsGain:2-t.communityRiskReduction.prevention,estimatedCost:85e3*x.constructionMultiplier,implementationTime:"6-12 months",priority:"LOW",difficulty:"MODERATE",requirements:["Fire prevention officer training","Code adoption and enforcement","Inspection scheduling system","Public education materials"],benefits:["Reduced fire incidents","Better building code compliance","Enhanced community safety","Bonus ISO points"],fundingSources:["FEMA Fire Prevention grants","Municipal code enforcement budget","State fire prevention programs","Community foundation grants"]}),n.sort((l,h)=>{const j={HIGH:3,MEDIUM:2,LOW:1},f=j[l.priority],I=j[h.priority];if(f!==I)return I-f;const z=l.pointsGain/l.estimatedCost;return h.pointsGain/h.estimatedCost-z})},k=n=>{const h=n*.07,j=y.population*.4*y.avgHomePremium*h,f=y.commercialPremiums*h;return j+f},C=()=>{const l=u().filter(G=>d.includes(G.title)),h=l.reduce((G,J)=>G+J.estimatedCost,0),j=l.reduce((G,J)=>G+J.pointsGain,0),f=P+j,I=T(P),z=T(f),H=Math.max(0,I-z),X=k(H),q=h/Math.max(X,1);return{totalCost:h,totalPointsGain:j,newScore:f,newClass:z,classImprovement:H,annualSavings:X,paybackPeriod:q}},T=n=>{const l=n/105.5*100;return l>=90?1:l>=80?2:l>=70?3:l>=60?4:l>=50?5:l>=40?6:l>=30?7:l>=20?8:l>=10?9:10},R=n=>{switch(n){case"HIGH":return"#d32f2f";case"MEDIUM":return"#ff8f00";case"LOW":return"#2e7d32";default:return"#757575"}},w=n=>{switch(n){case"Fire Department":return e.jsx(ye,{});case"Water Supply":return e.jsx(Se,{});case"Communications":return e.jsx(be,{});case"Community Risk Reduction":return e.jsx(ve,{});default:return e.jsx(fe,{})}},o=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(n),a=u();return C(),t?e.jsxs(r,{sx:{p:3},children:[e.jsxs(r,{sx:{mb:3},children:[e.jsx(i,{variant:"h4",gutterBottom:!0,children:"ISO Improvement Planner"}),e.jsx(i,{variant:"body1",color:"text.secondary",children:"Strategic recommendations to improve your ISO classification with cost-benefit analysis"})]}),e.jsx(_,{sx:{p:3,mb:3},children:e.jsxs(m,{container:!0,spacing:3,children:[e.jsx(m,{item:!0,xs:12,md:4,children:e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(i,{variant:"h6",color:"text.secondary",children:"Current Score"}),e.jsx(i,{variant:"h3",color:"primary",children:P.toFixed(1)}),e.jsx(i,{variant:"body2",children:"out of 105.5 points"})]})}),e.jsx(m,{item:!0,xs:12,md:4,children:e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(i,{variant:"h6",color:"text.secondary",children:"Current Classification"}),e.jsxs(i,{variant:"h3",color:"primary",children:["Class ",v]}),e.jsx(i,{variant:"body2",children:"ISO rating"})]})}),e.jsx(m,{item:!0,xs:12,md:4,children:e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(i,{variant:"h6",color:"text.secondary",children:"Improvement Opportunities"}),e.jsx(i,{variant:"h3",color:"secondary",children:a.length}),e.jsx(i,{variant:"body2",children:"recommendations available"})]})})]})}),e.jsxs(ne,{sx:{mb:3},expanded:B,onChange:()=>V(!B),children:[e.jsx(oe,{expandIcon:e.jsx(ae,{}),children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(bi,{color:"primary"}),e.jsxs(r,{children:[e.jsx(i,{variant:"h6",children:"Customize Cost Parameters"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Adjust costs based on your regional market conditions and department specifications"})]})]})}),e.jsxs(se,{children:[e.jsxs(m,{container:!0,spacing:4,children:[e.jsxs(m,{item:!0,xs:12,md:6,children:[e.jsxs(Y,{fullWidth:!0,sx:{mb:3},children:[e.jsxs(Z,{children:["Firefighter Annual Cost (salary + benefits): ",o(x.firefighterAnnualCost)]}),e.jsx(b,{value:x.firefighterAnnualCost,onChange:(n,l)=>D("firefighterAnnualCost",l),min:4e4,max:12e4,step:5e3,valueLabelDisplay:"auto",valueLabelFormat:o,marks:[{value:4e4,label:"$40k"},{value:75e3,label:"$75k"},{value:12e4,label:"$120k"}]}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Rural departments: $40-60k | Suburban: $60-85k | Urban/High COL: $85-120k"})]}),e.jsxs(Y,{fullWidth:!0,sx:{mb:3},children:[e.jsxs(Z,{children:["Fire Apparatus Cost (per unit): ",o(x.apparatusCost)]}),e.jsx(b,{value:x.apparatusCost,onChange:(n,l)=>D("apparatusCost",l),min:2e5,max:3e6,step:5e4,valueLabelDisplay:"auto",valueLabelFormat:o,marks:[{value:2e5,label:"$200k"},{value:8e5,label:"$800k"},{value:15e5,label:"$1.5M"},{value:27e5,label:"$2.7M"},{value:3e6,label:"$3M"}]}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Engine: $200-600k | Pumper: $400-800k | Ladder: $750k-2.7M | Specialty: $1M-3M (cost per apparatus - departments typically need multiple units)"})]}),e.jsxs(Y,{fullWidth:!0,sx:{mb:3},children:[e.jsxs(Z,{children:["Training Program Implementation: ",o(x.trainingProgramCost)]}),e.jsx(b,{value:x.trainingProgramCost,onChange:(n,l)=>D("trainingProgramCost",l),min:2e3,max:2e4,step:1e3,valueLabelDisplay:"auto",valueLabelFormat:o,marks:[{value:2e3,label:"$2k"},{value:8e3,label:"$8k"},{value:2e4,label:"$20k"}]}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Basic program: $2-5k | Comprehensive: $8-15k | Advanced multi-discipline: $15-20k"})]})]}),e.jsxs(m,{item:!0,xs:12,md:6,children:[e.jsxs(Y,{fullWidth:!0,sx:{mb:3},children:[e.jsxs(Z,{children:["Hydrant Installation Cost: ",o(x.hydrantInstallationCost)]}),e.jsx(b,{value:x.hydrantInstallationCost,onChange:(n,l)=>D("hydrantInstallationCost",l),min:6e3,max:25e3,step:1e3,valueLabelDisplay:"auto",valueLabelFormat:o,marks:[{value:6e3,label:"$6k"},{value:12e3,label:"$12k"},{value:25e3,label:"$25k"}]}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Easy access: $6-10k | Standard: $10-15k | Difficult terrain/deep lines: $15-25k"})]}),e.jsxs(Y,{fullWidth:!0,sx:{mb:3},children:[e.jsxs(Z,{children:["Water System Upgrade: ",o(x.waterSystemUpgradeCost)]}),e.jsx(b,{value:x.waterSystemUpgradeCost,onChange:(n,l)=>D("waterSystemUpgradeCost",l),min:8e5,max:5e6,step:1e5,valueLabelDisplay:"auto",valueLabelFormat:n=>`$${(n/1e6).toFixed(1)}M`,marks:[{value:8e5,label:"$0.8M"},{value:15e5,label:"$1.5M"},{value:5e6,label:"$5M"}]}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Minor upgrades: $0.8-1.2M | Major infrastructure: $1.5-3M | Complete overhaul: $3-5M"})]}),e.jsxs(Y,{fullWidth:!0,sx:{mb:3},children:[e.jsxs(Z,{children:["Regional Cost Multiplier: ",x.constructionMultiplier.toFixed(1),"x"]}),e.jsx(b,{value:x.constructionMultiplier,onChange:(n,l)=>D("constructionMultiplier",l),min:.7,max:1.8,step:.1,valueLabelDisplay:"auto",marks:[{value:.7,label:"0.7x"},{value:1,label:"1.0x"},{value:1.5,label:"1.5x"},{value:1.8,label:"1.8x"}]}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Rural/Low COL: 0.7-0.9x | National average: 1.0x | High COL areas: 1.2-1.8x"})]})]})]}),e.jsx(he,{severity:"info",sx:{mt:2},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Regional Examples:"})," Rural Alabama (0.7x), National Average (1.0x), San Francisco Bay Area (1.6x), Manhattan (1.8x). Adjust based on local contractor quotes and labor market conditions."]})})]})]}),e.jsxs(i,{variant:"h5",gutterBottom:!0,sx:{mt:4,mb:2},children:["Improvement Recommendations",e.jsx(i,{variant:"body2",color:"text.secondary",component:"span",sx:{ml:2},children:"(Updated with your cost parameters)"})]}),a.map((n,l)=>e.jsxs(ne,{sx:{mb:2},children:[e.jsx(oe,{expandIcon:e.jsx(ae,{}),children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[e.jsx(r,{sx:{mr:2},children:w(n.category)}),e.jsxs(r,{sx:{flexGrow:1},children:[e.jsx(i,{variant:"h6",children:n.title}),e.jsxs(r,{sx:{display:"flex",gap:1,mt:1},children:[e.jsx(A,{label:n.priority,size:"small",sx:{backgroundColor:R(n.priority),color:"white"}}),e.jsx(A,{label:`+${n.pointsGain} points`,size:"small",color:"primary"}),e.jsx(A,{label:o(n.estimatedCost),size:"small",variant:"outlined"})]})]})]})}),e.jsx(se,{children:e.jsxs(m,{container:!0,spacing:3,children:[e.jsxs(m,{item:!0,xs:12,md:8,children:[e.jsx(i,{variant:"body1",paragraph:!0,children:n.description}),e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Requirements"}),e.jsx(re,{dense:!0,children:n.requirements.map((h,j)=>e.jsxs(F,{children:[e.jsx(M,{children:e.jsx(te,{fontSize:"small"})}),e.jsx(O,{primary:h})]},j))}),e.jsx(i,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Benefits"}),e.jsx(re,{dense:!0,children:n.benefits.map((h,j)=>e.jsxs(F,{children:[e.jsx(M,{children:e.jsx(fe,{fontSize:"small",color:"primary"})}),e.jsx(O,{primary:h})]},j))})]}),e.jsx(m,{item:!0,xs:12,md:4,children:e.jsx(ce,{variant:"outlined",children:e.jsxs(le,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Project Details"}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(vi,{sx:{mr:1}}),e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Cost:"})," ",o(n.estimatedCost)]})]}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(mi,{sx:{mr:1}}),e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Timeline:"})," ",n.implementationTime]})]}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Pi,{sx:{mr:1}}),e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Difficulty:"})," ",n.difficulty]})]}),e.jsx(i,{variant:"subtitle2",gutterBottom:!0,children:"Funding Sources"}),n.fundingSources.map((h,j)=>e.jsx(A,{label:h,size:"small",variant:"outlined",sx:{mr:.5,mb:.5}},j))]})})})]})})]},l)),e.jsx(r,{sx:{mt:4,textAlign:"center"},children:e.jsxs(de,{variant:"contained",color:"secondary",size:"large",startIcon:e.jsx(Si,{}),onClick:()=>g(!E),children:[E?"Hide":"Show"," Cost-Benefit Analysis"]})}),E&&e.jsxs(_,{sx:{p:3,mt:3},children:[e.jsx(i,{variant:"h5",gutterBottom:!0,children:"Community Insurance Savings Analysis"}),e.jsx(he,{severity:"info",sx:{mb:3},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Cost-Benefit Analysis Disclaimer:"})," ISO classification improvements typically reduce property insurance premiums by 3-10% per class improvement (industry-validated). Cost estimates are based on national averages and should be refined with local contractor quotes. Actual savings vary by insurance company - some insurers don't use ISO ratings."]})}),e.jsxs(m,{container:!0,spacing:3,children:[e.jsxs(m,{item:!0,xs:12,md:6,children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Implementation Costs"}),e.jsx(gi,{children:e.jsxs(ji,{size:"small",children:[e.jsx(fi,{children:e.jsxs(je,{children:[e.jsx(ee,{children:"Category"}),e.jsx(ee,{align:"right",children:"Estimated Cost"})]})}),e.jsxs(yi,{children:[a.slice(0,5).map((n,l)=>e.jsxs(je,{children:[e.jsx(ee,{children:n.title}),e.jsx(ee,{align:"right",children:o(n.estimatedCost)})]},l)),e.jsxs(je,{children:[e.jsx(ee,{children:e.jsx("strong",{children:"Total Estimated Cost"})}),e.jsx(ee,{align:"right",children:e.jsx("strong",{children:o(a.reduce((n,l)=>n+l.estimatedCost,0))})})]})]})]})})]}),e.jsxs(m,{item:!0,xs:12,md:6,children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Projected Benefits"}),e.jsxs(r,{sx:{mb:2},children:[e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Current Classification: Class ",v]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Projected Classification: Class ",Math.max(1,v-2)]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Classification Improvement: ",Math.min(2,v-1)," classes"]})]}),e.jsx(ce,{variant:"outlined",children:e.jsxs(le,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(hi,{sx:{mr:1,color:"primary.main"}}),e.jsx(i,{variant:"h6",children:"Annual Community Savings"})]}),e.jsx(i,{variant:"h4",color:"primary",gutterBottom:!0,children:o(k(Math.min(2,v-1)))}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Based on ",y.population.toLocaleString()," residents and average premiums"]}),e.jsx(ni,{sx:{my:2}}),e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Payback Period:"})," ",(a.reduce((n,l)=>n+l.estimatedCost,0)/k(Math.min(2,v-1))).toFixed(1)," years"]})]})})]})]})]})]}):e.jsx(r,{sx:{p:3,textAlign:"center"},children:e.jsx(i,{variant:"h6",color:"text.secondary",children:"Complete your ISO assessment to see improvement recommendations"})})},Ei=({open:t,onClose:P,assessment:v,score:y,classification:d})=>{const S=()=>{console.log("🏆 Generating ISO Credit Report:",{assessment:v,score:y,classification:d}),alert(`ISO Report Generator - Coming in Phase 3!

Will generate professional PDF reports with:
• Current ISO classification analysis
• Improvement recommendations
• Cost-benefit analysis
• Community insurance savings projections`)};return e.jsxs(oi,{open:t,onClose:P,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"60vh"}},children:[e.jsx(ai,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(i,{variant:"h6",children:"ISO Credit Report Generator"}),e.jsx(de,{onClick:P,size:"small",sx:{minWidth:"auto",p:1},children:e.jsx(Ci,{})})]})}),e.jsxs(si,{children:[e.jsx(he,{severity:"info",sx:{mb:3},children:"Professional PDF report generation will be implemented in Phase 3 of development."}),e.jsxs(_,{elevation:1,sx:{p:3,mb:3},children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Planned Report Features:"}),e.jsx(i,{component:"div",variant:"body1",children:e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"ISO Classification Analysis"})," - Current score breakdown and classification"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Improvement Recommendations"})," - Specific areas for ISO score enhancement"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Cost-Benefit Analysis"})," - ROI calculations for improvements"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Community Insurance Savings"})," - Projected premium reductions"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Grant Application Support"})," - Data formatted for funding requests"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"City Council Presentations"})," - Executive-ready presentation materials"]})]})})]}),v&&e.jsxs(_,{elevation:1,sx:{p:3},children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Current Assessment Summary:"}),e.jsxs(i,{variant:"body1",children:[e.jsx("strong",{children:"ISO Classification:"})," Class ",d,e.jsx("br",{}),e.jsx("strong",{children:"Total Score:"})," ",y.toFixed(1)," / 105.5 points",e.jsx("br",{}),e.jsx("strong",{children:"Score Percentage:"})," ",(y/105.5*100).toFixed(1),"%"]})]})]}),e.jsxs(ci,{sx:{p:3},children:[e.jsx(de,{onClick:P,variant:"outlined",children:"Close"}),e.jsx(de,{onClick:S,variant:"contained",startIcon:e.jsx(Ke,{}),disabled:!v,children:"Generate Report (Phase 3)"})]})]})},ue=320,et=({initialAssessment:t,onAssessmentComplete:P,mode:v="assessment"})=>{const y=ti(),d=Ii(y.breakpoints.down("md")),[S,E]=$.useState(!d),[g,B]=$.useState(!1),[V,x]=$.useState(!1),[p,D]=$.useState(0),[u,k]=$.useState(null),[C,T]=$.useState(0),[R,w]=$.useState(10),[o,a]=$.useState(!1),[n,l]=$.useState(null),[h]=$.useState({population:25e3,avgHomePremium:1200,commercialPremiums:5e5});W.useEffect(()=>{document.title="FireEMS ISO Credit Calculator"},[]),W.useEffect(()=>{t&&(k(t),console.log("Loading initial ISO assessment:",t))},[t]),W.useEffect(()=>{u&&P&&P(u)},[u,P]);const j=()=>{E(!S)},f=()=>{B(!g),g?document.fullscreenElement&&document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen&&document.documentElement.requestFullscreen()},I=()=>{const q={assessment:u,score:C,classification:R,timestamp:new Date};localStorage.setItem("iso_credit_calculator_autosave",JSON.stringify(q)),console.log("ISO assessment data saved")},z=()=>{console.log("🏆 ISO EXPORT BUTTON CLICKED - Starting export process");const q=u!==null;if(console.log("🏆 ISO EXPORT DATA CHECK:",{hasAssessment:q,currentScore:C,classification:R}),!q){console.log("🏆 NO ISO DATA - Showing alert"),alert("No ISO assessment data to export. Please complete the assessment first.");return}console.log("🏆 OPENING ISO REPORT GENERATOR - Setting state"),x(!0),console.log("📊 Opening professional ISO credit report generator:",{score:C,classification:R,hasAssessment:!!u,showReportGenerator:!0})},H=()=>{l(null)},X=(q,G)=>{D(G)};return e.jsx(Ye,{children:e.jsxs(r,{sx:{display:"flex",height:"100vh",overflow:"hidden",bgcolor:"background.default",position:g?"fixed":"relative",top:g?0:"auto",left:g?0:"auto",right:g?0:"auto",bottom:g?0:"auto",zIndex:g?1300:"auto"},role:"main","aria-label":"ISO Credit Calculator Tool",children:[!g&&e.jsx(Ze,{position:"fixed",sx:{zIndex:y.zIndex.drawer+1,bgcolor:"primary.main"},children:e.jsxs(li,{children:[e.jsx(pe,{color:"inherit","aria-label":"toggle sidebar",onClick:j,edge:"start",sx:{mr:2},children:e.jsx(ei,{})}),e.jsx(Qe,{sx:{mr:1}}),e.jsxs(i,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1},children:["ISO Credit Calculator",v==="planning"&&" - Planning Mode",v==="presentation"&&" - Presentation Mode"]}),e.jsxs(r,{sx:{display:"flex",gap:1},children:[e.jsx(pe,{color:"inherit",onClick:I,title:"Save Assessment",children:e.jsx(ui,{})}),e.jsx(pe,{color:"inherit",onClick:z,title:"Generate Professional ISO Report",disabled:!u,children:e.jsx(Ke,{})}),e.jsx(pe,{color:"inherit",onClick:f,title:"Toggle Fullscreen",children:g?e.jsx(ki,{}):e.jsx(Ri,{})})]})]})}),e.jsx(ii,{variant:d?"temporary":"persistent",anchor:"left",open:S,onClose:j,sx:{width:ue,flexShrink:0,"& .MuiDrawer-paper":{width:ue,boxSizing:"border-box",marginTop:g?0:"56px",height:g?"100vh":"calc(100vh - 56px)",borderRight:`1px solid ${y.palette.divider}`}},ModalProps:{keepMounted:!0,disablePortal:!1,hideBackdrop:!d,disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0},PaperProps:{"aria-hidden":!1,role:"complementary","aria-label":"ISO Credit Calculator Tools"},children:e.jsx(Mi,{mode:v,onAssessmentChange:k,onScoreChange:T,onClassificationChange:w})}),e.jsxs(r,{component:"main",sx:{flexGrow:1,position:"relative",marginLeft:!d&&S?`${ue}px`:0,width:!d&&S?`calc(100% - ${ue}px)`:"100%",marginTop:g?0:"56px",height:g?"100vh":"calc(100vh - 56px)",transition:y.transitions.create(["margin","width"],{easing:y.transitions.easing.sharp,duration:y.transitions.duration.leavingScreen}),display:"flex",flexDirection:"column"},children:[e.jsx(_,{elevation:1,sx:{borderRadius:0,borderBottom:`1px solid ${y.palette.divider}`},children:e.jsxs(di,{value:p,onChange:X,"aria-label":"ISO Credit Calculator Tabs",sx:{px:2},children:[e.jsx(Ve,{icon:e.jsx(Di,{}),label:"Score Calculator",id:"iso-tab-0","aria-controls":"iso-tabpanel-0"}),e.jsx(Ve,{icon:e.jsx(fe,{}),label:"Improvement Planner",id:"iso-tab-1","aria-controls":"iso-tabpanel-1",disabled:!u})]})}),e.jsxs(r,{sx:{flexGrow:1,overflow:"auto",position:"relative"},children:[p===0&&e.jsx(_,{elevation:0,sx:{height:"100%",width:"100%",borderRadius:0,overflow:"auto",position:"relative",minHeight:"500px",display:"flex",flexDirection:"column"},role:"tabpanel",id:"iso-tabpanel-0","aria-labelledby":"iso-tab-0",children:e.jsx(Oi,{assessment:u,currentScore:C,classification:R,sidebarOpen:S,isMobile:d})}),p===1&&e.jsx(r,{sx:{height:"100%",overflow:"auto"},role:"tabpanel",id:"iso-tabpanel-1","aria-labelledby":"iso-tab-1",children:e.jsx(Ai,{assessment:u,currentScore:C,classification:R,communityProfile:h})})]}),o&&e.jsx(r,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(255, 255, 255, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsx(i,{variant:"h6",children:"Calculating ISO Score..."})})]}),e.jsx(xi,{open:!!n,autoHideDuration:6e3,onClose:H,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(he,{onClose:H,severity:"error",sx:{width:"100%"},children:n})}),e.jsx(Ei,{open:V,onClose:()=>x(!1),assessment:u,score:C,classification:R})]})})};export{et as default};
