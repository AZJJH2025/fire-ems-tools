import{j as i,r as z,B as t,R as W}from"./index-Bt3dcriC.js";import{S as y,E as Bi,A as Vi,a as Ui,M as Ki,D as Xi}from"./A11yProvider-BNXGIKl2.js";import{c as K,T as e,P as U,u as Ji}from"./Typography-BU-oQiA3.js";import{L as H}from"./LinearProgress-BaFFq5No.js";import{G as I,F as Qi,C as O,L as J,h as v,i as S,j as k,D as Yi,e as Zi,f as ie,A as qi,g as ee,v as re,I as Q,l as te}from"./Toolbar-Dr4G8sz0.js";import{B as V}from"./Button-CZFs-enp.js";import{S as ne,a as oe}from"./Save-DSVZ3eu7.js";import{A as Y,a as Z,E as ii,b as ei,W as ci}from"./Warning-D_t0tvjP.js";import{L as zi}from"./LocalFireDepartment-BlZoeLwj.js";import{S as Gi}from"./Security-B0WtAq7f.js";import{C as ri,a as ti}from"./CardContent-BYWpM5qJ.js";import{E as Ti}from"./Error-CrJprbIT.js";import{C as _}from"./CheckCircle-cJ2-ig3U.js";import{C as ce}from"./Close-DpWa5ofH.js";import{u as ae,F as le,a as se}from"./FullscreenExit-DBAIeqCH.js";const de=K(i.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5.97 4.06L14.09 6l1.41 1.41L16.91 6l1.06 1.06-1.41 1.41 1.41 1.41-1.06 1.06-1.41-1.4-1.41 1.41-1.06-1.06 1.41-1.41zm-6.78.66h5v1.5h-5zM11.5 16h-2v2H8v-2H6v-1.5h2v-2h1.5v2h2zm6.5 1.25h-5v-1.5h5zm0-2.5h-5v-1.5h5z"})),Ni=K(i.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"})),xe=K(i.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"})),Hi=K(i.jsx("path",{d:"M5 13.18v4L12 21l7-3.82v-4L12 17zM12 3 1 9l11 6 9-4.91V17h2V9z"})),$i=K(i.jsx("path",{d:"M21.98 14H22zM5.35 13c1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.4.98 3.31 1v-2c-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1v2c1.9 0 2.17-1 3.35-1m13.32 2c-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.1 1-3.34 1s-1.38-1-3.33-1-2.1 1-3.34 1v2c1.95 0 2.11-1 3.34-1 1.24 0 1.38 1 3.33 1s2.1-1 3.34-1c1.19 0 1.42 1 3.33 1 1.94 0 2.09-1 3.33-1 1.19 0 1.42 1 3.33 1v-2c-1.24 0-1.38-1-3.33-1M5.35 9c1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.42 1 3.33 1 1.95 0 2.09-1 3.33-1 1.19 0 1.4.98 3.31 1V8c-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1-1.95 0-2.09 1-3.33 1-1.19 0-1.42-1-3.33-1C3.38 7 3.24 8 2 8v2c1.9 0 2.17-1 3.35-1"})),pe=({mode:r="assessment",onAssessmentChange:R,onScoreChange:w,onClassificationChange:f})=>{const[l,p]=z.useState({fireDepartment:{staffing:0,equipment:0,training:0,distribution:0},waterSupply:{capacity:0,distribution:0,alternative:0},communications:{dispatch:0,alerting:0},communityRiskReduction:{prevention:0,education:0,investigation:0}}),[P,x]=z.useState("fire-department"),[F,$]=z.useState(!0);z.useEffect(()=>{R(l),F&&T()},[l,F]);const T=()=>{const a=Object.values(l.fireDepartment).reduce((m,u)=>m+u,0),o=Object.values(l.waterSupply).reduce((m,u)=>m+u,0),d=Object.values(l.communications).reduce((m,u)=>m+u,0),G=Object.values(l.communityRiskReduction).reduce((m,u)=>m+u,0),B=a+o+d+G,N=s(B);w(B),f(N)},s=a=>{const o=a/105.5*100;return o>=90?1:o>=80?2:o>=70?3:o>=60?4:o>=50?5:o>=40?6:o>=30?7:o>=20?8:o>=10?9:10},M=a=>(o,d)=>{x(d?a:"")},h=(a,o)=>{p(d=>({...d,fireDepartment:{...d.fireDepartment,[a]:o}}))},C=(a,o)=>{p(d=>({...d,waterSupply:{...d.waterSupply,[a]:o}}))},j=(a,o)=>{p(d=>({...d,communications:{...d.communications,[a]:o}}))},D=(a,o)=>{p(d=>({...d,communityRiskReduction:{...d.communityRiskReduction,[a]:o}}))},E=()=>{p({fireDepartment:{staffing:0,equipment:0,training:0,distribution:0},waterSupply:{capacity:0,distribution:0,alternative:0},communications:{dispatch:0,alerting:0},communityRiskReduction:{prevention:0,education:0,investigation:0}})},b=()=>Object.values(l.fireDepartment).reduce((a,o)=>a+o,0)+Object.values(l.waterSupply).reduce((a,o)=>a+o,0)+Object.values(l.communications).reduce((a,o)=>a+o,0)+Object.values(l.communityRiskReduction).reduce((a,o)=>a+o,0);return i.jsxs(t,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[i.jsxs(t,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:[i.jsx(e,{variant:"h6",gutterBottom:!0,children:"ISO Assessment Input"}),i.jsx(e,{variant:"body2",color:"text.secondary",children:"Enter your fire department's capabilities to calculate ISO classification"}),i.jsxs(t,{sx:{mt:2},children:[i.jsxs(e,{variant:"body2",gutterBottom:!0,children:["Current Score: ",b().toFixed(1)," / 105.5"]}),i.jsx(H,{variant:"determinate",value:b()/105.5*100,sx:{height:6,borderRadius:3}})]})]}),i.jsxs(t,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:[i.jsxs(I,{container:!0,spacing:1,children:[i.jsx(I,{item:!0,xs:6,children:i.jsx(V,{variant:"outlined",size:"small",startIcon:i.jsx(de,{}),onClick:T,disabled:F,fullWidth:!0,children:"Calculate"})}),i.jsx(I,{item:!0,xs:6,children:i.jsx(V,{variant:"outlined",size:"small",startIcon:i.jsx(xe,{}),onClick:E,fullWidth:!0,children:"Reset"})})]}),i.jsx(Qi,{control:i.jsx(ne,{checked:F,onChange:a=>$(a.target.checked),size:"small"}),label:"Auto-calculate",sx:{mt:1}})]}),i.jsxs(t,{sx:{flexGrow:1,overflow:"auto"},children:[i.jsxs(Y,{expanded:P==="fire-department",onChange:M("fire-department"),children:[i.jsx(Z,{expandIcon:i.jsx(ii,{}),children:i.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[i.jsx(zi,{sx:{color:"#ff5722"}}),i.jsxs(t,{sx:{flexGrow:1},children:[i.jsx(e,{variant:"subtitle1",children:"Fire Department"}),i.jsxs(e,{variant:"caption",color:"text.secondary",children:[Object.values(l.fireDepartment).reduce((a,o)=>a+o,0).toFixed(1)," / 50 points"]})]}),i.jsx(O,{label:"50 pts",size:"small",sx:{bgcolor:"#ff5722",color:"white"}})]})}),i.jsx(ei,{children:i.jsxs(t,{sx:{space:2},children:[i.jsxs(t,{sx:{mb:3},children:[i.jsx(e,{variant:"body2",gutterBottom:!0,children:"Staffing & Personnel Deployment (12.5 pts)"}),i.jsx(y,{value:l.fireDepartment.staffing,onChange:(a,o)=>h("staffing",o),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),i.jsx(e,{variant:"caption",color:"text.secondary",children:"Personnel availability, response times, staffing levels"})]}),i.jsxs(t,{sx:{mb:3},children:[i.jsx(e,{variant:"body2",gutterBottom:!0,children:"Equipment & Apparatus (12.5 pts)"}),i.jsx(y,{value:l.fireDepartment.equipment,onChange:(a,o)=>h("equipment",o),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),i.jsx(e,{variant:"caption",color:"text.secondary",children:"NFPA 1901 compliance, maintenance, testing"})]}),i.jsxs(t,{sx:{mb:3},children:[i.jsx(e,{variant:"body2",gutterBottom:!0,children:"Training Programs (12.5 pts)"}),i.jsx(y,{value:l.fireDepartment.training,onChange:(a,o)=>h("training",o),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),i.jsx(e,{variant:"caption",color:"text.secondary",children:"20+ hours/month structure fire training = 2.25 pts"})]}),i.jsxs(t,{sx:{mb:3},children:[i.jsx(e,{variant:"body2",gutterBottom:!0,children:"Station Distribution & Coverage (12.5 pts)"}),i.jsx(y,{value:l.fireDepartment.distribution,onChange:(a,o)=>h("distribution",o),min:0,max:12.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#ff5722"}}),i.jsx(e,{variant:"caption",color:"text.secondary",children:"Station locations, response coverage, mutual aid"})]})]})})]}),i.jsxs(Y,{expanded:P==="water-supply",onChange:M("water-supply"),children:[i.jsx(Z,{expandIcon:i.jsx(ii,{}),children:i.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[i.jsx($i,{sx:{color:"#2196f3"}}),i.jsxs(t,{sx:{flexGrow:1},children:[i.jsx(e,{variant:"subtitle1",children:"Water Supply"}),i.jsxs(e,{variant:"caption",color:"text.secondary",children:[Object.values(l.waterSupply).reduce((a,o)=>a+o,0).toFixed(1)," / 40 points"]})]}),i.jsx(O,{label:"40 pts",size:"small",sx:{bgcolor:"#2196f3",color:"white"}})]})}),i.jsx(ei,{children:i.jsxs(t,{sx:{space:2},children:[i.jsxs(t,{sx:{mb:3},children:[i.jsx(e,{variant:"body2",gutterBottom:!0,children:"Water Capacity & Flow (20 pts)"}),i.jsx(y,{value:l.waterSupply.capacity,onChange:(a,o)=>C("capacity",o),min:0,max:20,step:.1,valueLabelDisplay:"auto",sx:{color:"#2196f3"}}),i.jsx(e,{variant:"caption",color:"text.secondary",children:"Minimum 250 GPM for 2 hours (Class 8B: 200 GPM for 20 min)"})]}),i.jsxs(t,{sx:{mb:3},children:[i.jsx(e,{variant:"body2",gutterBottom:!0,children:"Hydrant Distribution (15 pts)"}),i.jsx(y,{value:l.waterSupply.distribution,onChange:(a,o)=>C("distribution",o),min:0,max:15,step:.1,valueLabelDisplay:"auto",sx:{color:"#2196f3"}}),i.jsx(e,{variant:"caption",color:"text.secondary",children:"Hydrant spacing max 1,000 feet from incidents"})]}),i.jsxs(t,{sx:{mb:3},children:[i.jsx(e,{variant:"body2",gutterBottom:!0,children:"Alternative Water Supply (5 pts)"}),i.jsx(y,{value:l.waterSupply.alternative,onChange:(a,o)=>C("alternative",o),min:0,max:5,step:.1,valueLabelDisplay:"auto",sx:{color:"#2196f3"}}),i.jsx(e,{variant:"caption",color:"text.secondary",children:"Dry hydrants, tanker shuttles, rural supplies"})]})]})})]}),i.jsxs(Y,{expanded:P==="communications",onChange:M("communications"),children:[i.jsx(Z,{expandIcon:i.jsx(ii,{}),children:i.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[i.jsx(Ni,{sx:{color:"#9c27b0"}}),i.jsxs(t,{sx:{flexGrow:1},children:[i.jsx(e,{variant:"subtitle1",children:"Communications"}),i.jsxs(e,{variant:"caption",color:"text.secondary",children:[Object.values(l.communications).reduce((a,o)=>a+o,0).toFixed(1)," / 10 points"]})]}),i.jsx(O,{label:"10 pts",size:"small",sx:{bgcolor:"#9c27b0",color:"white"}})]})}),i.jsx(ei,{children:i.jsxs(t,{sx:{space:2},children:[i.jsxs(t,{sx:{mb:3},children:[i.jsx(e,{variant:"body2",gutterBottom:!0,children:"911 Dispatch Center (7 pts)"}),i.jsx(y,{value:l.communications.dispatch,onChange:(a,o)=>j("dispatch",o),min:0,max:7,step:.1,valueLabelDisplay:"auto",sx:{color:"#9c27b0"}}),i.jsx(e,{variant:"caption",color:"text.secondary",children:"Call processing, dispatch times, capabilities"})]}),i.jsxs(t,{sx:{mb:3},children:[i.jsx(e,{variant:"body2",gutterBottom:!0,children:"Alerting Systems (3 pts)"}),i.jsx(y,{value:l.communications.alerting,onChange:(a,o)=>j("alerting",o),min:0,max:3,step:.1,valueLabelDisplay:"auto",sx:{color:"#9c27b0"}}),i.jsx(e,{variant:"caption",color:"text.secondary",children:"Radio systems, pagers, notification equipment"})]})]})})]}),i.jsxs(Y,{expanded:P==="community-risk",onChange:M("community-risk"),children:[i.jsx(Z,{expandIcon:i.jsx(ii,{}),children:i.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[i.jsx(Hi,{sx:{color:"#4caf50"}}),i.jsxs(t,{sx:{flexGrow:1},children:[i.jsx(e,{variant:"subtitle1",children:"Community Risk Reduction"}),i.jsxs(e,{variant:"caption",color:"text.secondary",children:[Object.values(l.communityRiskReduction).reduce((a,o)=>a+o,0).toFixed(1)," / 5.5 points"]})]}),i.jsx(O,{label:"BONUS",size:"small",sx:{bgcolor:"#4caf50",color:"white"}})]})}),i.jsx(ei,{children:i.jsxs(t,{sx:{space:2},children:[i.jsxs(t,{sx:{mb:3},children:[i.jsx(e,{variant:"body2",gutterBottom:!0,children:"Fire Prevention (2.5 pts)"}),i.jsx(y,{value:l.communityRiskReduction.prevention,onChange:(a,o)=>D("prevention",o),min:0,max:2.5,step:.1,valueLabelDisplay:"auto",sx:{color:"#4caf50"}}),i.jsx(e,{variant:"caption",color:"text.secondary",children:"Code enforcement, inspections, prevention programs"})]}),i.jsxs(t,{sx:{mb:3},children:[i.jsx(e,{variant:"body2",gutterBottom:!0,children:"Public Education (2 pts)"}),i.jsx(y,{value:l.communityRiskReduction.education,onChange:(a,o)=>D("education",o),min:0,max:2,step:.1,valueLabelDisplay:"auto",sx:{color:"#4caf50"}}),i.jsx(e,{variant:"caption",color:"text.secondary",children:"Community outreach, education programs"})]}),i.jsxs(t,{sx:{mb:3},children:[i.jsx(e,{variant:"body2",gutterBottom:!0,children:"Fire Investigation (1 pt)"}),i.jsx(y,{value:l.communityRiskReduction.investigation,onChange:(a,o)=>D("investigation",o),min:0,max:1,step:.1,valueLabelDisplay:"auto",sx:{color:"#4caf50"}}),i.jsx(e,{variant:"caption",color:"text.secondary",children:"Fire investigation capabilities and training"})]})]})})]})]})]})},he=({assessment:r,currentScore:R,classification:w,sidebarOpen:f,isMobile:l})=>{var o,d,G,B,N,m,u,ai,li,si,di,xi,pi,hi,ui,ji,fi,mi,gi,bi,yi,vi,Si,ki,Ci,Ii,Ri,wi,Di,Oi,Pi,Fi,Mi,Ei,Ai,Li,Wi;const p=()=>{if(!r)return 0;const{staffing:n,equipment:c,training:g,distribution:A}=r.fireDepartment,L=Math.min(n,12.5),q=Math.min(c,12.5),oi=Math.min(g,12.5),X=Math.min(A,12.5);return L+q+oi+X},P=()=>{if(!r)return 0;const{capacity:n,distribution:c,alternative:g}=r.waterSupply,A=Math.min(n,20),L=Math.min(c,15),q=Math.min(g,5);return A+L+q},x=()=>{if(!r)return 0;const{dispatch:n,alerting:c}=r.communications,g=Math.min(n,7),A=Math.min(c,3);return g+A},F=()=>{if(!r)return 0;const{prevention:n,education:c,investigation:g}=r.communityRiskReduction,A=Math.min(n,2.5),L=Math.min(c,2),q=Math.min(g,1);return A+L+q},$=()=>{const n=p(),c=P(),g=x(),A=F();let L=n+c+g;const q=n/50,oi=c/40,X=Math.abs(q-oi);if(X>.1){const _i=X*10;L=Math.max(0,L-_i)}return L+A},T=n=>{const c=n/105.5*100;return c>=90?1:c>=80?2:c>=70?3:c>=60?4:c>=50?5:c>=40?6:c>=30?7:c>=20?8:c>=10?9:10},s=(n,c)=>{const g=n/c*100;return g>=90?{level:"EXCELLENT",color:"#1b5e20",bg:"#e8f5e8",icon:i.jsx(_,{}),description:"Top 10% of departments"}:g>=75?{level:"GOOD",color:"#2e7d32",bg:"#f1f8e9",icon:i.jsx(_,{}),description:"Above average performance"}:g>=60?{level:"NEEDS IMPROVEMENT",color:"#ff8f00",bg:"#fff8e1",icon:i.jsx(ci,{}),description:"Below average - opportunity exists"}:{level:"CRITICAL",color:"#d32f2f",bg:"#ffebee",icon:i.jsx(Ti,{}),description:"Major deficiency affecting rating"}},M=n=>{switch(n){case 1:return{color:"#1b5e20",bg:"#e8f5e8",desc:"Superior Protection",icon:i.jsx(_,{}),benchmark:"Elite - Top 1% of departments"};case 2:case 3:return{color:"#2e7d32",bg:"#f1f8e9",desc:"Excellent Protection",icon:i.jsx(_,{}),benchmark:"Top 25% of departments"};case 4:case 5:return{color:"#558b2f",bg:"#f9fbe7",desc:"Good Protection",icon:i.jsx(_,{}),benchmark:"Above average for community size"};case 6:case 7:return{color:"#ff8f00",bg:"#fff8e1",desc:"Fair Protection",icon:i.jsx(ci,{}),benchmark:"Below average - improvement needed"};case 8:case 9:return{color:"#f57c00",bg:"#fff3e0",desc:"Poor Protection",icon:i.jsx(ci,{}),benchmark:"Bottom 25% - significant gaps"};case 10:default:return{color:"#d32f2f",bg:"#ffebee",desc:"Inadequate Protection",icon:i.jsx(Ti,{}),benchmark:"Critical deficiencies present"}}},h=p(),C=P(),j=x(),D=F(),E=$(),b=T(E),a=M(b);return i.jsxs(t,{sx:{p:3,height:"100%",overflow:"auto"},children:[i.jsxs(t,{sx:{mb:4},children:[i.jsxs(e,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:2},children:[i.jsx(Gi,{sx:{fontSize:40,color:"primary.main"}}),"ISO Fire Rating Assessment"]}),i.jsx(e,{variant:"subtitle1",color:"text.secondary",children:"Fire Suppression Rating Schedule (FSRS) Analysis - 105.5 Point System"})]}),i.jsx(U,{elevation:3,sx:{p:3,mb:4,background:`linear-gradient(135deg, ${a.bg} 0%, #ffffff 100%)`,border:`2px solid ${a.color}`},children:i.jsxs(I,{container:!0,spacing:3,alignItems:"center",children:[i.jsx(I,{item:!0,xs:12,md:4,children:i.jsxs(t,{sx:{textAlign:"center"},children:[i.jsx(e,{variant:"h2",sx:{color:a.color,fontWeight:"bold",mb:1},children:b}),i.jsx(O,{icon:a.icon,label:`Class ${b}`,sx:{bgcolor:a.color,color:"white",fontSize:"1.1rem",px:2,py:1}})]})}),i.jsxs(I,{item:!0,xs:12,md:8,children:[i.jsx(e,{variant:"h5",sx:{color:a.color,mb:1},children:a.desc}),i.jsxs(e,{variant:"body1",sx:{color:"text.secondary",mb:2,fontStyle:"italic"},children:["ðŸ“Š ",a.benchmark]}),i.jsxs(e,{variant:"h6",gutterBottom:!0,children:["Total Score: ",E.toFixed(1)," / 105.5 points"]}),i.jsx(H,{variant:"determinate",value:E/105.5*100,sx:{height:10,borderRadius:5,bgcolor:"rgba(0,0,0,0.1)","& .MuiLinearProgress-bar":{bgcolor:a.color}}}),i.jsxs(e,{variant:"body2",sx:{mt:1,color:"text.secondary"},children:[(E/105.5*100).toFixed(1),"% of maximum possible score"]}),b>1&&i.jsxs(t,{sx:{mt:2,p:2,bgcolor:"rgba(0,0,0,0.05)",borderRadius:1},children:[i.jsxs(e,{variant:"body2",sx:{fontWeight:"bold",color:"primary.main"},children:["ðŸŽ¯ Path to Class ",b-1,":"]}),i.jsxs(e,{variant:"body2",color:"text.secondary",children:["Need ",(Math.ceil((b-1)*10.55)-E).toFixed(1)," more points",b===5&&" (90+ points for Class 4 - significant insurance savings)",b===2&&" (95+ points for Class 1 - elite rating)"]})]})]})]})}),i.jsxs(I,{container:!0,spacing:3,sx:{mb:4},children:[i.jsx(I,{item:!0,xs:12,md:6,children:i.jsx(ri,{elevation:2,children:i.jsxs(ti,{children:[i.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[i.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[i.jsx(zi,{sx:{color:"#ff5722",mr:1}}),i.jsx(e,{variant:"h6",children:"Fire Department Operations"})]}),(()=>{const n=s(h,50);return i.jsx(O,{icon:n.icon,label:n.level,size:"small",sx:{bgcolor:n.color,color:"white",fontWeight:"bold"}})})()]}),i.jsxs(e,{variant:"h4",sx:{color:"#ff5722",mb:1},children:[h.toFixed(1)," / 50"]}),i.jsxs(e,{variant:"body2",sx:{color:"text.secondary",mb:2},children:[(h/50*100).toFixed(0),"% â€¢ ",s(h,50).description]}),i.jsx(H,{variant:"determinate",value:h/50*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#ff5722"}}}),i.jsxs(J,{dense:!0,children:[i.jsxs(v,{children:[i.jsx(S,{children:(()=>{var c;const n=s(((c=r==null?void 0:r.fireDepartment)==null?void 0:c.staffing)||0,12.5);return i.jsx(t,{sx:{color:n.color},children:n.icon})})()}),i.jsx(k,{primary:`Staffing: ${((d=(o=r==null?void 0:r.fireDepartment)==null?void 0:o.staffing)==null?void 0:d.toFixed(1))||"0.0"} / 12.5`,secondary:i.jsxs(t,{children:[i.jsx(e,{variant:"caption",color:"text.secondary",children:i.jsx("strong",{children:"ISO Requirements:"})}),i.jsxs(e,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",i.jsx("strong",{children:"Engine Company:"})," Minimum 3 firefighters + 1 officer (4 total)"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Ladder Company:"})," Minimum 3 firefighters + 1 officer (4 total)"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"On-Duty Staffing:"})," 24/7 coverage with sufficient personnel"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Response Goal:"})," 15 firefighters within 8 minutes for structure fires"]}),((G=r==null?void 0:r.fireDepartment)==null?void 0:G.staffing)&&r.fireDepartment.staffing<9.5&&i.jsxs(e,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:["ðŸ’¡ Need: +",Math.ceil((9.5-r.fireDepartment.staffing)/2)," firefighters per shift"]})]})})]}),i.jsxs(v,{children:[i.jsx(S,{children:(()=>{var c;const n=s(((c=r==null?void 0:r.fireDepartment)==null?void 0:c.equipment)||0,12.5);return i.jsx(t,{sx:{color:n.color},children:n.icon})})()}),i.jsx(k,{primary:`Equipment: ${((N=(B=r==null?void 0:r.fireDepartment)==null?void 0:B.equipment)==null?void 0:N.toFixed(1))||"0.0"} / 12.5`,secondary:i.jsxs(t,{children:[i.jsx(e,{variant:"caption",color:"text.secondary",children:i.jsx("strong",{children:"ISO Equipment Requirements:"})}),i.jsxs(e,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",i.jsx("strong",{children:"Engine Companies:"})," 1,000+ GPM pump, 300+ gallons water tank"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Ladder Companies:"})," 75-100 ft aerial ladder or platform"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Ground Ladders:"})," 115 ft total (various lengths)"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"SCBA:"})," 10 sets minimum per engine/ladder company"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Hose:"}),' 3,000 ft of 2Â½" hose per engine company']}),(m=r==null?void 0:r.fireDepartment)!=null&&m.equipment&&r.fireDepartment.equipment>=10?i.jsx(e,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Equipment meets community requirements"}):i.jsx(e,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"âš ï¸ Review apparatus compliance with NFPA 1901 standards"})]})})]}),i.jsxs(v,{children:[i.jsx(S,{children:(()=>{var c;const n=s(((c=r==null?void 0:r.fireDepartment)==null?void 0:c.training)||0,12.5);return i.jsx(t,{sx:{color:n.color},children:n.icon})})()}),i.jsx(k,{primary:`Training: ${((ai=(u=r==null?void 0:r.fireDepartment)==null?void 0:u.training)==null?void 0:ai.toFixed(1))||"0.0"} / 12.5`,secondary:i.jsxs(t,{children:[i.jsx(e,{variant:"caption",color:"text.secondary",children:i.jsx("strong",{children:"ISO Training Requirements:"})}),i.jsxs(e,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",i.jsx("strong",{children:"Structure Fire:"})," 20+ hours per firefighter per month"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Basic Training:"})," Firefighter I & II certification required"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Officer Training:"})," Fire Officer I minimum for company officers"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Specialized Training:"})," Hazmat, rescue, EMS as applicable"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Documentation:"})," Detailed training records maintained"]}),(li=r==null?void 0:r.fireDepartment)!=null&&li.training&&r.fireDepartment.training<9.5?i.jsxs(e,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:["ðŸ“š Need: +",Math.ceil((10-r.fireDepartment.training)*2)," additional training hours/month"]}):i.jsx(e,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Training program meets ISO standards"})]})})]}),i.jsxs(v,{children:[i.jsx(S,{children:(()=>{var c;const n=s(((c=r==null?void 0:r.fireDepartment)==null?void 0:c.distribution)||0,12.5);return i.jsx(t,{sx:{color:n.color},children:n.icon})})()}),i.jsx(k,{primary:`Distribution: ${((di=(si=r==null?void 0:r.fireDepartment)==null?void 0:si.distribution)==null?void 0:di.toFixed(1))||"0.0"} / 12.5`,secondary:i.jsxs(t,{children:[i.jsx(e,{variant:"caption",color:"text.secondary",children:i.jsx("strong",{children:"ISO Distribution Requirements:"})}),i.jsxs(e,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",i.jsx("strong",{children:"Engine Coverage:"})," â‰¤1.5 mile road distance for engines"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Ladder Coverage:"})," â‰¤2.5 mile road distance for aerials"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Response Time:"})," â‰¤5 minutes (240 seconds) travel time"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"First Due Area:"})," â‰¤5 square miles per engine company"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Station Location:"})," Strategically placed for optimal coverage"]}),(xi=r==null?void 0:r.fireDepartment)!=null&&xi.distribution&&r.fireDepartment.distribution>=10?i.jsx(e,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Station distribution meets ISO standards"}):i.jsx(e,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"ðŸ“ Consider additional station or relocate existing station"})]})})]})]})]})})}),i.jsx(I,{item:!0,xs:12,md:6,children:i.jsx(ri,{elevation:2,children:i.jsxs(ti,{children:[i.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[i.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[i.jsx($i,{sx:{color:"#2196f3",mr:1}}),i.jsx(e,{variant:"h6",children:"Water Supply"})]}),(()=>{const n=s(C,40);return i.jsx(O,{icon:n.icon,label:n.level,size:"small",sx:{bgcolor:n.color,color:"white",fontWeight:"bold"}})})()]}),i.jsxs(e,{variant:"h4",sx:{color:"#2196f3",mb:1},children:[C.toFixed(1)," / 40"]}),i.jsxs(e,{variant:"body2",sx:{color:"text.secondary",mb:2},children:[(C/40*100).toFixed(0),"% â€¢ ",s(C,40).description]}),i.jsx(H,{variant:"determinate",value:C/40*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#2196f3"}}}),i.jsxs(J,{dense:!0,children:[i.jsxs(v,{children:[i.jsx(S,{children:(()=>{var c;const n=s(((c=r==null?void 0:r.waterSupply)==null?void 0:c.capacity)||0,20);return i.jsx(t,{sx:{color:n.color},children:n.icon})})()}),i.jsx(k,{primary:`Capacity: ${((hi=(pi=r==null?void 0:r.waterSupply)==null?void 0:pi.capacity)==null?void 0:hi.toFixed(1))||"0.0"} / 20`,secondary:i.jsxs(t,{children:[i.jsx(e,{variant:"caption",color:"text.secondary",children:i.jsx("strong",{children:"ISO Water Flow Requirements:"})}),i.jsxs(e,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",i.jsx("strong",{children:"Minimum Flow:"})," 250 GPM for 2 hours (Class 8B areas)"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Residential:"})," 500-750 GPM for typical single-family homes"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Commercial:"})," 1,500-3,500+ GPM for large buildings"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Pressure:"})," 20 PSI residual minimum during flow test"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Duration:"})," Maintain flow for minimum 2 hours"]}),(ui=r==null?void 0:r.waterSupply)!=null&&ui.capacity&&r.waterSupply.capacity>=15?i.jsx(e,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Water system meets ISO flow requirements"}):i.jsx(e,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"ðŸ’§ Need: Water main upgrades or booster pump systems"})]})})]}),i.jsxs(v,{children:[i.jsx(S,{children:(()=>{var c;const n=s(((c=r==null?void 0:r.waterSupply)==null?void 0:c.distribution)||0,15);return i.jsx(t,{sx:{color:n.color},children:n.icon})})()}),i.jsx(k,{primary:`Distribution: ${((fi=(ji=r==null?void 0:r.waterSupply)==null?void 0:ji.distribution)==null?void 0:fi.toFixed(1))||"0.0"} / 15`,secondary:i.jsxs(t,{children:[i.jsx(e,{variant:"caption",color:"text.secondary",children:i.jsx("strong",{children:"ISO Hydrant Distribution Standards:"})}),i.jsxs(e,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",i.jsx("strong",{children:"Spacing:"})," â‰¤1,000 ft from any point to nearest hydrant"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Commercial Areas:"})," â‰¤500 ft spacing between hydrants"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Residential Areas:"})," â‰¤800 ft spacing between hydrants"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Arterial Streets:"})," â‰¤600 ft maximum spacing"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Dead End Streets:"})," â‰¤500 ft from end of street"]}),(mi=r==null?void 0:r.waterSupply)!=null&&mi.distribution&&r.waterSupply.distribution>=12?i.jsx(e,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Hydrant distribution meets ISO standards"}):i.jsxs(e,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:["ðŸ”§ Need: ",Math.ceil((12-(((gi=r==null?void 0:r.waterSupply)==null?void 0:gi.distribution)||0))*2)," additional hydrants"]})]})})]}),i.jsxs(v,{children:[i.jsx(S,{children:(()=>{var c;const n=s(((c=r==null?void 0:r.waterSupply)==null?void 0:c.alternative)||0,5);return i.jsx(t,{sx:{color:n.color},children:n.icon})})()}),i.jsx(k,{primary:`Alternative: ${((yi=(bi=r==null?void 0:r.waterSupply)==null?void 0:bi.alternative)==null?void 0:yi.toFixed(1))||"0.0"} / 5`,secondary:i.jsxs(t,{children:[i.jsx(e,{variant:"caption",color:"text.secondary",children:i.jsx("strong",{children:"ISO Alternative Water Supply Options:"})}),i.jsxs(e,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",i.jsx("strong",{children:"Dry Hydrants:"}),' 6" minimum diameter, 500+ GPM capacity']}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Tanker Shuttles:"})," 1,000+ gallon capacity per tanker"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Static Sources:"})," Ponds, lakes with â‰¥30,000 gallons"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Mobile Supply:"})," Portable tanks, fold-a-tanks for operations"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Fill Sites:"})," Designated locations for tanker refill"]}),(vi=r==null?void 0:r.waterSupply)!=null&&vi.alternative&&r.waterSupply.alternative>=3?i.jsx(e,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Alternative water supply systems adequate"}):i.jsx(e,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"ðŸš› Need: Additional tankers or dry hydrant installation"})]})})]})]})]})})}),i.jsx(I,{item:!0,xs:12,md:6,children:i.jsx(ri,{elevation:2,children:i.jsxs(ti,{children:[i.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[i.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[i.jsx(Ni,{sx:{color:"#9c27b0",mr:1}}),i.jsx(e,{variant:"h6",children:"Emergency Communications"})]}),(()=>{const n=s(j,10);return i.jsx(O,{icon:n.icon,label:n.level,size:"small",sx:{bgcolor:n.color,color:"white",fontWeight:"bold"}})})()]}),i.jsxs(e,{variant:"h4",sx:{color:"#9c27b0",mb:1},children:[j.toFixed(1)," / 10"]}),i.jsxs(e,{variant:"body2",sx:{color:"text.secondary",mb:2},children:[(j/10*100).toFixed(0),"% â€¢ ",s(j,10).description]}),i.jsx(H,{variant:"determinate",value:j/10*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#9c27b0"}}}),i.jsxs(J,{dense:!0,children:[i.jsxs(v,{children:[i.jsx(S,{children:(()=>{var c;const n=s(((c=r==null?void 0:r.communications)==null?void 0:c.dispatch)||0,7);return i.jsx(t,{sx:{color:n.color},children:n.icon})})()}),i.jsx(k,{primary:`Dispatch: ${((ki=(Si=r==null?void 0:r.communications)==null?void 0:Si.dispatch)==null?void 0:ki.toFixed(1))||"0.0"} / 7`,secondary:i.jsxs(t,{children:[i.jsx(e,{variant:"caption",color:"text.secondary",children:i.jsx("strong",{children:"ISO 911 Dispatch Requirements:"})}),i.jsxs(e,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",i.jsx("strong",{children:"24/7 Operations:"})," Full-time dispatchers on duty"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Call Processing:"})," Emergency calls answered within 15 seconds"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Dispatch Time:"})," Units dispatched within 60 seconds"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Equipment:"})," CAD system, mapping, multiple phone lines"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Training:"})," EMD certification, continuing education"]}),(Ci=r==null?void 0:r.communications)!=null&&Ci.dispatch&&r.communications.dispatch>=6?i.jsx(e,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Dispatch center meets ISO standards"}):i.jsx(e,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"ðŸ“ž Need: Enhanced dispatch training and equipment upgrades"})]})})]}),i.jsxs(v,{children:[i.jsx(S,{children:(()=>{var c;const n=s(((c=r==null?void 0:r.communications)==null?void 0:c.alerting)||0,3);return i.jsx(t,{sx:{color:n.color},children:n.icon})})()}),i.jsx(k,{primary:`Alerting: ${((Ri=(Ii=r==null?void 0:r.communications)==null?void 0:Ii.alerting)==null?void 0:Ri.toFixed(1))||"0.0"} / 3`,secondary:i.jsxs(t,{children:[i.jsx(e,{variant:"caption",color:"text.secondary",children:i.jsx("strong",{children:"ISO Alerting System Requirements:"})}),i.jsxs(e,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",i.jsx("strong",{children:"Radio System:"})," VHF/UHF digital trunked preferred"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Coverage:"})," 95%+ mobile and portable coverage area"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Backup Power:"})," 24-hour minimum battery backup"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Station Alerting:"})," Automated station notification systems"]}),(wi=r==null?void 0:r.communications)!=null&&wi.alerting&&r.communications.alerting>=2.5?i.jsx(e,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Communication systems meet ISO standards"}):i.jsx(e,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"ðŸ“¡ Need: Radio system upgrades or coverage improvements"})]})})]})]})]})})}),i.jsx(I,{item:!0,xs:12,md:6,children:i.jsx(ri,{elevation:2,children:i.jsxs(ti,{children:[i.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[i.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[i.jsx(Hi,{sx:{color:"#4caf50",mr:1}}),i.jsx(e,{variant:"h6",children:"Community Risk Reduction"}),i.jsx(O,{label:"BONUS",size:"small",sx:{ml:1,bgcolor:"#4caf50",color:"white"}})]}),(()=>{const n=s(D,5.5);return i.jsx(O,{icon:n.icon,label:n.level,size:"small",sx:{bgcolor:n.color,color:"white",fontWeight:"bold"}})})()]}),i.jsxs(e,{variant:"h4",sx:{color:"#4caf50",mb:1},children:[D.toFixed(1)," / 5.5"]}),i.jsxs(e,{variant:"body2",sx:{color:"text.secondary",mb:2},children:[(D/5.5*100).toFixed(0),"% â€¢ Bonus points toward total score"]}),i.jsx(H,{variant:"determinate",value:D/5.5*100,sx:{mb:2,"& .MuiLinearProgress-bar":{bgcolor:"#4caf50"}}}),i.jsxs(J,{dense:!0,children:[i.jsxs(v,{children:[i.jsx(S,{children:(()=>{var c;const n=s(((c=r==null?void 0:r.communityRiskReduction)==null?void 0:c.prevention)||0,2.5);return i.jsx(t,{sx:{color:n.color},children:n.icon})})()}),i.jsx(k,{primary:`Prevention: ${((Oi=(Di=r==null?void 0:r.communityRiskReduction)==null?void 0:Di.prevention)==null?void 0:Oi.toFixed(1))||"0.0"} / 2.5`,secondary:i.jsxs(t,{children:[i.jsx(e,{variant:"caption",color:"text.secondary",children:i.jsx("strong",{children:"ISO Fire Prevention Requirements:"})}),i.jsxs(e,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",i.jsx("strong",{children:"Fire Inspector:"})," Certified fire inspector on staff"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Code Enforcement:"})," Adopt current fire codes (IFC/NFPA)"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Plan Review:"})," Review building plans for fire safety"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Inspections:"})," Annual inspections of commercial buildings"]}),(Pi=r==null?void 0:r.communityRiskReduction)!=null&&Pi.prevention&&r.communityRiskReduction.prevention>=2?i.jsx(e,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Fire prevention program meets ISO standards"}):i.jsx(e,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"ðŸ” Need: Certified fire inspector and active inspection program"})]})})]}),i.jsxs(v,{children:[i.jsx(S,{children:(()=>{var c;const n=s(((c=r==null?void 0:r.communityRiskReduction)==null?void 0:c.education)||0,2);return i.jsx(t,{sx:{color:n.color},children:n.icon})})()}),i.jsx(k,{primary:`Education: ${((Mi=(Fi=r==null?void 0:r.communityRiskReduction)==null?void 0:Fi.education)==null?void 0:Mi.toFixed(1))||"0.0"} / 2`,secondary:i.jsxs(t,{children:[i.jsx(e,{variant:"caption",color:"text.secondary",children:i.jsx("strong",{children:"ISO Public Education Requirements:"})}),i.jsxs(e,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",i.jsx("strong",{children:"School Programs:"})," Fire safety education in schools K-12"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Public Outreach:"})," Community fire safety events/programs"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"High-Risk Groups:"})," Senior citizens, disabled residents"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Documentation:"})," Maintain records of education activities"]}),(Ei=r==null?void 0:r.communityRiskReduction)!=null&&Ei.education&&r.communityRiskReduction.education>=1.5?i.jsx(e,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Public education program meets ISO standards"}):i.jsx(e,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"ðŸ« Need: Expand school programs and community outreach"})]})})]}),i.jsxs(v,{children:[i.jsx(S,{children:(()=>{var c;const n=s(((c=r==null?void 0:r.communityRiskReduction)==null?void 0:c.investigation)||0,1);return i.jsx(t,{sx:{color:n.color},children:n.icon})})()}),i.jsx(k,{primary:`Investigation: ${((Li=(Ai=r==null?void 0:r.communityRiskReduction)==null?void 0:Ai.investigation)==null?void 0:Li.toFixed(1))||"0.0"} / 1`,secondary:i.jsxs(t,{children:[i.jsx(e,{variant:"caption",color:"text.secondary",children:i.jsx("strong",{children:"ISO Fire Investigation Requirements:"})}),i.jsxs(e,{variant:"caption",sx:{display:"block",mt:.5},children:["â€¢ ",i.jsx("strong",{children:"Trained Investigator:"})," Fire investigator certification"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Origin & Cause:"})," Determine fire cause and origin"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Documentation:"})," Detailed investigation reports"]}),i.jsxs(e,{variant:"caption",sx:{display:"block"},children:["â€¢ ",i.jsx("strong",{children:"Evidence Collection:"})," Proper evidence handling procedures"]}),(Wi=r==null?void 0:r.communityRiskReduction)!=null&&Wi.investigation&&r.communityRiskReduction.investigation>=.8?i.jsx(e,{variant:"caption",sx:{color:"#2e7d32",display:"block",mt:1,fontWeight:"bold"},children:"âœ… Fire investigation program meets ISO standards"}):i.jsx(e,{variant:"caption",sx:{color:"#ff8f00",display:"block",mt:1,fontWeight:"bold"},children:"ðŸ” Need: Train certified fire investigator"})]})})]})]})]})})})]}),!r&&i.jsxs(U,{elevation:1,sx:{p:3,textAlign:"center",bgcolor:"#f5f5f5"},children:[i.jsx(e,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Assessment Data"}),i.jsx(e,{variant:"body1",color:"text.secondary",children:"Use the sidebar to input your fire department's capabilities and generate an ISO score assessment."})]})]})},ue=({open:r,onClose:R,assessment:w,score:f,classification:l})=>{const p=()=>{console.log("ðŸ† Generating ISO Credit Report:",{assessment:w,score:f,classification:l}),alert(`ISO Report Generator - Coming in Phase 3!

Will generate professional PDF reports with:
â€¢ Current ISO classification analysis
â€¢ Improvement recommendations
â€¢ Cost-benefit analysis
â€¢ Community insurance savings projections`)};return i.jsxs(Yi,{open:r,onClose:R,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"60vh"}},children:[i.jsx(Zi,{children:i.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsx(e,{variant:"h6",children:"ISO Credit Report Generator"}),i.jsx(V,{onClick:R,size:"small",sx:{minWidth:"auto",p:1},children:i.jsx(ce,{})})]})}),i.jsxs(ie,{children:[i.jsx(qi,{severity:"info",sx:{mb:3},children:"Professional PDF report generation will be implemented in Phase 3 of development."}),i.jsxs(U,{elevation:1,sx:{p:3,mb:3},children:[i.jsx(e,{variant:"h6",gutterBottom:!0,children:"Planned Report Features:"}),i.jsx(e,{component:"div",variant:"body1",children:i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"ISO Classification Analysis"})," - Current score breakdown and classification"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Improvement Recommendations"})," - Specific areas for ISO score enhancement"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Cost-Benefit Analysis"})," - ROI calculations for improvements"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Community Insurance Savings"})," - Projected premium reductions"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Grant Application Support"})," - Data formatted for funding requests"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"City Council Presentations"})," - Executive-ready presentation materials"]})]})})]}),w&&i.jsxs(U,{elevation:1,sx:{p:3},children:[i.jsx(e,{variant:"h6",gutterBottom:!0,children:"Current Assessment Summary:"}),i.jsxs(e,{variant:"body1",children:[i.jsx("strong",{children:"ISO Classification:"})," Class ",l,i.jsx("br",{}),i.jsx("strong",{children:"Total Score:"})," ",f.toFixed(1)," / 105.5 points",i.jsx("br",{}),i.jsx("strong",{children:"Score Percentage:"})," ",(f/105.5*100).toFixed(1),"%"]})]})]}),i.jsxs(ee,{sx:{p:3},children:[i.jsx(V,{onClick:R,variant:"outlined",children:"Close"}),i.jsx(V,{onClick:p,variant:"contained",startIcon:i.jsx(Bi,{}),disabled:!w,children:"Generate Report (Phase 3)"})]})]})},ni=320,Pe=({initialAssessment:r,onAssessmentComplete:R,mode:w="assessment"})=>{const f=Ji(),l=ae(f.breakpoints.down("md")),[p,P]=W.useState(!l),[x,F]=W.useState(!1),[$,T]=W.useState(!1),[s,M]=W.useState(null),[h,C]=W.useState(0),[j,D]=W.useState(10),[E,b]=W.useState(!1),[a,o]=W.useState(null);z.useEffect(()=>{document.title="FireEMS ISO Credit Calculator"},[]),z.useEffect(()=>{r&&(M(r),console.log("Loading initial ISO assessment:",r))},[r]),z.useEffect(()=>{s&&R&&R(s)},[s,R]);const d=()=>{P(!p)},G=()=>{F(!x),x?document.fullscreenElement&&document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen&&document.documentElement.requestFullscreen()},B=()=>{const u={assessment:s,score:h,classification:j,timestamp:new Date};localStorage.setItem("iso_credit_calculator_autosave",JSON.stringify(u)),console.log("ISO assessment data saved")},N=()=>{console.log("ðŸ† ISO EXPORT BUTTON CLICKED - Starting export process");const u=s!==null;if(console.log("ðŸ† ISO EXPORT DATA CHECK:",{hasAssessment:u,currentScore:h,classification:j}),!u){console.log("ðŸ† NO ISO DATA - Showing alert"),alert("No ISO assessment data to export. Please complete the assessment first.");return}console.log("ðŸ† OPENING ISO REPORT GENERATOR - Setting state"),T(!0),console.log("ðŸ“Š Opening professional ISO credit report generator:",{score:h,classification:j,hasAssessment:!!s,showReportGenerator:!0})},m=()=>{o(null)};return i.jsx(Vi,{children:i.jsxs(t,{sx:{display:"flex",height:"100vh",overflow:"hidden",bgcolor:"background.default",position:x?"fixed":"relative",top:x?0:"auto",left:x?0:"auto",right:x?0:"auto",bottom:x?0:"auto",zIndex:x?1300:"auto"},role:"main","aria-label":"ISO Credit Calculator Tool",children:[!x&&i.jsx(Ui,{position:"fixed",sx:{zIndex:f.zIndex.drawer+1,bgcolor:"primary.main"},children:i.jsxs(re,{children:[i.jsx(Q,{color:"inherit","aria-label":"toggle sidebar",onClick:d,edge:"start",sx:{mr:2},children:i.jsx(Ki,{})}),i.jsx(Gi,{sx:{mr:1}}),i.jsxs(e,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1},children:["ISO Credit Calculator",w==="planning"&&" - Planning Mode",w==="presentation"&&" - Presentation Mode"]}),i.jsxs(t,{sx:{display:"flex",gap:1},children:[i.jsx(Q,{color:"inherit",onClick:B,title:"Save Assessment",children:i.jsx(oe,{})}),i.jsx(Q,{color:"inherit",onClick:N,title:"Generate Professional ISO Report",disabled:!s,children:i.jsx(Bi,{})}),i.jsx(Q,{color:"inherit",onClick:G,title:"Toggle Fullscreen",children:x?i.jsx(le,{}):i.jsx(se,{})})]})]})}),i.jsx(Xi,{variant:l?"temporary":"persistent",anchor:"left",open:p,onClose:d,sx:{width:ni,flexShrink:0,"& .MuiDrawer-paper":{width:ni,boxSizing:"border-box",marginTop:x?0:"56px",height:x?"100vh":"calc(100vh - 56px)",borderRight:`1px solid ${f.palette.divider}`}},ModalProps:{keepMounted:!0,disablePortal:!1,hideBackdrop:!l,disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0},PaperProps:{"aria-hidden":!1,role:"complementary","aria-label":"ISO Credit Calculator Tools"},children:i.jsx(pe,{mode:w,onAssessmentChange:M,onScoreChange:C,onClassificationChange:D})}),i.jsxs(t,{component:"main",sx:{flexGrow:1,position:"relative",marginLeft:!l&&p?`${ni}px`:0,width:!l&&p?`calc(100% - ${ni}px)`:"100%",marginTop:x?0:"56px",height:x?"100vh":"calc(100vh - 56px)",transition:f.transitions.create(["margin","width"],{easing:f.transitions.easing.sharp,duration:f.transitions.duration.leavingScreen})},children:[i.jsx(U,{elevation:0,sx:{height:"100%",width:"100%",borderRadius:0,overflow:"hidden",position:"relative",minHeight:"500px",display:"flex",flexDirection:"column"},children:i.jsx(he,{assessment:s,currentScore:h,classification:j,sidebarOpen:p,isMobile:l})}),E&&i.jsx(t,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(255, 255, 255, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:i.jsx(e,{variant:"h6",children:"Calculating ISO Score..."})})]}),i.jsx(te,{open:!!a,autoHideDuration:6e3,onClose:m,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:i.jsx(qi,{onClose:m,severity:"error",sx:{width:"100%"},children:a})}),i.jsx(ue,{open:$,onClose:()=>T(!1),assessment:s,score:h,classification:j})]})})};export{Pe as default};
