import{e as h,j as m,r as o}from"./index-CBSZnKZd.js";const I=h(m.jsx("path",{d:"M9 21c0 .5.4 1 1 1h4c.6 0 1-.5 1-1v-1H9zm3-19C8.1 2 5 5.1 5 9c0 2.4 1.2 4.5 3 5.7V17c0 .5.4 1 1 1h6c.6 0 1-.5 1-1v-2.3c1.8-1.3 3-3.4 3-5.7 0-3.9-3.1-7-7-7"})),E=h(m.jsx("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"})),b=()=>{const[d,i]=o.useState(!1),[p,a]=o.useState(null),f=o.useCallback(async()=>{try{a(null);const e=await fetch("/ai/debug",{method:"GET",credentials:"include"});if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);return(await e.json()).ai_service_status}catch(e){const t=e instanceof Error?e.message:"Unknown error";return a(t),console.error("AI Status Error:",t),null}},[]),l=o.useCallback(async(e,t)=>{try{i(!0),a(null);const s=await fetch("/ai/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({data_summary:e,query:t||void 0})});if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);return await s.json()}catch(s){const n=s instanceof Error?s.message:"Analysis failed";return a(n),console.error("AI Analysis Error:",n),{success:!1,error:n,source:"fallback",timestamp:new Date().toISOString()}}finally{i(!1)}},[]),g=o.useCallback(async e=>{try{i(!0),a(null);const t=await fetch("/ai/api/compliance-check",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);return await t.json()}catch(t){const s=t instanceof Error?t.message:"Compliance check failed";return a(s),console.error("AI Compliance Error:",s),{success:!1,error:s,source:"fallback",timestamp:new Date().toISOString()}}finally{i(!1)}},[]),y=o.useCallback(async e=>{if(!e||e.length===0)return{success:!1,error:"No response time data provided",source:"fallback",timestamp:new Date().toISOString()};const t=e.length,s=e.reduce((r,c)=>{const w=c.totalResponseTime||0;return r+w},0)/t,n=e.map(r=>r.dispatchTime||0).filter(r=>r>0).sort((r,c)=>r-c),u=e.map(r=>r.turnoutTime||0).filter(r=>r>0).sort((r,c)=>r-c),v=n.length>0?n[Math.floor(n.length*.9)]:0,T=u.length>0?u[Math.floor(u.length*.9)]:0,S=`Fire department response time analysis: ${t} incidents, average response time ${(s/60).toFixed(1)} minutes, 90th percentile dispatch time ${v} seconds, 90th percentile turnout time ${T} seconds.`;return l(S,"Provide NFPA 1710 compliance analysis and improvement recommendations.")},[l]);return{loading:d,error:p,checkStatus:f,analyzeData:l,checkCompliance:g,generateInsights:y}};export{I,E as T,b as u};
