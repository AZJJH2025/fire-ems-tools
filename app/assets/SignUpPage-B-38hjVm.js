import{d7 as B,r as c,j as e,t as a,d9 as D,bE as k,v as l,a9 as p,P as E,K as R,G as i,H,V as M,I as V,Z as L,W as d,X as y,a1 as v,bt as C,bs as w,L as O,M as G,N as U,O as f}from"./index-C9MyhNtD.js";const X=[{id:"trial",name:"Free Trial",price:"30 Days Free",badge:"Start Here",features:["Full access to all 6 tools","Unlimited PDF reports","All professional features","No credit card required","Cancel anytime"],recommended:!0},{id:"professional",name:"Professional",price:"$59/month",features:["Everything in trial","Unlimited departments","Template sharing","Priority support","Advanced analytics","Custom branding","NFPA compliance reports"]}],K=()=>{const h=B(),[n,g]=c.useState(1),[S,P]=c.useState("trial"),[u,W]=c.useState(!1),[m,I]=c.useState(!1),[r,z]=c.useState({departmentName:"",departmentType:"career",chiefName:"",email:"",password:"",confirmPassword:"",population:"",stations:"",city:"",state:""}),[j,q]=c.useState([]),o=(t,s)=>{z(x=>({...x,[t]:s}))},b=t=>{const s=[];return t===1&&(r.departmentName.trim()||s.push("Department name is required"),r.chiefName.trim()||s.push("Fire Chief name is required"),r.email.trim()||s.push("Email is required"),r.email.includes("@")||s.push("Valid email is required")),t===2&&(r.password||s.push("Password is required"),r.password.length<8&&s.push("Password must be at least 8 characters"),r.password!==r.confirmPassword&&s.push("Passwords do not match"),r.city.trim()||s.push("City is required"),r.state.trim()||s.push("State is required")),q(s),s.length===0},A=()=>{b(n)&&g(t=>Math.min(3,t+1))},N=()=>{g(t=>Math.max(1,t-1))},T=async()=>{if(b(2))try{const s=await(await fetch("/auth/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.email,password:r.password,name:r.chiefName,departmentName:r.departmentName,departmentType:r.departmentType})})).json();s.success?(console.log("Registration successful:",s.user),h("/login?signup=success")):alert(s.message||"Registration failed")}catch(t){console.error("Registration error:",t),alert("An error occurred during registration. Please try again.")}},F=()=>{switch(n){case 1:return e.jsxs(a,{children:[e.jsx(l,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold",color:"#1565c0",mb:3},children:"Department Information"}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{size:{xs:12},children:e.jsx(d,{fullWidth:!0,label:"Fire Department Name",value:r.departmentName,onChange:t=>o("departmentName",t.target.value),placeholder:"e.g., Houston Fire Department",required:!0})}),e.jsx(i,{size:{xs:12,sm:6},children:e.jsxs(O,{fullWidth:!0,required:!0,children:[e.jsx(G,{children:"Department Type"}),e.jsxs(U,{value:r.departmentType,onChange:t=>o("departmentType",t.target.value),label:"Department Type",children:[e.jsx(f,{value:"volunteer",children:"Volunteer"}),e.jsx(f,{value:"career",children:"Career"}),e.jsx(f,{value:"combination",children:"Combination"})]})]})}),e.jsx(i,{size:{xs:12,sm:6},children:e.jsx(d,{fullWidth:!0,label:"Estimated Population Served",value:r.population,onChange:t=>o("population",t.target.value),placeholder:"e.g., 25000",type:"number"})}),e.jsx(i,{size:{xs:12},children:e.jsx(d,{fullWidth:!0,label:"Fire Chief Name",value:r.chiefName,onChange:t=>o("chiefName",t.target.value),placeholder:"e.g., Chief John Smith",required:!0})}),e.jsx(i,{size:{xs:12},children:e.jsx(d,{fullWidth:!0,label:"Email Address",type:"email",value:r.email,onChange:t=>o("email",t.target.value),placeholder:"chief@department.gov",required:!0})})]})]});case 2:return e.jsxs(a,{children:[e.jsx(l,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold",color:"#1565c0",mb:3},children:"Account Security & Location"}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{size:{xs:12,sm:6},children:e.jsx(d,{fullWidth:!0,label:"Password",type:u?"text":"password",value:r.password,onChange:t=>o("password",t.target.value),required:!0,helperText:"Minimum 8 characters",InputProps:{endAdornment:e.jsx(y,{position:"end",children:e.jsx(v,{"aria-label":"toggle password visibility",onClick:()=>W(!u),edge:"end",size:"small",children:u?e.jsx(C,{}):e.jsx(w,{})})})}})}),e.jsx(i,{size:{xs:12,sm:6},children:e.jsx(d,{fullWidth:!0,label:"Confirm Password",type:m?"text":"password",value:r.confirmPassword,onChange:t=>o("confirmPassword",t.target.value),required:!0,InputProps:{endAdornment:e.jsx(y,{position:"end",children:e.jsx(v,{"aria-label":"toggle confirm password visibility",onClick:()=>I(!m),edge:"end",size:"small",children:m?e.jsx(C,{}):e.jsx(w,{})})})}})}),e.jsx(i,{size:{xs:12,sm:6},children:e.jsx(d,{fullWidth:!0,label:"City",value:r.city,onChange:t=>o("city",t.target.value),placeholder:"e.g., Houston",required:!0})}),e.jsx(i,{size:{xs:12,sm:6},children:e.jsx(d,{fullWidth:!0,label:"State",value:r.state,onChange:t=>o("state",t.target.value),placeholder:"e.g., TX",required:!0})}),e.jsx(i,{size:{xs:12,sm:6},children:e.jsx(d,{fullWidth:!0,label:"Number of Stations",value:r.stations,onChange:t=>o("stations",t.target.value),placeholder:"e.g., 3",type:"number"})})]})]});case 3:return e.jsxs(a,{children:[e.jsx(l,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold",color:"#1565c0",mb:3},children:"Choose Your Plan"}),e.jsx(i,{container:!0,spacing:3,sx:{justifyContent:"center"},children:X.map(t=>e.jsx(i,{size:{xs:12,md:6},children:e.jsxs(H,{sx:{height:"100%",position:"relative",border:S===t.id?"2px solid #1565c0":"1px solid #e0e0e0",cursor:"pointer","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}},onClick:()=>P(t.id),children:[(t.recommended||t.badge)&&e.jsx(M,{label:t.badge||"Recommended",color:"primary",size:"small",sx:{position:"absolute",top:-8,left:"50%",transform:"translateX(-50%)",zIndex:1,bgcolor:t.badge?"#4caf50":"#1565c0",color:"white",fontWeight:"bold",fontSize:"0.75rem"}}),e.jsxs(V,{sx:{pb:1,pt:t.recommended?3:2},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",textAlign:"center"},children:t.name}),e.jsx(l,{variant:"h4",color:"primary",gutterBottom:!0,sx:{fontWeight:"bold",textAlign:"center"},children:t.price}),e.jsx(a,{sx:{mt:2},children:t.features.map((s,x)=>e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(L,{sx:{color:"#4caf50",fontSize:18,mr:1}}),e.jsx(l,{variant:"body2",children:s})]},x))})]})]})},t.id))}),e.jsx(a,{sx:{mt:4,p:3,bgcolor:"#f5f5f5",borderRadius:2},children:e.jsx(l,{variant:"body2",color:"text.secondary",align:"center",children:"Start with a full 30-day free trial - no credit card required. Cancel anytime or continue with our affordable Professional plan."})})]});default:return null}};return e.jsx(a,{sx:{minHeight:"100vh",bgcolor:"#f5f5f5",py:4},children:e.jsxs(D,{maxWidth:"lg",children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:4},children:[e.jsx(k,{sx:{fontSize:40,color:"#1565c0",mr:2}}),e.jsx(l,{variant:"h4",sx:{fontWeight:"bold",color:"#1565c0"},children:"FireEMS.AI"}),e.jsx(a,{sx:{flexGrow:1}}),e.jsx(p,{variant:"text",onClick:()=>h("/login"),sx:{color:"#1565c0",fontWeight:"bold"},children:"Already have an account? Sign In"})]}),e.jsxs(a,{sx:{mb:4},children:[e.jsx(a,{sx:{display:"flex",justifyContent:"center",mb:2},children:[1,2,3].map(t=>e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(a,{sx:{width:40,height:40,borderRadius:"50%",bgcolor:n>=t?"#1565c0":"#e0e0e0",color:n>=t?"white":"#757575",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:t}),t<3&&e.jsx(a,{sx:{width:60,height:2,bgcolor:n>t?"#1565c0":"#e0e0e0",mx:1}})]},t))}),e.jsxs(l,{variant:"body2",align:"center",color:"text.secondary",children:["Step ",n," of 3: ",n===1?"Department Info":n===2?"Account Setup":"Choose Plan"]})]}),e.jsxs(E,{sx:{maxWidth:800,mx:"auto",p:4},children:[j.length>0&&e.jsx(R,{severity:"error",sx:{mb:3},children:e.jsx(a,{children:j.map((t,s)=>e.jsxs(l,{variant:"body2",children:["â€¢ ",t]},s))})}),F(),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e.jsx(p,{variant:"outlined",onClick:n===1?()=>h("/"):N,sx:{minWidth:120},children:n===1?"Back to Home":"Back"}),e.jsx(p,{variant:"contained",onClick:n===3?T:A,sx:{minWidth:120},children:n===3?"Create Account":"Next"})]})]})]})})};export{K as default};
