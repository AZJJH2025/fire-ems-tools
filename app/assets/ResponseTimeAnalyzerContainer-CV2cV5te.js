const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/exceljs.min-B2rkC6B_.js","assets/index-DEhMxlhx.js"])))=>i.map(i=>d[i]);
var xu=Object.defineProperty;var yu=(n,e,t)=>e in n?xu(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var B=(n,e,t)=>yu(n,typeof e!="symbol"?e+"":e,t);import{g as bu,u as vu,d as wu,T as Tu,_ as Su,f as Pu,a as re,R as Eo,b as Du,c as _,e as lt,j as c,h as Ge,i as qe,r as v,k as Cu,l as Fo,m as et,s as Z,n as mi,o as Be,B as kl,p as Il,q as Se,t as F,v as M,G as z,w as Mu,S as ku,x as jl,D as It,y as _l,P as ze,z as Rl,A as Ol,C as Lt,E as K,F as Al,H as $t,I as Vt,J as Zt,K as pt,L as El,M as Fl,N as Iu,O as Gi,Q as ji,U as Ll,V as Te,W as De,X as Nl,Y as ju,Z as Yn,$ as qi,a0 as vr,a1 as an,a2 as _u,a3 as Ru,a4 as bs,a5 as Ou,a6 as Wr,a7 as Hr,a8 as Au,a9 as ue,aa as rn,ab as Eu,ac as Fu,ad as Lu,ae as Nu,af as Jt,ag as Pn,ah as G,ai as gt,aj as _i,ak as zu,al as Bu,am as Ie,an as Xi,ao as $u,ap as Un,aq as Kt,ar as Ri,as as Oi,at as wr,au as Tr,av as zl,aw as Vu,ax as Wu,ay as pi,az as zn,aA as Bl,aB as Gn,aC as Ai,aD as Lo,aE as Ei,aF as Hu,aG as $l,aH as Vl,aI as Wl,aJ as Yu,aK as Hl,aL as Yl,aM as Os,aN as Fi,aO as Qi,aP as Uu,aQ as Ki,aR as Zi,aS as Gu,aT as Yr,aU as Sr,aV as Ur,aW as qu,aX as Ln,aY as Ul,aZ as Gl,a_ as ql,a$ as Xu,b0 as Gr,b1 as Qu,b2 as Ku,b3 as Zu,b4 as Ju,b5 as eh,b6 as Pr,b7 as th,b8 as nh,b9 as sh,ba as ih,bb as rh,bc as oh,bd as ah,be as lh,bf as ts,bg as ch}from"./index-DEhMxlhx.js";import{F as dh,a as uh,u as Xl}from"./FullscreenExit-CvHDgJ0R.js";import{L as jn}from"./leaflet-B7g_elg5.js";import{F as hh}from"./FilterList-ZT97ai_z.js";import{T as fh}from"./Tune-DCLcc4U9.js";import{a as Ji}from"./jspdf.plugin.autotable-CtA5BUKo.js";var er={exports:{}},tr,No;function mh(){if(No)return tr;No=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return tr=n,tr}var nr,zo;function ph(){if(zo)return nr;zo=1;var n=mh();function e(){}function t(){}return t.resetWarningCache=e,nr=function(){function s(o,a,l,d,u,h){if(h!==n){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}s.isRequired=s;function i(){return s}var r={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:i,element:s,elementType:s,instanceOf:i,node:s,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return r.PropTypes=r,r},nr}var Bo;function gh(){return Bo||(Bo=1,er.exports=ph()()),er.exports}var xh=gh();const N=bu(xh),Ql=N.oneOfType([N.func,N.object]);function $e({props:n,name:e}){return vu({props:n,name:e,defaultTheme:wu,themeId:Tu})}function yh(n,e){return n.classList?!!e&&n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}function bh(n,e){n.classList?n.classList.add(e):yh(n,e)||(typeof n.className=="string"?n.className=n.className+" "+e:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+e))}function $o(n,e){return n.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function vh(n,e){n.classList?n.classList.remove(e):typeof n.className=="string"?n.className=$o(n.className,e):n.setAttribute("class",$o(n.className&&n.className.baseVal||"",e))}var wh=function(e,t){return e&&t&&t.split(" ").forEach(function(s){return bh(e,s)})},sr=function(e,t){return e&&t&&t.split(" ").forEach(function(s){return vh(e,s)})},qr=function(n){Su(e,n);function e(){for(var s,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return s=n.call.apply(n,[this].concat(r))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(a,l){var d=s.resolveArguments(a,l),u=d[0],h=d[1];s.removeClasses(u,"exit"),s.addClass(u,h?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(a,l)},s.onEntering=function(a,l){var d=s.resolveArguments(a,l),u=d[0],h=d[1],f=h?"appear":"enter";s.addClass(u,f,"active"),s.props.onEntering&&s.props.onEntering(a,l)},s.onEntered=function(a,l){var d=s.resolveArguments(a,l),u=d[0],h=d[1],f=h?"appear":"enter";s.removeClasses(u,f),s.addClass(u,f,"done"),s.props.onEntered&&s.props.onEntered(a,l)},s.onExit=function(a){var l=s.resolveArguments(a),d=l[0];s.removeClasses(d,"appear"),s.removeClasses(d,"enter"),s.addClass(d,"exit","base"),s.props.onExit&&s.props.onExit(a)},s.onExiting=function(a){var l=s.resolveArguments(a),d=l[0];s.addClass(d,"exit","active"),s.props.onExiting&&s.props.onExiting(a)},s.onExited=function(a){var l=s.resolveArguments(a),d=l[0];s.removeClasses(d,"exit"),s.addClass(d,"exit","done"),s.props.onExited&&s.props.onExited(a)},s.resolveArguments=function(a,l){return s.props.nodeRef?[s.props.nodeRef.current,a]:[a,l]},s.getClassNames=function(a){var l=s.props.classNames,d=typeof l=="string",u=d&&l?l+"-":"",h=d?""+u+a:l[a],f=d?h+"-active":l[a+"Active"],m=d?h+"-done":l[a+"Done"];return{baseClassName:h,activeClassName:f,doneClassName:m}},s}var t=e.prototype;return t.addClass=function(i,r,o){var a=this.getClassNames(r)[o+"ClassName"],l=this.getClassNames("enter"),d=l.doneClassName;r==="appear"&&o==="done"&&d&&(a+=" "+d),o==="active"&&i&&Pu(i),a&&(this.appliedClasses[r][o]=a,wh(i,a))},t.removeClasses=function(i,r){var o=this.appliedClasses[r],a=o.base,l=o.active,d=o.done;this.appliedClasses[r]={},a&&sr(i,a),l&&sr(i,l),d&&sr(i,d)},t.render=function(){var i=this.props;i.classNames;var r=re(i,["classNames"]);return Eo.createElement(Du,_({},r,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(Eo.Component);qr.defaultProps={classNames:""};qr.propTypes={};const Th=lt(c.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}));function Sh(n){return qe("MuiTableSortLabel",n)}const ir=Ge("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc","directionDesc","directionAsc"]),Ph=n=>{const{classes:e,direction:t,active:s}=n,i={root:["root",s&&"active",`direction${mi(t)}`],icon:["icon",`iconDirection${mi(t)}`]};return Be(i,Sh,e)},Dh=Z(kl,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.active&&e.active]}})(Il(({theme:n})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(n.vars||n).palette.text.secondary},"&:hover":{color:(n.vars||n).palette.text.secondary,[`& .${ir.icon}`]:{opacity:.5}},[`&.${ir.active}`]:{color:(n.vars||n).palette.text.primary,[`& .${ir.icon}`]:{opacity:1,color:(n.vars||n).palette.text.secondary}}}))),Ch=Z("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,e[`iconDirection${mi(t.direction)}`]]}})(Il(({theme:n})=>({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:n.transitions.create(["opacity","transform"],{duration:n.transitions.duration.shorter}),userSelect:"none",variants:[{props:{direction:"desc"},style:{transform:"rotate(0deg)"}},{props:{direction:"asc"},style:{transform:"rotate(180deg)"}}]}))),Mh=v.forwardRef(function(e,t){const s=Cu({props:e,name:"MuiTableSortLabel"}),{active:i=!1,children:r,className:o,direction:a="asc",hideSortIcon:l=!1,IconComponent:d=Th,slots:u={},slotProps:h={},...f}=s,m={...s,active:i,direction:a,hideSortIcon:l,IconComponent:d},p=Ph(m),x={slots:u,slotProps:h},[g,y]=Fo("root",{elementType:Dh,externalForwardedProps:x,ownerState:m,className:et(p.root,o),ref:t}),[w,T]=Fo("icon",{elementType:Ch,externalForwardedProps:x,ownerState:m,className:p.icon});return c.jsxs(g,{disableRipple:!0,component:"span",...y,...f,children:[r,l&&!i?null:c.jsx(w,{as:d,...T})]})}),kh=lt(c.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"})),Ih=lt(c.jsx("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"})),jh=lt(c.jsx("path",{d:"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16m11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M5 11l1.5-4.5h11L19 11z"})),_h=lt(c.jsx("path",{d:"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2zm10 14.5V20H8v-3.5l4-4zm-4-5-4-4V4h8v3.5z"})),Rh=lt(c.jsx("path",{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm7 7V3.5L18.5 9z"})),Kl=lt(c.jsx("path",{d:"M9 21c0 .5.4 1 1 1h4c.6 0 1-.5 1-1v-1H9zm3-19C8.1 2 5 5.1 5 9c0 2.4 1.2 4.5 3 5.7V17c0 .5.4 1 1 1h6c.6 0 1-.5 1-1v-2.3c1.8-1.3 3-3.4 3-5.7 0-3.9-3.1-7-7-7"})),Oh=lt(c.jsx("path",{d:"M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V8h2z"})),_n=(n,e)=>{if(!n)return null;try{let t=n;if(t.includes("T")){const i=t.split("T");if(i[0].includes("-")){const r=i[0].split("-");if(r.length>=2){if(i.length>1&&i[1].includes("/")){const o=i[1].split(" ")[0];o.split("/").length===3&&(t=o)}else if(r[0].includes(" ")){const a=r[0].split(" ")[0],l=r[1].split("-");if(l.length===2){const d=l[0].padStart(2,"0"),u=l[1].padStart(2,"0");t=`${a}-${d}-${u}`}}}}else i.length>1&&i[0].includes("/")&&(t=i[0])}if(t.length<=8&&t.includes(":")&&!t.includes("-")&&!t.includes("/")){if(!e)return console.warn("Base date is required for time-only strings:",t),null;const i=t.split(":").map(Number),r=i[0]||0,o=i[1]||0,a=i[2]||0;let l;try{if(l=new Date(e),isNaN(l.getTime()))return console.warn("Invalid base date:",e),null}catch(d){return console.warn("Error parsing base date:",e,d),null}return l.setHours(r,o,a),l}if(/^\d{1,2}\/\d{1,2}\/\d{4}\s+\d{1,2}:\d{2}$/.test(t)&&(t=t+":00",console.log(`🔧 HEXAGON FIX: Added missing seconds to "${n}" → "${t}"`)),t.includes("/")){const i=t.split("/");if(i.length===3){let r=i[2],o="";if(r.includes(" ")){const f=r.split(" ");r=f[0],o=f.slice(1).join(" ")}const a=i[0].trim(),l=i[1].trim();let d=parseInt(r,10);const u=parseInt(a,10),h=parseInt(l,10);if(d>=0&&d<=99&&(d<=29?d+=2e3:d+=1900,console.log(`🔧 2-DIGIT YEAR FIX: Converted "${r}" to ${d}`)),!isNaN(d)&&!isNaN(u)&&!isNaN(h)){const f=new Date(d,u-1,h);if(o&&o.includes(":")){const m=o.split(":").map(Number);f.setHours(m[0]||0,m[1]||0,m[2]||0,0)}if(!isNaN(f.getTime()))return console.log(`🕒 TIMEZONE FIX: Parsed "${t}" as LOCAL time: ${f.toISOString()} (${f.toString()})`),f}}}if(t.includes(" ")&&t.includes("-")){const[i,r]=t.split(" ");let o;if(i.match(/^\d{4}-\d{2}-\d{2}$/)){const[a,l,d]=i.split("-").map(Number);o=new Date(a,l-1,d)}else o=new Date(i);if(!isNaN(o.getTime())&&r&&r.includes(":")){const a=r.split(":").map(Number);return o.setHours(a[0]||0,a[1]||0,a[2]||0,0),console.log(`🕒 TIMEZONE FIX: Parsed date+time "${t}" as LOCAL time: ${o.toISOString()} (${o.toString()})`),o}}const s=new Date(t);return isNaN(s.getTime())?(console.warn(`Could not parse date string: ${n} (processed as: ${t})`),null):(t.includes("/")||t.includes(" ")&&!t.includes("T")&&!t.includes("Z")&&!t.includes("+")&&!t.includes("-",10)?console.log(`⚠️ TIMEZONE WARNING: Direct parsing of "${t}" may have timezone issues. Result: ${s.toISOString()} (${s.toString()})`):console.log(`🕒 DIRECT PARSE: "${t}" parsed as: ${s.toISOString()} (${s.toString()})`),s)}catch(t){return console.error(`Error parsing date: ${n}`,t),null}},ut=n=>{const e={dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null};try{const t=n.incidentDate;if(!t)return console.warn("No incident date available for parsing time-only strings"),e;console.log("=== Processing incident:",n.incidentId,"==="),console.log("Base Date:",t),console.log("Raw incident data:",{incidentTime:n.incidentTime,dispatchTime:n.dispatchTime,enRouteTime:n.enRouteTime,arrivalTime:n.arrivalTime,clearTime:n.clearTime}),console.log("🧪 CHATGPT DEBUG - Calculator receives incident:",JSON.stringify(n,null,2));let s=null;console.log("=== INCIDENT TIME PROCESSING DEBUG ==="),console.log("incident object keys:",Object.keys(n)),console.log(`incident.incidentTime value: "${n.incidentTime}" (type: ${typeof n.incidentTime})`),console.log(`incident.incidentTime is null: ${n.incidentTime===null}`),console.log(`incident.incidentTime is undefined: ${n.incidentTime===void 0}`),console.log(`incident.incidentTime is empty string: ${n.incidentTime===""}`),console.log("🔍 FIELD CHECK - Call Receive Time:",n["Call Receive Time"]),console.log("🔍 FIELD CHECK - call receive time:",n["call receive time"]),console.log("🔍 FIELD CHECK - Incident Time:",n["Incident Time"]),console.log("🔍 FIELD CHECK - incident time:",n["incident time"]),console.log("🔍 FULL INCIDENT OBJECT:",JSON.stringify(n,null,2)),n.incidentTime&&n.incidentTime!==""&&n.incidentTime!==null&&n.incidentTime!==void 0?/^(\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}|\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2})$/.test(n.incidentTime.trim())?(console.log(`📅 DATE-ONLY FORMAT DETECTED: incidentTime is "${n.incidentTime}" - contains no time component`),console.log("📊 DATA QUALITY DECISION: Skipping dispatch time calculation for this incident to maintain data integrity"),console.log("✅ PRESERVING OTHER METRICS: Turnout, travel, scene time, and total incident time will still be calculated where possible"),s=null,console.log("🚨 INCIDENT TIME SET TO NULL: Dispatch time calculation will be skipped for data integrity")):(s=_n(n.incidentTime,t),console.log(`✅ SUCCESS: Using incidentTime: "${n.incidentTime}" -> ${(s==null?void 0:s.toISOString())||"null"}`)):(s=_n(t,t),console.log(`🚨 FALLBACK TRIGGERED: Using incidentDate as fallback (incidentTime was missing/empty): "${t}" -> ${(s==null?void 0:s.toISOString())||"null"}`),console.log("🚨 WHY FALLBACK? incidentTime validation failed:",{truthy:!!n.incidentTime,"not empty string":n.incidentTime!=="","not null":n.incidentTime!==null,"not undefined":n.incidentTime!==void 0,combined:!!(n.incidentTime&&n.incidentTime!==""&&n.incidentTime!==null&&n.incidentTime!==void 0)})),console.log("=== END INCIDENT TIME PROCESSING DEBUG ===");const i=_n(n.dispatchTime,t);console.log(`Parsed dispatchTime: ${n.dispatchTime} -> ${(i==null?void 0:i.toISOString())||"null"}`);const r=_n(n.enRouteTime,t);console.log(`Parsed enRouteTime: ${n.enRouteTime} -> ${(r==null?void 0:r.toISOString())||"null"}`);const o=_n(n.arrivalTime,t);console.log(`Parsed arrivalTime: ${n.arrivalTime} -> ${(o==null?void 0:o.toISOString())||"null"}`);const a=_n(n.clearTime,t);if(console.log(`Parsed clearTime: ${n.clearTime} -> ${(a==null?void 0:a.toISOString())||"null"}`),s&&i){const l=(i.getTime()-s.getTime())/1e3;l>0&&l<86400?e.dispatchTime=l:console.warn(`Invalid dispatch time interval: ${l} seconds`)}if(i&&r){const l=(r.getTime()-i.getTime())/1e3;l>0&&l<86400?e.turnoutTime=l:console.warn(`Invalid turnout time interval: ${l} seconds`)}if(r&&o){const l=(o.getTime()-r.getTime())/1e3;l>0&&l<86400?e.travelTime=l:console.warn(`Invalid travel time interval: ${l} seconds`)}if(s&&o){const l=(o.getTime()-s.getTime())/1e3;l>0&&l<86400?e.totalResponseTime=l:console.warn(`Invalid total response time interval: ${l} seconds`)}else!s&&o&&console.log("⏭️ SKIPPING TOTAL RESPONSE TIME: incidentTime was null (likely 00:00:00 case), cannot calculate total response time");if(o&&a){let l=a;a.getTime()<o.getTime()&&(l=new Date(a.getTime()+864e5),console.log(`🌅 MIDNIGHT ROLLOVER FIX: Clear time "${n.clearTime}" appears to be next day. Adjusted from ${a.toISOString()} to ${l.toISOString()}`));const d=(l.getTime()-o.getTime())/1e3;d>0&&d<86400*3?(e.sceneTime=d,console.log(`✅ Scene time calculated: ${d} seconds (${Math.round(d/60)} minutes)`)):console.warn(`Invalid scene time interval: ${d} seconds (arrival: ${o.toISOString()}, clear: ${l.toISOString()})`)}if(s&&a){let l=a;a.getTime()<s.getTime()&&(l=new Date(a.getTime()+864e5),console.log(`🌅 MIDNIGHT ROLLOVER FIX (Total): Clear time "${n.clearTime}" appears to be next day for total incident time calculation`));const d=(l.getTime()-s.getTime())/1e3;d>0&&d<86400*3?(e.totalIncidentTime=d,console.log(`✅ Total incident time calculated: ${d} seconds (${Math.round(d/60)} minutes)`)):console.warn(`Invalid total incident time interval: ${d} seconds (incident: ${s.toISOString()}, clear: ${l.toISOString()})`)}else!s&&a&&console.log("⏭️ SKIPPING TOTAL INCIDENT TIME: incidentTime was null (likely 00:00:00 case), cannot calculate total incident time")}catch(t){console.error("Error calculating metrics for incident",n.incidentId,t)}return console.log("Calculated metrics for incident",n.incidentId,e),e},Ah=n=>{if(console.log(`Calculating statistics for ${n.length} incidents`),!n||!n.length)return console.warn("No incidents provided for statistics calculation"),Ws();try{const e=n.filter(i=>!i.incidentId||!i.incidentDate?(console.warn(`Skipping incident missing required fields: ${JSON.stringify(i)}`),!1):!0);if(e.length===0)return console.warn("No valid incidents found for statistics calculation"),Ws();e.length<n.length&&console.warn(`Filtered out ${n.length-e.length} invalid incidents`);const s=e.map(ut).filter(i=>i.dispatchTime!==null||i.turnoutTime!==null||i.travelTime!==null||i.totalResponseTime!==null);return s.length===0?(console.warn("No valid metrics could be calculated"),Ws()):(console.log(`Calculated valid metrics for ${s.length} out of ${e.length} incidents`),{mean:Zl(s),median:Eh(s),ninetiethPercentile:Fh(s,90),standardDeviation:Lh(s),min:Nh(s),max:zh(s),count:s.length})}catch(e){return console.error("Error calculating response time statistics:",e),Ws()}},Ws=()=>{const n={dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null};return{mean:{...n},median:{...n},ninetiethPercentile:{...n},standardDeviation:{...n},min:{...n},max:{...n},count:0}},Zl=n=>{const e={dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null};return Object.keys(e).forEach(t=>{const s=n.map(i=>i[t]).filter(i=>i!==null);if(s.length){const i=s.reduce((r,o)=>r+o,0);e[t]=i/s.length}}),e},Eh=n=>{const e={dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null};return Object.keys(e).forEach(t=>{const s=n.map(i=>i[t]).filter(i=>i!==null).sort((i,r)=>i-r);if(s.length){const i=Math.floor(s.length/2);e[t]=s.length%2===0?(s[i-1]+s[i])/2:s[i]}}),e},Fh=(n,e)=>{const t={dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null};return Object.keys(t).forEach(s=>{const i=n.map(r=>r[s]).filter(r=>r!==null).sort((r,o)=>r-o);if(i.length){const r=Math.ceil(e/100*i.length)-1;t[s]=i[Math.max(0,Math.min(r,i.length-1))]}}),t},Lh=n=>{const e={dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},t=Zl(n);return Object.keys(e).forEach(s=>{const i=t[s];if(i===null)return;const r=n.map(o=>o[s]).filter(o=>o!==null);if(r.length){const a=r.map(l=>Math.pow(l-i,2)).reduce((l,d)=>l+d,0)/r.length;e[s]=Math.sqrt(a)}}),e},Nh=n=>{const e={dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null};return Object.keys(e).forEach(t=>{const s=n.map(i=>i[t]).filter(i=>i!==null);s.length&&(e[t]=Math.min(...s))}),e},zh=n=>{const e={dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null};return Object.keys(e).forEach(t=>{const s=n.map(i=>i[t]).filter(i=>i!==null);s.length&&(e[t]=Math.max(...s))}),e},ce=(n,e="full")=>{if(n===null)return"N/A";if(e==="seconds")return`${n.toFixed(1)}s`;if(e==="minutes")return`${(n/60).toFixed(1)} min`;const t=Math.floor(n/60),s=Math.round(n%60);return t===0?`${s} sec`:`${t} min ${s} sec`},ge=(n,e)=>{if(n===null)return"N/A";if(e==="dispatch")return`${Math.round(n)} sec`;if(n>=60){const t=Math.floor(n/60),s=Math.round(n%60);return`${t} min ${s} sec`}return`${Math.round(n)} sec`},Rn=({title:n,value:e,icon:t,secondaryValue:s,secondaryLabel:i,color:r="#1976d2"})=>c.jsx($t,{variant:"outlined",children:c.jsx(Vt,{children:c.jsxs(F,{sx:{display:"flex",alignItems:"center"},children:[c.jsx(F,{sx:{display:"flex",alignItems:"center",justifyContent:"center",bgcolor:`${r}20`,color:r,borderRadius:"50%",p:1,mr:2,width:40,height:40},children:t}),c.jsxs(F,{children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:n}),c.jsx(M,{variant:"h5",component:"div",children:e}),s&&c.jsxs(M,{variant:"caption",color:"text.secondary",children:[i,": ",s]})]})]})})}),Jl=()=>{const{responseTimeStats:n}=Se(t=>t.analyzer.calculatedMetrics),{incidents:e}=Se(t=>t.analyzer.rawData);return!n||!e.length?c.jsxs(F,{sx:{p:3},children:[c.jsx(M,{variant:"h6",gutterBottom:!0,children:"Response Time Statistics"}),c.jsx(M,{variant:"body1",color:"text.secondary",children:"No data available for statistical analysis. Please load incident data."})]}):c.jsxs(F,{sx:{p:3},children:[c.jsx(M,{variant:"h6",gutterBottom:!0,children:"Response Time Statistics"}),c.jsxs(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:["Based on ",e.length," incidents"]}),c.jsxs(z,{container:!0,spacing:3,sx:{mb:4},children:[c.jsx(z,{size:{xs:12,sm:6,md:4},children:c.jsx(Rn,{title:"Average Total Response Time",value:ce(n.mean.totalResponseTime),icon:c.jsx(Mu,{}),secondaryValue:ce(n.ninetiethPercentile.totalResponseTime),secondaryLabel:"90th percentile",color:"#1976d2"})}),c.jsx(z,{size:{xs:12,sm:6,md:4},children:c.jsx(Rn,{title:"Average Dispatch Time",value:ce(n.mean.dispatchTime),icon:c.jsx(ku,{}),secondaryValue:ce(n.ninetiethPercentile.dispatchTime),secondaryLabel:"90th percentile",color:"#2e7d32"})}),c.jsx(z,{size:{xs:12,sm:6,md:4},children:c.jsx(Rn,{title:"Average Turnout Time",value:ce(n.mean.turnoutTime),icon:c.jsx(Oh,{}),secondaryValue:ce(n.ninetiethPercentile.turnoutTime),secondaryLabel:"90th percentile",color:"#ed6c02"})}),c.jsx(z,{size:{xs:12,sm:6,md:4},children:c.jsx(Rn,{title:"Average Travel Time",value:ce(n.mean.travelTime),icon:c.jsx(jh,{}),secondaryValue:ce(n.ninetiethPercentile.travelTime),secondaryLabel:"90th percentile",color:"#9c27b0"})}),c.jsx(z,{size:{xs:12,sm:6,md:4},children:c.jsx(Rn,{title:"Average Scene Time",value:ce(n.mean.sceneTime),icon:c.jsx(jl,{}),secondaryValue:ce(n.median.sceneTime),secondaryLabel:"median",color:"#d32f2f"})}),c.jsx(z,{size:{xs:12,sm:6,md:4},children:c.jsx(Rn,{title:"Average Total Incident Time",value:ce(n.mean.totalIncidentTime),icon:c.jsx(_h,{}),secondaryValue:ce(n.median.totalIncidentTime),secondaryLabel:"median",color:"#0288d1"})})]}),c.jsx(It,{sx:{mb:4}}),c.jsx(M,{variant:"h6",gutterBottom:!0,children:"Detailed Response Time Statistics"}),c.jsx(_l,{component:ze,variant:"outlined",sx:{mb:4},children:c.jsxs(Rl,{size:"small",children:[c.jsx(Ol,{children:c.jsxs(Lt,{children:[c.jsx(K,{children:"Metric"}),c.jsx(K,{align:"right",children:"Mean"}),c.jsx(K,{align:"right",children:"Median"}),c.jsx(K,{align:"right",children:"90th Percentile"}),c.jsx(K,{align:"right",children:"Min"}),c.jsx(K,{align:"right",children:"Max"}),c.jsx(K,{align:"right",children:"Std Dev"})]})}),c.jsxs(Al,{children:[c.jsxs(Lt,{children:[c.jsx(K,{children:"Dispatch Time"}),c.jsx(K,{align:"right",children:ge(n.mean.dispatchTime,"dispatch")}),c.jsx(K,{align:"right",children:ge(n.median.dispatchTime,"dispatch")}),c.jsx(K,{align:"right",children:ge(n.ninetiethPercentile.dispatchTime,"dispatch")}),c.jsx(K,{align:"right",children:ge(n.min.dispatchTime,"dispatch")}),c.jsx(K,{align:"right",children:ge(n.max.dispatchTime,"dispatch")}),c.jsx(K,{align:"right",children:ge(n.standardDeviation.dispatchTime,"dispatch")})]}),c.jsxs(Lt,{children:[c.jsx(K,{children:"Turnout Time"}),c.jsx(K,{align:"right",children:ge(n.mean.turnoutTime,"turnout")}),c.jsx(K,{align:"right",children:ge(n.median.turnoutTime,"turnout")}),c.jsx(K,{align:"right",children:ge(n.ninetiethPercentile.turnoutTime,"turnout")}),c.jsx(K,{align:"right",children:ge(n.min.turnoutTime,"turnout")}),c.jsx(K,{align:"right",children:ge(n.max.turnoutTime,"turnout")}),c.jsx(K,{align:"right",children:ge(n.standardDeviation.turnoutTime,"turnout")})]}),c.jsxs(Lt,{children:[c.jsx(K,{children:"Travel Time"}),c.jsx(K,{align:"right",children:ge(n.mean.travelTime,"travel")}),c.jsx(K,{align:"right",children:ge(n.median.travelTime,"travel")}),c.jsx(K,{align:"right",children:ge(n.ninetiethPercentile.travelTime,"travel")}),c.jsx(K,{align:"right",children:ge(n.min.travelTime,"travel")}),c.jsx(K,{align:"right",children:ge(n.max.travelTime,"travel")}),c.jsx(K,{align:"right",children:ge(n.standardDeviation.travelTime,"travel")})]}),c.jsxs(Lt,{sx:{bgcolor:"action.hover"},children:[c.jsx(K,{children:c.jsx("strong",{children:"Total Response Time"})}),c.jsx(K,{align:"right",children:c.jsx("strong",{children:ge(n.mean.totalResponseTime,"total")})}),c.jsx(K,{align:"right",children:c.jsx("strong",{children:ge(n.median.totalResponseTime,"total")})}),c.jsx(K,{align:"right",children:c.jsx("strong",{children:ge(n.ninetiethPercentile.totalResponseTime,"total")})}),c.jsx(K,{align:"right",children:c.jsx("strong",{children:ge(n.min.totalResponseTime,"total")})}),c.jsx(K,{align:"right",children:c.jsx("strong",{children:ge(n.max.totalResponseTime,"total")})}),c.jsx(K,{align:"right",children:c.jsx("strong",{children:ge(n.standardDeviation.totalResponseTime,"total")})})]}),c.jsxs(Lt,{children:[c.jsx(K,{children:"Scene Time"}),c.jsx(K,{align:"right",children:ge(n.mean.sceneTime,"scene")}),c.jsx(K,{align:"right",children:ge(n.median.sceneTime,"scene")}),c.jsx(K,{align:"right",children:ge(n.ninetiethPercentile.sceneTime,"scene")}),c.jsx(K,{align:"right",children:ge(n.min.sceneTime,"scene")}),c.jsx(K,{align:"right",children:ge(n.max.sceneTime,"scene")}),c.jsx(K,{align:"right",children:ge(n.standardDeviation.sceneTime,"scene")})]}),c.jsxs(Lt,{children:[c.jsx(K,{children:"Total Incident Time"}),c.jsx(K,{align:"right",children:ge(n.mean.totalIncidentTime,"incident")}),c.jsx(K,{align:"right",children:ge(n.median.totalIncidentTime,"incident")}),c.jsx(K,{align:"right",children:ge(n.ninetiethPercentile.totalIncidentTime,"incident")}),c.jsx(K,{align:"right",children:ge(n.min.totalIncidentTime,"incident")}),c.jsx(K,{align:"right",children:ge(n.max.totalIncidentTime,"incident")}),c.jsx(K,{align:"right",children:ge(n.standardDeviation.totalIncidentTime,"incident")})]})]})]})}),c.jsx(M,{variant:"body2",color:"text.secondary",children:"* Times are displayed using industry-standard units: dispatch times in seconds, longer intervals in minutes and seconds."})]})},Bh=({count:n,maxCount:e,label:t,color:s,height:i=150,showValue:r=!0})=>{const o=e>0?Math.max(n>0?12:0,n/e*100):0;return c.jsxs(F,{sx:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:55,mx:.5},children:[c.jsx(F,{sx:{height:i,display:"flex",alignItems:"flex-end"},children:c.jsx(F,{sx:{width:45,height:`${o}%`,bgcolor:n>0?s:"rgba(0,0,0,0.1)",borderTopLeftRadius:8,borderTopRightRadius:8,position:"relative",border:`2px solid ${n>0?s:"rgba(0,0,0,0.2)"}`,transition:"all 0.3s ease-in-out",boxShadow:n>0?`0 2px 4px ${s}30`:"none","&:hover":{opacity:.85,transform:"translateY(-3px)",boxShadow:n>0?`0 6px 12px ${s}50`:"0 2px 4px rgba(0,0,0,0.2)",cursor:"pointer"}},children:r&&n>0&&c.jsx(M,{variant:"caption",sx:{position:"absolute",top:-26,left:"50%",transform:"translateX(-50%)",whiteSpace:"nowrap",fontWeight:700,color:"text.primary",fontSize:"0.8rem",bgcolor:"white",px:.8,py:.2,borderRadius:1,border:`1px solid ${s}`,boxShadow:`0 2px 4px ${s}30`},children:n})})}),c.jsx(M,{variant:"caption",sx:{mt:2,textAlign:"center",fontSize:"0.75rem",fontWeight:600,color:"text.primary",lineHeight:1.3,bgcolor:"white",px:.8,py:.4,borderRadius:1,border:"1px solid",borderColor:"grey.300",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",minHeight:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:t})]})},ec=()=>{const{incidents:n}=Se(r=>r.analyzer.rawData),{responseTimeStats:e}=Se(r=>r.analyzer.calculatedMetrics),t={fast:"#2E7D32",average:"#1976D2",slow:"#F57C00",verySlow:"#D32F2F"},s=v.useMemo(()=>{if(!n.length||!e)return null;const o=n.map(ut).map(u=>u.totalResponseTime).filter(u=>u!==null);if(!o.length)return null;const l=[{min:0,max:240,label:`0-4 min
(Excellent)`,color:t.fast},{min:240,max:360,label:`4-6 min
(Good)`,color:t.fast},{min:360,max:480,label:`6-8 min
(Target)`,color:t.average},{min:480,max:600,label:`8-10 min
(Fair)`,color:t.average},{min:600,max:900,label:`10-15 min
(Slow)`,color:t.slow},{min:900,max:1200,label:`15-20 min
(Concern)`,color:t.verySlow},{min:1200,max:1/0,label:`20+ min
(Critical)`,color:t.verySlow}].map(u=>{const h=o.filter(f=>f>=u.min&&f<u.max).length;return{...u,count:h}}),d=Math.max(...l.map(u=>u.count));return{buckets:l,maxCount:d,totalCount:o.length}},[n,e,t]),i=v.useMemo(()=>{if(!n.length||!e)return null;const o=n.map(ut).map(l=>l.totalResponseTime).filter(l=>l!==null);return o.length?[{max:240,label:"Under 4 min",color:t.fast},{max:480,label:"Under 8 min",color:t.average},{max:600,label:"Under 10 min",color:t.average}].map(l=>{const d=o.filter(h=>h<=l.max).length,u=d/o.length*100;return{...l,count:d,percentage:Math.round(u)}}):null},[n,e,t]);return!s||!i?c.jsxs(F,{sx:{p:3},children:[c.jsx(M,{variant:"h6",gutterBottom:!0,children:"Response Time Distribution"}),c.jsx(M,{variant:"body1",color:"text.secondary",children:"No incident data available for distribution analysis."})]}):c.jsxs(F,{sx:{p:3},children:[c.jsx(M,{variant:"h6",gutterBottom:!0,children:"Response Time Distribution"}),c.jsxs(z,{container:!0,spacing:3,children:[c.jsx(z,{size:{xs:12},children:c.jsxs(ze,{variant:"outlined",sx:{p:3,background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",border:"2px solid",borderColor:"primary.light"},children:[c.jsxs(F,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[c.jsx(M,{variant:"subtitle1",sx:{fontWeight:600,color:"primary.dark"},children:"Response Time Frequency Distribution"}),c.jsx(M,{variant:"caption",color:"text.secondary",sx:{fontStyle:"italic"},children:"NFPA 1710 Performance Analysis"})]}),c.jsxs(F,{sx:{mt:3,display:"flex",justifyContent:"center",alignItems:"flex-end",height:280,px:3,gap:2,position:"relative",borderLeft:"3px solid #424242",borderBottom:"3px solid #424242",ml:6,mb:6,mr:3,bgcolor:"rgba(248, 250, 252, 0.5)",borderRadius:"4px 0 0 0"},children:[c.jsx(F,{sx:{position:"absolute",left:-35,height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"flex-end",py:1},children:[...Array(6)].map((r,o)=>c.jsx(M,{variant:"caption",color:"text.primary",sx:{fontSize:"0.75rem",fontWeight:500,bgcolor:"white",px:.5,borderRadius:.5},children:Math.round(s.maxCount/5*(5-o))},o))}),c.jsx(M,{variant:"caption",color:"text.primary",sx:{position:"absolute",left:-70,top:"50%",transform:"translateY(-50%) rotate(-90deg)",fontWeight:600,transformOrigin:"center",fontSize:"0.8rem",letterSpacing:"0.5px"},children:"Number of Incidents"}),s.buckets.map((r,o)=>c.jsx(Bh,{count:r.count,maxCount:s.maxCount,label:r.label,color:r.color,height:240},o)),c.jsx(M,{variant:"caption",color:"text.primary",sx:{position:"absolute",bottom:-40,left:"50%",transform:"translateX(-50%)",fontWeight:600,fontSize:"0.8rem",letterSpacing:"0.5px",bgcolor:"white",px:1,borderRadius:1},children:"Response Time Ranges"})]}),c.jsxs(F,{sx:{mt:4,p:2,bgcolor:"rgba(255,255,255,0.8)",borderRadius:2,border:"1px solid",borderColor:"grey.200"},children:[c.jsxs(M,{variant:"body2",color:"text.primary",sx:{textAlign:"center",fontWeight:500},children:["Distribution of ",c.jsxs("strong",{children:[s.totalCount," incidents"]})," by total response time"]}),c.jsx(M,{variant:"caption",color:"text.secondary",sx:{textAlign:"center",display:"block",mt:.5},children:"Bars show incident count in each time range • Hover for details • Performance ratings based on NFPA 1710 standards"})]})]})}),c.jsx(z,{size:{xs:12},children:c.jsxs(ze,{variant:"outlined",sx:{p:2},children:[c.jsx(M,{variant:"subtitle1",gutterBottom:!0,children:"Response Time Compliance"}),c.jsx(z,{container:!0,spacing:3,sx:{mt:1},children:i.map((r,o)=>c.jsx(z,{size:{xs:12,sm:4},children:c.jsxs(F,{sx:{bgcolor:"background.default",p:2,borderRadius:1,border:`1px solid ${r.color}`,height:"100%"},children:[c.jsxs(M,{variant:"h5",gutterBottom:!0,sx:{color:r.color,fontWeight:"bold"},children:[r.percentage,"%"]}),c.jsx(M,{variant:"body2",gutterBottom:!0,children:r.label}),c.jsxs(M,{variant:"caption",color:"text.secondary",children:[r.count," of ",s.totalCount," incidents"]})]})},o))}),e&&c.jsx(F,{sx:{mt:3},children:c.jsxs(M,{variant:"body2",color:"text.secondary",children:["Average response time: ",ce(e.mean.totalResponseTime)," | Median: ",ce(e.median.totalResponseTime)," | 90th percentile: ",ce(e.ninetiethPercentile.totalResponseTime)]})})]})})]})]})},Vo={lat:34.0522,lng:-118.2437},Wo=11,$h=({incidents:n,colorBy:e,onIncidentSelect:t})=>{const s=ji(),i=v.useRef(null),r=v.useRef(null),o=v.useRef(null),{expandedPanels:a}=Se(m=>m.analyzer.ui),l=a.includes("incident-map"),d=v.useMemo(()=>n.map(m=>{const p={...m};return m.Latitude!==void 0&&!m.latitude&&(p.latitude=m.Latitude),m.Longitude!==void 0&&!m.longitude&&(p.longitude=m.Longitude),m.Address!==void 0&&!m.address&&(p.address=m.Address),console.log("HOTFIX: Converted field names for incident:",m.incidentId,"lat:",p.latitude,"lng:",p.longitude),p}),[n]),u=v.useMemo(()=>{if(d.length===0)return Vo;const m=d.filter(g=>g.latitude!=null&&g.longitude!=null);if(m.length===0)return Vo;const p=m.reduce((g,y)=>g+(y.latitude||0),0),x=m.reduce((g,y)=>g+(y.longitude||0),0);return{lat:p/m.length,lng:x/m.length}},[d]),h=v.useMemo(()=>d.filter(m=>m.latitude!=null&&m.longitude!=null).length,[d]),f=m=>{if(e==="responseTime"){const x=ut(m).totalResponseTime;if(x===null)return"#9e9e9e";const g=x/60;return g<4?"#4caf50":g<8?"#2196f3":g<12?"#ff9800":"#f44336"}else if(e==="incidentType"){const p=(typeof m.incidentType=="string"?m.incidentType:String(m.incidentType||"")).toLowerCase()||"other";return p.includes("fire")?"#f44336":p.includes("ems")||p.includes("medical")?"#2196f3":p.includes("rescue")?"#ff9800":"#4caf50"}else if(e==="unit"){const p=(typeof m.incidentType=="string"?m.incidentType:String(m.incidentType||"")).toLowerCase()||"other";return p.includes("engine")?"#f44336":p.includes("ambulance")||p.includes("ems")?"#2196f3":p.includes("truck")?"#ff9800":"#4caf50"}return"#2196f3"};return v.useEffect(()=>{if(!i.current||r.current)return;const m=jn.map(i.current,{center:[u.lat,u.lng],zoom:Wo,zoomControl:!0,attributionControl:!0});jn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19}).addTo(m);const p=jn.layerGroup().addTo(m);return r.current=m,o.current=p,()=>{r.current&&(r.current.remove(),r.current=null,o.current=null)}},[]),v.useEffect(()=>{r.current&&h>0&&r.current.setView([u.lat,u.lng],Wo)},[u,h]),v.useEffect(()=>{r.current&&setTimeout(()=>{var m;(m=r.current)==null||m.invalidateSize()},100)},[d]),v.useEffect(()=>{if(!i.current||!r.current)return;const m=new ResizeObserver(()=>{r.current&&setTimeout(()=>{var p;(p=r.current)==null||p.invalidateSize()},150)});return m.observe(i.current),()=>{m.disconnect()}},[]),v.useEffect(()=>{if(!r.current||!o.current)return;o.current.clearLayers();const m=d.filter(p=>p.latitude!=null&&p.longitude!=null);if(m.forEach(p=>{const x=p.latitude,g=p.longitude,y=f(p),w=jn.divIcon({className:"custom-marker",html:`<div style="
          background-color: ${y};
          width: 20px;
          height: 20px;
          border-radius: 50%;
          border: 2px solid white;
          box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        "></div>`,iconSize:[20,20],iconAnchor:[10,10]}),T=jn.marker([x,g],{icon:w}),C=ut(p),P=`
        <div style="min-width: 200px;">
          <h4 style="margin: 0 0 8px 0;">Incident ${p.incidentId}</h4>
          <p style="margin: 0 0 4px 0;"><strong>Type:</strong> ${p.incidentType||"Unknown"}</p>
          <p style="margin: 0 0 4px 0;"><strong>Date:</strong> ${p.incidentDate||"Unknown"}</p>
          <p style="margin: 0 0 4px 0;"><strong>Response Time:</strong> ${ce(C.totalResponseTime)}</p>
          ${p.address?`<p style="margin: 0 0 4px 0;"><strong>Address:</strong> ${p.address}</p>`:""}
        </div>
      `;T.bindPopup(P),T.on("click",()=>{t&&t(p.incidentId)}),o.current.addLayer(T)}),m.length>0){const p=new jn.FeatureGroup(o.current.getLayers());r.current.fitBounds(p.getBounds().pad(.1))}},[d,e,t]),h===0?c.jsxs(F,{sx:{position:"relative",height:500,width:"100%",bgcolor:s.palette.grey[100],borderRadius:1,overflow:"hidden",border:`1px solid ${s.palette.divider}`,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",p:3},children:[c.jsx(Ll,{sx:{fontSize:40,color:"text.secondary",mb:2}}),c.jsx(M,{variant:"h6",gutterBottom:!0,children:"No Location Data Available"}),c.jsxs(M,{variant:"body2",color:"text.secondary",align:"center",children:["None of the incidents have valid latitude/longitude coordinates.",c.jsx("br",{}),"Please ensure your data includes location information."]})]}):c.jsxs(F,{sx:{position:"relative",height:l?"calc(100vh - 200px)":"100%",minHeight:{xs:500,sm:600,md:700},width:"100%",maxWidth:"100%",borderRadius:1,overflow:"hidden",border:`1px solid ${s.palette.divider}`,"& .leaflet-container":{width:"100% !important",height:"100% !important"}},children:[c.jsx("div",{ref:i,style:{height:"100%",width:"100%",minWidth:"300px"}}),c.jsxs(F,{sx:{position:"absolute",top:10,right:10,bgcolor:"background.paper",p:1.5,borderRadius:1,boxShadow:2,zIndex:1e3},children:[c.jsxs(M,{variant:"body2",gutterBottom:!0,children:[c.jsx("strong",{children:h})," incidents with location data"]}),c.jsxs(M,{variant:"caption",color:"text.secondary",children:["Center: ",u.lat.toFixed(4),", ",u.lng.toFixed(4)]})]}),c.jsxs(F,{sx:{position:"absolute",bottom:10,left:10,bgcolor:"background.paper",p:1.5,borderRadius:1,boxShadow:2,zIndex:1e3},children:[c.jsxs(M,{variant:"body2",gutterBottom:!0,children:[c.jsx("strong",{children:"Color Legend:"}),e==="responseTime"&&" Response Time",e==="incidentType"&&" Incident Type",e==="unit"&&" Responding Unit"]}),c.jsxs(F,{sx:{display:"flex",gap:1,flexWrap:"wrap",mt:1},children:[e==="responseTime"&&c.jsxs(c.Fragment,{children:[c.jsx(Te,{size:"small",label:"< 4 min",sx:{bgcolor:"#4caf50",color:"white"}}),c.jsx(Te,{size:"small",label:"4-8 min",sx:{bgcolor:"#2196f3",color:"white"}}),c.jsx(Te,{size:"small",label:"8-12 min",sx:{bgcolor:"#ff9800",color:"white"}}),c.jsx(Te,{size:"small",label:"> 12 min",sx:{bgcolor:"#f44336",color:"white"}}),c.jsx(Te,{size:"small",label:"No time data",sx:{bgcolor:"#9e9e9e",color:"white"}})]}),e==="incidentType"&&c.jsxs(c.Fragment,{children:[c.jsx(Te,{size:"small",label:"Fire",sx:{bgcolor:"#f44336",color:"white"}}),c.jsx(Te,{size:"small",label:"EMS",sx:{bgcolor:"#2196f3",color:"white"}}),c.jsx(Te,{size:"small",label:"Rescue",sx:{bgcolor:"#ff9800",color:"white"}}),c.jsx(Te,{size:"small",label:"Other",sx:{bgcolor:"#4caf50",color:"white"}})]}),e==="unit"&&c.jsxs(c.Fragment,{children:[c.jsx(Te,{size:"small",label:"Engine",sx:{bgcolor:"#f44336",color:"white"}}),c.jsx(Te,{size:"small",label:"Ambulance",sx:{bgcolor:"#2196f3",color:"white"}}),c.jsx(Te,{size:"small",label:"Truck",sx:{bgcolor:"#ff9800",color:"white"}}),c.jsx(Te,{size:"small",label:"Other",sx:{bgcolor:"#4caf50",color:"white"}})]})]})]})]})},Vh=({incident:n})=>{const e=v.useMemo(()=>ut(n),[n]);return c.jsx($t,{variant:"outlined",sx:{mb:2},children:c.jsxs(Vt,{children:[c.jsxs(M,{variant:"h6",gutterBottom:!0,children:["Incident ",n.incidentId]}),c.jsx(F,{sx:{mb:2},children:c.jsxs(z,{container:!0,spacing:2,children:[c.jsxs(z,{size:{xs:12,sm:6},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Date & Time"}),c.jsxs(M,{variant:"body1",children:[n.incidentDate," ",n.incidentTime?`at ${n.incidentTime}`:""]})]}),c.jsxs(z,{size:{xs:12,sm:6},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Type"}),c.jsx(M,{variant:"body1",children:n.incidentType||"Unknown"})]})]})}),c.jsx(It,{sx:{my:1.5}}),c.jsxs(F,{sx:{display:"flex",gap:2,alignItems:"center",mb:1.5},children:[c.jsx(Ll,{color:"primary"}),c.jsx(M,{children:n.latitude!=null&&n.longitude!=null?`${n.latitude.toFixed(6)}, ${n.longitude.toFixed(6)}`:"No coordinates available"})]}),n.address&&c.jsxs(M,{variant:"body2",sx:{ml:4,mb:1.5},children:[n.address,n.city?`, ${n.city}`:"",n.state?`, ${n.state}`:"",n.zipCode?` ${n.zipCode}`:""]}),c.jsx(It,{sx:{my:1.5}}),c.jsx(M,{variant:"subtitle2",gutterBottom:!0,children:"Response Times:"}),c.jsxs(z,{container:!0,spacing:1,children:[c.jsxs(z,{size:{xs:6},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Dispatch:"}),c.jsx(M,{variant:"body1",children:ce(e.dispatchTime)})]}),c.jsxs(z,{size:{xs:6},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Turnout:"}),c.jsx(M,{variant:"body1",children:ce(e.turnoutTime)})]}),c.jsxs(z,{size:{xs:6},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Travel:"}),c.jsx(M,{variant:"body1",children:ce(e.travelTime)})]}),c.jsxs(z,{size:{xs:6},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Total:"}),c.jsx(M,{variant:"body1",children:ce(e.totalResponseTime)})]})]})]})})},Wh=({incidents:n})=>{const{responseTimeStats:e}=Se(i=>i.analyzer.calculatedMetrics),t=v.useMemo(()=>{const i={};return n.forEach(r=>{const o=r.incidentType||"Unknown";i[o]=(i[o]||0)+1}),i},[n]),s=v.useMemo(()=>Object.entries(t).sort((i,r)=>r[1]-i[1]).slice(0,3),[t]);return e?c.jsx($t,{variant:"outlined",children:c.jsxs(Vt,{children:[c.jsx(M,{variant:"h6",gutterBottom:!0,children:"Regional Statistics"}),c.jsxs(M,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Based on ",n.length," incidents"]}),c.jsx(It,{sx:{my:1.5}}),c.jsx(M,{variant:"subtitle2",gutterBottom:!0,children:"Response Times:"}),c.jsxs(z,{container:!0,spacing:1,sx:{mb:2},children:[c.jsxs(z,{size:{xs:12,sm:4},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Average:"}),c.jsx(M,{variant:"body1",children:ce(e.mean.totalResponseTime)})]}),c.jsxs(z,{size:{xs:12,sm:4},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Median:"}),c.jsx(M,{variant:"body1",children:ce(e.median.totalResponseTime)})]}),c.jsxs(z,{size:{xs:12,sm:4},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"90th Percentile:"}),c.jsx(M,{variant:"body1",children:ce(e.ninetiethPercentile.totalResponseTime)})]})]}),c.jsx(It,{sx:{my:1.5}}),c.jsx(M,{variant:"subtitle2",gutterBottom:!0,children:"Top Incident Types:"}),c.jsx(F,{sx:{mt:1},children:s.map(([i,r])=>c.jsxs(F,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[c.jsx(M,{variant:"body2",children:i}),c.jsxs(M,{variant:"body2",children:[r," incidents"]})]},i))})]})}):null},tc=()=>{console.log("INCIDENT_MAP_COMPONENT: Component is rendering!");const n=Zt(),{incidents:e}=Se(d=>d.analyzer.rawData);console.log("INCIDENT_MAP_COMPONENT: Received",(e==null?void 0:e.length)||0,"incidents");const t=Se(d=>d.analyzer.ui.selectedIncidentId),[s,i]=v.useState("responseTime"),r=v.useMemo(()=>t&&e.find(d=>d.incidentId===t)||null,[e,t]),o=v.useMemo(()=>e.some(d=>d.latitude!=null&&d.longitude!=null),[e]),a=d=>{i(d.target.value)},l=d=>{n({type:"analyzer/setSelectedIncident",payload:d})};return e.length?c.jsxs(F,{sx:{p:3},children:[c.jsx(M,{variant:"h6",gutterBottom:!0,children:"Incident Map"}),!o&&c.jsx(pt,{severity:"warning",sx:{mb:3},children:"None of the incidents in your dataset have location coordinates (latitude/longitude). The map visualization requires geographic coordinates to display incidents."}),c.jsxs(F,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs(M,{variant:"body2",color:"text.secondary",children:["Showing ",e.length," incidents"]}),c.jsxs(El,{size:"small",sx:{width:200},children:[c.jsx(Fl,{id:"color-by-label",children:"Color By"}),c.jsxs(Iu,{labelId:"color-by-label",value:s,label:"Color By",onChange:a,children:[c.jsx(Gi,{value:"responseTime",children:"Response Time"}),c.jsx(Gi,{value:"incidentType",children:"Incident Type"}),c.jsx(Gi,{value:"unit",children:"Responding Unit"})]})]})]}),c.jsxs(z,{container:!0,spacing:3,children:[c.jsx(z,{size:{xs:12,md:r?8:12},sx:{width:"100%"},children:c.jsx(F,{sx:{width:"100%",height:"100%",minHeight:{xs:500,sm:600,md:700},display:"flex",flexDirection:"column"},children:c.jsx(F,{sx:{flex:1,minHeight:0},children:c.jsx($h,{incidents:e,colorBy:s,onIncidentSelect:l})})})}),r&&c.jsxs(z,{size:{xs:12,md:4},children:[c.jsx(Vh,{incident:r}),c.jsx(Wh,{incidents:e})]})]})]}):c.jsxs(F,{sx:{p:3},children:[c.jsx(M,{variant:"h6",gutterBottom:!0,children:"Incident Map"}),c.jsx(M,{variant:"body1",color:"text.secondary",children:"No incident data available for mapping."})]})},Hh=n=>{if(!n)return"N/A";try{const e=n.split(" ");return e.length>=1?e[0]:n}catch{return n}},Yh=n=>{if(!n)return"N/A";try{const e=n.split(" ");return e.length>=2?e[1]:n}catch{return n}},Ot=[{id:"incidentId",label:"Incident ID",minWidth:120},{id:"incidentDate",label:"Incident Date",minWidth:110},{id:"incidentTime",label:"Time",minWidth:80},{id:"incidentType",label:"Type",minWidth:120},{id:"dispatchTime",label:"Dispatch Time",align:"right",minWidth:100,format:n=>n===null?"N/A":ce(n)},{id:"turnoutTime",label:"Turnout Time",align:"right",minWidth:100,format:n=>n===null?"N/A":ce(n)},{id:"travelTime",label:"Travel Time",align:"right",minWidth:100,format:n=>n===null?"N/A":ce(n)},{id:"totalResponseTime",label:"Total Response Time",align:"right",minWidth:150,format:n=>n===null?"N/A":ce(n)},{id:"respondingUnit",label:"Unit",minWidth:80},{id:"address",label:"Location",minWidth:200}],nc=()=>{const n=Zt(),{incidents:e}=Se(b=>b.analyzer.rawData),{responseTimeStats:t}=Se(b=>b.analyzer.calculatedMetrics),s=Se(b=>b.analyzer.ui.selectedIncidentId),[i,r]=v.useState(0),[o,a]=v.useState(10),[l,d]=v.useState("incidentDate"),[u,h]=v.useState("desc"),[f,m]=v.useState(""),p=v.useMemo(()=>e.map(b=>{const k=ut(b);return{...b,...k}}),[e]),x=v.useMemo(()=>{if(!f)return p;const b=f.toLowerCase();return p.filter(k=>k.incidentId&&k.incidentId.toLowerCase().includes(b)||k.incidentType&&(typeof k.incidentType=="string"?k.incidentType:String(k.incidentType)).toLowerCase().includes(b)||k.respondingUnit&&k.respondingUnit.toLowerCase().includes(b)||k.address&&k.address.toLowerCase().includes(b))},[p,f]),g=v.useMemo(()=>x.length?[...x].sort((b,k)=>{const A=b[l],E=k[l];return A==null&&E==null?0:A==null?u==="asc"?-1:1:E==null?u==="asc"?1:-1:u==="asc"?A<E?-1:A>E?1:0:E<A?-1:E>A?1:0}):[],[x,l,u]),y=v.useMemo(()=>{const b=i*o;return g.slice(b,b+o)},[g,i,o]),w=b=>{h(l===b&&u==="asc"?"desc":"asc"),d(b)},T=(b,k)=>{r(k)},C=b=>{a(parseInt(b.target.value,10)),r(0)},P=b=>{m(b.target.value),r(0)},I=b=>{n(Ru(b===s?null:b))},O=b=>{if(b===null||!t)return"unknown";const k=t.ninetiethPercentile.totalResponseTime||0,A=t.mean.totalResponseTime||0;return b>k?"slow":b<A?"fast":"average"};return c.jsxs(F,{sx:{p:3},children:[c.jsxs(F,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs(M,{variant:"h6",children:["Incident Data",c.jsxs(M,{variant:"body2",color:"text.secondary",component:"span",sx:{ml:1},children:["(",x.length," incidents)"]})]}),c.jsx(De,{size:"small",variant:"outlined",placeholder:"Search incidents...",value:f,onChange:P,InputProps:{startAdornment:c.jsx(Nl,{position:"start",children:c.jsx(ju,{})})},sx:{width:250}})]}),c.jsxs(ze,{variant:"outlined",children:[c.jsx(_l,{sx:{maxHeight:600},children:c.jsxs(Rl,{stickyHeader:!0,size:"small",children:[c.jsx(Ol,{children:c.jsxs(Lt,{children:[Ot.map(b=>c.jsx(K,{align:b.align,style:{minWidth:b.minWidth},sortDirection:l===b.id?u:!1,children:c.jsx(Mh,{active:l===b.id,direction:l===b.id?u:"asc",onClick:()=>w(b.id),children:b.label})},b.id)),c.jsx(K,{style:{minWidth:50}})]})}),c.jsxs(Al,{children:[y.map(b=>{const k=O(b.totalResponseTime);return c.jsxs(Lt,{hover:!0,selected:b.incidentId===s,onClick:()=>I(b.incidentId),sx:{cursor:"pointer"},children:[c.jsx(K,{children:b.incidentId}),c.jsx(K,{children:Hh(b.incidentDate||b.incidentTime)}),c.jsx(K,{children:Yh(b.incidentTime||b.incidentDate)}),c.jsx(K,{children:b.incidentType?c.jsx(Te,{size:"small",label:b.incidentType,color:b.incidentType.toLowerCase().includes("fire")?"error":b.incidentType.toLowerCase().includes("ems")?"primary":"default",variant:"outlined"}):"Unknown"}),c.jsx(K,{align:"right",children:Ot[4].format?Ot[4].format(b.dispatchTime):b.dispatchTime||"N/A"}),c.jsx(K,{align:"right",children:Ot[5].format?Ot[5].format(b.turnoutTime):b.turnoutTime||"N/A"}),c.jsx(K,{align:"right",children:Ot[6].format?Ot[6].format(b.travelTime):b.travelTime||"N/A"}),c.jsx(K,{align:"right",children:c.jsxs(F,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[k==="fast"&&c.jsx(Yn,{fontSize:"small",color:"success",sx:{mr:.5}}),k==="average"&&c.jsx(qi,{fontSize:"small",color:"primary",sx:{mr:.5}}),k==="slow"&&c.jsx(vr,{fontSize:"small",color:"error",sx:{mr:.5}}),Ot[7].format?Ot[7].format(b.totalResponseTime):b.totalResponseTime||"N/A"]})}),c.jsx(K,{children:b.respondingUnit||"N/A"}),c.jsx(K,{children:b.address&&b.address!=="N/A"?c.jsxs(F,{children:[c.jsx(M,{variant:"body2",children:b.address}),(b.city||b.state)&&c.jsxs(M,{variant:"caption",color:"text.secondary",children:[b.city,b.city&&b.state?", ":"",b.state]}),b.latitude&&b.longitude&&c.jsxs(M,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:[b.latitude.toFixed(4),", ",b.longitude.toFixed(4)]})]}):b.latitude&&b.longitude?c.jsxs(M,{variant:"caption",color:"text.secondary",children:[b.latitude.toFixed(4),", ",b.longitude.toFixed(4)]}):c.jsx(M,{variant:"body2",color:"text.secondary",children:"No location data"})}),c.jsx(K,{children:c.jsx(an,{size:"small",onClick:A=>{A.stopPropagation(),I(b.incidentId)},children:c.jsx(qi,{fontSize:"small"})})})]},b.incidentId)}),y.length===0&&c.jsx(Lt,{children:c.jsx(K,{colSpan:Ot.length+1,align:"center",children:x.length===0&&f?c.jsxs(M,{variant:"body2",sx:{py:2},children:['No matching incidents found for "',f,'". Try a different search term.']}):e.length===0?c.jsx(M,{variant:"body2",sx:{py:2},children:"No incident data available. Please load incident data."}):c.jsx(M,{variant:"body2",sx:{py:2},children:"No incidents to display."})})})]})]})}),c.jsx(_u,{rowsPerPageOptions:[10,25,50,100],component:"div",count:x.length,rowsPerPage:o,page:i,onPageChange:T,onRowsPerPageChange:C})]}),c.jsx(F,{sx:{mt:2},children:c.jsxs(M,{variant:"caption",color:"text.secondary",children:["* Response time status indicators:",c.jsx(Yn,{fontSize:"small",color:"success",sx:{ml:1,mr:.5,verticalAlign:"middle"}}),"Fast (below average),",c.jsx(qi,{fontSize:"small",color:"primary",sx:{ml:1,mr:.5,verticalAlign:"middle"}}),"Average (within normal range),",c.jsx(vr,{fontSize:"small",color:"error",sx:{ml:1,mr:.5,verticalAlign:"middle"}}),"Slow (above 90th percentile)"]})})]})},sc=()=>{const[n,e]=v.useState(!1),[t,s]=v.useState(null),i=v.useCallback(async()=>{try{s(null);const l=await fetch("/ai/debug",{method:"GET",credentials:"include"});if(!l.ok)throw new Error(`HTTP ${l.status}: ${l.statusText}`);return(await l.json()).ai_service_status}catch(l){const d=l instanceof Error?l.message:"Unknown error";return s(d),console.error("AI Status Error:",d),null}},[]),r=v.useCallback(async(l,d)=>{try{e(!0),s(null);const u=await fetch("/ai/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({data_summary:l,query:d||void 0})});if(!u.ok)throw new Error(`HTTP ${u.status}: ${u.statusText}`);return await u.json()}catch(u){const h=u instanceof Error?u.message:"Analysis failed";return s(h),console.error("AI Analysis Error:",h),{success:!1,error:h,source:"fallback",timestamp:new Date().toISOString()}}finally{e(!1)}},[]),o=v.useCallback(async l=>{try{e(!0),s(null);const d=await fetch("/ai/api/compliance-check",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(l)});if(!d.ok)throw new Error(`HTTP ${d.status}: ${d.statusText}`);return await d.json()}catch(d){const u=d instanceof Error?d.message:"Compliance check failed";return s(u),console.error("AI Compliance Error:",u),{success:!1,error:u,source:"fallback",timestamp:new Date().toISOString()}}finally{e(!1)}},[]),a=v.useCallback(async l=>{if(!l||l.length===0)return{success:!1,error:"No response time data provided",source:"fallback",timestamp:new Date().toISOString()};const d=l.length,u=l.reduce((g,y)=>{const w=y.totalResponseTime||0;return g+w},0)/d,h=l.map(g=>g.dispatchTime||0).filter(g=>g>0).sort((g,y)=>g-y),f=l.map(g=>g.turnoutTime||0).filter(g=>g>0).sort((g,y)=>g-y),m=h.length>0?h[Math.floor(h.length*.9)]:0,p=f.length>0?f[Math.floor(f.length*.9)]:0,x=`Fire department response time analysis: ${d} incidents, average response time ${(u/60).toFixed(1)} minutes, 90th percentile dispatch time ${m} seconds, 90th percentile turnout time ${p} seconds.`;return r(x,"Provide NFPA 1710 compliance analysis and improvement recommendations.")},[r]);return{loading:n,error:t,checkStatus:i,analyzeData:r,checkCompliance:o,generateInsights:a}},Uh=({className:n})=>{const{loading:e,error:t,generateInsights:s,checkCompliance:i}=sc(),[r,o]=v.useState(null),[a,l]=v.useState(!1),[d,u]=v.useState(null),h=Se(T=>{var C,P;return((P=(C=T.analyzer)==null?void 0:C.rawData)==null?void 0:P.incidents)||[]}),f=Se(T=>{var C,P;return(P=(C=T.analyzer)==null?void 0:C.calculatedMetrics)==null?void 0:P.responseTimeStats}),m=h.length>0;v.useEffect(()=>{m&&!r&&!e&&p()},[m,r,e]);const p=async()=>{if(!m)return;const T=await s(h);T&&(o(T),u(new Date().toLocaleString()))},x=async()=>{var P,I,O,b;if(!f)return;const T={incident_count:h.length,avg_response_time:(P=f.mean)!=null&&P.totalResponseTime?f.mean.totalResponseTime/60:0,dispatch_time_90th:((I=f.ninetiethPercentile)==null?void 0:I.dispatchTime)||0,turnout_time_90th:((O=f.ninetiethPercentile)==null?void 0:O.turnoutTime)||0,total_response_90th:((b=f.ninetiethPercentile)==null?void 0:b.totalResponseTime)||0},C=await i(T);C&&(o(C),u(new Date().toLocaleString()))},g=()=>{var I,O,b;if(!f)return"default";const T=(((I=f.ninetiethPercentile)==null?void 0:I.dispatchTime)||0)<=60,C=(((O=f.ninetiethPercentile)==null?void 0:O.turnoutTime)||0)<=80,P=(((b=f.ninetiethPercentile)==null?void 0:b.totalResponseTime)||0)<=300;return T&&C&&P?"success":T||C||P?"warning":"error"},y=()=>{var C,P,I;if(!f)return 0;let T=0;return(((C=f.ninetiethPercentile)==null?void 0:C.dispatchTime)||0)<=60&&(T+=33),(((P=f.ninetiethPercentile)==null?void 0:P.turnoutTime)||0)<=80&&(T+=33),(((I=f.ninetiethPercentile)==null?void 0:I.totalResponseTime)||0)<=300&&(T+=34),Math.round(T)},w=T=>T.split(`

`).map((P,I)=>{const O=P.split(`
`);return c.jsx(F,{sx:{mb:2},children:O.map((b,k)=>b.startsWith("###")?c.jsx(M,{variant:"h6",sx:{fontWeight:"bold",mb:1,color:"primary.main"},children:b.replace("###","").trim()},k):b.startsWith("##")?c.jsx(M,{variant:"h5",sx:{fontWeight:"bold",mb:1,color:"primary.main"},children:b.replace("##","").trim()},k):b.startsWith("- ")?c.jsxs(M,{variant:"body2",sx:{ml:2,mb:.5},children:["• ",b.replace("- ","")]},k):b.startsWith("**")&&b.endsWith("**")?c.jsx(M,{variant:"body2",sx:{fontWeight:"bold",mb:.5},children:b.replace(/\*\*/g,"")},k):b.trim()?c.jsx(M,{variant:"body2",sx:{mb:.5},children:b},k):null)},I)});return c.jsx($t,{className:n,children:c.jsxs(Vt,{children:[c.jsxs(F,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[c.jsxs(M,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(bs,{color:"primary"}),"AI Insights"]}),c.jsx(an,{onClick:()=>l(!a),size:"small",children:a?c.jsx(Ou,{}):c.jsx(Wr,{})})]}),f&&c.jsxs(F,{sx:{mb:2},children:[c.jsxs(F,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[c.jsx(Hr,{fontSize:"small"}),c.jsx(M,{variant:"subtitle2",children:"NFPA 1710 Compliance"})]}),c.jsxs(F,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(Te,{icon:c.jsx(Yn,{}),label:`${y()}% Compliant`,color:g(),size:"small"}),c.jsxs(M,{variant:"caption",color:"text.secondary",children:[h.length," incidents analyzed"]})]})]}),c.jsx(Au,{in:a,children:c.jsxs(F,{children:[c.jsx(It,{sx:{my:2}}),c.jsxs(z,{container:!0,spacing:1,sx:{mb:2},children:[c.jsx(z,{size:{xs:6},children:c.jsx(ue,{fullWidth:!0,variant:"contained",onClick:p,disabled:!m||e,startIcon:e?c.jsx(rn,{size:16}):c.jsx(Eu,{}),size:"small",children:"Generate Insights"})}),c.jsx(z,{size:{xs:6},children:c.jsx(ue,{fullWidth:!0,variant:"outlined",onClick:x,disabled:!f||e,startIcon:e?c.jsx(rn,{size:16}):c.jsx(Yn,{}),size:"small",children:"Check Compliance"})})]}),e&&c.jsxs(F,{sx:{display:"flex",alignItems:"center",gap:2,py:2},children:[c.jsx(rn,{size:24}),c.jsx(M,{variant:"body2",children:"Analyzing data with AI..."})]}),t&&!e&&c.jsx(pt,{severity:"error",sx:{mb:2},children:t}),!m&&!e&&c.jsx(pt,{severity:"info",sx:{mb:2},children:"Upload and analyze response time data to get AI-powered insights and recommendations."}),r&&!e&&c.jsxs(F,{children:[c.jsxs(F,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[c.jsx(Kl,{color:"primary",fontSize:"small"}),c.jsx(M,{variant:"subtitle2",children:"Analysis Results"}),c.jsx(Te,{label:r.source==="ai"?"AI Analysis":"Fallback Analysis",color:r.source==="ai"?"primary":"default",size:"small"}),r.sanitized&&c.jsx(Fu,{title:"Data was sanitized for privacy",children:c.jsx(Te,{label:"Sanitized",color:"info",size:"small"})})]}),r.success&&r.insight&&c.jsx(ze,{sx:{p:2,bgcolor:"grey.50",maxHeight:400,overflow:"auto"},children:w(r.insight)}),!r.success&&r.error&&c.jsx(pt,{severity:"error",children:r.error}),d&&c.jsxs(M,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Last analyzed: ",d]})]})]})})]})})},On=z,Hs=({id:n,title:e,children:t,height:s=300})=>{const i=Zt(),{expandedPanels:r}=Se(l=>l.analyzer.ui),o=r.includes(n),a=()=>{i(Nu(n))};return c.jsxs(ze,{sx:{height:o?"calc(100vh - 160px)":s,display:"flex",flexDirection:"column",transition:"height 0.3s ease",position:o?"fixed":"relative",top:o?"70px":"auto",left:o?"20px":"auto",right:o?"20px":"auto",zIndex:o?1200:"auto",width:o?"calc(100% - 40px)":"100%"},elevation:o?8:1,children:[c.jsxs(F,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,borderBottom:"1px solid",borderColor:"divider"},children:[c.jsx(M,{variant:"h6",children:e}),c.jsxs(F,{children:[c.jsx(an,{size:"small",sx:{mr:1},children:c.jsx(Lu,{fontSize:"small"})}),c.jsx(an,{size:"small",onClick:a,children:o?c.jsx(dh,{fontSize:"small"}):c.jsx(uh,{fontSize:"small"})})]})]}),c.jsx(F,{sx:{p:2,overflow:"auto",flexGrow:1,display:"flex",flexDirection:"column"},children:t})]})},Gh=()=>{const{activeDashboardPanels:n}=Se(e=>e.analyzer.ui);return c.jsx(F,{sx:{p:2},children:c.jsxs(On,{container:!0,spacing:3,children:[n.includes("response-time-summary")&&c.jsx(On,{size:{xs:12,md:6},children:c.jsx(Hs,{id:"response-time-summary",title:"Response Time Summary",children:c.jsx(F,{sx:{maxHeight:300,overflow:"auto"},children:c.jsx(Jl,{})})})}),n.includes("time-distribution")&&c.jsx(On,{size:{xs:12,md:6},children:c.jsx(Hs,{id:"time-distribution",title:"Response Time Distribution",children:c.jsx(F,{sx:{minHeight:400,overflow:"visible"},children:c.jsx(ec,{})})})}),n.includes("incident-map")&&c.jsx(On,{size:{xs:12},children:c.jsx(Hs,{id:"incident-map",title:"Incident Map",height:400,children:c.jsx(F,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:c.jsx(tc,{})})})}),n.includes("incident-table")&&c.jsx(On,{size:{xs:12},children:c.jsx(Hs,{id:"incident-table",title:"Incident Data",height:350,children:c.jsx(F,{sx:{maxHeight:300,overflow:"auto"},children:c.jsx(nc,{})})})}),n.includes("ai-insights")&&c.jsx(On,{size:{xs:12,md:6},children:c.jsx(Uh,{})})]})})},Ho=({incident:n,colors:e,showLabels:t=!0,compact:s=!1})=>{const i=v.useMemo(()=>ut(n),[n]),r=i.totalIncidentTime||0;if(r===0)return c.jsx(F,{sx:{height:s?20:40,display:"flex",alignItems:"center",bgcolor:"action.hover",borderRadius:1,px:1},children:c.jsx(M,{variant:"caption",color:"text.secondary",children:"No time data available"})});const o=(i.dispatchTime||0)/r*100,a=(i.turnoutTime||0)/r*100,l=(i.travelTime||0)/r*100,d=(i.sceneTime||0)/r*100;return c.jsxs(F,{sx:{mb:s?.5:2},children:[!s&&t&&c.jsxs(M,{variant:"body2",gutterBottom:!0,children:[n.incidentId," ",n.incidentType?`(${n.incidentType})`:""]}),c.jsxs(F,{sx:{display:"flex",flexDirection:"column"},children:[c.jsxs(F,{sx:{display:"flex",height:s?20:30,borderRadius:1,overflow:"hidden",border:`1px solid ${e.border}`},children:[i.dispatchTime&&i.dispatchTime>0&&c.jsx(F,{sx:{width:`${o}%`,bgcolor:e.dispatch,display:"flex",alignItems:"center",justifyContent:"center",minWidth:20},children:!s&&c.jsx(M,{variant:"caption",color:e.text,children:"D"})}),i.turnoutTime&&i.turnoutTime>0&&c.jsx(F,{sx:{width:`${a}%`,bgcolor:e.turnout,display:"flex",alignItems:"center",justifyContent:"center",minWidth:20},children:!s&&c.jsx(M,{variant:"caption",color:e.text,children:"T"})}),i.travelTime&&i.travelTime>0&&c.jsx(F,{sx:{width:`${l}%`,bgcolor:e.travel,display:"flex",alignItems:"center",justifyContent:"center",minWidth:20},children:!s&&c.jsx(M,{variant:"caption",color:e.text,children:"R"})}),i.sceneTime&&i.sceneTime>0&&c.jsx(F,{sx:{width:`${d}%`,bgcolor:e.scene,display:"flex",alignItems:"center",justifyContent:"center",minWidth:20},children:!s&&c.jsx(M,{variant:"caption",color:e.text,children:"S"})})]}),!s&&t&&c.jsxs(F,{sx:{display:"flex",justifyContent:"space-between",mt:.5},children:[c.jsx(M,{variant:"caption",color:"text.secondary",children:ce(i.dispatchTime,"seconds")}),c.jsx(M,{variant:"caption",color:"text.secondary",children:ce(i.turnoutTime,"seconds")}),c.jsx(M,{variant:"caption",color:"text.secondary",children:ce(i.travelTime,"seconds")}),c.jsx(M,{variant:"caption",color:"text.secondary",children:ce(i.sceneTime,"seconds")})]})]})]})},qh=({colors:n})=>c.jsxs(F,{sx:{display:"flex",gap:2,mt:2,mb:3},children:[c.jsxs(F,{sx:{display:"flex",alignItems:"center"},children:[c.jsx(F,{sx:{width:20,height:20,bgcolor:n.dispatch,mr:1,borderRadius:.5,border:`1px solid ${n.border}`}}),c.jsx(M,{variant:"caption",children:"Dispatch Time"})]}),c.jsxs(F,{sx:{display:"flex",alignItems:"center"},children:[c.jsx(F,{sx:{width:20,height:20,bgcolor:n.turnout,mr:1,borderRadius:.5,border:`1px solid ${n.border}`}}),c.jsx(M,{variant:"caption",children:"Turnout Time"})]}),c.jsxs(F,{sx:{display:"flex",alignItems:"center"},children:[c.jsx(F,{sx:{width:20,height:20,bgcolor:n.travel,mr:1,borderRadius:.5,border:`1px solid ${n.border}`}}),c.jsx(M,{variant:"caption",children:"Travel Time"})]}),c.jsxs(F,{sx:{display:"flex",alignItems:"center"},children:[c.jsx(F,{sx:{width:20,height:20,bgcolor:n.scene,mr:1,borderRadius:.5,border:`1px solid ${n.border}`}}),c.jsx(M,{variant:"caption",children:"Scene Time"})]})]}),Xh=()=>{const{incidents:n}=Se(a=>a.analyzer.rawData),{responseTimeStats:e}=Se(a=>a.analyzer.calculatedMetrics),t=Se(a=>a.analyzer.ui.selectedIncidentId),s=ji(),i={dispatch:s.palette.info.light,turnout:s.palette.warning.light,travel:s.palette.error.light,scene:s.palette.success.light,border:s.palette.divider,text:s.palette.getContrastText(s.palette.primary.main),background:s.palette.background.paper},r=v.useMemo(()=>t&&n.find(a=>a.incidentId===t)||null,[n,t]),o=v.useMemo(()=>[...n].sort((a,l)=>{const d=new Date(a.incidentDate);return new Date(l.incidentDate).getTime()-d.getTime()}).slice(0,10),[n]);return!n.length||!e?c.jsxs(F,{sx:{p:3},children:[c.jsx(M,{variant:"h6",gutterBottom:!0,children:"Response Time Timeline"}),c.jsx(M,{variant:"body1",color:"text.secondary",children:"No incident data available for timeline visualization."})]}):c.jsxs(F,{sx:{p:3},children:[c.jsx(M,{variant:"h6",gutterBottom:!0,children:"Response Time Timeline"}),c.jsx(qh,{colors:i}),c.jsxs(z,{container:!0,spacing:3,children:[r&&c.jsx(z,{size:{xs:12},children:c.jsxs(ze,{variant:"outlined",sx:{p:2,mb:3},children:[c.jsxs(M,{variant:"subtitle1",gutterBottom:!0,children:["Selected Incident: ",r.incidentId]}),c.jsx(F,{sx:{mb:2},children:c.jsxs(z,{container:!0,spacing:2,children:[c.jsxs(z,{size:{xs:12,sm:6,md:3},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Date"}),c.jsx(M,{variant:"body1",children:r.incidentDate})]}),c.jsxs(z,{size:{xs:12,sm:6,md:3},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Time"}),c.jsx(M,{variant:"body1",children:r.incidentTime||"N/A"})]}),c.jsxs(z,{size:{xs:12,sm:6,md:3},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Type"}),c.jsx(M,{variant:"body1",children:r.incidentType||"Unknown"})]}),c.jsxs(z,{size:{xs:12,sm:6,md:3},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Unit"}),c.jsx(M,{variant:"body1",children:r.respondingUnit||"N/A"})]})]})}),c.jsx(It,{sx:{my:2}}),c.jsx(M,{variant:"subtitle2",gutterBottom:!0,children:"Response Timeline"}),c.jsx(Ho,{incident:r,colors:i,showLabels:!0}),c.jsx(F,{sx:{mt:3},children:c.jsxs(z,{container:!0,spacing:2,children:[c.jsxs(z,{size:{xs:6,sm:3},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Dispatch Time"}),c.jsx(M,{variant:"body1",children:ce(ut(r).dispatchTime)})]}),c.jsxs(z,{size:{xs:6,sm:3},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Turnout Time"}),c.jsx(M,{variant:"body1",children:ce(ut(r).turnoutTime)})]}),c.jsxs(z,{size:{xs:6,sm:3},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Travel Time"}),c.jsx(M,{variant:"body1",children:ce(ut(r).travelTime)})]}),c.jsxs(z,{size:{xs:6,sm:3},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Total Response Time"}),c.jsx(M,{variant:"body1",children:ce(ut(r).totalResponseTime)})]})]})})]})}),c.jsx(z,{size:{xs:12,md:r?12:6},children:c.jsxs(ze,{variant:"outlined",sx:{p:2},children:[c.jsx(M,{variant:"subtitle1",gutterBottom:!0,children:"Recent Incidents Timeline"}),c.jsxs(F,{sx:{mt:2},children:[o.map(a=>c.jsx(Ho,{incident:a,colors:i,showLabels:!0,compact:!1},a.incidentId)),o.length===0&&c.jsx(M,{variant:"body2",color:"text.secondary",children:"No recent incidents to display."})]})]})}),!r&&c.jsx(z,{size:{xs:12,md:6},children:c.jsxs(ze,{variant:"outlined",sx:{p:2},children:[c.jsx(M,{variant:"subtitle1",gutterBottom:!0,children:"Average Response Time Breakdown"}),c.jsxs(F,{sx:{p:2,mt:2,bgcolor:"background.default",borderRadius:1},children:[c.jsx(M,{variant:"body2",gutterBottom:!0,children:"Average time breakdown:"}),c.jsxs(F,{sx:{display:"flex",height:40,borderRadius:1,overflow:"hidden",mt:1},children:[c.jsx(F,{sx:{width:`${(e.mean.dispatchTime||0)/(e.mean.totalIncidentTime||1)*100}%`,bgcolor:i.dispatch,display:"flex",alignItems:"center",justifyContent:"center",minWidth:20},children:c.jsxs(M,{variant:"caption",color:i.text,children:[Math.round((e.mean.dispatchTime||0)/(e.mean.totalIncidentTime||1)*100),"%"]})}),c.jsx(F,{sx:{width:`${(e.mean.turnoutTime||0)/(e.mean.totalIncidentTime||1)*100}%`,bgcolor:i.turnout,display:"flex",alignItems:"center",justifyContent:"center",minWidth:20},children:c.jsxs(M,{variant:"caption",color:i.text,children:[Math.round((e.mean.turnoutTime||0)/(e.mean.totalIncidentTime||1)*100),"%"]})}),c.jsx(F,{sx:{width:`${(e.mean.travelTime||0)/(e.mean.totalIncidentTime||1)*100}%`,bgcolor:i.travel,display:"flex",alignItems:"center",justifyContent:"center",minWidth:20},children:c.jsxs(M,{variant:"caption",color:i.text,children:[Math.round((e.mean.travelTime||0)/(e.mean.totalIncidentTime||1)*100),"%"]})}),c.jsx(F,{sx:{width:`${(e.mean.sceneTime||0)/(e.mean.totalIncidentTime||1)*100}%`,bgcolor:i.scene,display:"flex",alignItems:"center",justifyContent:"center",minWidth:20},children:c.jsxs(M,{variant:"caption",color:i.text,children:[Math.round((e.mean.sceneTime||0)/(e.mean.totalIncidentTime||1)*100),"%"]})})]}),c.jsx(F,{sx:{mt:3},children:c.jsxs(z,{container:!0,spacing:2,children:[c.jsxs(z,{size:{xs:6,sm:3},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Avg Dispatch"}),c.jsx(M,{variant:"body1",children:ce(e.mean.dispatchTime)})]}),c.jsxs(z,{size:{xs:6,sm:3},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Avg Turnout"}),c.jsx(M,{variant:"body1",children:ce(e.mean.turnoutTime)})]}),c.jsxs(z,{size:{xs:6,sm:3},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Avg Travel"}),c.jsx(M,{variant:"body1",children:ce(e.mean.travelTime)})]}),c.jsxs(z,{size:{xs:6,sm:3},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Avg Total"}),c.jsx(M,{variant:"body1",children:ce(e.mean.totalResponseTime)})]})]})})]})]})})]})]})},ns=(n,e)=>n.length!==e.length?!1:e.every(t=>n.includes(t)),Qh=({openTo:n,defaultOpenTo:e,views:t,defaultViews:s})=>{const i=t??s;let r;if(n!=null)r=n;else if(i.includes(e))r=e;else if(i.length>0)r=i[0];else throw new Error("MUI X: The `views` prop must contain at least one view.");return{views:i,openTo:r}},gi=(n,e,t)=>{let s=e;return s=n.setHours(s,n.getHours(t)),s=n.setMinutes(s,n.getMinutes(t)),s=n.setSeconds(s,n.getSeconds(t)),s=n.setMilliseconds(s,n.getMilliseconds(t)),s},Ds=({date:n,disableFuture:e,disablePast:t,maxDate:s,minDate:i,isDateDisabled:r,utils:o,timezone:a})=>{const l=gi(o,o.date(void 0,a),n);t&&o.isBefore(i,l)&&(i=l),e&&o.isAfter(s,l)&&(s=l);let d=n,u=n;for(o.isBefore(n,i)&&(d=i,u=null),o.isAfter(n,s)&&(u&&(u=s),d=null);d||u;){if(d&&o.isAfter(d,s)&&(d=null),u&&o.isBefore(u,i)&&(u=null),d){if(!r(d))return d;d=o.addDays(d,1)}if(u){if(!r(u))return u;u=o.addDays(u,-1)}}return null},Kh=(n,e)=>n.isValid(e)?e:null,Yo=(n,e,t)=>e==null||!n.isValid(e)?t:e,Zh=(n,e,t)=>!n.isValid(e)&&e!=null&&!n.isValid(t)&&t!=null?!0:n.isEqual(e,t),Xr=(n,e)=>{const s=[n.startOfYear(e)];for(;s.length<12;){const i=s[s.length-1];s.push(n.addMonths(i,1))}return s},ic=(n,e,t)=>t==="date"?n.startOfDay(n.date(void 0,e)):n.date(void 0,e),Jh=["year","month","day"],Uo=n=>Jh.includes(n),Qr=(n,{format:e,views:t},s)=>{if(e!=null)return e;const i=n.formats;return ns(t,["year"])?i.year:ns(t,["month"])?i.month:ns(t,["day"])?i.dayOfMonth:ns(t,["month","year"])?`${i.month} ${i.year}`:ns(t,["day","month"])?`${i.month} ${i.dayOfMonth}`:s?/en/.test(n.getCurrentLocaleCode())?i.normalDateWithWeekday:i.normalDate:i.keyboardDate},ef=(n,e)=>{const t=n.startOfWeek(e);return[0,1,2,3,4,5,6].map(s=>n.addDays(t,s))},tf=["hours","minutes","seconds"],nf=n=>tf.includes(n),Go=(n,e)=>e.getHours(n)*3600+e.getMinutes(n)*60+e.getSeconds(n),sf=(n,e)=>(t,s)=>n?e.isAfter(t,s):Go(t,e)>Go(s,e),Nt={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},rf=n=>Math.max(...n.map(e=>Nt[e.type]??1)),ss=(n,e,t)=>{if(e===Nt.year)return n.startOfYear(t);if(e===Nt.month)return n.startOfMonth(t);if(e===Nt.day)return n.startOfDay(t);let s=t;return e<Nt.minutes&&(s=n.setMinutes(s,0)),e<Nt.seconds&&(s=n.setSeconds(s,0)),e<Nt.milliseconds&&(s=n.setMilliseconds(s,0)),s},of=({props:n,utils:e,granularity:t,timezone:s,getTodayDate:i})=>{let r=i?i():ss(e,t,ic(e,s));n.minDate!=null&&e.isAfterDay(n.minDate,r)&&(r=ss(e,t,n.minDate)),n.maxDate!=null&&e.isBeforeDay(n.maxDate,r)&&(r=ss(e,t,n.maxDate));const o=sf(n.disableIgnoringDatePartForTimeValidation??!1,e);return n.minTime!=null&&o(n.minTime,r)&&(r=ss(e,t,n.disableIgnoringDatePartForTimeValidation?n.minTime:gi(e,r,n.minTime))),n.maxTime!=null&&o(r,n.maxTime)&&(r=ss(e,t,n.disableIgnoringDatePartForTimeValidation?n.maxTime:gi(e,r,n.maxTime))),r},rc=(n,e)=>{const t=n.formatTokenMap[e];if(t==null)throw new Error([`MUI X: The token "${e}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof t=="string"?{type:t,contentType:t==="meridiem"?"letter":"digit",maxLength:void 0}:{type:t.sectionType,contentType:t.contentType,maxLength:t.maxLength}},Li=(n,e)=>{const t=[],s=n.date(void 0,"default"),i=n.startOfWeek(s),r=n.endOfWeek(s);let o=i;for(;n.isBefore(o,r);)t.push(o),o=n.addDays(o,1);return t.map(a=>n.formatByString(a,e))},oc=(n,e,t,s)=>{switch(t){case"month":return Xr(n,n.date(void 0,e)).map(i=>n.formatByString(i,s));case"weekDay":return Li(n,s);case"meridiem":{const i=n.date(void 0,e);return[n.startOfDay(i),n.endOfDay(i)].map(r=>n.formatByString(r,s))}default:return[]}},qo="s",af=["0","1","2","3","4","5","6","7","8","9"],lf=n=>{const e=n.date(void 0);return n.formatByString(n.setSeconds(e,0),qo)==="0"?af:Array.from({length:10}).map((s,i)=>n.formatByString(n.setSeconds(e,i),qo))},Tn=(n,e)=>{if(e[0]==="0")return n;const t=[];let s="";for(let i=0;i<n.length;i+=1){s+=n[i];const r=e.indexOf(s);r>-1&&(t.push(r.toString()),s="")}return t.join("")},Kr=(n,e)=>e[0]==="0"?n:n.split("").map(t=>e[Number(t)]).join(""),Xo=(n,e)=>{const t=Tn(n,e);return t!==" "&&!Number.isNaN(Number(t))},Zr=(n,e)=>Number(n).toString().padStart(e,"0"),ac=(n,e,t,s,i)=>{if(i.type==="day"&&i.contentType==="digit-with-letter"){const o=n.setDate(t.longestMonth,e);return n.formatByString(o,i.format)}let r=e.toString();return i.hasLeadingZerosInInput&&(r=Zr(r,i.maxLength)),Kr(r,s)},Jr=(n,e,t)=>{let s=n.value||n.placeholder;const i=e==="non-input"?n.hasLeadingZerosInFormat:n.hasLeadingZerosInInput;return e==="non-input"&&n.hasLeadingZerosInInput&&!n.hasLeadingZerosInFormat&&(s=Number(Tn(s,t)).toString()),["input-rtl","input-ltr"].includes(e)&&n.contentType==="digit"&&!i&&s.length===1&&(s=`${s}‎`),e==="input-rtl"&&(s=`⁨${s}⁩`),s},Qo=(n,e,t,s)=>n.formatByString(n.parse(e,t),s),cf=(n,e)=>n.formatByString(n.date(void 0,"system"),e).length===4,lc=(n,e,t,s)=>{if(e!=="digit")return!1;const i=n.date(void 0,"default");switch(t){case"year":return n.lib==="dayjs"&&s==="YY"?!0:n.formatByString(n.setYear(i,1),s).startsWith("0");case"month":return n.formatByString(n.startOfYear(i),s).length>1;case"day":return n.formatByString(n.startOfMonth(i),s).length>1;case"weekDay":return n.formatByString(n.startOfWeek(i),s).length>1;case"hours":return n.formatByString(n.setHours(i,1),s).length>1;case"minutes":return n.formatByString(n.setMinutes(i,1),s).length>1;case"seconds":return n.formatByString(n.setSeconds(i,1),s).length>1;default:throw new Error("Invalid section type")}},df=(n,e,t)=>{const s=e.some(l=>l.type==="day"),i=[],r=[];for(let l=0;l<e.length;l+=1){const d=e[l];s&&d.type==="weekDay"||(i.push(d.format),r.push(Jr(d,"non-input",t)))}const o=i.join(" "),a=r.join(" ");return n.parse(a,o)},uf=n=>n.map(e=>`${e.startSeparator}${e.value||e.placeholder}${e.endSeparator}`).join(""),hf=(n,e,t)=>{const i=n.map(r=>{const o=Jr(r,t?"input-rtl":"input-ltr",e);return`${r.startSeparator}${o}${r.endSeparator}`}).join("");return t?`⁦${i}⁩`:i},ff=(n,e,t)=>{const s=n.date(void 0,t),i=n.endOfYear(s),r=n.endOfDay(s),{maxDaysInMonth:o,longestMonth:a}=Xr(n,s).reduce((l,d)=>{const u=n.getDaysInMonth(d);return u>l.maxDaysInMonth?{maxDaysInMonth:u,longestMonth:d}:l},{maxDaysInMonth:0,longestMonth:null});return{year:({format:l})=>({minimum:0,maximum:cf(n,l)?9999:99}),month:()=>({minimum:1,maximum:n.getMonth(i)+1}),day:({currentDate:l})=>({minimum:1,maximum:n.isValid(l)?n.getDaysInMonth(l):o,longestMonth:a}),weekDay:({format:l,contentType:d})=>{if(d==="digit"){const u=Li(n,l).map(Number);return{minimum:Math.min(...u),maximum:Math.max(...u)}}return{minimum:1,maximum:7}},hours:({format:l})=>{const d=n.getHours(r);return Tn(n.formatByString(n.endOfDay(s),l),e)!==d.toString()?{minimum:1,maximum:Number(Tn(n.formatByString(n.startOfDay(s),l),e))}:{minimum:0,maximum:d}},minutes:()=>({minimum:0,maximum:n.getMinutes(r)}),seconds:()=>({minimum:0,maximum:n.getSeconds(r)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}},mf=(n,e,t,s)=>{switch(e.type){case"year":return n.setYear(s,n.getYear(t));case"month":return n.setMonth(s,n.getMonth(t));case"weekDay":{let i=n.formatByString(t,e.format);e.hasLeadingZerosInInput&&(i=Zr(i,e.maxLength));const r=Li(n,e.format),o=r.indexOf(i),l=r.indexOf(e.value)-o;return n.addDays(t,l)}case"day":return n.setDate(s,n.getDate(t));case"meridiem":{const i=n.getHours(t)<12,r=n.getHours(s);return i&&r>=12?n.addHours(s,-12):!i&&r<12?n.addHours(s,12):s}case"hours":return n.setHours(s,n.getHours(t));case"minutes":return n.setMinutes(s,n.getMinutes(t));case"seconds":return n.setSeconds(s,n.getSeconds(t));default:return s}},Ko={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},Zo=(n,e,t,s,i)=>[...t].sort((r,o)=>Ko[r.type]-Ko[o.type]).reduce((r,o)=>!i||o.modified?mf(n,o,e,r):r,s),pf=()=>navigator.userAgent.toLowerCase().includes("android"),gf=(n,e)=>{const t={};if(!e)return n.forEach((l,d)=>{const u=d===0?null:d-1,h=d===n.length-1?null:d+1;t[d]={leftIndex:u,rightIndex:h}}),{neighbors:t,startIndex:0,endIndex:n.length-1};const s={},i={};let r=0,o=0,a=n.length-1;for(;a>=0;){o=n.findIndex((l,d)=>{var u;return d>=r&&((u=l.endSeparator)==null?void 0:u.includes(" "))&&l.endSeparator!==" / "}),o===-1&&(o=n.length-1);for(let l=o;l>=r;l-=1)i[l]=a,s[a]=l,a-=1;r=o+1}return n.forEach((l,d)=>{const u=i[d],h=u===0?null:s[u-1],f=u===n.length-1?null:s[u+1];t[d]={leftIndex:h,rightIndex:f}}),{neighbors:t,startIndex:s[0],endIndex:s[n.length-1]}},Dr=(n,e)=>{if(n==null)return null;if(n==="all")return"all";if(typeof n=="string"){const t=e.findIndex(s=>s.type===n);return t===-1?null:t}return n},xf=["value","referenceDate"],Ht={emptyValue:null,getTodayValue:ic,getInitialReferenceValue:n=>{let{value:e,referenceDate:t}=n,s=re(n,xf);return s.utils.isValid(e)?e:t??of(s)},cleanValue:Kh,areValuesEqual:Zh,isSameError:(n,e)=>n===e,hasError:n=>n!=null,defaultErrorState:null,getTimezone:(n,e)=>n.isValid(e)?n.getTimezone(e):null,setTimezone:(n,e,t)=>t==null?null:n.setTimezone(t,e)},yf={updateReferenceValue:(n,e,t)=>n.isValid(e)?e:t,getSectionsFromValue:(n,e)=>e(n),getV7HiddenInputValueFromSections:uf,getV6InputValueFromSections:hf,parseValueStr:(n,e,t)=>t(n.trim(),e),getDateFromSection:n=>n,getDateSectionsFromValue:n=>n,updateDateInValue:(n,e,t)=>t,clearDateSections:n=>n.map(e=>_({},e,{value:""}))};function bf(n){return qe("MuiPickersToolbar",n)}Ge("MuiPickersToolbar",["root","title","content"]);const vf=["localeText"],Cr=v.createContext(null),cc=function(e){const{localeText:t}=e,s=re(e,vf),{utils:i,localeText:r}=v.useContext(Cr)??{utils:void 0,localeText:void 0},o=$e({props:s,name:"MuiLocalizationProvider"}),{children:a,dateAdapter:l,dateFormats:d,dateLibInstance:u,adapterLocale:h,localeText:f}=o,m=v.useMemo(()=>_({},f,r,t),[f,r,t]),p=v.useMemo(()=>{if(!l)return i||null;const y=new l({locale:h,formats:d,instance:u});if(!y.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/quickstart/#installation"].join(`
`));return y},[l,h,d,u,i]),x=v.useMemo(()=>p?{minDate:p.date("1900-01-01T00:00:00.000"),maxDate:p.date("2099-12-31T00:00:00.000")}:null,[p]),g=v.useMemo(()=>({utils:p,defaultDates:x,localeText:m}),[x,p,m]);return c.jsx(Cr.Provider,{value:g,children:a})},dc=v.createContext(()=>!0);function wf(){return v.useContext(dc)}const uc=v.createContext(null);function hc(){return v.useContext(uc)}const eo=v.createContext(null),Jn=()=>{const n=v.useContext(eo);if(n==null)throw new Error("MUI X: The `usePickerContext` hook can only be called inside the context of a Picker component");return n},fc=v.createContext(null),mc=v.createContext({ownerState:{isPickerDisabled:!1,isPickerReadOnly:!1,isPickerValueEmpty:!1,isPickerOpen:!1,pickerVariant:"desktop",pickerOrientation:"portrait"},rootRefObject:{current:null},labelId:void 0,dismissViews:()=>{},hasUIView:!0,getCurrentViewMode:()=>"UI",triggerElement:null,viewContainerRole:null,defaultActionBarActions:[],onPopperExited:void 0});function pc(n){const{contextValue:e,actionsContextValue:t,privateContextValue:s,fieldPrivateContextValue:i,isValidContextValue:r,localeText:o,children:a}=n;return c.jsx(eo.Provider,{value:e,children:c.jsx(fc.Provider,{value:t,children:c.jsx(mc.Provider,{value:s,children:c.jsx(uc.Provider,{value:i,children:c.jsx(dc.Provider,{value:r,children:c.jsx(cc,{localeText:o,children:a})})})})})})}const st=()=>v.useContext(mc);function gc(){const{ownerState:n}=st(),e=Jt();return v.useMemo(()=>_({},n,{toolbarDirection:e?"rtl":"ltr"}),[n,e])}const Tf=["children","className","classes","toolbarTitle","hidden","titleId","classes","landscapeDirection"],Sf=n=>Be({root:["root"],title:["title"],content:["content"]},bf,n),Pf=Z("div",{name:"MuiPickersToolbar",slot:"Root"})(({theme:n})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:n.spacing(2,3),variants:[{props:{pickerOrientation:"landscape"},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]})),Df=Z("div",{name:"MuiPickersToolbar",slot:"Content",shouldForwardProp:n=>Pn(n)&&n!=="landscapeDirection"})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{pickerOrientation:"landscape"},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{pickerOrientation:"landscape",landscapeDirection:"row"},style:{flexDirection:"row"}}]}),Cf=v.forwardRef(function(e,t){const s=$e({props:e,name:"MuiPickersToolbar"}),{children:i,className:r,classes:o,toolbarTitle:a,hidden:l,titleId:d,landscapeDirection:u}=s,h=re(s,Tf),f=gc(),m=Sf(o);return l?null:c.jsxs(Pf,_({ref:t,className:et(m.root,r),ownerState:f},h,{children:[c.jsx(M,{color:"text.secondary",variant:"overline",id:d,className:m.title,children:a}),c.jsx(Df,{className:m.content,ownerState:f,landscapeDirection:u,children:i})]}))}),Mf=n=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:_({},n)}}}}),xc={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:n=>n==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",nextStepButtonLabel:"Next",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",timeRangePickerToolbarTitle:"Select time range",clockLabelText:(n,e)=>`Select ${n}. ${e?`Selected time is ${e}`:"No time selected"}`,hoursClockNumberText:n=>`${n} hours`,minutesClockNumberText:n=>`${n} minutes`,secondsClockNumberText:n=>`${n} seconds`,selectViewText:n=>`Select ${n}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:n=>`Week ${n}`,calendarWeekNumberText:n=>`${n}`,openDatePickerDialogue:n=>n?`Choose date, selected date is ${n}`:"Choose date",openTimePickerDialogue:n=>n?`Choose time, selected time is ${n}`:"Choose time",openRangePickerDialogue:n=>n?`Choose range, selected range is ${n}`:"Choose range",fieldClearLabel:"Clear",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:n=>"Y".repeat(n.digitAmount),fieldMonthPlaceholder:n=>n.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:n=>n.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},kf=xc;Mf(xc);const Dn=()=>{const n=v.useContext(Cr);if(n===null)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(n.utils===null)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const e=v.useMemo(()=>_({},kf,n.localeText),[n.localeText]);return v.useMemo(()=>_({},n,{localeText:e}),[n,e])},Ee=()=>Dn().utils,If=()=>Dn().defaultDates,Ni=n=>{const e=Ee(),t=v.useRef(void 0);return t.current===void 0&&(t.current=e.date(void 0,n)),t.current},cn=()=>Dn().localeText;function jf(n){return qe("MuiDatePickerToolbar",n)}Ge("MuiDatePickerToolbar",["root","title"]);const Mr=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],kr=["disablePast","disableFuture","minTime","maxTime","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],yc=["minDateTime","maxDateTime"],_f=[...Mr,...kr,...yc],bc=n=>_f.reduce((e,t)=>(n.hasOwnProperty(t)&&(e[t]=n[t]),e),{}),Rf=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef","unstableStartFieldRef","unstableEndFieldRef","enableAccessibleFieldDOMStructure","disabled","readOnly","dateSeparator","autoFocus","focused"],vc=(n,e)=>v.useMemo(()=>{const t=_({},n),s={},i=r=>{t.hasOwnProperty(r)&&(s[r]=t[r],delete t[r])};return Rf.forEach(i),e==="date"?Mr.forEach(i):e==="time"?kr.forEach(i):e==="date-time"&&(Mr.forEach(i),kr.forEach(i),yc.forEach(i)),{forwardedProps:t,internalProps:s}},[n,e]),Of=({utils:n,format:e})=>{let t=10,s=e,i=n.expandFormat(e);for(;i!==s;)if(s=i,i=n.expandFormat(s),t-=1,t<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the component.");return i},Af=({utils:n,expandedFormat:e})=>{const t=[],{start:s,end:i}=n.escapedCharacters,r=new RegExp(`(\\${s}[^\\${i}]*\\${i})+`,"g");let o=null;for(;o=r.exec(e);)t.push({start:o.index,end:r.lastIndex-1});return t},Ef=(n,e,t,s)=>{switch(t.type){case"year":return e.fieldYearPlaceholder({digitAmount:n.formatByString(n.date(void 0,"default"),s).length,format:s});case"month":return e.fieldMonthPlaceholder({contentType:t.contentType,format:s});case"day":return e.fieldDayPlaceholder({format:s});case"weekDay":return e.fieldWeekDayPlaceholder({contentType:t.contentType,format:s});case"hours":return e.fieldHoursPlaceholder({format:s});case"minutes":return e.fieldMinutesPlaceholder({format:s});case"seconds":return e.fieldSecondsPlaceholder({format:s});case"meridiem":return e.fieldMeridiemPlaceholder({format:s});default:return s}},Ff=({utils:n,date:e,shouldRespectLeadingZeros:t,localeText:s,localizedDigits:i,now:r,token:o,startSeparator:a})=>{if(o==="")throw new Error("MUI X: Should not call `commitToken` with an empty token");const l=rc(n,o),d=lc(n,l.contentType,l.type,o),u=t?d:l.contentType==="digit",h=n.isValid(e);let f=h?n.formatByString(e,o):"",m=null;if(u)if(d)m=f===""?n.formatByString(r,o).length:f.length;else{if(l.maxLength==null)throw new Error(`MUI X: The token ${o} should have a 'maxLength' property on it's adapter`);m=l.maxLength,h&&(f=Kr(Zr(Tn(f,i),m),i))}return _({},l,{format:o,maxLength:m,value:f,placeholder:Ef(n,s,l,o),hasLeadingZerosInFormat:d,hasLeadingZerosInInput:u,startSeparator:a,endSeparator:"",modified:!1})},Lf=n=>{var m;const{utils:e,expandedFormat:t,escapedParts:s}=n,i=e.date(void 0),r=[];let o="";const a=Object.keys(e.formatTokenMap).sort((p,x)=>x.length-p.length),l=/^([a-zA-Z]+)/,d=new RegExp(`^(${a.join("|")})*$`),u=new RegExp(`^(${a.join("|")})`),h=p=>s.find(x=>x.start<=p&&x.end>=p);let f=0;for(;f<t.length;){const p=h(f),x=p!=null,g=(m=l.exec(t.slice(f)))==null?void 0:m[1];if(!x&&g!=null&&d.test(g)){let y=g;for(;y.length>0;){const w=u.exec(y)[1];y=y.slice(w.length),r.push(Ff(_({},n,{now:i,token:w,startSeparator:o}))),o=""}f+=g.length}else{const y=t[f];x&&(p==null?void 0:p.start)===f||(p==null?void 0:p.end)===f||(r.length===0?o+=y:(r[r.length-1].endSeparator+=y,r[r.length-1].isEndFormatSeparator=!0)),f+=1}}return r.length===0&&o.length>0&&r.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:o,endSeparator:"",modified:!1}),r},Nf=({isRtl:n,formatDensity:e,sections:t})=>t.map(s=>{const i=r=>{let o=r;return n&&o!==null&&o.includes(" ")&&(o=`⁩${o}⁦`),e==="spacious"&&["/",".","-"].includes(o)&&(o=` ${o} `),o};return s.startSeparator=i(s.startSeparator),s.endSeparator=i(s.endSeparator),s}),Jo=n=>{let e=Of(n);n.isRtl&&n.enableAccessibleFieldDOMStructure&&(e=e.split(" ").reverse().join(" "));const t=Af(_({},n,{expandedFormat:e})),s=Lf(_({},n,{expandedFormat:e,escapedParts:t}));return Nf(_({},n,{sections:s}))},to=()=>v.useContext(eo),zf=()=>{const n=v.useContext(fc);if(n==null)throw new Error(["MUI X: The `usePickerActionsContext` can only be called in fields that are used as a slot of a Picker component"].join(`
`));return n},Bf=["toolbarFormat","toolbarPlaceholder","className","classes"],$f=n=>Be({root:["root"],title:["title"]},jf,n),Vf=Z(Cf,{name:"MuiDatePickerToolbar",slot:"Root"})({}),Wf=Z(M,{name:"MuiDatePickerToolbar",slot:"Title"})({variants:[{props:{pickerOrientation:"landscape"},style:{margin:"auto 16px auto auto"}}]}),Hf=v.forwardRef(function(e,t){const s=$e({props:e,name:"MuiDatePickerToolbar"}),{toolbarFormat:i,toolbarPlaceholder:r="––",className:o,classes:a}=s,l=re(s,Bf),d=Ee(),{value:u,views:h,orientation:f}=Jn(),m=cn(),p=gc(),x=$f(a),g=v.useMemo(()=>{if(!d.isValid(u))return r;const y=Qr(d,{format:i,views:h},!0);return d.formatByString(u,y)},[u,i,r,d,h]);return c.jsx(Vf,_({ref:t,toolbarTitle:m.datePickerToolbarTitle,className:et(x.root,o)},l,{children:c.jsx(Wf,{variant:"h4",align:f==="landscape"?"left":"center",ownerState:p,className:x.title,children:g})}))}),As=({props:n,value:e,timezone:t,adapter:s})=>{if(e===null)return null;const{shouldDisableDate:i,shouldDisableMonth:r,shouldDisableYear:o,disablePast:a,disableFuture:l,minDate:d,maxDate:u}=n,h=s.utils.date(void 0,t);switch(!0){case!s.utils.isValid(e):return"invalidDate";case!!(i&&i(e)):return"shouldDisableDate";case!!(r&&r(e)):return"shouldDisableMonth";case!!(o&&o(e)):return"shouldDisableYear";case!!(l&&s.utils.isAfterDay(e,h)):return"disableFuture";case!!(a&&s.utils.isBeforeDay(e,h)):return"disablePast";case!!(d&&s.utils.isBeforeDay(e,d)):return"minDate";case!!(u&&s.utils.isAfterDay(e,u)):return"maxDate";default:return null}};As.valueManager=Ht;function wc(n){const{props:e,validator:t,value:s,timezone:i,onError:r}=n,o=Dn(),a=v.useRef(t.valueManager.defaultErrorState),l=t({adapter:o,value:s,timezone:i,props:e}),d=t.valueManager.hasError(l);v.useEffect(()=>{r&&!t.valueManager.isSameError(l,a.current)&&r(l,s),a.current=l},[t,r,l,s]);const u=G(h=>t({adapter:o,value:h,timezone:i,props:e}));return{validationError:l,hasValidationError:d,getValidationErrorForNewValue:u}}function Yf(n={}){const{enableAccessibleFieldDOMStructure:e=!0}=n;return v.useMemo(()=>({valueType:"date",validator:As,internal_valueManager:Ht,internal_fieldValueManager:yf,internal_enableAccessibleFieldDOMStructure:e,internal_useApplyDefaultValuesToFieldInternalProps:Gf,internal_useOpenPickerButtonAriaLabel:Uf}),[e])}function Uf(n){const e=Ee(),t=cn();return v.useMemo(()=>{const s=e.isValid(n)?e.format(n,"fullDate"):null;return t.openDatePickerDialogue(s)},[n,t,e])}function Gf(n){const e=Ee(),t=Es(n);return v.useMemo(()=>_({},n,t,{format:n.format??e.formats.keyboardDate}),[n,t,e])}function Es(n){const e=Ee(),t=If();return v.useMemo(()=>({disablePast:n.disablePast??!1,disableFuture:n.disableFuture??!1,minDate:Yo(e,n.minDate,t.minDate),maxDate:Yo(e,n.maxDate,t.maxDate)}),[n.minDate,n.maxDate,n.disableFuture,n.disablePast,e,t])}function Tc(n,e){const t=$e({props:n,name:e}),s=Es(t),i=v.useMemo(()=>{var r;return((r=t.localeText)==null?void 0:r.toolbarTitle)==null?t.localeText:_({},t.localeText,{datePickerToolbarTitle:t.localeText.toolbarTitle})},[t.localeText]);return _({},t,s,{localeText:i},Qh({views:t.views,openTo:t.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{slots:_({toolbar:Hf},t.slots)})}function qf(n){return qe("MuiPickerPopper",n)}Ge("MuiPickerPopper",["root","paper"]);function Xf(n,e){return Array.isArray(e)?e.every(t=>n.indexOf(t)!==-1):n.indexOf(e)!==-1}const Qf=n=>{setTimeout(n,0)},ot=(n=document)=>{const e=n.activeElement;return e?e.shadowRoot?ot(e.shadowRoot):e:null},Kf="@media (pointer: fine)",Zf=["PaperComponent","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],Jf=n=>Be({root:["root"],paper:["paper"]},qf,n),em=Z($u,{name:"MuiPickerPopper",slot:"Root"})(({theme:n})=>({zIndex:n.zIndex.modal})),tm=Z(ze,{name:"MuiPickerPopper",slot:"Paper"})({outline:0,transformOrigin:"top center",variants:[{props:({popperPlacement:n})=>["top","top-start","top-end"].includes(n),style:{transformOrigin:"bottom center"}}]});function nm(n,e){return e.documentElement.clientWidth<n.clientX||e.documentElement.clientHeight<n.clientY}function sm(n,e){const t=v.useRef(!1),s=v.useRef(!1),i=v.useRef(null),r=v.useRef(!1);v.useEffect(()=>{if(!n)return;function l(){r.current=!0}return document.addEventListener("mousedown",l,!0),document.addEventListener("touchstart",l,!0),()=>{document.removeEventListener("mousedown",l,!0),document.removeEventListener("touchstart",l,!0),r.current=!1}},[n]);const o=G(l=>{if(!r.current)return;const d=s.current;s.current=!1;const u=Xi(i.current);if(!i.current||"clientX"in l&&nm(l,u))return;if(t.current){t.current=!1;return}let h;l.composedPath?h=l.composedPath().indexOf(i.current)>-1:h=!u.documentElement.contains(l.target)||i.current.contains(l.target),!h&&!d&&e(l)}),a=()=>{s.current=!0};return v.useEffect(()=>{if(n){const l=Xi(i.current),d=()=>{t.current=!0};return l.addEventListener("touchstart",o),l.addEventListener("touchmove",d),()=>{l.removeEventListener("touchstart",o),l.removeEventListener("touchmove",d)}}},[n,o]),v.useEffect(()=>{if(n){const l=Xi(i.current);return l.addEventListener("click",o),()=>{l.removeEventListener("click",o),s.current=!1}}},[n,o]),[i,a,a]}const im=v.forwardRef((n,e)=>{const{PaperComponent:t,ownerState:s,children:i,paperSlotProps:r,paperClasses:o,onPaperClick:a,onPaperTouchStart:l}=n,d=re(n,Zf),u=Ie({elementType:t,externalSlotProps:r,additionalProps:{tabIndex:-1,elevation:8,ref:e},className:o,ownerState:s});return c.jsx(t,_({},d,u,{onClick:h=>{var f;a(h),(f=u.onClick)==null||f.call(u,h)},onTouchStart:h=>{var f;l(h),(f=u.onTouchStart)==null||f.call(u,h)},ownerState:s,children:i}))});function rm(n){const e=$e({props:n,name:"MuiPickerPopper"}),{children:t,placement:s="bottom-start",slots:i,slotProps:r,classes:o}=e,{open:a,popupRef:l,reduceAnimations:d}=Jn(),{dismissViews:u,getCurrentViewMode:h,onPopperExited:f,triggerElement:m,viewContainerRole:p}=st();v.useEffect(()=>{function $(W){a&&W.key==="Escape"&&u()}return document.addEventListener("keydown",$),()=>{document.removeEventListener("keydown",$)}},[u,a]);const x=v.useRef(null);v.useEffect(()=>{p==="tooltip"||h()==="field"||(a?x.current=ot(document):x.current&&x.current instanceof HTMLElement&&setTimeout(()=>{x.current instanceof HTMLElement&&x.current.focus()}))},[a,p,h]);const g=Jf(o),{ownerState:y,rootRefObject:w}=st(),T=_({},y,{popperPlacement:s}),C=G(()=>{p==="tooltip"?Qf(()=>{var $,W;($=w.current)!=null&&$.contains(ot(document))||(W=l.current)!=null&&W.contains(ot(document))||u()}):u()}),[P,I,O]=sm(a,C),b=v.useRef(null),k=gt(b,l),A=gt(k,P),E=$=>{$.key==="Escape"&&($.stopPropagation(),u())},D=(i==null?void 0:i.desktopTransition)??d?_i:zu,S=(i==null?void 0:i.desktopTrapFocus)??Bu,j=(i==null?void 0:i.desktopPaper)??tm,R=(i==null?void 0:i.popper)??em,L=Ie({elementType:R,externalSlotProps:r==null?void 0:r.popper,additionalProps:{transition:!0,role:p??void 0,open:a,placement:s,anchorEl:m,onKeyDown:E},className:g.root,ownerState:T});return c.jsx(R,_({},L,{children:({TransitionProps:$})=>c.jsx(S,_({open:a,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:p==="tooltip",isEnabled:()=>!0},r==null?void 0:r.desktopTrapFocus,{children:c.jsx(D,_({},$,r==null?void 0:r.desktopTransition,{onExited:W=>{var V,J,H;f==null||f(),(J=(V=r==null?void 0:r.desktopTransition)==null?void 0:V.onExited)==null||J.call(V,W),(H=$==null?void 0:$.onExited)==null||H.call($)},children:c.jsx(im,{PaperComponent:j,ownerState:T,ref:A,onPaperClick:I,onPaperTouchStart:O,paperClasses:g.paper,paperSlotProps:r==null?void 0:r.desktopPaper,children:t})}))}))}))}const om="@media (prefers-reduced-motion: reduce)",Bn=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),ea=Bn&&Bn[1]?parseInt(Bn[1],10):null,ta=Bn&&Bn[2]?parseInt(Bn[2],10):null,am=ea&&ea<10||ta&&ta<13||!1;function Sc(n){const e=Xl(om,{defaultMatches:!1});return n??(e||am)}const Pc={hasNextStep:!1,hasSeveralSteps:!1,goToNextStep:()=>{},areViewsInSameStep:()=>!0};function lm(n){const{steps:e,isViewMatchingStep:t,onStepChange:s}=n;return i=>{if(e==null)return Pc;const r=e.findIndex(a=>t(i.view,a)),o=r===-1||r===e.length-1?null:e[r+1];return{hasNextStep:o!=null,hasSeveralSteps:e.length>1,goToNextStep:()=>{o!=null&&s(_({},i,{step:o}))},areViewsInSameStep:(a,l)=>{const d=e.find(h=>t(a,h)),u=e.find(h=>t(l,h));return d===u}}}}function Dc({onChange:n,onViewChange:e,openTo:t,view:s,views:i,autoFocus:r,focusedView:o,onFocusedViewChange:a,getStepNavigation:l}){const d=v.useRef(t),u=v.useRef(i),h=v.useRef(i.includes(t)?t:i[0]),[f,m]=Un({name:"useViews",state:"view",controlled:s,default:h.current}),p=v.useRef(r?f:null),[x,g]=Un({name:"useViews",state:"focusedView",controlled:o,default:p.current}),y=l?l({setView:m,view:f,defaultView:h.current,views:i}):Pc;v.useEffect(()=>{(d.current&&d.current!==t||u.current&&u.current.some(k=>!i.includes(k)))&&(m(i.includes(t)?t:i[0]),u.current=i,d.current=t)},[t,m,f,i]);const w=i.indexOf(f),T=i[w-1]??null,C=i[w+1]??null,P=G((k,A)=>{g(A?k:E=>k===E?null:E),a==null||a(k,A)}),I=G(k=>{P(k,!0),k!==f&&(m(k),e&&e(k))}),O=G(()=>{C&&I(C)}),b=G((k,A,E)=>{const D=A==="finish",S=E?i.indexOf(E)<i.length-1:!!C;n(k,D&&S?"partial":A,E);let R=null;if(E!=null&&E!==f?R=E:D&&(R=f),R==null)return;const L=i[i.indexOf(R)+1];L==null||!y.areViewsInSameStep(R,L)||I(L)});return _({},y,{view:f,setView:I,focusedView:x,setFocusedView:P,nextView:C,previousView:T,defaultView:i.includes(t)?t:i[0],goToNextView:O,setValueAndGoToNextView:b})}function na(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}function cm(n,e){const[t,s]=v.useState(na);return Kt(()=>{const i=()=>{s(na())};return window.addEventListener("orientationchange",i),()=>{window.removeEventListener("orientationchange",i)}},[]),Xf(n,["hours","minutes","seconds"])?"portrait":e??t}const Fs=({name:n,timezone:e,value:t,defaultValue:s,referenceDate:i,onChange:r,valueManager:o})=>{const a=Ee(),[l,d]=Un({name:n,state:"value",controlled:t,default:s??o.emptyValue}),u=v.useMemo(()=>o.getTimezone(a,l),[a,o,l]),h=G(x=>u==null?x:o.setTimezone(a,u,x)),f=v.useMemo(()=>e||u||(i?a.getTimezone(i):"default"),[e,u,i,a]),m=v.useMemo(()=>o.setTimezone(a,f,l),[o,a,f,l]),p=G((x,...g)=>{const y=h(x);d(y),r==null||r(y,...g)});return{value:m,handleValueChange:p,timezone:f}};function dm(n){const{props:e,valueManager:t,validator:s}=n,{value:i,defaultValue:r,onChange:o,referenceDate:a,timezone:l,onAccept:d,closeOnSelect:u,open:h,onOpen:f,onClose:m}=e,{current:p}=v.useRef(r),{current:x}=v.useRef(i!==void 0),{current:g}=v.useRef(h!==void 0),y=Ee(),{timezone:w,value:T,handleValueChange:C}=Fs({name:"a picker component",timezone:l,value:i,defaultValue:p,referenceDate:a,onChange:o,valueManager:t}),[P,I]=v.useState(()=>({open:!1,lastExternalValue:T,clockShallowValue:void 0,lastCommittedValue:T,hasBeenModifiedSinceMount:!1})),{getValidationErrorForNewValue:O}=wc({props:e,validator:s,timezone:w,value:T,onError:e.onError}),b=G(D=>{const S=typeof D=="function"?D(P.open):D;g||I(j=>_({},j,{open:S})),S&&f&&f(),S||m==null||m()}),k=G((D,S)=>{const{changeImportance:j="accept",skipPublicationIfPristine:R=!1,validationError:L,shortcut:$,shouldClose:W=j==="accept"}=S??{};let V,J;!R&&!x&&!P.hasBeenModifiedSinceMount?(V=!0,J=j==="accept"):(V=!t.areValuesEqual(y,D,T),J=j==="accept"&&!t.areValuesEqual(y,D,P.lastCommittedValue)),I(xe=>_({},xe,{clockShallowValue:V?void 0:xe.clockShallowValue,lastCommittedValue:J?T:xe.lastCommittedValue,hasBeenModifiedSinceMount:!0}));let H=null;const ie=()=>(H||(H={validationError:L??O(D)},$&&(H.shortcut=$)),H);V&&C(D,ie()),J&&d&&d(D,ie()),W&&b(!1)});T!==P.lastExternalValue&&I(D=>_({},D,{lastExternalValue:T,clockShallowValue:void 0,hasBeenModifiedSinceMount:!0}));const A=G((D,S="partial")=>{if(S==="shallow"){I(j=>_({},j,{clockShallowValue:D,hasBeenModifiedSinceMount:!0}));return}k(D,{changeImportance:S==="finish"&&u?"accept":"set"})});v.useEffect(()=>{if(g){if(h===void 0)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");I(D=>_({},D,{open:h}))}},[g,h]);const E=v.useMemo(()=>t.cleanValue(y,P.clockShallowValue===void 0?T:P.clockShallowValue),[y,t,P.clockShallowValue,T]);return{timezone:w,state:P,setValue:k,setValueFromView:A,setOpen:b,value:T,viewValue:E}}const um=["className","sx"],Cc=({ref:n,props:e,valueManager:t,valueType:s,variant:i,validator:r,onPopperExited:o,autoFocusView:a,rendererInterceptor:l,localeText:d,viewContainerRole:u,getStepNavigation:h})=>{const{views:f,view:m,openTo:p,onViewChange:x,viewRenderers:g,reduceAnimations:y,orientation:w,disableOpenPicker:T,closeOnSelect:C,disabled:P,readOnly:I,formatDensity:O,enableAccessibleFieldDOMStructure:b,selectedSections:k,onSelectedSectionsChange:A,format:E,label:D,autoFocus:S,name:j}=e,{className:R,sx:L}=e,$=re(e,um),W=Ri(),V=Ee(),J=Dn(),H=Sc(y),ie=cm(f,w),{current:xe}=v.useRef(p??null),[de,Pe]=v.useState(null),se=v.useRef(null),ve=v.useRef(null),Re=v.useRef(null),he=gt(n,Re),{timezone:ne,state:Y,setOpen:ee,setValue:U,setValueFromView:oe,value:fe,viewValue:Q}=dm({props:e,valueManager:t,validator:r}),{view:we,setView:X,defaultView:ae,focusedView:te,setFocusedView:le,setValueAndGoToNextView:nt,goToNextStep:Xe,hasNextStep:ht,hasSeveralSteps:ct}=Dc({view:m,views:f,openTo:p,onChange:oe,onViewChange:x,autoFocus:a,getStepNavigation:h}),Rt=G(()=>U(t.emptyValue)),kn=G(()=>U(t.getTodayValue(V,ne,s))),In=G(()=>U(fe)),me=G(()=>U(Y.lastCommittedValue,{skipPublicationIfPristine:!0})),pe=G(()=>{U(fe,{skipPublicationIfPristine:!0})}),{hasUIView:ke,viewModeLookup:Fe,timeViewsCount:it}=v.useMemo(()=>f.reduce((Ue,Dt)=>{const Ao=g[Dt]==null?"field":"UI";return Ue.viewModeLookup[Dt]=Ao,Ao==="UI"&&(Ue.hasUIView=!0,nf(Dt)&&(Ue.timeViewsCount+=1)),Ue},{hasUIView:!1,viewModeLookup:{},timeViewsCount:0}),[g,f]),Qe=Fe[we],xt=G(()=>Qe),[Ke,ye]=v.useState(Qe==="UI"?we:null);Ke!==we&&Fe[we]==="UI"&&ye(we),Kt(()=>{Qe==="field"&&Y.open&&(ee(!1),setTimeout(()=>{var Ue,Dt;(Ue=ve==null?void 0:ve.current)==null||Ue.setSelectedSections(we),(Dt=ve==null?void 0:ve.current)==null||Dt.focusField(we)}))},[we]),Kt(()=>{if(!Y.open)return;let Ue=we;Qe==="field"&&Ke!=null&&(Ue=Ke),Ue!==ae&&Fe[Ue]==="UI"&&Fe[ae]==="UI"&&(Ue=ae),Ue!==we&&X(Ue),le(Ue,!0)},[Y.open]);const Ze=v.useMemo(()=>({isPickerValueEmpty:t.areValuesEqual(V,fe,t.emptyValue),isPickerOpen:Y.open,isPickerDisabled:e.disabled??!1,isPickerReadOnly:e.readOnly??!1,pickerOrientation:ie,pickerVariant:i}),[V,t,fe,Y.open,ie,i,e.disabled,e.readOnly]),dt=v.useMemo(()=>T||!ke?"hidden":P||I?"disabled":"enabled",[T,ke,P,I]),Pt=G(Xe),Vs=v.useMemo(()=>C&&!ct?[]:["cancel","nextOrAccept"],[C,ct]),yt=v.useMemo(()=>({setValue:U,setOpen:ee,clearValue:Rt,setValueToToday:kn,acceptValueChanges:In,cancelValueChanges:me,setView:X,goToNextStep:Pt}),[U,ee,Rt,kn,In,me,X,Pt]),mu=v.useMemo(()=>_({},yt,{value:fe,timezone:ne,open:Y.open,views:f,view:Ke,initialView:xe,disabled:P??!1,readOnly:I??!1,autoFocus:S??!1,variant:i,orientation:ie,popupRef:se,reduceAnimations:H,triggerRef:Pe,triggerStatus:dt,hasNextStep:ht,fieldFormat:E??"",name:j,label:D,rootSx:L,rootRef:he,rootClassName:R}),[yt,fe,he,i,ie,H,P,I,E,R,j,D,L,dt,ht,ne,Y.open,Ke,f,xe,S]),pu=v.useMemo(()=>({dismissViews:pe,ownerState:Ze,hasUIView:ke,getCurrentViewMode:xt,rootRefObject:Re,labelId:W,triggerElement:de,viewContainerRole:u,defaultActionBarActions:Vs,onPopperExited:o}),[pe,Ze,ke,xt,W,de,u,Vs,o]),gu=v.useMemo(()=>({formatDensity:O,enableAccessibleFieldDOMStructure:b,selectedSections:k,onSelectedSectionsChange:A,fieldRef:ve}),[O,b,k,A,ve]);return{providerProps:{localeText:d,contextValue:mu,privateContextValue:pu,actionsContextValue:yt,fieldPrivateContextValue:gu,isValidContextValue:Ue=>{const Dt=r({adapter:J,value:Ue,timezone:ne,props:e});return!t.hasError(Dt)}},renderCurrentView:()=>{if(Ke==null)return null;const Ue=g[Ke];if(Ue==null)return null;const Dt=_({},$,{views:f,timezone:ne,value:Q,onChange:nt,view:Ke,onViewChange:X,showViewSwitcher:it>1,timeViewsCount:it},u==="tooltip"?{focusedView:null,onFocusedViewChange:()=>{}}:{focusedView:te,onFocusedViewChange:le});return l?c.jsx(l,{viewRenderers:g,popperView:Ke,rendererProps:Dt}):Ue(Dt)},ownerState:Ze}};function Mc(n){return qe("MuiPickersLayout",n)}const dn=Ge("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),hm=["actions"],fm=Z(Oi,{name:"MuiPickersLayout",slot:"ActionBar"})({});function mm(n){const{actions:e}=n,t=re(n,hm),s=cn(),{clearValue:i,setValueToToday:r,acceptValueChanges:o,cancelValueChanges:a,goToNextStep:l,hasNextStep:d}=Jn();if(e==null||e.length===0)return null;const u=e==null?void 0:e.map(h=>{switch(h){case"clear":return c.jsx(ue,{onClick:i,children:s.clearButtonLabel},h);case"cancel":return c.jsx(ue,{onClick:a,children:s.cancelButtonLabel},h);case"accept":return c.jsx(ue,{onClick:o,children:s.okButtonLabel},h);case"today":return c.jsx(ue,{onClick:r,children:s.todayButtonLabel},h);case"next":return c.jsx(ue,{onClick:l,children:s.nextStepButtonLabel},h);case"nextOrAccept":return d?c.jsx(ue,{onClick:l,children:s.nextStepButtonLabel},h):c.jsx(ue,{onClick:o,children:s.okButtonLabel},h);default:return null}});return c.jsx(fm,_({},t,{children:u}))}const pm=v.memo(mm),Cs=36,zi=2,Bi=320,gm=280,no=336,xm=["items","changeImportance"],ym=["getValue"],bm=Z(Tr,{name:"MuiPickersLayout",slot:"Shortcuts"})({});function vm(n){const{items:e,changeImportance:t="accept"}=n,s=re(n,xm),{setValue:i}=zf(),r=wf();if(e==null||e.length===0)return null;const o=e.map(a=>{let{getValue:l}=a,d=re(a,ym);const u=l({isValid:r});return _({},d,{label:d.label,onClick:()=>{i(u,{changeImportance:t,shortcut:d})},disabled:!r(u)})});return c.jsx(bm,_({dense:!0,sx:[{maxHeight:no,maxWidth:200,overflow:"auto"},...Array.isArray(s.sx)?s.sx:[s.sx]]},s,{children:o.map(a=>c.jsx(wr,{children:c.jsx(Te,_({},a))},a.id??a.label))}))}const wm=["ownerState"];function Tm(n){return n.view!==null}const Sm=(n,e)=>{const{pickerOrientation:t}=e;return Be({root:["root",t==="landscape"&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},Mc,n)},Pm=n=>{const{ownerState:e,defaultActionBarActions:t}=st(),{view:s}=Jn(),i=Jt(),{children:r,slots:o,slotProps:a,classes:l}=n,d=v.useMemo(()=>_({},e,{layoutDirection:i?"rtl":"ltr"}),[e,i]),u=Sm(l,d),h=(o==null?void 0:o.actionBar)??pm,f=Ie({elementType:h,externalSlotProps:a==null?void 0:a.actionBar,additionalProps:{actions:t},className:u.actionBar,ownerState:d}),m=re(f,wm),p=c.jsx(h,_({},m)),x=o==null?void 0:o.toolbar,g=Ie({elementType:x,externalSlotProps:a==null?void 0:a.toolbar,className:u.toolbar,ownerState:d}),y=Tm(g)&&x?c.jsx(x,_({},g)):null,w=r,T=o==null?void 0:o.tabs,C=s&&T?c.jsx(T,_({className:u.tabs},a==null?void 0:a.tabs)):null,P=(o==null?void 0:o.shortcuts)??vm,I=Ie({elementType:P,externalSlotProps:a==null?void 0:a.shortcuts,className:u.shortcuts,ownerState:d}),O=s&&P?c.jsx(P,_({},I)):null;return{toolbar:y,content:w,tabs:C,actionBar:p,shortcuts:O,ownerState:d}},Dm=(n,e)=>{const{pickerOrientation:t}=e;return Be({root:["root",t==="landscape"&&"landscape"],contentWrapper:["contentWrapper"]},Mc,n)},Cm=Z("div",{name:"MuiPickersLayout",slot:"Root"})({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${dn.actionBar}`]:{gridColumn:"1 / 4",gridRow:3},variants:[{props:{pickerOrientation:"landscape"},style:{[`& .${dn.toolbar}`]:{gridColumn:1,gridRow:"2 / 3"},[`.${dn.shortcuts}`]:{gridColumn:"2 / 4",gridRow:1}}},{props:{pickerOrientation:"landscape",layoutDirection:"rtl"},style:{[`& .${dn.toolbar}`]:{gridColumn:3}}},{props:{pickerOrientation:"portrait"},style:{[`& .${dn.toolbar}`]:{gridColumn:"2 / 4",gridRow:1},[`& .${dn.shortcuts}`]:{gridColumn:1,gridRow:"2 / 3"}}},{props:{pickerOrientation:"portrait",layoutDirection:"rtl"},style:{[`& .${dn.shortcuts}`]:{gridColumn:3}}}]}),Mm=Z("div",{name:"MuiPickersLayout",slot:"ContentWrapper"})({gridColumn:"2 / 4",gridRow:2,display:"flex",flexDirection:"column"}),kc=v.forwardRef(function(e,t){const s=$e({props:e,name:"MuiPickersLayout"}),{toolbar:i,content:r,tabs:o,actionBar:a,shortcuts:l,ownerState:d}=Pm(s),{orientation:u,variant:h}=Jn(),{sx:f,className:m,classes:p}=s,x=Dm(p,d);return c.jsxs(Cm,{ref:t,sx:f,className:et(x.root,m),ownerState:d,children:[u==="landscape"?l:i,u==="landscape"?i:l,c.jsx(Mm,{className:x.contentWrapper,ownerState:d,children:h==="desktop"?c.jsxs(v.Fragment,{children:[r,o]}):c.jsxs(v.Fragment,{children:[o,r]})}),a]})});function so(n){const{ownerState:e}=st(),t=Jt();return v.useMemo(()=>_({},e,{isFieldDisabled:n.disabled??!1,isFieldReadOnly:n.readOnly??!1,isFieldRequired:n.required??!1,fieldDirection:t?"rtl":"ltr"}),[e,n.disabled,n.readOnly,n.required,t])}const km=lt(c.jsx("path",{d:"M7 10l5 5 5-5z"})),Im=lt(c.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"})),jm=lt(c.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),_m=lt(c.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}));lt(c.jsxs(v.Fragment,{children:[c.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),c.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));lt(c.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}));lt(c.jsxs(v.Fragment,{children:[c.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),c.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));const Rm=lt(c.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));function Om(n){return qe("MuiPickersTextField",n)}Ge("MuiPickersTextField",["root","focused","disabled","error","required"]);function Am(n){return qe("MuiPickersInputBase",n)}const $n=Ge("MuiPickersInputBase",["root","focused","disabled","error","notchedOutline","sectionContent","sectionBefore","sectionAfter","adornedStart","adornedEnd","input","activeBar"]);function Em(n){return qe("MuiPickersSectionList",n)}const is=Ge("MuiPickersSectionList",["root","section","sectionContent"]),Fm=["slots","slotProps","elements","sectionListRef","classes"],Ic=Z("div",{name:"MuiPickersSectionList",slot:"Root"})({direction:"ltr /*! @noflip */",outline:"none"}),jc=Z("span",{name:"MuiPickersSectionList",slot:"Section"})({}),_c=Z("span",{name:"MuiPickersSectionList",slot:"SectionSeparator"})({whiteSpace:"pre"}),Rc=Z("span",{name:"MuiPickersSectionList",slot:"SectionContent"})({outline:"none"}),Lm=n=>Be({root:["root"],section:["section"],sectionContent:["sectionContent"]},Em,n);function Nm(n){const{slots:e,slotProps:t,element:s,classes:i}=n,{ownerState:r}=st(),o=(e==null?void 0:e.section)??jc,a=Ie({elementType:o,externalSlotProps:t==null?void 0:t.section,externalForwardedProps:s.container,className:i.section,ownerState:r}),l=(e==null?void 0:e.sectionContent)??Rc,d=Ie({elementType:l,externalSlotProps:t==null?void 0:t.sectionContent,externalForwardedProps:s.content,additionalProps:{suppressContentEditableWarning:!0},className:i.sectionContent,ownerState:r}),u=(e==null?void 0:e.sectionSeparator)??_c,h=Ie({elementType:u,externalSlotProps:t==null?void 0:t.sectionSeparator,externalForwardedProps:s.before,ownerState:_({},r,{separatorPosition:"before"})}),f=Ie({elementType:u,externalSlotProps:t==null?void 0:t.sectionSeparator,externalForwardedProps:s.after,ownerState:_({},r,{separatorPosition:"after"})});return c.jsxs(o,_({},a,{children:[c.jsx(u,_({},h)),c.jsx(l,_({},d)),c.jsx(u,_({},f))]}))}const zm=v.forwardRef(function(e,t){const s=$e({props:e,name:"MuiPickersSectionList"}),{slots:i,slotProps:r,elements:o,sectionListRef:a,classes:l}=s,d=re(s,Fm),u=Lm(l),{ownerState:h}=st(),f=v.useRef(null),m=gt(t,f),p=y=>{if(!f.current)throw new Error(`MUI X: Cannot call sectionListRef.${y} before the mount of the component.`);return f.current};v.useImperativeHandle(a,()=>({getRoot(){return p("getRoot")},getSectionContainer(y){return p("getSectionContainer").querySelector(`.${is.section}[data-sectionindex="${y}"]`)},getSectionContent(y){return p("getSectionContent").querySelector(`.${is.section}[data-sectionindex="${y}"] .${is.sectionContent}`)},getSectionIndexFromDOMElement(y){const w=p("getSectionIndexFromDOMElement");if(y==null||!w.contains(y))return null;let T=null;return y.classList.contains(is.section)?T=y:y.classList.contains(is.sectionContent)&&(T=y.parentElement),T==null?null:Number(T.dataset.sectionindex)}}));const x=(i==null?void 0:i.root)??Ic,g=Ie({elementType:x,externalSlotProps:r==null?void 0:r.root,externalForwardedProps:d,additionalProps:{ref:m,suppressContentEditableWarning:!0},className:u.root,ownerState:h});return c.jsx(x,_({},g,{children:g.contentEditable?o.map(({content:y,before:w,after:T})=>`${w.children}${y.children}${T.children}`).join(""):c.jsx(v.Fragment,{children:o.map((y,w)=>c.jsx(Nm,{slots:i,slotProps:r,element:y,classes:u},w))})}))}),Oc=v.createContext(null),$i=()=>{const n=v.useContext(Oc);if(n==null)throw new Error(["MUI X: The `usePickerTextFieldOwnerState` can only be called in components that are used inside a PickerTextField component"].join(`
`));return n},Bm=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef","onFocus","onBlur","classes","ownerState"],$m=n=>Math.round(n*1e5)/1e5,Vi=Z("div",{name:"MuiPickersInputBase",slot:"Root"})(({theme:n})=>_({},n.typography.body1,{color:(n.vars||n).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:`${$m(.15/16)}em`,variants:[{props:{isInputInFullWidth:!0},style:{width:"100%"}}]})),io=Z(Ic,{name:"MuiPickersInputBase",slot:"SectionsContainer"})(({theme:n})=>({padding:"4px 0 5px",fontFamily:n.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{fieldDirection:"rtl"},style:{textAlign:"right /*! @noflip */"}},{props:{inputSize:"small"},style:{paddingTop:1}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0},style:{color:"currentColor",opacity:0}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!1},style:n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:n.palette.mode==="light"?.42:.5}}]})),Vm=Z(jc,{name:"MuiPickersInputBase",slot:"Section"})(({theme:n})=>({fontFamily:n.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"inline-block",whiteSpace:"nowrap"})),Wm=Z(Rc,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(n,e)=>e.content})(({theme:n})=>({fontFamily:n.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"})),Hm=Z(_c,{name:"MuiPickersInputBase",slot:"Separator"})(()=>({whiteSpace:"pre",letterSpacing:"inherit"})),Ym=Z("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(n,e)=>e.hiddenInput})(_({},Vu)),Um=Z("div",{name:"MuiPickersInputBase",slot:"ActiveBar"})(({theme:n,ownerState:e})=>({display:"none",position:"absolute",height:2,bottom:2,borderTopLeftRadius:2,borderTopRightRadius:2,transition:n.transitions.create(["width","left"],{duration:n.transitions.duration.shortest}),backgroundColor:(n.vars||n).palette.primary.main,'[data-active-range-position="start"] &, [data-active-range-position="end"] &':{display:"block"},'[data-active-range-position="start"] &':{left:e.sectionOffsets[0]},'[data-active-range-position="end"] &':{left:e.sectionOffsets[1]}})),Gm=(n,e)=>{const{isFieldFocused:t,isFieldDisabled:s,isFieldReadOnly:i,hasFieldError:r,inputSize:o,isInputInFullWidth:a,inputColor:l,hasStartAdornment:d,hasEndAdornment:u}=e,h={root:["root",t&&!s&&"focused",s&&"disabled",i&&"readOnly",r&&"error",a&&"fullWidth",`color${mi(l)}`,o==="small"&&"inputSizeSmall",d&&"adornedStart",u&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"],activeBar:["activeBar"]};return Be(h,Am,n)};function sa(n,e,t,s){var i;if(n.content.id){const r=(i=e.current)==null?void 0:i.querySelectorAll(`[data-sectionindex="${t}"] [data-range-position="${s}"]`);if(r)return Array.from(r).reduce((o,a)=>o+a.offsetWidth,0)}return 0}function qm(n,e){var i,r,o,a,l;let t=0;if(((i=e.current)==null?void 0:i.getAttribute("data-active-range-position"))==="end")for(let d=n.length-1;d>=n.length/2;d-=1)t+=sa(n[d],e,d,"end");else for(let d=0;d<n.length/2;d+=1)t+=sa(n[d],e,d,"start");return{activeBarWidth:t,sectionOffsets:[((o=(r=e.current)==null?void 0:r.querySelector('[data-sectionindex="0"]'))==null?void 0:o.offsetLeft)||0,((l=(a=e.current)==null?void 0:a.querySelector(`[data-sectionindex="${n.length/2}"]`))==null?void 0:l.offsetLeft)||0]}}const ro=v.forwardRef(function(e,t){const s=$e({props:e,name:"MuiPickersInputBase"}),{elements:i,areAllSectionsEmpty:r,value:o,onChange:a,id:l,endAdornment:d,startAdornment:u,renderSuffix:h,slots:f,slotProps:m,contentEditable:p,tabIndex:x,onInput:g,onPaste:y,onKeyDown:w,name:T,readOnly:C,inputProps:P,inputRef:I,sectionListRef:O,onFocus:b,onBlur:k,classes:A,ownerState:E}=s,D=re(s,Bm),S=$i(),j=v.useRef(null),R=v.useRef(null),L=v.useRef([]),$=gt(t,j),W=gt(P==null?void 0:P.ref,I),V=zl();if(!V)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");const J=E??S,H=ne=>{var Y;(Y=V.onFocus)==null||Y.call(V,ne),b==null||b(ne)},ie=ne=>{H(ne)},xe=ne=>{var Y,ee;if(w==null||w(ne),ne.key==="Enter"&&!ne.defaultMuiPrevented){if((Y=j.current)!=null&&Y.dataset.multiInput)return;const U=(ee=j.current)==null?void 0:ee.closest("form"),oe=U==null?void 0:U.querySelector('[type="submit"]');if(!U||!oe)return;ne.preventDefault(),U.requestSubmit(oe)}},de=ne=>{var Y;(Y=V.onBlur)==null||Y.call(V,ne),k==null||k(ne)};v.useEffect(()=>{V&&V.setAdornedStart(!!u)},[V,u]),v.useEffect(()=>{V&&(r?V.onEmpty():V.onFilled())},[V,r]);const Pe=Gm(A,J),se=(f==null?void 0:f.root)||Vi,ve=Ie({elementType:se,externalSlotProps:m==null?void 0:m.root,externalForwardedProps:D,additionalProps:{"aria-invalid":V.error,ref:$},className:Pe.root,ownerState:J}),Re=(f==null?void 0:f.input)||io,he=i.some(ne=>ne.content["data-range-position"]!==void 0);return v.useEffect(()=>{if(!he||!J.isPickerOpen)return;const{activeBarWidth:ne,sectionOffsets:Y}=qm(i,j);L.current=[Y[0],Y[1]],R.current&&(R.current.style.width=`${ne}px`)},[i,he,J.isPickerOpen]),c.jsxs(se,_({},ve,{children:[u,c.jsx(zm,{sectionListRef:O,elements:i,contentEditable:p,tabIndex:x,className:Pe.sectionsContainer,onFocus:H,onBlur:de,onInput:g,onPaste:y,onKeyDown:xe,slots:{root:Re,section:Vm,sectionContent:Wm,sectionSeparator:Hm},slotProps:{root:_({},m==null?void 0:m.input,{ownerState:J}),sectionContent:{className:$n.sectionContent},sectionSeparator:({separatorPosition:ne})=>({className:ne==="before"?$n.sectionBefore:$n.sectionAfter})}}),d,h?h(_({},V)):null,c.jsx(Ym,_({name:T,className:Pe.input,value:o,onChange:a,id:l,"aria-hidden":"true",tabIndex:-1,readOnly:C,required:V.required,disabled:V.disabled,onFocus:ie},P,{ref:W})),he&&c.jsx(Um,{className:Pe.activeBar,ref:R,ownerState:{sectionOffsets:L.current}})]}))});function Xm(n){return qe("MuiPickersOutlinedInput",n)}const Ct=_({},$n,Ge("MuiPickersOutlinedInput",["root","notchedOutline","input"])),Qm=["children","className","label","notched","shrink"],Km=Z("fieldset",{name:"MuiPickersOutlinedInput",slot:"NotchedOutline"})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%",borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),ia=Z("span")(({theme:n})=>({fontFamily:n.typography.fontFamily,fontSize:"inherit"})),Zm=Z("legend",{shouldForwardProp:n=>Pn(n)&&n!=="notched"})(({theme:n})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:{inputHasLabel:!1},style:{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})}},{props:{inputHasLabel:!0},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:{inputHasLabel:!0,notched:!0},style:{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}}]}));function Jm(n){const{className:e,label:t,notched:s}=n,i=re(n,Qm),r=$i();return c.jsx(Km,_({"aria-hidden":!0,className:e},i,{ownerState:r,children:c.jsx(Zm,{ownerState:r,notched:s,children:t?c.jsx(ia,{children:t}):c.jsx(ia,{className:"notranslate",children:"​"})})}))}const ep=["label","autoFocus","ownerState","classes","notched"],tp=Z(Vi,{name:"MuiPickersOutlinedInput",slot:"Root"})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{padding:"0 14px",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${Ct.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${Ct.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${Ct.focused} .${Ct.notchedOutline}`]:{borderStyle:"solid",borderWidth:2},[`&.${Ct.disabled}`]:{[`& .${Ct.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled},"*":{color:(n.vars||n).palette.action.disabled}},[`&.${Ct.error} .${Ct.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},variants:Object.keys((n.vars??n).palette).filter(t=>{var s;return((s=(n.vars??n).palette[t])==null?void 0:s.main)??!1}).map(t=>({props:{inputColor:t},style:{[`&.${Ct.focused}:not(.${Ct.error}) .${Ct.notchedOutline}`]:{borderColor:(n.vars||n).palette[t].main}}}))}}),np=Z(io,{name:"MuiPickersOutlinedInput",slot:"SectionsContainer"})({padding:"16.5px 0",variants:[{props:{inputSize:"small"},style:{padding:"8.5px 0"}}]}),sp=n=>{const t=Be({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Xm,n);return _({},n,t)},Ac=v.forwardRef(function(e,t){const s=$e({props:e,name:"MuiPickersOutlinedInput"}),{label:i,classes:r,notched:o}=s,a=re(s,ep),l=zl(),d=sp(r);return c.jsx(ro,_({slots:{root:tp,input:np},renderSuffix:u=>c.jsx(Jm,{shrink:!!(o||u.adornedStart||u.focused||u.filled),notched:!!(o||u.adornedStart||u.focused||u.filled),className:d.notchedOutline,label:i!=null&&i!==""&&(l!=null&&l.required)?c.jsxs(v.Fragment,{children:[i," ","*"]}):i})},a,{label:i,classes:d,ref:t}))});Ac.muiName="Input";function ip(n){return qe("MuiPickersFilledInput",n)}const un=_({},$n,Ge("MuiPickersFilledInput",["root","underline","input"])),rp=["label","autoFocus","disableUnderline","hiddenLabel","classes"],op=Z(Vi,{name:"MuiPickersFilledInput",slot:"Root",shouldForwardProp:n=>Pn(n)&&n!=="disableUnderline"})(({theme:n})=>{const e=n.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",r=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:s}},[`&.${un.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:s},[`&.${un.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:r},variants:[...Object.keys((n.vars??n).palette).filter(o=>(n.vars??n).palette[o].main).map(o=>{var a;return{props:{inputColor:o,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(a=(n.vars||n).palette[o])==null?void 0:a.main}`}}}}),{props:{disableUnderline:!1},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${un.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${un.error}`]:{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${un.disabled}, .${un.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${un.disabled}:before`]:{borderBottomStyle:"dotted"}}},{props:{hasStartAdornment:!0},style:{paddingLeft:12}},{props:{hasEndAdornment:!0},style:{paddingRight:12}}]}}),ap=Z(io,{name:"MuiPickersFilledInput",slot:"sectionsContainer",shouldForwardProp:n=>Pn(n)&&n!=="hiddenLabel"})({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,variants:[{props:{inputSize:"small"},style:{paddingTop:21,paddingBottom:4}},{props:{hasStartAdornment:!0},style:{paddingLeft:0}},{props:{hasEndAdornment:!0},style:{paddingRight:0}},{props:{hiddenLabel:!0},style:{paddingTop:16,paddingBottom:17}},{props:{hiddenLabel:!0,inputSize:"small"},style:{paddingTop:8,paddingBottom:9}}]}),lp=(n,e)=>{const{inputHasUnderline:t}=e,i=Be({root:["root",t&&"underline"],input:["input"]},ip,n);return _({},n,i)},Ec=v.forwardRef(function(e,t){const s=$e({props:e,name:"MuiPickersFilledInput"}),{label:i,disableUnderline:r=!1,hiddenLabel:o=!1,classes:a}=s,l=re(s,rp),d=$i(),u=_({},d,{inputHasUnderline:!r}),h=lp(a,u);return c.jsx(ro,_({slots:{root:op,input:ap},slotProps:{root:{disableUnderline:r},input:{hiddenLabel:o}}},l,{label:i,classes:h,ref:t,ownerState:u}))});Ec.muiName="Input";function cp(n){return qe("MuiPickersFilledInput",n)}const rs=_({},$n,Ge("MuiPickersInput",["root","underline","input"])),dp=["label","autoFocus","disableUnderline","ownerState","classes"],up=Z(Vi,{name:"MuiPickersInput",slot:"Root",shouldForwardProp:n=>Pn(n)&&n!=="disableUnderline"})(({theme:n})=>{let t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(t=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),{"label + &":{marginTop:16},variants:[...Object.keys((n.vars??n).palette).filter(s=>(n.vars??n).palette[s].main).map(s=>({props:{inputColor:s},style:{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[s].main}`}}})),{props:{disableUnderline:!1},style:{"&::after":{background:"red",left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${rs.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${rs.error}`]:{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${rs.disabled}, .${rs.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${rs.disabled}:before`]:{borderBottomStyle:"dotted"}}}]}}),hp=(n,e)=>{const{inputHasUnderline:t}=e,i=Be({root:["root",!t&&"underline"],input:["input"]},cp,n);return _({},n,i)},Fc=v.forwardRef(function(e,t){const s=$e({props:e,name:"MuiPickersInput"}),{label:i,disableUnderline:r=!1,classes:o}=s,a=re(s,dp),l=$i(),d=_({},l,{inputHasUnderline:!r}),u=hp(o,d);return c.jsx(ro,_({slots:{root:up},slotProps:{root:{disableUnderline:r}}},a,{label:i,classes:u,ref:t}))});Fc.muiName="Input";const fp=["onFocus","onBlur","className","classes","color","disabled","error","variant","required","InputProps","inputProps","inputRef","sectionListRef","elements","areAllSectionsEmpty","onClick","onKeyDown","onKeyUp","onPaste","onInput","endAdornment","startAdornment","tabIndex","contentEditable","focused","value","onChange","fullWidth","id","name","helperText","FormHelperTextProps","label","InputLabelProps","data-active-range-position"],mp={standard:Fc,filled:Ec,outlined:Ac},pp=Z(El,{name:"MuiPickersTextField",slot:"Root"})({}),gp=(n,e)=>{const{isFieldFocused:t,isFieldDisabled:s,isFieldRequired:i}=e;return Be({root:["root",t&&!s&&"focused",s&&"disabled",i&&"required"]},Om,n)},Lc=v.forwardRef(function(e,t){const s=$e({props:e,name:"MuiPickersTextField"}),{onFocus:i,onBlur:r,className:o,classes:a,color:l="primary",disabled:d=!1,error:u=!1,variant:h="outlined",required:f=!1,InputProps:m,inputProps:p,inputRef:x,sectionListRef:g,elements:y,areAllSectionsEmpty:w,onClick:T,onKeyDown:C,onKeyUp:P,onPaste:I,onInput:O,endAdornment:b,startAdornment:k,tabIndex:A,contentEditable:E,focused:D,value:S,onChange:j,fullWidth:R,id:L,name:$,helperText:W,FormHelperTextProps:V,label:J,InputLabelProps:H,"data-active-range-position":ie}=s,xe=re(s,fp),de=v.useRef(null),Pe=gt(t,de),se=Ri(L),ve=W&&se?`${se}-helper-text`:void 0,Re=J&&se?`${se}-label`:void 0,he=so({disabled:s.disabled,required:s.required,readOnly:m==null?void 0:m.readOnly}),ne=v.useMemo(()=>_({},he,{isFieldValueEmpty:w,isFieldFocused:D??!1,hasFieldError:u??!1,inputSize:s.size??"medium",inputColor:l??"primary",isInputInFullWidth:R??!1,hasStartAdornment:!!(k??(m==null?void 0:m.startAdornment)),hasEndAdornment:!!(b??(m==null?void 0:m.endAdornment)),inputHasLabel:!!J}),[he,w,D,u,s.size,l,R,k,b,m==null?void 0:m.startAdornment,m==null?void 0:m.endAdornment,J]),Y=gp(a,ne),ee=mp[h];return c.jsx(Oc.Provider,{value:ne,children:c.jsxs(pp,_({className:et(Y.root,o),ref:Pe,focused:D,disabled:d,variant:h,error:u,color:l,fullWidth:R,required:f,ownerState:ne},xe,{children:[J!=null&&J!==""&&c.jsx(Fl,_({htmlFor:se,id:Re},H,{children:J})),c.jsx(ee,_({elements:y,areAllSectionsEmpty:w,onClick:T,onKeyDown:C,onKeyUp:P,onInput:O,onPaste:I,onFocus:i,onBlur:r,endAdornment:b,startAdornment:k,tabIndex:A,contentEditable:E,value:S,onChange:j,id:se,fullWidth:R,inputProps:p,inputRef:x,sectionListRef:g,label:J,name:$,role:"group","aria-labelledby":Re,"aria-describedby":ve,"aria-live":ve?"polite":void 0,"data-active-range-position":ie},m)),W&&c.jsx(Wu,_({id:ve},V,{children:W}))]}))})}),xp=["enableAccessibleFieldDOMStructure"],yp=["InputProps","readOnly","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],bp=["onPaste","onKeyDown","inputMode","readOnly","InputProps","inputProps","inputRef","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],vp=["ownerState"],wp=["ownerState"],Tp=["ownerState"],Sp=["ownerState"],Pp=["InputProps","inputProps"],Dp=n=>{let{enableAccessibleFieldDOMStructure:e}=n,t=re(n,xp);if(e){const{InputProps:g,readOnly:y,onClear:w,clearable:T,clearButtonPosition:C,openPickerButtonPosition:P,openPickerAriaLabel:I}=t,O=re(t,yp);return{clearable:T,onClear:w,clearButtonPosition:C,openPickerButtonPosition:P,openPickerAriaLabel:I,textFieldProps:_({},O,{InputProps:_({},g??{},{readOnly:y})})}}const{onPaste:s,onKeyDown:i,inputMode:r,readOnly:o,InputProps:a,inputProps:l,inputRef:d,onClear:u,clearable:h,clearButtonPosition:f,openPickerButtonPosition:m,openPickerAriaLabel:p}=t,x=re(t,bp);return{clearable:h,onClear:u,clearButtonPosition:f,openPickerButtonPosition:m,openPickerAriaLabel:p,textFieldProps:_({},x,{InputProps:_({},a??{},{readOnly:o}),inputProps:_({},l??{},{inputMode:r,onPaste:s,onKeyDown:i,ref:d})})}},oo=v.createContext({slots:{},slotProps:{},inputRef:void 0});function Cp(n){var V,J;const{slots:e,slotProps:t,fieldResponse:s,defaultOpenPickerIcon:i}=n,r=cn(),o=to(),a=v.useContext(oo),{textFieldProps:l,onClear:d,clearable:u,openPickerAriaLabel:h,clearButtonPosition:f="end",openPickerButtonPosition:m="end"}=Dp(s),p=so(l),x=G(H=>{H.preventDefault(),o==null||o.setOpen(ie=>!ie)}),g=o?o.triggerStatus:"hidden",y=u?f:null,w=g!=="hidden"?m:null,T=(e==null?void 0:e.textField)??a.slots.textField??(s.enableAccessibleFieldDOMStructure===!1?De:Lc),C=(e==null?void 0:e.inputAdornment)??a.slots.inputAdornment??Nl,P=Ie({elementType:C,externalSlotProps:li(a.slotProps.inputAdornment,t==null?void 0:t.inputAdornment),additionalProps:{position:"start"},ownerState:_({},p,{position:"start"})}),I=re(P,vp),O=Ie({elementType:C,externalSlotProps:t==null?void 0:t.inputAdornment,additionalProps:{position:"end"},ownerState:_({},p,{position:"end"})}),b=re(O,wp),k=a.slots.openPickerButton??an,A=Ie({elementType:k,externalSlotProps:a.slotProps.openPickerButton,additionalProps:{disabled:g==="disabled",onClick:x,"aria-label":h,edge:l.variant!=="standard"?w:!1},ownerState:p}),E=re(A,Tp),D=a.slots.openPickerIcon??i,S=Ie({elementType:D,externalSlotProps:a.slotProps.openPickerIcon,ownerState:p}),j=(e==null?void 0:e.clearButton)??a.slots.clearButton??an,R=Ie({elementType:j,externalSlotProps:li(a.slotProps.clearButton,t==null?void 0:t.clearButton),className:"clearButton",additionalProps:{title:r.fieldClearLabel,tabIndex:-1,onClick:d,disabled:s.disabled||s.readOnly,edge:l.variant!=="standard"&&y!==w?y:!1},ownerState:p}),L=re(R,Sp),$=(e==null?void 0:e.clearIcon)??a.slots.clearIcon??Rm,W=Ie({elementType:$,externalSlotProps:li(a.slotProps.clearIcon,t==null?void 0:t.clearIcon),additionalProps:{fontSize:"small"},ownerState:p});return l.ref=gt(l.ref,o==null?void 0:o.rootRef),l.InputProps||(l.InputProps={}),o&&(l.InputProps.ref=o.triggerRef),!((V=l.InputProps)!=null&&V.startAdornment)&&(y==="start"||w==="start")&&(l.InputProps.startAdornment=c.jsxs(C,_({},I,{children:[w==="start"&&c.jsx(k,_({},E,{children:c.jsx(D,_({},S))})),y==="start"&&c.jsx(j,_({},L,{children:c.jsx($,_({},W))}))]}))),!((J=l.InputProps)!=null&&J.endAdornment)&&(y==="end"||w==="end")&&(l.InputProps.endAdornment=c.jsxs(C,_({},b,{children:[y==="end"&&c.jsx(j,_({},L,{children:c.jsx($,_({},W))})),w==="end"&&c.jsx(k,_({},E,{children:c.jsx(D,_({},S))}))]}))),y!=null&&(l.sx=[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(l.sx)?l.sx:[l.sx]]),c.jsx(T,_({},l))}function li(n,e){return n?e?t=>_({},pi(e,t),pi(n,t)):n:e}function Mp(n){const{ref:e,externalForwardedProps:t,slotProps:s}=n,i=v.useContext(oo),r=to(),o=so(t),{InputProps:a,inputProps:l}=t,d=re(t,Pp),u=Ie({elementType:Lc,externalSlotProps:li(i.slotProps.textField,s==null?void 0:s.textField),externalForwardedProps:d,additionalProps:{ref:e,sx:r==null?void 0:r.rootSx,label:r==null?void 0:r.label,name:r==null?void 0:r.name,className:r==null?void 0:r.rootClassName,inputRef:i.inputRef},ownerState:o});return u.inputProps=_({},l,u.inputProps),u.InputProps=_({},a,u.InputProps),u}function Nc(n){const{slots:e={},slotProps:t={},inputRef:s,children:i}=n,r=v.useMemo(()=>({inputRef:s,slots:{openPickerButton:e.openPickerButton,openPickerIcon:e.openPickerIcon,textField:e.textField,inputAdornment:e.inputAdornment,clearIcon:e.clearIcon,clearButton:e.clearButton},slotProps:{openPickerButton:t.openPickerButton,openPickerIcon:t.openPickerIcon,textField:t.textField,inputAdornment:t.inputAdornment,clearIcon:t.clearIcon,clearButton:t.clearButton}}),[s,e.openPickerButton,e.openPickerIcon,e.textField,e.inputAdornment,e.clearIcon,e.clearButton,t.openPickerButton,t.openPickerIcon,t.textField,t.inputAdornment,t.clearIcon,t.clearButton]);return c.jsx(oo.Provider,{value:r,children:i})}function zc(n){const{steps:e}=n;return lm({steps:e,isViewMatchingStep:(t,s)=>s.views==null||s.views.includes(t),onStepChange:({step:t,defaultView:s,setView:i,view:r,views:o})=>{const a=t.views==null?s:t.views.find(l=>o.includes(l));a!==r&&i(a)}})}const kp=["props","steps"],Ip=["ownerState"],jp=n=>{var I;let{props:e,steps:t}=n,s=re(n,kp);const{slots:i,slotProps:r,label:o,inputRef:a,localeText:l}=e,d=zc({steps:t}),{providerProps:u,renderCurrentView:h,ownerState:f}=Cc(_({},s,{props:e,localeText:l,autoFocusView:!0,viewContainerRole:"dialog",variant:"desktop",getStepNavigation:d})),m=u.privateContextValue.labelId,p=((I=r==null?void 0:r.toolbar)==null?void 0:I.hidden)??!1,x=i.field,g=Ie({elementType:x,externalSlotProps:r==null?void 0:r.field,additionalProps:_({},p&&{id:m}),ownerState:f}),y=re(g,Ip),w=i.layout??kc;let T=m;p&&(o?T=`${m}-label`:T=void 0);const C=_({},r,{toolbar:_({},r==null?void 0:r.toolbar,{titleId:m}),popper:_({"aria-labelledby":T},r==null?void 0:r.popper)});return{renderPicker:()=>c.jsx(pc,_({},u,{children:c.jsxs(Nc,{slots:i,slotProps:C,inputRef:a,children:[c.jsx(x,_({},y)),c.jsx(rm,{slots:i,slotProps:C,children:c.jsx(w,_({},C==null?void 0:C.layout,{slots:i,slotProps:C,children:h()}))})]})}))}},An=n=>n.saveQuery!=null,Bc=({stateResponse:{localizedDigits:n,sectionsValueBoundaries:e,state:t,timezone:s,setCharacterQuery:i,setTempAndroidValueStr:r,updateSectionValue:o}})=>{const a=Ee(),l=({keyPressed:h,sectionIndex:f},m,p)=>{const x=h.toLowerCase(),g=t.sections[f];if(t.characterQuery!=null&&(!p||p(t.characterQuery.value))&&t.characterQuery.sectionIndex===f){const w=`${t.characterQuery.value}${x}`,T=m(w,g);if(!An(T))return i({sectionIndex:f,value:w,sectionType:g.type}),T}const y=m(x,g);return An(y)&&!y.saveQuery?(i(null),null):(i({sectionIndex:f,value:x,sectionType:g.type}),An(y)?null:y)},d=h=>{const f=(x,g,y)=>{const w=g.filter(T=>T.toLowerCase().startsWith(y));return w.length===0?{saveQuery:!1}:{sectionValue:w[0],shouldGoToNextSection:w.length===1}},m=(x,g,y,w)=>{const T=C=>oc(a,s,g.type,C);if(g.contentType==="letter")return f(g.format,T(g.format),x);if(y&&w!=null&&rc(a,y).contentType==="letter"){const C=T(y),P=f(y,C,x);return An(P)?{saveQuery:!1}:_({},P,{sectionValue:w(P.sectionValue,C)})}return{saveQuery:!1}};return l(h,(x,g)=>{switch(g.type){case"month":{const y=w=>Qo(a,w,a.formats.month,g.format);return m(x,g,a.formats.month,y)}case"weekDay":{const y=(w,T)=>T.indexOf(w).toString();return m(x,g,a.formats.weekday,y)}case"meridiem":return m(x,g);default:return{saveQuery:!1}}})},u=h=>{const f=(p,x)=>{const g=Tn(p,n),y=Number(g),w=e[x.type]({currentDate:null,format:x.format,contentType:x.contentType});if(y>w.maximum)return{saveQuery:!1};if(y<w.minimum)return{saveQuery:!0};const T=y*10>w.maximum||g.length===w.maximum.toString().length;return{sectionValue:ac(a,y,w,n,x),shouldGoToNextSection:T}};return l(h,(p,x)=>{if(x.contentType==="digit"||x.contentType==="digit-with-letter")return f(p,x);if(x.type==="month"){lc(a,"digit","month","MM");const g=f(p,{type:x.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(An(g))return g;const y=Qo(a,g.sectionValue,"MM",x.format);return _({},g,{sectionValue:y})}if(x.type==="weekDay"){const g=f(p,x);if(An(g))return g;const y=Li(a,x.format)[Number(g.sectionValue)-1];return _({},g,{sectionValue:y})}return{saveQuery:!1}},p=>Xo(p,n))};return G(h=>{const f=t.sections[h.sectionIndex],p=Xo(h.keyPressed,n)?u(_({},h,{keyPressed:Kr(h.keyPressed,n)})):d(h);if(p==null){r(null);return}o({section:f,newSectionValue:p.sectionValue,shouldGoToNextSection:p.shouldGoToNextSection})})},_p=5e3,$c=n=>{var we;const e=Ee(),t=cn(),s=Dn(),i=Jt(),{manager:{validator:r,valueType:o,internal_valueManager:a,internal_fieldValueManager:l},internalPropsWithDefaults:d,internalPropsWithDefaults:{value:u,defaultValue:h,referenceDate:f,onChange:m,format:p,formatDensity:x="dense",selectedSections:g,onSelectedSectionsChange:y,shouldRespectLeadingZeros:w=!1,timezone:T,enableAccessibleFieldDOMStructure:C=!0},forwardedProps:{error:P}}=n,{value:I,handleValueChange:O,timezone:b}=Fs({name:"a field component",timezone:T,value:u,defaultValue:h,referenceDate:f,onChange:m,valueManager:a}),k=v.useRef(I);v.useEffect(()=>{k.current=I},[I]);const{hasValidationError:A}=wc({props:d,validator:r,timezone:b,value:I,onError:d.onError}),E=v.useMemo(()=>P!==void 0?P:A,[A,P]),D=v.useMemo(()=>lf(e),[e]),S=v.useMemo(()=>ff(e,D,b),[e,D,b]),j=v.useCallback(X=>l.getSectionsFromValue(X,ae=>Jo({utils:e,localeText:t,localizedDigits:D,format:p,date:ae,formatDensity:x,shouldRespectLeadingZeros:w,enableAccessibleFieldDOMStructure:C,isRtl:i})),[l,p,t,D,i,w,e,x,C]),[R,L]=v.useState(()=>{const X=j(I),ae={sections:X,lastExternalValue:I,lastSectionsDependencies:{format:p,isRtl:i,locale:e.locale},tempValueStrAndroid:null,characterQuery:null},te=rf(X),le=a.getInitialReferenceValue({referenceDate:f,value:I,utils:e,props:d,granularity:te,timezone:b});return _({},ae,{referenceValue:le})}),[$,W]=Un({controlled:g,default:null,name:"useField",state:"selectedSections"}),V=X=>{W(X),y==null||y(X)},J=v.useMemo(()=>Dr($,R.sections),[$,R.sections]),H=J==="all"?0:J,ie=v.useMemo(()=>gf(R.sections,i&&!C),[R.sections,i,C]),xe=v.useMemo(()=>R.sections.every(X=>X.value===""),[R.sections]),de=X=>{const ae={validationError:r({adapter:s,value:X,timezone:b,props:d})};O(X,ae)},Pe=(X,ae)=>{const te=[...R.sections];return te[X]=_({},te[X],{value:ae,modified:!0}),te},se=v.useRef(null),ve=zn(),Re=X=>{H!=null&&(se.current={sectionIndex:H,value:X},ve.start(0,()=>{se.current=null}))},he=()=>{a.areValuesEqual(e,I,a.emptyValue)?L(X=>_({},X,{sections:X.sections.map(ae=>_({},ae,{value:""})),tempValueStrAndroid:null,characterQuery:null})):(L(X=>_({},X,{characterQuery:null})),de(a.emptyValue))},ne=()=>{if(H==null)return;const X=R.sections[H];X.value!==""&&(Re(""),l.getDateFromSection(I,X)===null?L(ae=>_({},ae,{sections:Pe(H,""),tempValueStrAndroid:null,characterQuery:null})):(L(ae=>_({},ae,{characterQuery:null})),de(l.updateDateInValue(I,X,null))))},Y=X=>{const ae=(le,nt)=>{const Xe=e.parse(le,p);if(!e.isValid(Xe))return null;const ht=Jo({utils:e,localeText:t,localizedDigits:D,format:p,date:Xe,formatDensity:x,shouldRespectLeadingZeros:w,enableAccessibleFieldDOMStructure:C,isRtl:i});return Zo(e,Xe,ht,nt,!1)},te=l.parseValueStr(X,R.referenceValue,ae);de(te)},ee=zn(),U=({section:X,newSectionValue:ae,shouldGoToNextSection:te})=>{ve.clear(),ee.clear();const le=l.getDateFromSection(I,X);te&&H<R.sections.length-1&&V(H+1);const nt=Pe(H,ae),Xe=l.getDateSectionsFromValue(nt,X),ht=df(e,Xe,D);if(e.isValid(ht)){const ct=Zo(e,ht,Xe,l.getDateFromSection(R.referenceValue,X),!0);return le==null&&ee.start(0,()=>{k.current===I&&L(Rt=>_({},Rt,{sections:l.clearDateSections(R.sections,X),tempValueStrAndroid:null}))}),de(l.updateDateInValue(I,X,ct))}return Xe.every(ct=>ct.value!=="")?(Re(ae),de(l.updateDateInValue(I,X,ht))):le!=null?(Re(ae),de(l.updateDateInValue(I,X,null))):L(ct=>_({},ct,{sections:nt,tempValueStrAndroid:null}))},oe=X=>L(ae=>_({},ae,{tempValueStrAndroid:X})),fe=G(X=>{L(ae=>_({},ae,{characterQuery:X}))});if(I!==R.lastExternalValue){let X;se.current!=null&&!e.isValid(l.getDateFromSection(I,R.sections[se.current.sectionIndex]))?X=Pe(se.current.sectionIndex,se.current.value):X=j(I),L(ae=>_({},ae,{lastExternalValue:I,sections:X,sectionsDependencies:{format:p,isRtl:i,locale:e.locale},referenceValue:l.updateReferenceValue(e,I,ae.referenceValue),tempValueStrAndroid:null}))}if(i!==R.lastSectionsDependencies.isRtl||p!==R.lastSectionsDependencies.format||e.locale!==R.lastSectionsDependencies.locale){const X=j(I);L(ae=>_({},ae,{lastSectionsDependencies:{format:p,isRtl:i,locale:e.locale},sections:X,tempValueStrAndroid:null,characterQuery:null}))}R.characterQuery!=null&&!E&&H==null&&fe(null),R.characterQuery!=null&&((we=R.sections[R.characterQuery.sectionIndex])==null?void 0:we.type)!==R.characterQuery.sectionType&&fe(null),v.useEffect(()=>{se.current!=null&&(se.current=null)});const Q=zn();return v.useEffect(()=>(R.characterQuery!=null&&Q.start(_p,()=>fe(null)),()=>{}),[R.characterQuery,fe,Q]),v.useEffect(()=>{R.tempValueStrAndroid!=null&&H!=null&&ne()},[R.sections]),{activeSectionIndex:H,areAllSectionsEmpty:xe,error:E,localizedDigits:D,parsedSelectedSections:J,sectionOrder:ie,sectionsValueBoundaries:S,state:R,timezone:b,value:I,clearValue:he,clearActiveSection:ne,setCharacterQuery:fe,setSelectedSections:V,setTempAndroidValueStr:oe,updateSectionValue:U,updateValueFromValueStr:Y,getSectionsFromValue:j}};function Vc(n){const{manager:{internal_useApplyDefaultValuesToFieldInternalProps:e},internalProps:t,skipContextFieldRefAssignment:s}=n,i=to(),r=hc(),o=gt(t.unstableFieldRef,s?null:r==null?void 0:r.fieldRef),a=i==null?void 0:i.setValue,l=v.useCallback((u,h)=>a==null?void 0:a(u,{validationError:h.validationError,shouldClose:!1}),[a]),d=v.useMemo(()=>r!=null&&i!=null?_({value:i.value,onChange:l,timezone:i.timezone,disabled:i.disabled,readOnly:i.readOnly,autoFocus:i.autoFocus&&!i.open,focused:i.open?!0:void 0,format:i.fieldFormat,formatDensity:r.formatDensity,enableAccessibleFieldDOMStructure:r.enableAccessibleFieldDOMStructure,selectedSections:r.selectedSections,onSelectedSectionsChange:r.onSelectedSectionsChange,unstableFieldRef:o},t):t,[i,r,t,l,o]);return e(d)}function ao(n){const{focused:e,domGetters:t,stateResponse:{parsedSelectedSections:s,state:i}}=n;if(!t.isReady())return;const r=document.getSelection();if(!r)return;if(s==null){r.rangeCount>0&&t.getRoot().contains(r.getRangeAt(0).startContainer)&&r.removeAllRanges(),e&&t.getRoot().blur();return}if(!t.getRoot().contains(ot(document)))return;const o=new window.Range;let a;s==="all"?a=t.getRoot():i.sections[s].type==="empty"?a=t.getSectionContainer(s):a=t.getSectionContent(s),o.selectNodeContents(a),a.focus(),r.removeAllRanges(),r.addRange(o)}function Wc(n){const e=Ee(),{manager:{internal_fieldValueManager:t},internalPropsWithDefaults:{minutesStep:s,disabled:i,readOnly:r},stateResponse:{state:o,value:a,activeSectionIndex:l,parsedSelectedSections:d,sectionsValueBoundaries:u,localizedDigits:h,timezone:f,sectionOrder:m,clearValue:p,clearActiveSection:x,setSelectedSections:g,updateSectionValue:y}}=n;return G(w=>{if(!i)switch(!0){case((w.ctrlKey||w.metaKey)&&String.fromCharCode(w.keyCode)==="A"&&!w.shiftKey&&!w.altKey):{w.preventDefault(),g("all");break}case w.key==="ArrowRight":{if(w.preventDefault(),d==null)g(m.startIndex);else if(d==="all")g(m.endIndex);else{const T=m.neighbors[d].rightIndex;T!==null&&g(T)}break}case w.key==="ArrowLeft":{if(w.preventDefault(),d==null)g(m.endIndex);else if(d==="all")g(m.startIndex);else{const T=m.neighbors[d].leftIndex;T!==null&&g(T)}break}case w.key==="Delete":{if(w.preventDefault(),r)break;d==null||d==="all"?p():x();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(w.key):{if(w.preventDefault(),r||l==null)break;d==="all"&&g(l);const T=o.sections[l],C=Op(e,f,T,w.key,u,h,t.getDateFromSection(a,T),{minutesStep:s});y({section:T,newSectionValue:C,shouldGoToNextSection:!1});break}}})}function Rp(n){switch(n){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}}function Op(n,e,t,s,i,r,o,a){const l=Rp(s),d=s==="Home",u=s==="End",h=t.value===""||d||u,f=()=>{const p=i[t.type]({currentDate:o,format:t.format,contentType:t.contentType}),x=w=>ac(n,w,p,r,t),g=t.type==="minutes"&&(a!=null&&a.minutesStep)?a.minutesStep:1;let y;if(h){if(t.type==="year"&&!u&&!d)return n.formatByString(n.date(void 0,e),t.format);l>0||d?y=p.minimum:y=p.maximum}else y=parseInt(Tn(t.value,r),10)+l*g;return y%g!==0&&((l<0||d)&&(y+=g-(g+y)%g),(l>0||u)&&(y-=y%g)),y>p.maximum?x(p.minimum+(y-p.maximum-1)%(p.maximum-p.minimum+1)):y<p.minimum?x(p.maximum-(p.minimum-y-1)%(p.maximum-p.minimum+1)):x(y)},m=()=>{const p=oc(n,e,t.type,t.format);if(p.length===0)return t.value;if(h)return l>0||d?p[0]:p[p.length-1];const y=((p.indexOf(t.value)+l)%p.length+p.length)%p.length;return p[y]};return t.contentType==="digit"||t.contentType==="digit-with-letter"?f():m()}function Ap(n){const{manager:e,focused:t,setFocused:s,domGetters:i,stateResponse:r,applyCharacterEditing:o,internalPropsWithDefaults:a,stateResponse:{parsedSelectedSections:l,sectionOrder:d,state:u,clearValue:h,setCharacterQuery:f,setSelectedSections:m,updateValueFromValueStr:p},internalPropsWithDefaults:{disabled:x=!1,readOnly:g=!1}}=n,y=Wc({manager:e,internalPropsWithDefaults:a,stateResponse:r}),w=zn(),T=G(b=>{x||!i.isReady()||(s(!0),l==="all"?w.start(0,()=>{const k=document.getSelection().getRangeAt(0).startOffset;if(k===0){m(d.startIndex);return}let A=0,E=0;for(;E<k&&A<u.sections.length;){const D=u.sections[A];A+=1,E+=`${D.startSeparator}${D.value||D.placeholder}${D.endSeparator}`.length}m(A-1)}):t?i.getRoot().contains(b.target)||m(d.startIndex):(s(!0),m(d.startIndex)))}),C=G(b=>{if(!i.isReady()||l!=="all")return;const A=b.target.textContent??"";i.getRoot().innerHTML=u.sections.map(E=>`${E.startSeparator}${E.value||E.placeholder}${E.endSeparator}`).join(""),ao({focused:t,domGetters:i,stateResponse:r}),A.length===0||A.charCodeAt(0)===10?(h(),m("all")):A.length>1?p(A):(l==="all"&&m(0),o({keyPressed:A,sectionIndex:0}))}),P=G(b=>{if(g||l!=="all"){b.preventDefault();return}const k=b.clipboardData.getData("text");b.preventDefault(),f(null),p(k)}),I=G(()=>{if(t||x||!i.isReady())return;const b=ot(document);s(!0),i.getSectionIndexFromDOMElement(b)!=null||m(d.startIndex)}),O=G(()=>{setTimeout(()=>{if(!i.isReady())return;const b=ot(document);!i.getRoot().contains(b)&&(s(!1),m(null))})});return{onKeyDown:y,onBlur:O,onFocus:I,onClick:T,onPaste:P,onInput:C,contentEditable:l==="all",tabIndex:l===0?-1:0}}function Ep(n){const{manager:{internal_fieldValueManager:e},stateResponse:{areAllSectionsEmpty:t,state:s,updateValueFromValueStr:i}}=n,r=G(a=>{i(a.target.value)});return{value:v.useMemo(()=>t?"":e.getV7HiddenInputValueFromSections(s.sections),[t,s.sections,e]),onChange:r}}function Fp(n){const{stateResponse:{setSelectedSections:e},internalPropsWithDefaults:{disabled:t=!1}}=n,s=G(i=>r=>{t||r.isDefaultPrevented()||e(i)});return v.useCallback(i=>({"data-sectionindex":i,onClick:s(i)}),[s])}function Lp(n){const e=Ee(),t=cn(),s=Ri(),{focused:i,domGetters:r,stateResponse:o,applyCharacterEditing:a,manager:{internal_fieldValueManager:l},stateResponse:{parsedSelectedSections:d,sectionsValueBoundaries:u,state:h,value:f,clearActiveSection:m,setCharacterQuery:p,setSelectedSections:x,updateSectionValue:g,updateValueFromValueStr:y},internalPropsWithDefaults:{disabled:w=!1,readOnly:T=!1}}=n,C=d==="all",P=!C&&!w&&!T,I=G(D=>{if(!r.isReady())return;const S=h.sections[D];r.getSectionContent(D).innerHTML=S.value||S.placeholder,ao({focused:i,domGetters:r,stateResponse:o})}),O=G(D=>{if(!r.isReady())return;const S=D.target,j=S.textContent??"",R=r.getSectionIndexFromDOMElement(S),L=h.sections[R];if(T){I(R);return}if(j.length===0){if(L.value===""){I(R);return}const $=D.nativeEvent.inputType;if($==="insertParagraph"||$==="insertLineBreak"){I(R);return}I(R),m();return}a({keyPressed:j,sectionIndex:R}),I(R)}),b=G(D=>{D.preventDefault()}),k=G(D=>{if(D.preventDefault(),T||w||typeof d!="number")return;const S=h.sections[d],j=D.clipboardData.getData("text"),R=/^[a-zA-Z]+$/.test(j),L=/^[0-9]+$/.test(j),$=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(j);S.contentType==="letter"&&R||S.contentType==="digit"&&L||S.contentType==="digit-with-letter"&&$?(p(null),g({section:S,newSectionValue:j,shouldGoToNextSection:!0})):!R&&!L&&(p(null),y(j))}),A=G(D=>{D.preventDefault(),D.dataTransfer.dropEffect="none"}),E=G(D=>()=>{w||x(D)});return v.useCallback((D,S)=>{const j=u[D.type]({currentDate:l.getDateFromSection(f,D),contentType:D.contentType,format:D.format});return{onInput:O,onPaste:k,onMouseUp:b,onDragOver:A,onFocus:E(S),"aria-labelledby":`${s}-${D.type}`,"aria-readonly":T,"aria-valuenow":zp(D,e),"aria-valuemin":j.minimum,"aria-valuemax":j.maximum,"aria-valuetext":D.value?Np(D,e):t.empty,"aria-label":t[D.type],"aria-disabled":w,tabIndex:C||S>0?-1:0,contentEditable:!C&&!w&&!T,role:"spinbutton",id:`${s}-${D.type}`,"data-range-position":D.dateName||void 0,spellCheck:P?!1:void 0,autoCapitalize:P?"off":void 0,autoCorrect:P?"off":void 0,children:D.value||D.placeholder,inputMode:D.contentType==="letter"?"text":"numeric"}},[u,s,C,w,T,P,t,e,O,k,b,A,E,l,f])}function Np(n,e){if(n.value)switch(n.type){case"month":{if(n.contentType==="digit")return e.format(e.setMonth(e.date(),Number(n.value)-1),"month");const t=e.parse(n.value,n.format);return t?e.format(t,"month"):void 0}case"day":return n.contentType==="digit"?e.format(e.setDate(e.startOfYear(e.date()),Number(n.value)),"dayOfMonthFull"):n.value;case"weekDay":return;default:return}}function zp(n,e){if(n.value)switch(n.type){case"weekDay":return n.contentType==="letter"?void 0:Number(n.value);case"meridiem":{const t=e.parse(`01:00 ${n.value}`,`${e.formats.hours12h}:${e.formats.minutes} ${n.format}`);return t?e.getHours(t)>=12?1:0:void 0}case"day":return n.contentType==="digit-with-letter"?parseInt(n.value,10):Number(n.value);case"month":{if(n.contentType==="digit")return Number(n.value);const t=e.parse(n.value,n.format);return t?e.getMonth(t)+1:void 0}default:return n.contentType!=="letter"?Number(n.value):void 0}}const Bp=n=>{const{props:e,manager:t,skipContextFieldRefAssignment:s,manager:{valueType:i,internal_useOpenPickerButtonAriaLabel:r}}=n,{internalProps:o,forwardedProps:a}=vc(e,i),l=Vc({manager:t,internalProps:o,skipContextFieldRefAssignment:s}),{sectionListRef:d,onBlur:u,onClick:h,onFocus:f,onInput:m,onPaste:p,onKeyDown:x,onClear:g,clearable:y}=a,{disabled:w=!1,readOnly:T=!1,autoFocus:C=!1,focused:P,unstableFieldRef:I}=l,O=v.useRef(null),b=gt(d,O),k=v.useMemo(()=>({isReady:()=>O.current!=null,getRoot:()=>O.current.getRoot(),getSectionContainer:Q=>O.current.getSectionContainer(Q),getSectionContent:Q=>O.current.getSectionContent(Q),getSectionIndexFromDOMElement:Q=>O.current.getSectionIndexFromDOMElement(Q)}),[O]),A=$c({manager:t,internalPropsWithDefaults:l,forwardedProps:a}),{areAllSectionsEmpty:E,error:D,parsedSelectedSections:S,sectionOrder:j,state:R,value:L,clearValue:$,setSelectedSections:W}=A,V=Bc({stateResponse:A}),J=r(L),[H,ie]=v.useState(!1);function xe(Q=0){if(w||!O.current||ra(O)!=null)return;const we=Dr(Q,R.sections);ie(!0),O.current.getSectionContent(we).focus()}const de=Ap({manager:t,internalPropsWithDefaults:l,stateResponse:A,applyCharacterEditing:V,focused:H,setFocused:ie,domGetters:k}),Pe=Ep({manager:t,stateResponse:A}),se=Fp({stateResponse:A,internalPropsWithDefaults:l}),ve=Lp({manager:t,stateResponse:A,applyCharacterEditing:V,internalPropsWithDefaults:l,domGetters:k,focused:H}),Re=G(Q=>{x==null||x(Q),de.onKeyDown(Q)}),he=G(Q=>{u==null||u(Q),de.onBlur(Q)}),ne=G(Q=>{f==null||f(Q),de.onFocus(Q)}),Y=G(Q=>{Q.isDefaultPrevented()||(h==null||h(Q),de.onClick(Q))}),ee=G(Q=>{p==null||p(Q),de.onPaste(Q)}),U=G(Q=>{m==null||m(Q),de.onInput(Q)}),oe=G((Q,...we)=>{Q.preventDefault(),g==null||g(Q,...we),$(),oa(O)?W(j.startIndex):xe(0)}),fe=v.useMemo(()=>R.sections.map((Q,we)=>{const X=ve(Q,we);return{container:se(we),content:ve(Q,we),before:{children:Q.startSeparator},after:{children:Q.endSeparator,"data-range-position":Q.isEndFormatSeparator?X["data-range-position"]:void 0}}}),[R.sections,se,ve]);return v.useEffect(()=>{if(O.current==null)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please add the `enableAccessibleFieldDOMStructure={false}` prop to your Picker or Field component:","","<DatePicker enableAccessibleFieldDOMStructure={false} slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join(`
`));C&&!w&&O.current&&O.current.getSectionContent(j.startIndex).focus()},[]),Kt(()=>{if(!(!H||!O.current)){if(S==="all")O.current.getRoot().focus();else if(typeof S=="number"){const Q=O.current.getSectionContent(S);Q&&Q.focus()}}},[S,H]),Kt(()=>{ao({focused:H,domGetters:k,stateResponse:A})}),v.useImperativeHandle(I,()=>({getSections:()=>R.sections,getActiveSectionIndex:()=>ra(O),setSelectedSections:Q=>{if(w||!O.current)return;const we=Dr(Q,R.sections);ie((we==="all"?0:we)!==null),W(Q)},focusField:xe,isFieldFocused:()=>oa(O)})),_({},a,de,{onBlur:he,onClick:Y,onFocus:ne,onInput:U,onPaste:ee,onKeyDown:Re,onClear:oe},Pe,{error:D,clearable:!!(y&&!E&&!T&&!w),focused:P??H,sectionListRef:b,enableAccessibleFieldDOMStructure:!0,elements:fe,areAllSectionsEmpty:E,disabled:w,readOnly:T,autoFocus:C,openPickerAriaLabel:J})};function ra(n){const e=ot(document);return!e||!n.current||!n.current.getRoot().contains(e)?null:n.current.getSectionIndexFromDOMElement(e)}function oa(n){const e=ot(document);return!!n.current&&n.current.getRoot().contains(e)}const Nn=n=>n.replace(/[\u2066\u2067\u2068\u2069]/g,""),$p=(n,e,t)=>{let s=0,i=t?1:0;const r=[];for(let o=0;o<n.length;o+=1){const a=n[o],l=Jr(a,t?"input-rtl":"input-ltr",e),d=`${a.startSeparator}${l}${a.endSeparator}`,u=Nn(d).length,h=d.length,f=Nn(l),m=i+(f===""?0:l.indexOf(f[0]))+a.startSeparator.length,p=m+f.length;r.push(_({},a,{start:s,end:s+u,startInInput:m,endInInput:p})),s+=u,i+=h}return r},Vp=n=>{const e=Jt(),t=zn(),s=zn(),{props:i,manager:r,skipContextFieldRefAssignment:o,manager:{valueType:a,internal_valueManager:l,internal_fieldValueManager:d,internal_useOpenPickerButtonAriaLabel:u}}=n,{internalProps:h,forwardedProps:f}=vc(i,a),m=Vc({manager:r,internalProps:h,skipContextFieldRefAssignment:o}),{onFocus:p,onClick:x,onPaste:g,onBlur:y,onKeyDown:w,onClear:T,clearable:C,inputRef:P,placeholder:I}=f,{readOnly:O=!1,disabled:b=!1,autoFocus:k=!1,focused:A,unstableFieldRef:E}=m,D=v.useRef(null),S=gt(P,D),j=$c({manager:r,internalPropsWithDefaults:m,forwardedProps:f}),{activeSectionIndex:R,areAllSectionsEmpty:L,error:$,localizedDigits:W,parsedSelectedSections:V,sectionOrder:J,state:H,value:ie,clearValue:xe,clearActiveSection:de,setCharacterQuery:Pe,setSelectedSections:se,setTempAndroidValueStr:ve,updateSectionValue:Re,updateValueFromValueStr:he,getSectionsFromValue:ne}=j,Y=Bc({stateResponse:j}),ee=u(ie),U=v.useMemo(()=>$p(H.sections,W,e),[H.sections,W,e]);function oe(){const me=D.current.selectionStart??0;let pe;me<=U[0].startInInput||me>=U[U.length-1].endInInput?pe=1:pe=U.findIndex(Fe=>Fe.startInInput-Fe.startSeparator.length>me);const ke=pe===-1?U.length-1:pe-1;se(ke)}function fe(me=0){var pe;ot(document)!==D.current&&((pe=D.current)==null||pe.focus(),se(me))}const Q=G(me=>{p==null||p(me);const pe=D.current;t.start(0,()=>{!pe||pe!==D.current||R==null&&(pe.value.length&&Number(pe.selectionEnd)-Number(pe.selectionStart)===pe.value.length?se("all"):oe())})}),we=G((me,...pe)=>{me.isDefaultPrevented()||(x==null||x(me,...pe),oe())}),X=G(me=>{if(g==null||g(me),me.preventDefault(),O||b)return;const pe=me.clipboardData.getData("text");if(typeof V=="number"){const ke=H.sections[V],Fe=/^[a-zA-Z]+$/.test(pe),it=/^[0-9]+$/.test(pe),Qe=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(pe);if(ke.contentType==="letter"&&Fe||ke.contentType==="digit"&&it||ke.contentType==="digit-with-letter"&&Qe){Pe(null),Re({section:ke,newSectionValue:pe,shouldGoToNextSection:!0});return}if(Fe||it)return}Pe(null),he(pe)}),ae=G(me=>{y==null||y(me),se(null)}),te=G(me=>{if(O)return;const pe=me.target.value;if(pe===""){xe();return}const ke=me.nativeEvent.data,Fe=ke&&ke.length>1,it=Fe?ke:pe,Qe=Nn(it);if(V==="all"&&se(R),R==null||Fe){he(Fe?ke:Qe);return}let xt;if(V==="all"&&Qe.length===1)xt=Qe;else{const Ke=Nn(d.getV6InputValueFromSections(U,W,e));let ye=-1,Ze=-1;for(let yt=0;yt<Ke.length;yt+=1)ye===-1&&Ke[yt]!==Qe[yt]&&(ye=yt),Ze===-1&&Ke[Ke.length-yt-1]!==Qe[Qe.length-yt-1]&&(Ze=yt);const dt=U[R];if(ye<dt.start||Ke.length-Ze-1>dt.end)return;const Vs=Qe.length-Ke.length+dt.end-Nn(dt.endSeparator||"").length;xt=Qe.slice(dt.start+Nn(dt.startSeparator||"").length,Vs)}if(xt.length===0){pf()&&ve(it),de();return}Y({keyPressed:xt,sectionIndex:R})}),le=G((me,...pe)=>{me.preventDefault(),T==null||T(me,...pe),xe(),aa(D)?se(J.startIndex):fe(0)}),nt=Wc({manager:r,internalPropsWithDefaults:m,stateResponse:j}),Xe=G(me=>{w==null||w(me),nt(me)}),ht=v.useMemo(()=>I!==void 0?I:d.getV6InputValueFromSections(ne(l.emptyValue),W,e),[I,d,ne,l.emptyValue,W,e]),ct=v.useMemo(()=>H.tempValueStrAndroid??d.getV6InputValueFromSections(H.sections,W,e),[H.sections,d,H.tempValueStrAndroid,W,e]);v.useEffect(()=>{D.current&&D.current===ot(document)&&se("all")},[]),Kt(()=>{function me(){if(!D.current)return;if(V==null){D.current.scrollLeft&&(D.current.scrollLeft=0);return}if(D.current!==ot(document))return;const pe=D.current.scrollTop;if(V==="all")D.current.select();else{const ke=U[V],Fe=ke.type==="empty"?ke.startInInput-ke.startSeparator.length:ke.startInInput,it=ke.type==="empty"?ke.endInInput+ke.endSeparator.length:ke.endInInput;(Fe!==D.current.selectionStart||it!==D.current.selectionEnd)&&D.current===ot(document)&&D.current.setSelectionRange(Fe,it),s.start(0,()=>{D.current&&D.current===ot(document)&&D.current.selectionStart===D.current.selectionEnd&&(D.current.selectionStart!==Fe||D.current.selectionEnd!==it)&&me()})}D.current.scrollTop=pe}me()});const Rt=v.useMemo(()=>R==null||H.sections[R].contentType==="letter"?"text":"numeric",[R,H.sections]),In=!(D.current&&D.current===ot(document))&&L;return v.useImperativeHandle(E,()=>({getSections:()=>H.sections,getActiveSectionIndex:()=>{const me=D.current.selectionStart??0,pe=D.current.selectionEnd??0;if(me===0&&pe===0)return null;const ke=me<=U[0].startInInput?1:U.findIndex(Fe=>Fe.startInInput-Fe.startSeparator.length>me);return ke===-1?U.length-1:ke-1},setSelectedSections:me=>se(me),focusField:fe,isFieldFocused:()=>aa(D)})),_({},f,{error:$,clearable:!!(C&&!L&&!O&&!b),onBlur:ae,onClick:we,onFocus:Q,onPaste:X,onKeyDown:Xe,onClear:le,inputRef:S,enableAccessibleFieldDOMStructure:!1,placeholder:ht,inputMode:Rt,autoComplete:"off",value:In?"":ct,onChange:te,focused:A,disabled:b,readOnly:O,autoFocus:k,openPickerAriaLabel:ee})};function aa(n){return n.current===ot(document)}const Wp=n=>{const e=hc();return(n.props.enableAccessibleFieldDOMStructure??(e==null?void 0:e.enableAccessibleFieldDOMStructure)??!0?Bp:Vp)(n)},Hp=n=>{const e=Yf(n);return Wp({manager:e,props:n})},Yp=["slots","slotProps"],Hc=v.forwardRef(function(e,t){const s=$e({props:e,name:"MuiDateField"}),{slots:i,slotProps:r}=s,o=re(s,Yp),a=Mp({slotProps:r,ref:t,externalForwardedProps:o}),l=Hp(a);return c.jsx(Cp,{slots:i,slotProps:r,fieldResponse:l,defaultOpenPickerIcon:_m})}),Yc=({shouldDisableDate:n,shouldDisableMonth:e,shouldDisableYear:t,minDate:s,maxDate:i,disableFuture:r,disablePast:o,timezone:a})=>{const l=Dn();return v.useCallback(d=>As({adapter:l,value:d,timezone:a,props:{shouldDisableDate:n,shouldDisableMonth:e,shouldDisableYear:t,minDate:s,maxDate:i,disableFuture:r,disablePast:o}})!==null,[l,n,e,t,s,i,r,o,a])},Up=(n,e)=>(t,s)=>{switch(s.type){case"setVisibleDate":return _({},t,{slideDirection:s.direction,currentMonth:s.month,isMonthSwitchingAnimating:!e.isSameMonth(s.month,t.currentMonth)&&!n&&!s.skipAnimation,focusedDay:s.focusedDay});case"changeMonthTimezone":{const i=s.newTimezone;if(e.getTimezone(t.currentMonth)===i)return t;let r=e.setTimezone(t.currentMonth,i);return e.getMonth(r)!==e.getMonth(t.currentMonth)&&(r=e.setMonth(r,e.getMonth(t.currentMonth))),_({},t,{currentMonth:r})}case"finishMonthSwitchingAnimation":return _({},t,{isMonthSwitchingAnimating:!1});default:throw new Error("missing support")}},Gp=n=>{const{value:e,referenceDate:t,disableFuture:s,disablePast:i,maxDate:r,minDate:o,onMonthChange:a,onYearChange:l,reduceAnimations:d,shouldDisableDate:u,timezone:h,getCurrentMonthFromVisibleDate:f}=n,m=Ee(),p=v.useRef(Up(!!d,m)).current,x=v.useMemo(()=>Ht.getInitialReferenceValue({value:e,utils:m,timezone:h,props:n,referenceDate:t,granularity:Nt.day}),[t,h]),[g,y]=v.useReducer(p,{isMonthSwitchingAnimating:!1,focusedDay:x,currentMonth:m.startOfMonth(x),slideDirection:"left"}),w=Yc({shouldDisableDate:u,minDate:o,maxDate:r,disableFuture:s,disablePast:i,timezone:h});v.useEffect(()=>{y({type:"changeMonthTimezone",newTimezone:m.getTimezone(x)})},[x,m]);const T=G(({target:P,reason:I})=>{if(I==="cell-interaction"&&g.focusedDay!=null&&m.isSameDay(P,g.focusedDay))return;const O=I==="cell-interaction";let b,k;if(I==="cell-interaction")b=f(P,g.currentMonth),k=P;else if(b=m.isSameMonth(P,g.currentMonth)?g.currentMonth:m.startOfMonth(P),k=P,w(k)){const D=m.startOfMonth(P),S=m.endOfMonth(P);k=Ds({utils:m,date:k,minDate:m.isBefore(o,D)?D:o,maxDate:m.isAfter(r,S)?S:r,disablePast:i,disableFuture:s,isDateDisabled:w,timezone:h})}const A=!m.isSameMonth(g.currentMonth,b),E=!m.isSameYear(g.currentMonth,b);A&&(a==null||a(b)),E&&(l==null||l(m.startOfYear(b))),y({type:"setVisibleDate",month:b,direction:m.isAfterDay(b,g.currentMonth)?"left":"right",focusedDay:g.focusedDay!=null&&k!=null&&m.isSameDay(k,g.focusedDay)?g.focusedDay:k,skipAnimation:O})}),C=v.useCallback(()=>{y({type:"finishMonthSwitchingAnimation"})},[]);return{referenceDate:x,calendarState:g,setVisibleDate:T,isDateDisabled:w,onMonthSwitchingAnimationEnd:C}},qp=n=>qe("MuiPickersFadeTransitionGroup",n);Ge("MuiPickersFadeTransitionGroup",["root"]);const Xp=["children"],Qp=n=>Be({root:["root"]},qp,n),Kp=Z(Bl,{name:"MuiPickersFadeTransitionGroup",slot:"Root"})({display:"block",position:"relative"});function Uc(n){const e=$e({props:n,name:"MuiPickersFadeTransitionGroup"}),{className:t,reduceAnimations:s,transKey:i,classes:r}=e,{children:o}=e,a=re(e,Xp),l=Qp(r),d=ji();if(s)return o;const u=_({},a);return c.jsx(Kp,{className:et(l.root,t),ownerState:u,children:c.jsx(_i,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:d.transitions.duration.enteringScreen,enter:d.transitions.duration.enteringScreen,exit:0},children:o},i)})}function Zp(n){return qe("MuiPickersDay",n)}const hn=Ge("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]);function Gc(n){const{disabled:e,selected:t,today:s,outsideCurrentMonth:i,day:r,disableMargin:o,disableHighlightToday:a,showDaysOutsideCurrentMonth:l}=n,d=Ee(),{ownerState:u}=st();return v.useMemo(()=>_({},u,{day:r,isDaySelected:t??!1,isDayDisabled:e??!1,isDayCurrent:s??!1,isDayOutsideMonth:i??!1,isDayStartOfWeek:d.isSameDay(r,d.startOfWeek(r)),isDayEndOfWeek:d.isSameDay(r,d.endOfWeek(r)),disableMargin:o??!1,disableHighlightToday:a??!1,showDaysOutsideCurrentMonth:l??!1}),[d,u,r,t,e,s,i,o,a,l])}const Jp=["autoFocus","className","classes","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","children","isFirstVisibleCell","isLastVisibleCell","day","selected","disabled","today","outsideCurrentMonth","disableMargin","disableHighlightToday","showDaysOutsideCurrentMonth"],eg=(n,e)=>{const{isDaySelected:t,isDayDisabled:s,isDayCurrent:i,isDayOutsideMonth:r,disableMargin:o,disableHighlightToday:a,showDaysOutsideCurrentMonth:l}=e,d=r&&!l;return Be({root:["root",t&&!d&&"selected",s&&"disabled",!o&&"dayWithMargin",!a&&i&&"today",r&&l&&"dayOutsideMonth",d&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},Zp,n)},qc=({theme:n})=>_({},n.typography.caption,{width:Cs,height:Cs,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:n.transitions.create("background-color",{duration:n.transitions.duration.short}),color:(n.vars||n).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Gn(n.palette.primary.main,n.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.focusOpacity})`:Gn(n.palette.primary.main,n.palette.action.focusOpacity),[`&.${hn.selected}`]:{willChange:"background-color",backgroundColor:(n.vars||n).palette.primary.dark}},[`&.${hn.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,fontWeight:n.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(n.vars||n).palette.primary.dark}},[`&.${hn.disabled}:not(.${hn.selected})`]:{color:(n.vars||n).palette.text.disabled},[`&.${hn.disabled}&.${hn.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:`0 ${zi}px`}},{props:{isDayOutsideMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(n.vars||n).palette.text.secondary}},{props:{disableHighlightToday:!1,isDayCurrent:!0},style:{[`&:not(.${hn.selected})`]:{border:`1px solid ${(n.vars||n).palette.text.secondary}`}}}]}),Xc=(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disableMargin&&e.dayWithMargin,!t.disableHighlightToday&&t.isDayCurrent&&e.today,!t.isDayOutsideMonth&&t.showDaysOutsideCurrentMonth&&e.dayOutsideMonth,t.isDayOutsideMonth&&!t.showDaysOutsideCurrentMonth&&e.hiddenDaySpacingFiller]},tg=Z(kl,{name:"MuiPickersDay",slot:"Root",overridesResolver:Xc})(qc),ng=Z("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:Xc})(({theme:n})=>_({},qc({theme:n}),{opacity:0,pointerEvents:"none"})),os=()=>{},sg=v.forwardRef(function(e,t){const s=$e({props:e,name:"MuiPickersDay"}),{autoFocus:i=!1,className:r,classes:o,isAnimating:a,onClick:l,onDaySelect:d,onFocus:u=os,onBlur:h=os,onKeyDown:f=os,onMouseDown:m=os,onMouseEnter:p=os,children:x,day:g,selected:y,disabled:w,today:T,outsideCurrentMonth:C,disableMargin:P,disableHighlightToday:I,showDaysOutsideCurrentMonth:O}=s,b=re(s,Jp),k=Gc({day:g,selected:y,disabled:w,today:T,outsideCurrentMonth:C,disableMargin:P,disableHighlightToday:I,showDaysOutsideCurrentMonth:O}),A=eg(o,k),E=Ee(),D=v.useRef(null),S=gt(D,t);Kt(()=>{i&&!w&&!a&&!C&&D.current.focus()},[i,w,a,C]);const j=L=>{m(L),C&&L.preventDefault()},R=L=>{w||d(g),C&&L.currentTarget.focus(),l&&l(L)};return C&&!O?c.jsx(ng,{className:et(A.root,A.hiddenDaySpacingFiller,r),ownerState:k,role:b.role}):c.jsx(tg,_({className:et(A.root,r),ref:S,centerRipple:!0,disabled:w,tabIndex:y?0:-1,onKeyDown:L=>f(L,g),onFocus:L=>u(L,g),onBlur:L=>h(L,g),onMouseEnter:L=>p(L,g),onClick:R,onMouseDown:j},b,{ownerState:k,children:x||E.format(g,"dayOfMonth")}))}),ig=v.memo(sg),rg=n=>qe("MuiPickersSlideTransition",n),bt=Ge("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),og=["children","className","reduceAnimations","slideDirection","transKey","classes"],ag=(n,e)=>{const{slideDirection:t}=e,s={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${t}`],exitActive:[`slideExitActiveLeft-${t}`]};return Be(s,rg,n)},lg=Z(Bl,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(n,e)=>[e.root,{[`.${bt["slideEnter-left"]}`]:e["slideEnter-left"]},{[`.${bt["slideEnter-right"]}`]:e["slideEnter-right"]},{[`.${bt.slideEnterActive}`]:e.slideEnterActive},{[`.${bt.slideExit}`]:e.slideExit},{[`.${bt["slideExitActiveLeft-left"]}`]:e["slideExitActiveLeft-left"]},{[`.${bt["slideExitActiveLeft-right"]}`]:e["slideExitActiveLeft-right"]}]})(({theme:n})=>{const e=n.transitions.create("transform",{duration:n.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${bt["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${bt["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${bt.slideEnterActive}`]:{transform:"translate(0%)",transition:e},[`& .${bt.slideExit}`]:{transform:"translate(0%)"},[`& .${bt["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:e,zIndex:0},[`& .${bt["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:e,zIndex:0}}});function cg(n){const e=$e({props:n,name:"MuiPickersSlideTransition"}),{children:t,className:s,reduceAnimations:i,slideDirection:r,transKey:o,classes:a}=e,l=re(e,og),{ownerState:d}=st(),u=_({},d,{slideDirection:r}),h=ag(a,u),f=ji();if(i)return c.jsx("div",{className:et(h.root,s),children:t});const m={exit:h.exit,enterActive:h.enterActive,enter:h.enter,exitActive:h.exitActive};return c.jsx(lg,{className:et(h.root,s),childFactory:p=>v.cloneElement(p,{classNames:m}),role:"presentation",ownerState:u,children:c.jsx(qr,_({mountOnEnter:!0,unmountOnExit:!0,timeout:f.transitions.duration.complex,classNames:m},l,{children:t}),o)})}const dg=n=>qe("MuiDayCalendar",n);Ge("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const ug=["parentProps","day","focusedDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],hg=["ownerState"],fg=n=>Be({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},dg,n),Qc=(Cs+zi*2)*6,mg=Z("div",{name:"MuiDayCalendar",slot:"Root"})({}),pg=Z("div",{name:"MuiDayCalendar",slot:"Header"})({display:"flex",justifyContent:"center",alignItems:"center"}),gg=Z(M,{name:"MuiDayCalendar",slot:"WeekDayLabel"})(({theme:n})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(n.vars||n).palette.text.secondary})),xg=Z(M,{name:"MuiDayCalendar",slot:"WeekNumberLabel"})(({theme:n})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(n.vars||n).palette.text.disabled})),yg=Z(M,{name:"MuiDayCalendar",slot:"WeekNumber"})(({theme:n})=>_({},n.typography.caption,{width:Cs,height:Cs,padding:0,margin:`0 ${zi}px`,color:(n.vars||n).palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),bg=Z("div",{name:"MuiDayCalendar",slot:"LoadingContainer"})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:Qc}),vg=Z(cg,{name:"MuiDayCalendar",slot:"SlideTransition"})({minHeight:Qc}),wg=Z("div",{name:"MuiDayCalendar",slot:"MonthContainer"})({overflow:"hidden"}),Tg=Z("div",{name:"MuiDayCalendar",slot:"WeekContainer"})({margin:`${zi}px 0`,display:"flex",justifyContent:"center"});function Sg(n){let{parentProps:e,day:t,focusedDay:s,selectedDays:i,isDateDisabled:r,currentMonthNumber:o,isViewFocused:a}=n,l=re(n,ug);const{disabled:d,disableHighlightToday:u,isMonthSwitchingAnimating:h,showDaysOutsideCurrentMonth:f,slots:m,slotProps:p,timezone:x}=e,g=Ee(),y=Ni(x),w=s!=null&&g.isSameDay(t,s),T=a&&w,C=i.some(j=>g.isSameDay(j,t)),P=g.isSameDay(t,y),I=v.useMemo(()=>d||r(t),[d,r,t]),O=v.useMemo(()=>g.getMonth(t)!==o,[g,t,o]),b=Gc({day:t,selected:C,disabled:I,today:P,outsideCurrentMonth:O,disableMargin:void 0,disableHighlightToday:u,showDaysOutsideCurrentMonth:f}),k=(m==null?void 0:m.day)??ig,A=Ie({elementType:k,externalSlotProps:p==null?void 0:p.day,additionalProps:_({disableHighlightToday:u,showDaysOutsideCurrentMonth:f,role:"gridcell",isAnimating:h,"data-timestamp":g.toJsDate(t).valueOf()},l),ownerState:_({},b,{day:t,isDayDisabled:I,isDaySelected:C})}),E=re(A,hg),D=v.useMemo(()=>{const j=g.startOfMonth(g.setMonth(t,o));return f?g.isSameDay(t,g.startOfWeek(j)):g.isSameDay(t,j)},[o,t,f,g]),S=v.useMemo(()=>{const j=g.endOfMonth(g.setMonth(t,o));return f?g.isSameDay(t,g.endOfWeek(j)):g.isSameDay(t,j)},[o,t,f,g]);return c.jsx(k,_({},E,{day:t,disabled:I,autoFocus:!O&&T,today:P,outsideCurrentMonth:O,isFirstVisibleCell:D,isLastVisibleCell:S,selected:C,tabIndex:w?0:-1,"aria-selected":C,"aria-current":P?"date":void 0}))}function Pg(n){const e=$e({props:n,name:"MuiDayCalendar"}),t=Ee(),{onFocusedDayChange:s,className:i,classes:r,currentMonth:o,selectedDays:a,focusedDay:l,loading:d,onSelectedDaysChange:u,onMonthSwitchingAnimationEnd:h,readOnly:f,reduceAnimations:m,renderLoading:p=()=>c.jsx("span",{children:"..."}),slideDirection:x,TransitionProps:g,disablePast:y,disableFuture:w,minDate:T,maxDate:C,shouldDisableDate:P,shouldDisableMonth:I,shouldDisableYear:O,dayOfWeekFormatter:b=Y=>t.format(Y,"weekdayShort").charAt(0).toUpperCase(),hasFocus:k,onFocusedViewChange:A,gridLabelId:E,displayWeekNumber:D,fixedWeekNumber:S,timezone:j}=e,R=Ni(j),L=fg(r),$=Jt(),W=Yc({shouldDisableDate:P,shouldDisableMonth:I,shouldDisableYear:O,minDate:T,maxDate:C,disablePast:y,disableFuture:w,timezone:j}),V=cn(),J=G(Y=>{f||u(Y)}),H=Y=>{W(Y)||(s(Y),A==null||A(!0))},ie=G((Y,ee)=>{switch(Y.key){case"ArrowUp":H(t.addDays(ee,-7)),Y.preventDefault();break;case"ArrowDown":H(t.addDays(ee,7)),Y.preventDefault();break;case"ArrowLeft":{const U=t.addDays(ee,$?1:-1),oe=t.addMonths(ee,$?1:-1),fe=Ds({utils:t,date:U,minDate:$?U:t.startOfMonth(oe),maxDate:$?t.endOfMonth(oe):U,isDateDisabled:W,timezone:j});H(fe||U),Y.preventDefault();break}case"ArrowRight":{const U=t.addDays(ee,$?-1:1),oe=t.addMonths(ee,$?-1:1),fe=Ds({utils:t,date:U,minDate:$?t.startOfMonth(oe):U,maxDate:$?U:t.endOfMonth(oe),isDateDisabled:W,timezone:j});H(fe||U),Y.preventDefault();break}case"Home":H(t.startOfWeek(ee)),Y.preventDefault();break;case"End":H(t.endOfWeek(ee)),Y.preventDefault();break;case"PageUp":H(t.addMonths(ee,1)),Y.preventDefault();break;case"PageDown":H(t.addMonths(ee,-1)),Y.preventDefault();break}}),xe=G((Y,ee)=>H(ee)),de=G((Y,ee)=>{l!=null&&t.isSameDay(l,ee)&&(A==null||A(!1))}),Pe=t.getMonth(o),se=t.getYear(o),ve=v.useMemo(()=>a.filter(Y=>!!Y).map(Y=>t.startOfDay(Y)),[t,a]),Re=`${se}-${Pe}`,he=v.useMemo(()=>v.createRef(),[Re]),ne=v.useMemo(()=>{const Y=t.getWeekArray(o);let ee=t.addMonths(o,1);for(;S&&Y.length<S;){const U=t.getWeekArray(ee),oe=t.isSameDay(Y[Y.length-1][0],U[0][0]);U.slice(oe?1:0).forEach(fe=>{Y.length<S&&Y.push(fe)}),ee=t.addMonths(ee,1)}return Y},[o,S,t]);return c.jsxs(mg,{role:"grid","aria-labelledby":E,className:L.root,children:[c.jsxs(pg,{role:"row",className:L.header,children:[D&&c.jsx(xg,{variant:"caption",role:"columnheader","aria-label":V.calendarWeekNumberHeaderLabel,className:L.weekNumberLabel,children:V.calendarWeekNumberHeaderText}),ef(t,R).map((Y,ee)=>c.jsx(gg,{variant:"caption",role:"columnheader","aria-label":t.format(Y,"weekday"),className:L.weekDayLabel,children:b(Y)},ee.toString()))]}),d?c.jsx(bg,{className:L.loadingContainer,children:p()}):c.jsx(vg,_({transKey:Re,onExited:h,reduceAnimations:m,slideDirection:x,className:et(i,L.slideTransition)},g,{nodeRef:he,children:c.jsx(wg,{ref:he,role:"rowgroup",className:L.monthContainer,children:ne.map((Y,ee)=>c.jsxs(Tg,{role:"row",className:L.weekContainer,"aria-rowindex":ee+1,children:[D&&c.jsx(yg,{className:L.weekNumber,role:"rowheader","aria-label":V.calendarWeekNumberAriaLabelText(t.getWeekNumber(Y[0])),children:V.calendarWeekNumberText(t.getWeekNumber(Y[0]))}),Y.map((U,oe)=>c.jsx(Sg,{parentProps:e,day:U,selectedDays:ve,isViewFocused:k,focusedDay:l,onKeyDown:ie,onFocus:xe,onBlur:de,onDaySelect:J,isDateDisabled:W,currentMonthNumber:Pe,"aria-colindex":oe+1},U.toString()))]},`week-${Y[0]}`))})}))]})}function Kc(n){return qe("MuiMonthCalendar",n)}const Ys=Ge("MuiMonthCalendar",["root","button","disabled","selected"]),Dg=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],Cg=(n,e)=>{const t={button:["button",e.isMonthDisabled&&"disabled",e.isMonthSelected&&"selected"]};return Be(t,Kc,n)},Mg=Z("button",{name:"MuiMonthCalendar",slot:"Button",overridesResolver:(n,e)=>[e.button,{[`&.${Ys.disabled}`]:e.disabled},{[`&.${Ys.selected}`]:e.selected}]})(({theme:n})=>_({color:"unset",backgroundColor:"transparent",border:0,outline:0},n.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Gn(n.palette.action.active,n.palette.action.hoverOpacity)},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Gn(n.palette.action.active,n.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Ys.disabled}`]:{color:(n.vars||n).palette.text.secondary},[`&.${Ys.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,"&:focus, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}}})),kg=v.memo(function(e){const{autoFocus:t,classes:s,disabled:i,selected:r,value:o,onClick:a,onKeyDown:l,onFocus:d,onBlur:u,slots:h,slotProps:f}=e,m=re(e,Dg),p=v.useRef(null),{ownerState:x}=st(),g=_({},x,{isMonthDisabled:i,isMonthSelected:r}),y=Cg(s,g);Kt(()=>{var C;t&&((C=p.current)==null||C.focus())},[t]);const w=(h==null?void 0:h.monthButton)??Mg,T=Ie({elementType:w,externalSlotProps:f==null?void 0:f.monthButton,externalForwardedProps:m,additionalProps:{disabled:i,ref:p,type:"button",role:"radio","aria-checked":r,onClick:C=>a(C,o),onKeyDown:C=>l(C,o),onFocus:C=>d(C,o),onBlur:C=>u(C,o)},ownerState:g,className:y.button});return c.jsx(w,_({},T))}),Ig=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"],jg=n=>Be({root:["root"]},Kc,n);function _g(n,e){const t=$e({props:n,name:e}),s=Es(t);return _({},t,s,{monthsPerRow:t.monthsPerRow??3})}const Rg=Z("div",{name:"MuiMonthCalendar",slot:"Root",shouldForwardProp:n=>Pn(n)&&n!=="monthsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:16,padding:"8px 0",width:Bi,boxSizing:"border-box",variants:[{props:{monthsPerRow:3},style:{columnGap:24}},{props:{monthsPerRow:4},style:{columnGap:0}}]}),Og=v.forwardRef(function(e,t){const s=_g(e,"MuiMonthCalendar"),{autoFocus:i,className:r,classes:o,value:a,defaultValue:l,referenceDate:d,disabled:u,disableFuture:h,disablePast:f,maxDate:m,minDate:p,onChange:x,shouldDisableMonth:g,readOnly:y,onMonthFocus:w,hasFocus:T,onFocusedViewChange:C,monthsPerRow:P,timezone:I,gridLabelId:O,slots:b,slotProps:k}=s,A=re(s,Ig),{value:E,handleValueChange:D,timezone:S}=Fs({name:"MonthCalendar",timezone:I,value:a,defaultValue:l,referenceDate:d,onChange:x,valueManager:Ht}),j=Ni(S),R=Jt(),L=Ee(),{ownerState:$}=st(),W=v.useMemo(()=>Ht.getInitialReferenceValue({value:E,utils:L,props:s,timezone:S,referenceDate:d,granularity:Nt.month}),[]),V=jg(o),J=v.useMemo(()=>L.getMonth(j),[L,j]),H=v.useMemo(()=>E!=null?L.getMonth(E):null,[E,L]),[ie,xe]=v.useState(()=>H||L.getMonth(W)),[de,Pe]=Un({name:"MonthCalendar",state:"hasFocus",controlled:T,default:i??!1}),se=G(U=>{Pe(U),C&&C(U)}),ve=v.useCallback(U=>{const oe=L.startOfMonth(f&&L.isAfter(j,p)?j:p),fe=L.startOfMonth(h&&L.isBefore(j,m)?j:m),Q=L.startOfMonth(U);return L.isBefore(Q,oe)||L.isAfter(Q,fe)?!0:g?g(Q):!1},[h,f,m,p,j,g,L]),Re=G((U,oe)=>{if(y)return;const fe=L.setMonth(E??W,oe);D(fe)}),he=G(U=>{ve(L.setMonth(E??W,U))||(xe(U),se(!0),w&&w(U))});v.useEffect(()=>{xe(U=>H!==null&&U!==H?H:U)},[H]);const ne=G((U,oe)=>{switch(U.key){case"ArrowUp":he((12+oe-3)%12),U.preventDefault();break;case"ArrowDown":he((12+oe+3)%12),U.preventDefault();break;case"ArrowLeft":he((12+oe+(R?1:-1))%12),U.preventDefault();break;case"ArrowRight":he((12+oe+(R?-1:1))%12),U.preventDefault();break}}),Y=G((U,oe)=>{he(oe)}),ee=G((U,oe)=>{ie===oe&&se(!1)});return c.jsx(Rg,_({ref:t,className:et(V.root,r),ownerState:$,role:"radiogroup","aria-labelledby":O,monthsPerRow:P},A,{children:Xr(L,E??W).map(U=>{const oe=L.getMonth(U),fe=L.format(U,"monthShort"),Q=L.format(U,"month"),we=oe===H,X=u||ve(U);return c.jsx(kg,{selected:we,value:oe,onClick:Re,onKeyDown:ne,autoFocus:de&&oe===ie,disabled:X,tabIndex:oe===ie&&!X?0:-1,onFocus:Y,onBlur:ee,"aria-current":J===oe?"date":void 0,"aria-label":Q,slots:b,slotProps:k,classes:o,children:fe},fe)})}))});function Zc(n){return qe("MuiYearCalendar",n)}const Us=Ge("MuiYearCalendar",["root","button","disabled","selected"]),Ag=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],Eg=(n,e)=>{const t={button:["button",e.isYearDisabled&&"disabled",e.isYearSelected&&"selected"]};return Be(t,Zc,n)},Fg=Z("button",{name:"MuiYearCalendar",slot:"Button",overridesResolver:(n,e)=>[e.button,{[`&.${Us.disabled}`]:e.disabled},{[`&.${Us.selected}`]:e.selected}]})(({theme:n})=>_({color:"unset",backgroundColor:"transparent",border:0,outline:0},n.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.focusOpacity})`:Gn(n.palette.action.active,n.palette.action.focusOpacity)},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Gn(n.palette.action.active,n.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Us.disabled}`]:{color:(n.vars||n).palette.text.secondary},[`&.${Us.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,"&:focus, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}}})),Lg=v.memo(function(e){const{autoFocus:t,classes:s,disabled:i,selected:r,value:o,onClick:a,onKeyDown:l,onFocus:d,onBlur:u,slots:h,slotProps:f}=e,m=re(e,Ag),p=v.useRef(null),{ownerState:x}=st(),g=_({},x,{isYearDisabled:i,isYearSelected:r}),y=Eg(s,g);Kt(()=>{var C;t&&((C=p.current)==null||C.focus())},[t]);const w=(h==null?void 0:h.yearButton)??Fg,T=Ie({elementType:w,externalSlotProps:f==null?void 0:f.yearButton,externalForwardedProps:m,additionalProps:{disabled:i,ref:p,type:"button",role:"radio","aria-checked":r,onClick:C=>a(C,o),onKeyDown:C=>l(C,o),onFocus:C=>d(C,o),onBlur:C=>u(C,o)},ownerState:g,className:y.button});return c.jsx(w,_({},T))}),Ng=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"],zg=n=>Be({root:["root"]},Zc,n);function Bg(n,e){const t=$e({props:n,name:e}),s=Es(t);return _({},t,s,{yearsPerRow:t.yearsPerRow??3,yearsOrder:t.yearsOrder??"asc"})}const $g=Z("div",{name:"MuiYearCalendar",slot:"Root",shouldForwardProp:n=>Pn(n)&&n!=="yearsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:12,padding:"6px 0",overflowY:"auto",height:"100%",width:Bi,maxHeight:gm,boxSizing:"border-box",position:"relative",variants:[{props:{yearsPerRow:3},style:{columnGap:24}},{props:{yearsPerRow:4},style:{columnGap:0,padding:"0 2px"}}]}),Vg=Z("div",{name:"MuiYearCalendar",slot:"ButtonFiller"})({height:36,width:72}),Wg=v.forwardRef(function(e,t){const s=Bg(e,"MuiYearCalendar"),{autoFocus:i,className:r,classes:o,value:a,defaultValue:l,referenceDate:d,disabled:u,disableFuture:h,disablePast:f,maxDate:m,minDate:p,onChange:x,readOnly:g,shouldDisableYear:y,onYearFocus:w,hasFocus:T,onFocusedViewChange:C,yearsOrder:P,yearsPerRow:I,timezone:O,gridLabelId:b,slots:k,slotProps:A}=s,E=re(s,Ng),{value:D,handleValueChange:S,timezone:j}=Fs({name:"YearCalendar",timezone:O,value:a,defaultValue:l,referenceDate:d,onChange:x,valueManager:Ht}),R=Ni(j),L=Jt(),$=Ee(),{ownerState:W}=st(),V=v.useMemo(()=>Ht.getInitialReferenceValue({value:D,utils:$,props:s,timezone:j,referenceDate:d,granularity:Nt.year}),[]),J=zg(o),H=v.useMemo(()=>$.getYear(R),[$,R]),ie=v.useMemo(()=>D!=null?$.getYear(D):null,[D,$]),[xe,de]=v.useState(()=>ie||$.getYear(V)),[Pe,se]=Un({name:"YearCalendar",state:"hasFocus",controlled:T,default:i??!1}),ve=G(te=>{se(te),C&&C(te)}),Re=v.useCallback(te=>{if(f&&$.isBeforeYear(te,R)||h&&$.isAfterYear(te,R)||p&&$.isBeforeYear(te,p)||m&&$.isAfterYear(te,m))return!0;if(!y)return!1;const le=$.startOfYear(te);return y(le)},[h,f,m,p,R,y,$]),he=G((te,le)=>{if(g)return;const nt=$.setYear(D??V,le);S(nt)}),ne=G(te=>{Re($.setYear(D??V,te))||(de(te),ve(!0),w==null||w(te))});v.useEffect(()=>{de(te=>ie!==null&&te!==ie?ie:te)},[ie]);const Y=P!=="desc"?I*1:I*-1,ee=L&&P==="asc"||!L&&P==="desc"?-1:1,U=G((te,le)=>{switch(te.key){case"ArrowUp":ne(le-Y),te.preventDefault();break;case"ArrowDown":ne(le+Y),te.preventDefault();break;case"ArrowLeft":ne(le-ee),te.preventDefault();break;case"ArrowRight":ne(le+ee),te.preventDefault();break}}),oe=G((te,le)=>{ne(le)}),fe=G((te,le)=>{xe===le&&ve(!1)}),Q=v.useRef(null),we=gt(t,Q);v.useEffect(()=>{if(i||Q.current===null)return;const te=Q.current.querySelector('[tabindex="0"]');if(!te)return;const le=te.offsetHeight,nt=te.offsetTop,Xe=Q.current.clientHeight,ht=Q.current.scrollTop,ct=nt+le;le>Xe||nt<ht||(Q.current.scrollTop=ct-Xe/2-le/2)},[i]);const X=$.getYearRange([p,m]);P==="desc"&&X.reverse();let ae=I-X.length%I;return ae===I&&(ae=0),c.jsxs($g,_({ref:we,className:et(J.root,r),ownerState:W,role:"radiogroup","aria-labelledby":b,yearsPerRow:I},E,{children:[X.map(te=>{const le=$.getYear(te),nt=le===ie,Xe=u||Re(te);return c.jsx(Lg,{selected:nt,value:le,onClick:he,onKeyDown:U,autoFocus:Pe&&le===xe,disabled:Xe,tabIndex:le===xe&&!Xe?0:-1,onFocus:oe,onBlur:fe,"aria-current":H===le?"date":void 0,slots:k,slotProps:A,classes:o,children:$.format(te,"year")},$.format(te,"year"))}),Array.from({length:ae},(te,le)=>c.jsx(Vg,{},le))]}))}),Hg=n=>qe("MuiPickersCalendarHeader",n),Yg=Ge("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]);function Ug(n){return qe("MuiPickersArrowSwitcher",n)}Ge("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const Gg=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId","classes"],qg=["ownerState"],Xg=["ownerState"],Qg=Z("div",{name:"MuiPickersArrowSwitcher",slot:"Root"})({display:"flex"}),Kg=Z("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer"})(({theme:n})=>({width:n.spacing(3)})),la=Z(an,{name:"MuiPickersArrowSwitcher",slot:"Button"})({variants:[{props:{isButtonHidden:!0},style:{visibility:"hidden"}}]}),Zg=n=>Be({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},Ug,n),Jg=v.forwardRef(function(e,t){const s=Jt(),i=$e({props:e,name:"MuiPickersArrowSwitcher"}),{children:r,className:o,slots:a,slotProps:l,isNextDisabled:d,isNextHidden:u,onGoToNext:h,nextLabel:f,isPreviousDisabled:m,isPreviousHidden:p,onGoToPrevious:x,previousLabel:g,labelId:y,classes:w}=i,T=re(i,Gg),{ownerState:C}=st(),P=Zg(w),I={isDisabled:d,isHidden:u,goTo:h,label:f},O={isDisabled:m,isHidden:p,goTo:x,label:g},b=(a==null?void 0:a.previousIconButton)??la,k=Ie({elementType:b,externalSlotProps:l==null?void 0:l.previousIconButton,additionalProps:{size:"medium",title:O.label,"aria-label":O.label,disabled:O.isDisabled,edge:"end",onClick:O.goTo},ownerState:_({},C,{isButtonHidden:O.isHidden??!1}),className:et(P.button,P.previousIconButton)}),A=(a==null?void 0:a.nextIconButton)??la,E=Ie({elementType:A,externalSlotProps:l==null?void 0:l.nextIconButton,additionalProps:{size:"medium",title:I.label,"aria-label":I.label,disabled:I.isDisabled,edge:"start",onClick:I.goTo},ownerState:_({},C,{isButtonHidden:I.isHidden??!1}),className:et(P.button,P.nextIconButton)}),D=(a==null?void 0:a.leftArrowIcon)??Im,S=Ie({elementType:D,externalSlotProps:l==null?void 0:l.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:C,className:P.leftArrowIcon}),j=re(S,qg),R=(a==null?void 0:a.rightArrowIcon)??jm,L=Ie({elementType:R,externalSlotProps:l==null?void 0:l.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:C,className:P.rightArrowIcon}),$=re(L,Xg);return c.jsxs(Qg,_({ref:t,className:et(P.root,o),ownerState:C},T,{children:[c.jsx(b,_({},k,{children:s?c.jsx(R,_({},$)):c.jsx(D,_({},j))})),r?c.jsx(M,{variant:"subtitle1",component:"span",id:y,children:r}):c.jsx(Kg,{className:P.spacer,ownerState:C}),c.jsx(A,_({},E,{children:s?c.jsx(D,_({},j)):c.jsx(R,_({},$))}))]}))});function ex(n,{disableFuture:e,maxDate:t,timezone:s}){const i=Ee();return v.useMemo(()=>{const r=i.date(void 0,s),o=i.startOfMonth(e&&i.isBefore(r,t)?r:t);return!i.isAfter(o,n)},[e,t,n,i,s])}function tx(n,{disablePast:e,minDate:t,timezone:s}){const i=Ee();return v.useMemo(()=>{const r=i.date(void 0,s),o=i.startOfMonth(e&&i.isAfter(r,t)?r:t);return!i.isBefore(o,n)},[e,t,n,i,s])}const nx=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","classes","timezone","format"],sx=["ownerState"],ix=n=>Be({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},Hg,n),rx=Z("div",{name:"MuiPickersCalendarHeader",slot:"Root"})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),ox=Z("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer"})(({theme:n})=>_({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},n.typography.body1,{fontWeight:n.typography.fontWeightMedium})),ax=Z("div",{name:"MuiPickersCalendarHeader",slot:"Label"})({marginRight:6}),lx=Z(an,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton"})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${Yg.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),cx=Z(km,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon"})(({theme:n})=>({willChange:"transform",transition:n.transitions.create("transform"),transform:"rotate(0deg)"})),dx=v.forwardRef(function(e,t){const s=cn(),i=Ee(),r=$e({props:e,name:"MuiPickersCalendarHeader"}),{slots:o,slotProps:a,currentMonth:l,disabled:d,disableFuture:u,disablePast:h,maxDate:f,minDate:m,onMonthChange:p,onViewChange:x,view:g,reduceAnimations:y,views:w,labelId:T,className:C,classes:P,timezone:I,format:O=`${i.formats.month} ${i.formats.year}`}=r,b=re(r,nx),{ownerState:k}=st(),A=ix(P),E=(o==null?void 0:o.switchViewButton)??lx,D=Ie({elementType:E,externalSlotProps:a==null?void 0:a.switchViewButton,additionalProps:{size:"small","aria-label":s.calendarViewSwitchingButtonAriaLabel(g)},ownerState:k,className:A.switchViewButton}),S=(o==null?void 0:o.switchViewIcon)??cx,j=Ie({elementType:S,externalSlotProps:a==null?void 0:a.switchViewIcon,ownerState:k,className:A.switchViewIcon}),R=re(j,sx),L=()=>p(i.addMonths(l,1)),$=()=>p(i.addMonths(l,-1)),W=ex(l,{disableFuture:u,maxDate:f,timezone:I}),V=tx(l,{disablePast:h,minDate:m,timezone:I}),J=()=>{if(!(w.length===1||!x||d))if(w.length===2)x(w.find(ie=>ie!==g)||w[0]);else{const ie=w.indexOf(g)!==0?0:1;x(w[ie])}};if(w.length===1&&w[0]==="year")return null;const H=i.formatByString(l,O);return c.jsxs(rx,_({},b,{ownerState:k,className:et(A.root,C),ref:t,children:[c.jsxs(ox,{role:"presentation",onClick:J,ownerState:k,"aria-live":"polite",className:A.labelContainer,children:[c.jsx(Uc,{reduceAnimations:y,transKey:H,children:c.jsx(ax,{id:T,ownerState:k,className:A.label,children:H})}),w.length>1&&!d&&c.jsx(E,_({},D,{children:c.jsx(S,_({},R))}))]}),c.jsx(_i,{in:g==="day",appear:!y,enter:!y,children:c.jsx(Jg,{slots:o,slotProps:a,onGoToPrevious:$,isPreviousDisabled:V,previousLabel:s.previousMonth,onGoToNext:L,isNextDisabled:W,nextLabel:s.nextMonth})})]}))}),ux=Z("div")({overflow:"hidden",width:Bi,maxHeight:no,display:"flex",flexDirection:"column",margin:"0 auto"}),hx=n=>qe("MuiDateCalendar",n);Ge("MuiDateCalendar",["root","viewTransitionContainer"]);const fx=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","classes","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"],mx=n=>Be({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},hx,n);function px(n,e){const t=$e({props:n,name:e}),s=Sc(t.reduceAnimations),i=Es(t);return _({},t,i,{loading:t.loading??!1,openTo:t.openTo??"day",views:t.views??["year","day"],reduceAnimations:s,renderLoading:t.renderLoading??(()=>c.jsx("span",{children:"..."}))})}const gx=Z(ux,{name:"MuiDateCalendar",slot:"Root"})({display:"flex",flexDirection:"column",height:no}),xx=Z(Uc,{name:"MuiDateCalendar",slot:"ViewTransitionContainer"})({}),yx=v.forwardRef(function(e,t){const s=Ee(),{ownerState:i}=st(),r=Ri(),o=px(e,"MuiDateCalendar"),{autoFocus:a,onViewChange:l,value:d,defaultValue:u,referenceDate:h,disableFuture:f,disablePast:m,onChange:p,onMonthChange:x,reduceAnimations:g,shouldDisableDate:y,shouldDisableMonth:w,shouldDisableYear:T,view:C,views:P,openTo:I,className:O,classes:b,disabled:k,readOnly:A,minDate:E,maxDate:D,disableHighlightToday:S,focusedView:j,onFocusedViewChange:R,showDaysOutsideCurrentMonth:L,fixedWeekNumber:$,dayOfWeekFormatter:W,slots:V,slotProps:J,loading:H,renderLoading:ie,displayWeekNumber:xe,yearsOrder:de,yearsPerRow:Pe,monthsPerRow:se,timezone:ve}=o,Re=re(o,fx),{value:he,handleValueChange:ne,timezone:Y}=Fs({name:"DateCalendar",timezone:ve,value:d,defaultValue:u,referenceDate:h,onChange:p,valueManager:Ht}),{view:ee,setView:U,focusedView:oe,setFocusedView:fe,goToNextView:Q,setValueAndGoToNextView:we}=Dc({view:C,views:P,openTo:I,onChange:ne,onViewChange:l,autoFocus:a,focusedView:j,onFocusedViewChange:R}),{referenceDate:X,calendarState:ae,setVisibleDate:te,isDateDisabled:le,onMonthSwitchingAnimationEnd:nt}=Gp({value:he,referenceDate:h,reduceAnimations:g,onMonthChange:x,minDate:E,maxDate:D,shouldDisableDate:y,disablePast:m,disableFuture:f,timezone:Y,getCurrentMonthFromVisibleDate:(ye,Ze)=>s.isSameMonth(ye,Ze)?Ze:s.startOfMonth(ye)}),Xe=k&&he||E,ht=k&&he||D,ct=`${r}-grid-label`,Rt=oe!==null,kn=(V==null?void 0:V.calendarHeader)??dx,In=Ie({elementType:kn,externalSlotProps:J==null?void 0:J.calendarHeader,additionalProps:{views:P,view:ee,currentMonth:ae.currentMonth,onViewChange:U,onMonthChange:ye=>te({target:ye,reason:"header-navigation"}),minDate:Xe,maxDate:ht,disabled:k,disablePast:m,disableFuture:f,reduceAnimations:g,timezone:Y,labelId:ct},ownerState:i}),me=G(ye=>{const Ze=s.startOfMonth(ye),dt=s.endOfMonth(ye),Pt=le(ye)?Ds({utils:s,date:ye,minDate:s.isBefore(E,Ze)?Ze:E,maxDate:s.isAfter(D,dt)?dt:D,disablePast:m,disableFuture:f,isDateDisabled:le,timezone:Y}):ye;Pt?(we(Pt,"finish"),te({target:Pt,reason:"cell-interaction"})):(Q(),te({target:Ze,reason:"cell-interaction"}))}),pe=G(ye=>{const Ze=s.startOfYear(ye),dt=s.endOfYear(ye),Pt=le(ye)?Ds({utils:s,date:ye,minDate:s.isBefore(E,Ze)?Ze:E,maxDate:s.isAfter(D,dt)?dt:D,disablePast:m,disableFuture:f,isDateDisabled:le,timezone:Y}):ye;Pt?(we(Pt,"finish"),te({target:Pt,reason:"cell-interaction"})):(Q(),te({target:Ze,reason:"cell-interaction"}))}),ke=G(ye=>ne(ye&&gi(s,ye,he??X),"finish",ee));v.useEffect(()=>{s.isValid(he)&&te({target:he,reason:"controlled-value-change"})},[he]);const Fe=mx(b),it={disablePast:m,disableFuture:f,maxDate:D,minDate:E},Qe={disableHighlightToday:S,readOnly:A,disabled:k,timezone:Y,gridLabelId:ct,slots:V,slotProps:J},xt=v.useRef(ee);v.useEffect(()=>{xt.current!==ee&&(oe===xt.current&&fe(ee,!0),xt.current=ee)},[oe,fe,ee]);const Ke=v.useMemo(()=>[he],[he]);return c.jsxs(gx,_({ref:t,className:et(Fe.root,O),ownerState:i},Re,{children:[c.jsx(kn,_({},In,{slots:V,slotProps:J})),c.jsx(xx,{reduceAnimations:g,className:Fe.viewTransitionContainer,transKey:ee,ownerState:i,children:c.jsxs("div",{children:[ee==="year"&&c.jsx(Wg,_({},it,Qe,{value:he,onChange:pe,shouldDisableYear:T,hasFocus:Rt,onFocusedViewChange:ye=>fe("year",ye),yearsOrder:de,yearsPerRow:Pe,referenceDate:X})),ee==="month"&&c.jsx(Og,_({},it,Qe,{hasFocus:Rt,className:O,value:he,onChange:me,shouldDisableMonth:w,onFocusedViewChange:ye=>fe("month",ye),monthsPerRow:se,referenceDate:X})),ee==="day"&&c.jsx(Pg,_({},ae,it,Qe,{onMonthSwitchingAnimationEnd:nt,hasFocus:Rt,onFocusedDayChange:ye=>te({target:ye,reason:"cell-interaction"}),reduceAnimations:g,selectedDays:Ke,onSelectedDaysChange:ke,shouldDisableDate:y,shouldDisableMonth:w,shouldDisableYear:T,onFocusedViewChange:ye=>fe("day",ye),showDaysOutsideCurrentMonth:L,fixedWeekNumber:$,dayOfWeekFormatter:W,displayWeekNumber:xe,loading:H,renderLoading:ie}))]})})]}))}),Vn=({view:n,onViewChange:e,views:t,focusedView:s,onFocusedViewChange:i,value:r,defaultValue:o,referenceDate:a,onChange:l,className:d,classes:u,disableFuture:h,disablePast:f,minDate:m,maxDate:p,shouldDisableDate:x,shouldDisableMonth:g,shouldDisableYear:y,reduceAnimations:w,onMonthChange:T,monthsPerRow:C,onYearChange:P,yearsOrder:I,yearsPerRow:O,slots:b,slotProps:k,loading:A,renderLoading:E,disableHighlightToday:D,readOnly:S,disabled:j,showDaysOutsideCurrentMonth:R,dayOfWeekFormatter:L,sx:$,autoFocus:W,fixedWeekNumber:V,displayWeekNumber:J,timezone:H})=>c.jsx(yx,{view:n,onViewChange:e,views:t.filter(Uo),focusedView:s&&Uo(s)?s:null,onFocusedViewChange:i,value:r,defaultValue:o,referenceDate:a,onChange:l,className:d,classes:u,disableFuture:h,disablePast:f,minDate:m,maxDate:p,shouldDisableDate:x,shouldDisableMonth:g,shouldDisableYear:y,reduceAnimations:w,onMonthChange:T,monthsPerRow:C,onYearChange:P,yearsOrder:I,yearsPerRow:O,slots:b,slotProps:k,loading:A,renderLoading:E,disableHighlightToday:D,readOnly:S,disabled:j,showDaysOutsideCurrentMonth:R,dayOfWeekFormatter:L,sx:$,autoFocus:W,fixedWeekNumber:V,displayWeekNumber:J,timezone:H}),Jc=v.forwardRef(function(e,t){var l;const s=Ee(),i=Tc(e,"MuiDesktopDatePicker"),r=_({day:Vn,month:Vn,year:Vn},i.viewRenderers),o=_({},i,{closeOnSelect:i.closeOnSelect??!0,viewRenderers:r,format:Qr(s,i,!1),yearsPerRow:i.yearsPerRow??4,slots:_({field:Hc},i.slots),slotProps:_({},i.slotProps,{field:d=>{var u;return _({},pi((u=i.slotProps)==null?void 0:u.field,d),bc(i))},toolbar:_({hidden:!0},(l=i.slotProps)==null?void 0:l.toolbar)})}),{renderPicker:a}=jp({ref:t,props:o,valueManager:Ht,valueType:"date",validator:As,steps:null});return a()});Jc.propTypes={autoFocus:N.bool,className:N.string,closeOnSelect:N.bool,dayOfWeekFormatter:N.func,defaultValue:N.object,disabled:N.bool,disableFuture:N.bool,disableHighlightToday:N.bool,disableOpenPicker:N.bool,disablePast:N.bool,displayWeekNumber:N.bool,enableAccessibleFieldDOMStructure:N.any,fixedWeekNumber:N.number,format:N.string,formatDensity:N.oneOf(["dense","spacious"]),inputRef:Ql,label:N.node,loading:N.bool,localeText:N.object,maxDate:N.object,minDate:N.object,monthsPerRow:N.oneOf([3,4]),name:N.string,onAccept:N.func,onChange:N.func,onClose:N.func,onError:N.func,onMonthChange:N.func,onOpen:N.func,onSelectedSectionsChange:N.func,onViewChange:N.func,onYearChange:N.func,open:N.bool,openTo:N.oneOf(["day","month","year"]),orientation:N.oneOf(["landscape","portrait"]),readOnly:N.bool,reduceAnimations:N.bool,referenceDate:N.object,renderLoading:N.func,selectedSections:N.oneOfType([N.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),N.number]),shouldDisableDate:N.func,shouldDisableMonth:N.func,shouldDisableYear:N.func,showDaysOutsideCurrentMonth:N.bool,slotProps:N.object,slots:N.object,sx:N.oneOfType([N.arrayOf(N.oneOfType([N.func,N.object,N.bool])),N.func,N.object]),timezone:N.string,value:N.object,view:N.oneOf(["day","month","year"]),viewRenderers:N.shape({day:N.func,month:N.func,year:N.func}),views:N.arrayOf(N.oneOf(["day","month","year"]).isRequired),yearsOrder:N.oneOf(["asc","desc"]),yearsPerRow:N.oneOf([3,4])};const bx=Z(Ai)({[`& .${Lo.container}`]:{outline:0},[`& .${Lo.paper}`]:{outline:0,minWidth:Bi}}),vx=Z(Ei)({"&:first-of-type":{padding:0}});function wx(n){const{children:e,slots:t,slotProps:s}=n,{open:i}=Jn(),{dismissViews:r}=st(),o=(t==null?void 0:t.dialog)??bx,a=(t==null?void 0:t.mobileTransition)??_i;return c.jsx(o,_({open:i,onClose:r},s==null?void 0:s.dialog,{TransitionComponent:a,TransitionProps:s==null?void 0:s.mobileTransition,PaperComponent:t==null?void 0:t.mobilePaper,PaperProps:s==null?void 0:s.mobilePaper,children:c.jsx(vx,{children:e})}))}const Tx=["props","steps"],Sx=["ownerState"],Px=n=>{var I;let{props:e,steps:t}=n,s=re(n,Tx);const{slots:i,slotProps:r,label:o,inputRef:a,localeText:l}=e,d=zc({steps:t}),{providerProps:u,renderCurrentView:h,ownerState:f}=Cc(_({},s,{props:e,localeText:l,autoFocusView:!0,viewContainerRole:"dialog",variant:"mobile",getStepNavigation:d})),m=u.privateContextValue.labelId,p=((I=r==null?void 0:r.toolbar)==null?void 0:I.hidden)??!1,x=i.field,g=Ie({elementType:x,externalSlotProps:r==null?void 0:r.field,additionalProps:_({},p&&{id:m}),ownerState:f}),y=re(g,Sx),w=i.layout??kc;let T=m;p&&(o?T=`${m}-label`:T=void 0);const C=_({},r,{toolbar:_({},r==null?void 0:r.toolbar,{titleId:m}),mobilePaper:_({"aria-labelledby":T},r==null?void 0:r.mobilePaper)});return{renderPicker:()=>c.jsx(pc,_({},u,{children:c.jsxs(Nc,{slots:i,slotProps:C,inputRef:a,children:[c.jsx(x,_({},y)),c.jsx(wx,{slots:i,slotProps:C,children:c.jsx(w,_({},C==null?void 0:C.layout,{slots:i,slotProps:C,children:h()}))})]})}))}},ed=v.forwardRef(function(e,t){var l;const s=Ee(),i=Tc(e,"MuiMobileDatePicker"),r=_({day:Vn,month:Vn,year:Vn},i.viewRenderers),o=_({},i,{viewRenderers:r,format:Qr(s,i,!1),slots:_({field:Hc},i.slots),slotProps:_({},i.slotProps,{field:d=>{var u;return _({},pi((u=i.slotProps)==null?void 0:u.field,d),bc(i))},toolbar:_({hidden:!1},(l=i.slotProps)==null?void 0:l.toolbar)})}),{renderPicker:a}=Px({ref:t,props:o,valueManager:Ht,valueType:"date",validator:As,steps:null});return a()});ed.propTypes={autoFocus:N.bool,className:N.string,closeOnSelect:N.bool,dayOfWeekFormatter:N.func,defaultValue:N.object,disabled:N.bool,disableFuture:N.bool,disableHighlightToday:N.bool,disableOpenPicker:N.bool,disablePast:N.bool,displayWeekNumber:N.bool,enableAccessibleFieldDOMStructure:N.any,fixedWeekNumber:N.number,format:N.string,formatDensity:N.oneOf(["dense","spacious"]),inputRef:Ql,label:N.node,loading:N.bool,localeText:N.object,maxDate:N.object,minDate:N.object,monthsPerRow:N.oneOf([3,4]),name:N.string,onAccept:N.func,onChange:N.func,onClose:N.func,onError:N.func,onMonthChange:N.func,onOpen:N.func,onSelectedSectionsChange:N.func,onViewChange:N.func,onYearChange:N.func,open:N.bool,openTo:N.oneOf(["day","month","year"]),orientation:N.oneOf(["landscape","portrait"]),readOnly:N.bool,reduceAnimations:N.bool,referenceDate:N.object,renderLoading:N.func,selectedSections:N.oneOfType([N.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),N.number]),shouldDisableDate:N.func,shouldDisableMonth:N.func,shouldDisableYear:N.func,showDaysOutsideCurrentMonth:N.bool,slotProps:N.object,slots:N.object,sx:N.oneOfType([N.arrayOf(N.oneOfType([N.func,N.object,N.bool])),N.func,N.object]),timezone:N.string,value:N.object,view:N.oneOf(["day","month","year"]),viewRenderers:N.shape({day:N.func,month:N.func,year:N.func}),views:N.arrayOf(N.oneOf(["day","month","year"]).isRequired),yearsOrder:N.oneOf(["asc","desc"]),yearsPerRow:N.oneOf([3,4])};const Dx=["desktopModeMediaQuery"],ca=v.forwardRef(function(e,t){const s=$e({props:e,name:"MuiDatePicker"}),{desktopModeMediaQuery:i=Kf}=s,r=re(s,Dx);return Xl(i,{defaultMatches:!0})?c.jsx(Jc,_({ref:t},r)):c.jsx(ed,_({ref:t},r))}),td=6048e5,Cx=864e5,Ls=6e4,Ns=36e5,Mx=1e3,da=Symbol.for("constructDateFrom");function Ae(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&da in n?n[da](e):n instanceof Date?new n.constructor(e):new Date(e)}function q(n,e){return Ae(e||n,n)}function zs(n,e,t){const s=q(n,t==null?void 0:t.in);return isNaN(e)?Ae((t==null?void 0:t.in)||n,NaN):(e&&s.setDate(s.getDate()+e),s)}function lo(n,e,t){return Ae(n,+q(n)+e)}function nd(n,e,t){return lo(n,e*1e3)}function sd(n,e,t){const s=q(n,t==null?void 0:t.in);return s.setTime(s.getTime()+e*Ls),s}function id(n,e,t){return lo(n,e*Ns)}function rd(n,e,t){return zs(n,e*7,t)}function Wi(n,e,t){const s=q(n,t==null?void 0:t.in);if(isNaN(e))return Ae(n,NaN);if(!e)return s;const i=s.getDate(),r=Ae(n,s.getTime());r.setMonth(s.getMonth()+e+1,0);const o=r.getDate();return i>=o?r:(s.setFullYear(r.getFullYear(),r.getMonth(),i),s)}function od(n,e,t){return Wi(n,e*12,t)}function xi(n,e){const t=q(n,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}let kx={};function Cn(){return kx}function ad(n,e){var a,l,d,u;const t=Cn(),s=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(d=t.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,i=q(n,e==null?void 0:e.in),r=i.getDay(),o=(r<s?-7:0)+6-(r-s);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function Ir(n,e){const t=q(n,e==null?void 0:e.in),s=t.getFullYear();return t.setFullYear(s+1,0,0),t.setHours(23,59,59,999),t}const Ix={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jx=(n,e,t)=>{let s;const i=Ix[n];return typeof i=="string"?s=i:e===1?s=i.one:s=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function rr(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const _x={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Rx={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ox={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ax={date:rr({formats:_x,defaultWidth:"full"}),time:rr({formats:Rx,defaultWidth:"full"}),dateTime:rr({formats:Ox,defaultWidth:"full"})},Ex={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Fx=(n,e,t,s)=>Ex[n];function as(n){return(e,t)=>{const s=t!=null&&t.context?String(t.context):"standalone";let i;if(s==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):o;i=n.formattingValues[a]||n.formattingValues[o]}else{const o=n.defaultWidth,a=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[a]||n.values[o]}const r=n.argumentCallback?n.argumentCallback(e):e;return i[r]}}const Lx={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Nx={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},zx={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Bx={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$x={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Vx={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Wx=(n,e)=>{const t=Number(n),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Hx={ordinalNumber:Wx,era:as({values:Lx,defaultWidth:"wide"}),quarter:as({values:Nx,defaultWidth:"wide",argumentCallback:n=>n-1}),month:as({values:zx,defaultWidth:"wide"}),day:as({values:Bx,defaultWidth:"wide"}),dayPeriod:as({values:$x,defaultWidth:"wide",formattingValues:Vx,defaultFormattingWidth:"wide"})};function ls(n){return(e,t={})=>{const s=t.width,i=s&&n.matchPatterns[s]||n.matchPatterns[n.defaultMatchWidth],r=e.match(i);if(!r)return null;const o=r[0],a=s&&n.parsePatterns[s]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?Ux(a,h=>h.test(o)):Yx(a,h=>h.test(o));let d;d=n.valueCallback?n.valueCallback(l):l,d=t.valueCallback?t.valueCallback(d):d;const u=e.slice(o.length);return{value:d,rest:u}}}function Yx(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function Ux(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function Gx(n){return(e,t={})=>{const s=e.match(n.matchPattern);if(!s)return null;const i=s[0],r=e.match(n.parsePattern);if(!r)return null;let o=n.valueCallback?n.valueCallback(r[0]):r[0];o=t.valueCallback?t.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const qx=/^(\d+)(th|st|nd|rd)?/i,Xx=/\d+/i,Qx={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Kx={any:[/^b/i,/^(a|c)/i]},Zx={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Jx={any:[/1/i,/2/i,/3/i,/4/i]},ey={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ty={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ny={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},sy={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},iy={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ry={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},oy={ordinalNumber:Gx({matchPattern:qx,parsePattern:Xx,valueCallback:n=>parseInt(n,10)}),era:ls({matchPatterns:Qx,defaultMatchWidth:"wide",parsePatterns:Kx,defaultParseWidth:"any"}),quarter:ls({matchPatterns:Zx,defaultMatchWidth:"wide",parsePatterns:Jx,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ls({matchPatterns:ey,defaultMatchWidth:"wide",parsePatterns:ty,defaultParseWidth:"any"}),day:ls({matchPatterns:ny,defaultMatchWidth:"wide",parsePatterns:sy,defaultParseWidth:"any"}),dayPeriod:ls({matchPatterns:iy,defaultMatchWidth:"any",parsePatterns:ry,defaultParseWidth:"any"})},co={code:"en-US",formatDistance:jx,formatLong:Ax,formatRelative:Fx,localize:Hx,match:oy,options:{weekStartsOn:0,firstWeekContainsDate:1}};function yi(n){const e=q(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function _t(n,...e){const t=Ae.bind(null,e.find(s=>typeof s=="object"));return e.map(t)}function qn(n,e){const t=q(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function ld(n,e,t){const[s,i]=_t(t==null?void 0:t.in,n,e),r=qn(s),o=qn(i),a=+r-yi(r),l=+o-yi(o);return Math.round((a-l)/Cx)}function uo(n,e){const t=q(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function ay(n,e){const t=q(n,e==null?void 0:e.in);return ld(t,uo(t))+1}function jt(n,e){var a,l,d,u;const t=Cn(),s=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(d=t.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,i=q(n,e==null?void 0:e.in),r=i.getDay(),o=(r<s?7:0)+r-s;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Xn(n,e){return jt(n,{...e,weekStartsOn:1})}function cd(n,e){const t=q(n,e==null?void 0:e.in),s=t.getFullYear(),i=Ae(t,0);i.setFullYear(s+1,0,4),i.setHours(0,0,0,0);const r=Xn(i),o=Ae(t,0);o.setFullYear(s,0,4),o.setHours(0,0,0,0);const a=Xn(o);return t.getTime()>=r.getTime()?s+1:t.getTime()>=a.getTime()?s:s-1}function ly(n,e){const t=cd(n,e),s=Ae(n,0);return s.setFullYear(t,0,4),s.setHours(0,0,0,0),Xn(s)}function dd(n,e){const t=q(n,e==null?void 0:e.in),s=+Xn(t)-+ly(t);return Math.round(s/td)+1}function ho(n,e){var u,h,f,m;const t=q(n,e==null?void 0:e.in),s=t.getFullYear(),i=Cn(),r=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(f=i.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=Ae((e==null?void 0:e.in)||n,0);o.setFullYear(s+1,0,r),o.setHours(0,0,0,0);const a=jt(o,e),l=Ae((e==null?void 0:e.in)||n,0);l.setFullYear(s,0,r),l.setHours(0,0,0,0);const d=jt(l,e);return+t>=+a?s+1:+t>=+d?s:s-1}function cy(n,e){var a,l,d,u;const t=Cn(),s=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(d=t.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,i=ho(n,e),r=Ae((e==null?void 0:e.in)||n,0);return r.setFullYear(i,0,s),r.setHours(0,0,0,0),jt(r,e)}function fo(n,e){const t=q(n,e==null?void 0:e.in),s=+jt(t,e)-+cy(t,e);return Math.round(s/td)+1}function je(n,e){const t=n<0?"-":"",s=Math.abs(n).toString().padStart(e,"0");return t+s}const en={y(n,e){const t=n.getFullYear(),s=t>0?t:1-t;return je(e==="yy"?s%100:s,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):je(t+1,2)},d(n,e){return je(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return je(n.getHours()%12||12,e.length)},H(n,e){return je(n.getHours(),e.length)},m(n,e){return je(n.getMinutes(),e.length)},s(n,e){return je(n.getSeconds(),e.length)},S(n,e){const t=e.length,s=n.getMilliseconds(),i=Math.trunc(s*Math.pow(10,t-3));return je(i,e.length)}},En={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ua={G:function(n,e,t){const s=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const s=n.getFullYear(),i=s>0?s:1-s;return t.ordinalNumber(i,{unit:"year"})}return en.y(n,e)},Y:function(n,e,t,s){const i=ho(n,s),r=i>0?i:1-i;if(e==="YY"){const o=r%100;return je(o,2)}return e==="Yo"?t.ordinalNumber(r,{unit:"year"}):je(r,e.length)},R:function(n,e){const t=cd(n);return je(t,e.length)},u:function(n,e){const t=n.getFullYear();return je(t,e.length)},Q:function(n,e,t){const s=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return je(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(n,e,t){const s=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return je(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(n,e,t){const s=n.getMonth();switch(e){case"M":case"MM":return en.M(n,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(n,e,t){const s=n.getMonth();switch(e){case"L":return String(s+1);case"LL":return je(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(n,e,t,s){const i=fo(n,s);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):je(i,e.length)},I:function(n,e,t){const s=dd(n);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):je(s,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):en.d(n,e)},D:function(n,e,t){const s=ay(n);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):je(s,e.length)},E:function(n,e,t){const s=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(n,e,t,s){const i=n.getDay(),r=(i-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(r);case"ee":return je(r,2);case"eo":return t.ordinalNumber(r,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,s){const i=n.getDay(),r=(i-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(r);case"cc":return je(r,e.length);case"co":return t.ordinalNumber(r,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const s=n.getDay(),i=s===0?7:s;switch(e){case"i":return String(i);case"ii":return je(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});case"iiii":default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const s=n.getHours();let i;switch(s===12?i=En.noon:s===0?i=En.midnight:i=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const s=n.getHours();let i;switch(s>=17?i=En.evening:s>=12?i=En.afternoon:s>=4?i=En.morning:i=En.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let s=n.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return en.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):en.H(n,e)},K:function(n,e,t){const s=n.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):je(s,e.length)},k:function(n,e,t){let s=n.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):je(s,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):en.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):en.s(n,e)},S:function(n,e){return en.S(n,e)},X:function(n,e,t){const s=n.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return fa(s);case"XXXX":case"XX":return gn(s);case"XXXXX":case"XXX":default:return gn(s,":")}},x:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"x":return fa(s);case"xxxx":case"xx":return gn(s);case"xxxxx":case"xxx":default:return gn(s,":")}},O:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+ha(s,":");case"OOOO":default:return"GMT"+gn(s,":")}},z:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+ha(s,":");case"zzzz":default:return"GMT"+gn(s,":")}},t:function(n,e,t){const s=Math.trunc(+n/1e3);return je(s,e.length)},T:function(n,e,t){return je(+n,e.length)}};function ha(n,e=""){const t=n>0?"-":"+",s=Math.abs(n),i=Math.trunc(s/60),r=s%60;return r===0?t+String(i):t+String(i)+e+je(r,2)}function fa(n,e){return n%60===0?(n>0?"-":"+")+je(Math.abs(n)/60,2):gn(n,e)}function gn(n,e=""){const t=n>0?"-":"+",s=Math.abs(n),i=je(Math.trunc(s/60),2),r=je(s%60,2);return t+i+e+r}const ma=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ud=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},dy=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],s=t[1],i=t[2];if(!i)return ma(n,e);let r;switch(s){case"P":r=e.dateTime({width:"short"});break;case"PP":r=e.dateTime({width:"medium"});break;case"PPP":r=e.dateTime({width:"long"});break;case"PPPP":default:r=e.dateTime({width:"full"});break}return r.replace("{{date}}",ma(s,e)).replace("{{time}}",ud(i,e))},bi={p:ud,P:dy},uy=/^D+$/,hy=/^Y+$/,fy=["D","DD","YY","YYYY"];function hd(n){return uy.test(n)}function fd(n){return hy.test(n)}function jr(n,e,t){const s=my(n,e,t);if(console.warn(s),fy.includes(n))throw new RangeError(s)}function my(n,e,t){const s=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function py(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function mo(n){return!(!py(n)&&typeof n!="number"||isNaN(+q(n)))}const gy=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,xy=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yy=/^'([^]*?)'?$/,by=/''/g,vy=/[a-zA-Z]/;function md(n,e,t){var u,h,f,m,p,x,g,y;const s=Cn(),i=(t==null?void 0:t.locale)??s.locale??co,r=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=(t==null?void 0:t.weekStartsOn)??((x=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:x.weekStartsOn)??s.weekStartsOn??((y=(g=s.locale)==null?void 0:g.options)==null?void 0:y.weekStartsOn)??0,a=q(n,t==null?void 0:t.in);if(!mo(a))throw new RangeError("Invalid time value");let l=e.match(xy).map(w=>{const T=w[0];if(T==="p"||T==="P"){const C=bi[T];return C(w,i.formatLong)}return w}).join("").match(gy).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const T=w[0];if(T==="'")return{isToken:!1,value:wy(w)};if(ua[T])return{isToken:!0,value:w};if(T.match(vy))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return{isToken:!1,value:w}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const d={firstWeekContainsDate:r,weekStartsOn:o,locale:i};return l.map(w=>{if(!w.isToken)return w.value;const T=w.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&fd(T)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&hd(T))&&jr(T,e,String(n));const C=ua[T[0]];return C(a,T,i.localize,d)}).join("")}function wy(n){const e=n.match(yy);return e?e[1].replace(by,"'"):n}function Ty(n,e){return q(n,e==null?void 0:e.in).getDate()}function pd(n,e){const t=q(n,e==null?void 0:e.in),s=t.getFullYear(),i=t.getMonth(),r=Ae(t,0);return r.setFullYear(s,i+1,0),r.setHours(0,0,0,0),r.getDate()}function Sy(n,e){return q(n,e==null?void 0:e.in).getHours()}function Py(n,e){return q(n,e==null?void 0:e.in).getMinutes()}function Dy(n,e){return q(n,e==null?void 0:e.in).getMonth()}function Cy(n){return q(n).getSeconds()}function My(n){return q(n).getMilliseconds()}function ky(n,e){return q(n,e==null?void 0:e.in).getFullYear()}function or(n,e){return+q(n)>+q(e)}function ar(n,e){return+q(n)<+q(e)}function Iy(n,e){return+q(n)==+q(e)}function jy(n,e,t){const[s,i]=_t(t==null?void 0:t.in,n,e);return+qn(s)==+qn(i)}function _y(n,e,t){const[s,i]=_t(t==null?void 0:t.in,n,e);return s.getFullYear()===i.getFullYear()}function Ry(n,e,t){const[s,i]=_t(t==null?void 0:t.in,n,e);return s.getFullYear()===i.getFullYear()&&s.getMonth()===i.getMonth()}function _r(n,e){const t=q(n,e==null?void 0:e.in);return t.setMinutes(0,0,0),t}function Oy(n,e,t){const[s,i]=_t(t==null?void 0:t.in,n,e);return+_r(s)==+_r(i)}function Ay(){return Object.assign({},Cn())}function Ey(n,e){const t=Fy(e)?new e(0):Ae(e,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}function Fy(n){var e;return typeof n=="function"&&((e=n.prototype)==null?void 0:e.constructor)===n}const Ly=10;class gd{constructor(){B(this,"subPriority",0)}validate(e,t){return!0}}class Ny extends gd{constructor(e,t,s,i,r){super(),this.value=e,this.validateValue=t,this.setValue=s,this.priority=i,r&&(this.subPriority=r)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,s){return this.setValue(e,t,this.value,s)}}class zy extends gd{constructor(t,s){super();B(this,"priority",Ly);B(this,"subPriority",-1);this.context=t||(i=>Ae(s,i))}set(t,s){return s.timestampIsSet?t:Ae(t,Ey(t,this.context))}}class Me{run(e,t,s,i){const r=this.parse(e,t,s,i);return r?{setter:new Ny(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}validate(e,t,s){return!0}}class By extends Me{constructor(){super(...arguments);B(this,"priority",140);B(this,"incompatibleTokens",["R","u","t","T"])}parse(t,s,i){switch(s){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,s,i){return s.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}const We={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},zt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function He(n,e){return n&&{value:e(n.value),rest:n.rest}}function Le(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Bt(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const s=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,r=t[3]?parseInt(t[3],10):0,o=t[5]?parseInt(t[5],10):0;return{value:s*(i*Ns+r*Ls+o*Mx),rest:e.slice(t[0].length)}}function xd(n){return Le(We.anyDigitsSigned,n)}function Ve(n,e){switch(n){case 1:return Le(We.singleDigit,e);case 2:return Le(We.twoDigits,e);case 3:return Le(We.threeDigits,e);case 4:return Le(We.fourDigits,e);default:return Le(new RegExp("^\\d{1,"+n+"}"),e)}}function vi(n,e){switch(n){case 1:return Le(We.singleDigitSigned,e);case 2:return Le(We.twoDigitsSigned,e);case 3:return Le(We.threeDigitsSigned,e);case 4:return Le(We.fourDigitsSigned,e);default:return Le(new RegExp("^-?\\d{1,"+n+"}"),e)}}function po(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function yd(n,e){const t=e>0,s=t?e:1-e;let i;if(s<=50)i=n||100;else{const r=s+50,o=Math.trunc(r/100)*100,a=n>=r%100;i=n+o-(a?100:0)}return t?i:1-i}function bd(n){return n%400===0||n%4===0&&n%100!==0}class $y extends Me{constructor(){super(...arguments);B(this,"priority",130);B(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,s,i){const r=o=>({year:o,isTwoDigitYear:s==="yy"});switch(s){case"y":return He(Ve(4,t),r);case"yo":return He(i.ordinalNumber(t,{unit:"year"}),r);default:return He(Ve(s.length,t),r)}}validate(t,s){return s.isTwoDigitYear||s.year>0}set(t,s,i){const r=t.getFullYear();if(i.isTwoDigitYear){const a=yd(i.year,r);return t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}const o=!("era"in s)||s.era===1?i.year:1-i.year;return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}}class Vy extends Me{constructor(){super(...arguments);B(this,"priority",130);B(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,s,i){const r=o=>({year:o,isTwoDigitYear:s==="YY"});switch(s){case"Y":return He(Ve(4,t),r);case"Yo":return He(i.ordinalNumber(t,{unit:"year"}),r);default:return He(Ve(s.length,t),r)}}validate(t,s){return s.isTwoDigitYear||s.year>0}set(t,s,i,r){const o=ho(t,r);if(i.isTwoDigitYear){const l=yd(i.year,o);return t.setFullYear(l,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),jt(t,r)}const a=!("era"in s)||s.era===1?i.year:1-i.year;return t.setFullYear(a,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),jt(t,r)}}class Wy extends Me{constructor(){super(...arguments);B(this,"priority",130);B(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,s){return vi(s==="R"?4:s.length,t)}set(t,s,i){const r=Ae(t,0);return r.setFullYear(i,0,4),r.setHours(0,0,0,0),Xn(r)}}class Hy extends Me{constructor(){super(...arguments);B(this,"priority",130);B(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,s){return vi(s==="u"?4:s.length,t)}set(t,s,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class Yy extends Me{constructor(){super(...arguments);B(this,"priority",120);B(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,s,i){switch(s){case"Q":case"QQ":return Ve(s.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,s){return s>=1&&s<=4}set(t,s,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class Uy extends Me{constructor(){super(...arguments);B(this,"priority",120);B(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,s,i){switch(s){case"q":case"qq":return Ve(s.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,s){return s>=1&&s<=4}set(t,s,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class Gy extends Me{constructor(){super(...arguments);B(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);B(this,"priority",110)}parse(t,s,i){const r=o=>o-1;switch(s){case"M":return He(Le(We.month,t),r);case"MM":return He(Ve(2,t),r);case"Mo":return He(i.ordinalNumber(t,{unit:"month"}),r);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,s){return s>=0&&s<=11}set(t,s,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}class qy extends Me{constructor(){super(...arguments);B(this,"priority",110);B(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,s,i){const r=o=>o-1;switch(s){case"L":return He(Le(We.month,t),r);case"LL":return He(Ve(2,t),r);case"Lo":return He(i.ordinalNumber(t,{unit:"month"}),r);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,s){return s>=0&&s<=11}set(t,s,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}function Xy(n,e,t){const s=q(n,t==null?void 0:t.in),i=fo(s,t)-e;return s.setDate(s.getDate()-i*7),q(s,t==null?void 0:t.in)}class Qy extends Me{constructor(){super(...arguments);B(this,"priority",100);B(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,s,i){switch(s){case"w":return Le(We.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return Ve(s.length,t)}}validate(t,s){return s>=1&&s<=53}set(t,s,i,r){return jt(Xy(t,i,r),r)}}function Ky(n,e,t){const s=q(n,t==null?void 0:t.in),i=dd(s,t)-e;return s.setDate(s.getDate()-i*7),s}class Zy extends Me{constructor(){super(...arguments);B(this,"priority",100);B(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,s,i){switch(s){case"I":return Le(We.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return Ve(s.length,t)}}validate(t,s){return s>=1&&s<=53}set(t,s,i){return Xn(Ky(t,i))}}const Jy=[31,28,31,30,31,30,31,31,30,31,30,31],eb=[31,29,31,30,31,30,31,31,30,31,30,31];class tb extends Me{constructor(){super(...arguments);B(this,"priority",90);B(this,"subPriority",1);B(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,s,i){switch(s){case"d":return Le(We.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return Ve(s.length,t)}}validate(t,s){const i=t.getFullYear(),r=bd(i),o=t.getMonth();return r?s>=1&&s<=eb[o]:s>=1&&s<=Jy[o]}set(t,s,i){return t.setDate(i),t.setHours(0,0,0,0),t}}class nb extends Me{constructor(){super(...arguments);B(this,"priority",90);B(this,"subpriority",1);B(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,s,i){switch(s){case"D":case"DD":return Le(We.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return Ve(s.length,t)}}validate(t,s){const i=t.getFullYear();return bd(i)?s>=1&&s<=366:s>=1&&s<=365}set(t,s,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}}function go(n,e,t){var h,f,m,p;const s=Cn(),i=(t==null?void 0:t.weekStartsOn)??((f=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??s.weekStartsOn??((p=(m=s.locale)==null?void 0:m.options)==null?void 0:p.weekStartsOn)??0,r=q(n,t==null?void 0:t.in),o=r.getDay(),l=(e%7+7)%7,d=7-i,u=e<0||e>6?e-(o+d)%7:(l+d)%7-(o+d)%7;return zs(r,u,t)}class sb extends Me{constructor(){super(...arguments);B(this,"priority",90);B(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,s,i){switch(s){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,s){return s>=0&&s<=6}set(t,s,i,r){return t=go(t,i,r),t.setHours(0,0,0,0),t}}class ib extends Me{constructor(){super(...arguments);B(this,"priority",90);B(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,s,i,r){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+r.weekStartsOn+6)%7+l};switch(s){case"e":case"ee":return He(Ve(s.length,t),o);case"eo":return He(i.ordinalNumber(t,{unit:"day"}),o);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,s){return s>=0&&s<=6}set(t,s,i,r){return t=go(t,i,r),t.setHours(0,0,0,0),t}}class rb extends Me{constructor(){super(...arguments);B(this,"priority",90);B(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,s,i,r){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+r.weekStartsOn+6)%7+l};switch(s){case"c":case"cc":return He(Ve(s.length,t),o);case"co":return He(i.ordinalNumber(t,{unit:"day"}),o);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,s){return s>=0&&s<=6}set(t,s,i,r){return t=go(t,i,r),t.setHours(0,0,0,0),t}}function ob(n,e){const t=q(n,e==null?void 0:e.in).getDay();return t===0?7:t}function ab(n,e,t){const s=q(n,t==null?void 0:t.in),i=ob(s,t),r=e-i;return zs(s,r,t)}class lb extends Me{constructor(){super(...arguments);B(this,"priority",90);B(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,s,i){const r=o=>o===0?7:o;switch(s){case"i":case"ii":return Ve(s.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return He(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r);case"iiiii":return He(i.day(t,{width:"narrow",context:"formatting"}),r);case"iiiiii":return He(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r);case"iiii":default:return He(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r)}}validate(t,s){return s>=1&&s<=7}set(t,s,i){return t=ab(t,i),t.setHours(0,0,0,0),t}}class cb extends Me{constructor(){super(...arguments);B(this,"priority",80);B(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,s,i){switch(s){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,s,i){return t.setHours(po(i),0,0,0),t}}class db extends Me{constructor(){super(...arguments);B(this,"priority",80);B(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,s,i){switch(s){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,s,i){return t.setHours(po(i),0,0,0),t}}class ub extends Me{constructor(){super(...arguments);B(this,"priority",80);B(this,"incompatibleTokens",["a","b","t","T"])}parse(t,s,i){switch(s){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,s,i){return t.setHours(po(i),0,0,0),t}}class hb extends Me{constructor(){super(...arguments);B(this,"priority",70);B(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,s,i){switch(s){case"h":return Le(We.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return Ve(s.length,t)}}validate(t,s){return s>=1&&s<=12}set(t,s,i){const r=t.getHours()>=12;return r&&i<12?t.setHours(i+12,0,0,0):!r&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}}class fb extends Me{constructor(){super(...arguments);B(this,"priority",70);B(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,s,i){switch(s){case"H":return Le(We.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return Ve(s.length,t)}}validate(t,s){return s>=0&&s<=23}set(t,s,i){return t.setHours(i,0,0,0),t}}class mb extends Me{constructor(){super(...arguments);B(this,"priority",70);B(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,s,i){switch(s){case"K":return Le(We.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return Ve(s.length,t)}}validate(t,s){return s>=0&&s<=11}set(t,s,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}}class pb extends Me{constructor(){super(...arguments);B(this,"priority",70);B(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,s,i){switch(s){case"k":return Le(We.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return Ve(s.length,t)}}validate(t,s){return s>=1&&s<=24}set(t,s,i){const r=i<=24?i%24:i;return t.setHours(r,0,0,0),t}}class gb extends Me{constructor(){super(...arguments);B(this,"priority",60);B(this,"incompatibleTokens",["t","T"])}parse(t,s,i){switch(s){case"m":return Le(We.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return Ve(s.length,t)}}validate(t,s){return s>=0&&s<=59}set(t,s,i){return t.setMinutes(i,0,0),t}}class xb extends Me{constructor(){super(...arguments);B(this,"priority",50);B(this,"incompatibleTokens",["t","T"])}parse(t,s,i){switch(s){case"s":return Le(We.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return Ve(s.length,t)}}validate(t,s){return s>=0&&s<=59}set(t,s,i){return t.setSeconds(i,0),t}}class yb extends Me{constructor(){super(...arguments);B(this,"priority",30);B(this,"incompatibleTokens",["t","T"])}parse(t,s){const i=r=>Math.trunc(r*Math.pow(10,-s.length+3));return He(Ve(s.length,t),i)}set(t,s,i){return t.setMilliseconds(i),t}}class bb extends Me{constructor(){super(...arguments);B(this,"priority",10);B(this,"incompatibleTokens",["t","T","x"])}parse(t,s){switch(s){case"X":return Bt(zt.basicOptionalMinutes,t);case"XX":return Bt(zt.basic,t);case"XXXX":return Bt(zt.basicOptionalSeconds,t);case"XXXXX":return Bt(zt.extendedOptionalSeconds,t);case"XXX":default:return Bt(zt.extended,t)}}set(t,s,i){return s.timestampIsSet?t:Ae(t,t.getTime()-yi(t)-i)}}class vb extends Me{constructor(){super(...arguments);B(this,"priority",10);B(this,"incompatibleTokens",["t","T","X"])}parse(t,s){switch(s){case"x":return Bt(zt.basicOptionalMinutes,t);case"xx":return Bt(zt.basic,t);case"xxxx":return Bt(zt.basicOptionalSeconds,t);case"xxxxx":return Bt(zt.extendedOptionalSeconds,t);case"xxx":default:return Bt(zt.extended,t)}}set(t,s,i){return s.timestampIsSet?t:Ae(t,t.getTime()-yi(t)-i)}}class wb extends Me{constructor(){super(...arguments);B(this,"priority",40);B(this,"incompatibleTokens","*")}parse(t){return xd(t)}set(t,s,i){return[Ae(t,i*1e3),{timestampIsSet:!0}]}}class Tb extends Me{constructor(){super(...arguments);B(this,"priority",20);B(this,"incompatibleTokens","*")}parse(t){return xd(t)}set(t,s,i){return[Ae(t,i),{timestampIsSet:!0}]}}const Sb={G:new By,y:new $y,Y:new Vy,R:new Wy,u:new Hy,Q:new Yy,q:new Uy,M:new Gy,L:new qy,w:new Qy,I:new Zy,d:new tb,D:new nb,E:new sb,e:new ib,c:new rb,i:new lb,a:new cb,b:new db,B:new ub,h:new hb,H:new fb,K:new mb,k:new pb,m:new gb,s:new xb,S:new yb,X:new bb,x:new vb,t:new wb,T:new Tb},Pb=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Db=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Cb=/^'([^]*?)'?$/,Mb=/''/g,kb=/\S/,Ib=/[a-zA-Z]/;function vd(n,e,t,s){var g,y,w,T,C,P,I,O;const i=()=>Ae((s==null?void 0:s.in)||t,NaN),r=Ay(),o=(s==null?void 0:s.locale)??r.locale??co,a=(s==null?void 0:s.firstWeekContainsDate)??((y=(g=s==null?void 0:s.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??r.firstWeekContainsDate??((T=(w=r.locale)==null?void 0:w.options)==null?void 0:T.firstWeekContainsDate)??1,l=(s==null?void 0:s.weekStartsOn)??((P=(C=s==null?void 0:s.locale)==null?void 0:C.options)==null?void 0:P.weekStartsOn)??r.weekStartsOn??((O=(I=r.locale)==null?void 0:I.options)==null?void 0:O.weekStartsOn)??0;if(!e)return n?i():q(t,s==null?void 0:s.in);const d={firstWeekContainsDate:a,weekStartsOn:l,locale:o},u=[new zy(s==null?void 0:s.in,t)],h=e.match(Db).map(b=>{const k=b[0];if(k in bi){const A=bi[k];return A(b,o.formatLong)}return b}).join("").match(Pb),f=[];for(let b of h){!(s!=null&&s.useAdditionalWeekYearTokens)&&fd(b)&&jr(b,e,n),!(s!=null&&s.useAdditionalDayOfYearTokens)&&hd(b)&&jr(b,e,n);const k=b[0],A=Sb[k];if(A){const{incompatibleTokens:E}=A;if(Array.isArray(E)){const S=f.find(j=>E.includes(j.token)||j.token===k);if(S)throw new RangeError(`The format string mustn't contain \`${S.fullToken}\` and \`${b}\` at the same time`)}else if(A.incompatibleTokens==="*"&&f.length>0)throw new RangeError(`The format string mustn't contain \`${b}\` and any other token at the same time`);f.push({token:k,fullToken:b});const D=A.run(n,b,o.match,d);if(!D)return i();u.push(D.setter),n=D.rest}else{if(k.match(Ib))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");if(b==="''"?b="'":k==="'"&&(b=jb(b)),n.indexOf(b)===0)n=n.slice(b.length);else return i()}}if(n.length>0&&kb.test(n))return i();const m=u.map(b=>b.priority).sort((b,k)=>k-b).filter((b,k,A)=>A.indexOf(b)===k).map(b=>u.filter(k=>k.priority===b).sort((k,A)=>A.subPriority-k.subPriority)).map(b=>b[0]);let p=q(t,s==null?void 0:s.in);if(isNaN(+p))return i();const x={};for(const b of m){if(!b.validate(p,d))return i();const k=b.set(p,x,d);Array.isArray(k)?(p=k[0],Object.assign(x,k[1])):p=k}return p}function jb(n){return n.match(Cb)[1].replace(Mb,"'")}function _b(n,e,t){const s=q(n,t==null?void 0:t.in);return s.setDate(e),s}function Rb(n,e,t){const s=q(n,t==null?void 0:t.in);return s.setHours(e),s}function Ob(n,e,t){const s=q(n,t==null?void 0:t.in);return s.setMinutes(e),s}function Ab(n,e,t){const s=q(n,t==null?void 0:t.in),i=s.getFullYear(),r=s.getDate(),o=Ae(n,0);o.setFullYear(i,e,15),o.setHours(0,0,0,0);const a=pd(o);return s.setMonth(e,Math.min(r,a)),s}function Eb(n,e,t){const s=q(n,t==null?void 0:t.in);return s.setSeconds(e),s}function Fb(n,e,t){const s=q(n,t==null?void 0:t.in);return s.setMilliseconds(e),s}function Lb(n,e,t){const s=q(n,t==null?void 0:t.in);return isNaN(+s)?Ae(n,NaN):(s.setFullYear(e),s)}function wd(n,e){const t=q(n,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function xo(n,e){const t=q(n,e==null?void 0:e.in),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}function Nb(n,e,t){const s=+q(n,t==null?void 0:t.in),[i,r]=[+q(e.start,t==null?void 0:t.in),+q(e.end,t==null?void 0:t.in)].sort((o,a)=>o-a);return s>=i&&s<=r}const zb={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},Bb={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class $b{constructor(e){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib=void 0,this.locale=void 0,this.formats=void 0,this.formatTokenMap=zb,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=o=>typeof o>"u"?new Date:o===null?null:new Date(o),this.getInvalidDate=()=>new Date("Invalid Date"),this.getTimezone=()=>"default",this.setTimezone=o=>o,this.toJsDate=o=>o,this.getCurrentLocaleCode=()=>this.locale.code,this.is12HourCycleInCurrentLocale=()=>/a/.test(this.locale.formatLong.time({width:"short"})),this.expandFormat=o=>{const a=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return o.match(a).map(l=>{const d=l[0];if(d==="p"||d==="P"){const u=this.longFormatters[d];return u(l,this.locale.formatLong)}return l}).join("")},this.formatNumber=o=>o,this.getDayOfWeek=o=>o.getDay()+1;const{locale:t,formats:s,longFormatters:i,lib:r}=e;this.locale=t,this.formats=_({},Bb,s),this.longFormatters=i,this.lib=r||"date-fns"}}class Vb extends $b{constructor({locale:e,formats:t}={}){super({locale:e??co,formats:t,longFormatters:bi}),this.parse=(s,i)=>s===""?null:vd(s,i,new Date,{locale:this.locale}),this.isValid=s=>s==null?!1:mo(s),this.format=(s,i)=>this.formatByString(s,this.formats[i]),this.formatByString=(s,i)=>md(s,i,{locale:this.locale}),this.isEqual=(s,i)=>s===null&&i===null?!0:s===null||i===null?!1:Iy(s,i),this.isSameYear=(s,i)=>_y(s,i),this.isSameMonth=(s,i)=>Ry(s,i),this.isSameDay=(s,i)=>jy(s,i),this.isSameHour=(s,i)=>Oy(s,i),this.isAfter=(s,i)=>or(s,i),this.isAfterYear=(s,i)=>or(s,Ir(i)),this.isAfterDay=(s,i)=>or(s,xi(i)),this.isBefore=(s,i)=>ar(s,i),this.isBeforeYear=(s,i)=>ar(s,this.startOfYear(i)),this.isBeforeDay=(s,i)=>ar(s,this.startOfDay(i)),this.isWithinRange=(s,[i,r])=>Nb(s,{start:i,end:r}),this.startOfYear=s=>uo(s),this.startOfMonth=s=>wd(s),this.startOfWeek=s=>jt(s,{locale:this.locale}),this.startOfDay=s=>qn(s),this.endOfYear=s=>Ir(s),this.endOfMonth=s=>xo(s),this.endOfWeek=s=>ad(s,{locale:this.locale}),this.endOfDay=s=>xi(s),this.addYears=(s,i)=>od(s,i),this.addMonths=(s,i)=>Wi(s,i),this.addWeeks=(s,i)=>rd(s,i),this.addDays=(s,i)=>zs(s,i),this.addHours=(s,i)=>id(s,i),this.addMinutes=(s,i)=>sd(s,i),this.addSeconds=(s,i)=>nd(s,i),this.getYear=s=>ky(s),this.getMonth=s=>Dy(s),this.getDate=s=>Ty(s),this.getHours=s=>Sy(s),this.getMinutes=s=>Py(s),this.getSeconds=s=>Cy(s),this.getMilliseconds=s=>My(s),this.setYear=(s,i)=>Lb(s,i),this.setMonth=(s,i)=>Ab(s,i),this.setDate=(s,i)=>_b(s,i),this.setHours=(s,i)=>Rb(s,i),this.setMinutes=(s,i)=>Ob(s,i),this.setSeconds=(s,i)=>Eb(s,i),this.setMilliseconds=(s,i)=>Fb(s,i),this.getDaysInMonth=s=>pd(s),this.getWeekArray=s=>{const i=this.startOfWeek(this.startOfMonth(s)),r=this.endOfWeek(this.endOfMonth(s));let o=0,a=i;const l=[];for(;this.isBefore(a,r);){const d=Math.floor(o/7);l[d]=l[d]||[],l[d].push(a),a=this.addDays(a,1),o+=1}return l},this.getWeekNumber=s=>fo(s,{locale:this.locale}),this.getYearRange=([s,i])=>{const r=this.startOfYear(s),o=this.endOfYear(i),a=[];let l=r;for(;this.isBefore(l,o);)a.push(l),l=this.addYears(l,1);return a}}}const Wb=()=>{const n=Zt(),{incidents:e}=Se(a=>a.analyzer.rawData),t=Se(a=>a.analyzer.filters.incidentTypes),s=v.useMemo(()=>{const a=new Set;return e.forEach(l=>{l.incidentType&&a.add(l.incidentType)}),Array.from(a).sort()},[e]),i=a=>{const l=t||[],d=l.includes(a)?l.filter(u=>u!==a):[...l,a];n(Ki(d.length>0?d:null))},r=()=>{n(Ki(null))},o=()=>{n(Ki(s))};return c.jsxs(F,{children:[c.jsxs(F,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[c.jsx(M,{variant:"subtitle2",children:"Incident Types"}),c.jsxs(F,{children:[c.jsx(ue,{size:"small",onClick:o,children:"Select All"}),c.jsx(ue,{size:"small",onClick:r,children:"Clear"})]})]}),s.length===0?c.jsx(M,{variant:"body2",color:"text.secondary",children:"No incident types available in the data."}):c.jsx(Yl,{children:c.jsx(z,{container:!0,spacing:1,children:s.map(a=>c.jsx(z,{size:6,children:c.jsx(Os,{control:c.jsx(Fi,{checked:(t==null?void 0:t.includes(a))||!1,onChange:()=>i(a),size:"small"}),label:c.jsx(M,{variant:"body2",children:a})})},a))})})]})},Hb=()=>{const n=Zt(),{incidents:e}=Se(a=>a.analyzer.rawData),t=Se(a=>a.analyzer.filters.units),s=v.useMemo(()=>{const a=new Set;return e.forEach(l=>{l.respondingUnit&&a.add(l.respondingUnit)}),Array.from(a).sort()},[e]),i=a=>{const l=t||[],d=l.includes(a)?l.filter(u=>u!==a):[...l,a];n(Zi(d.length>0?d:null))},r=()=>{n(Zi(null))},o=()=>{n(Zi(s))};return c.jsxs(F,{children:[c.jsxs(F,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[c.jsx(M,{variant:"subtitle2",children:"Responding Units"}),c.jsxs(F,{children:[c.jsx(ue,{size:"small",onClick:o,children:"Select All"}),c.jsx(ue,{size:"small",onClick:r,children:"Clear"})]})]}),s.length===0?c.jsx(M,{variant:"body2",color:"text.secondary",children:"No responding unit data available."}):c.jsx(Yl,{children:c.jsx(z,{container:!0,spacing:1,children:s.map(a=>c.jsx(z,{size:6,children:c.jsx(Os,{control:c.jsx(Fi,{checked:(t==null?void 0:t.includes(a))||!1,onChange:()=>i(a),size:"small"}),label:c.jsx(M,{variant:"body2",children:a})})},a))})})]})},Yb=()=>{const n=Zt(),e=Se(l=>l.analyzer.filters.dateRange),{incidents:t}=Se(l=>l.analyzer.rawData),[s,i]=v.useState({min:null,max:null});v.useEffect(()=>{if(t.length>0){const l=t.map(d=>d.incidentDate).filter(d=>d).map(d=>new Date(d));if(l.length>0){const d=new Date(Math.min(...l.map(h=>h.getTime()))),u=new Date(Math.max(...l.map(h=>h.getTime())));i({min:d,max:u})}}},[t]);const r=l=>{if(l){const d=e?e[1]:null;n(Qi(d?[l,d]:null))}},o=l=>{if(l){const d=e?e[0]:null;n(Qi(d?[d,l]:null))}},a=()=>{n(Qi(null))};return c.jsx(cc,{dateAdapter:Vb,children:c.jsxs(F,{children:[c.jsxs(F,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[c.jsx(M,{variant:"subtitle2",children:"Date Range"}),c.jsx(ue,{size:"small",onClick:a,children:"Clear"})]}),c.jsxs(z,{container:!0,spacing:2,children:[c.jsx(z,{size:6,children:c.jsx(ca,{label:"Start Date",value:e?e[0]:void 0,onChange:r,minDate:s.min??void 0,maxDate:s.max??void 0,slotProps:{textField:{size:"small",fullWidth:!0,variant:"outlined"}}})}),c.jsx(z,{size:6,children:c.jsx(ca,{label:"End Date",value:e?e[1]:void 0,onChange:o,minDate:s.min??void 0,maxDate:s.max??void 0,slotProps:{textField:{size:"small",fullWidth:!0,variant:"outlined"}}})})]}),s.min&&s.max&&c.jsxs(M,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Data range: ",s.min.toLocaleDateString()," to ",s.max.toLocaleDateString()]})]})})},Ub=()=>{const n=Zt(),e=Se(i=>i.analyzer.filters.timeOfDay),t=[{label:"Morning (6AM-12PM)",value:[6,12]},{label:"Afternoon (12PM-6PM)",value:[12,18]},{label:"Evening (6PM-12AM)",value:[18,24]},{label:"Night (12AM-6AM)",value:[0,6]}],s=i=>{const r=e&&e[0]===i[0]&&e[1]===i[1]?null:i;n(Uu(r))};return c.jsxs(F,{children:[c.jsx(M,{variant:"subtitle2",gutterBottom:!0,children:"Time of Day"}),c.jsx(Hl,{direction:"row",spacing:1,sx:{flexWrap:"wrap",gap:1},children:t.map(i=>c.jsx(Te,{label:i.label,clickable:!0,onClick:()=>s(i.value),color:e&&e[0]===i.value[0]&&e[1]===i.value[1]?"primary":"default",variant:e&&e[0]===i.value[0]&&e[1]===i.value[1]?"filled":"outlined"},i.label))})]})},Gb=()=>{const n=Zt(),e=Se(o=>o.analyzer.filters),{incidents:t}=Se(o=>o.analyzer.rawData),s=v.useMemo(()=>e.dateRange!==null||e.incidentTypes!==null||e.units!==null||e.geographicBounds!==null||e.timeOfDay!==null||e.priority!==null,[e]),i=v.useMemo(()=>s?t.filter(o=>{if(e.dateRange){const a=new Date(o.incidentDate),[l,d]=e.dateRange;if(a<l||a>d)return!1}if(e.incidentTypes&&o.incidentType&&!e.incidentTypes.includes(o.incidentType)||e.units&&o.respondingUnit&&!e.units.includes(o.respondingUnit))return!1;if(e.timeOfDay&&o.incidentTime){const a=o.incidentTime,l=parseInt(a.split(":")[0],10);if(l<e.timeOfDay[0]||l>=e.timeOfDay[1])return!1}return!(e.priority&&o.priority&&!e.priority.includes(o.priority))}).length:t.length,[t,e,s]),r=()=>{n(Yu())};return c.jsxs(F,{sx:{p:3},children:[c.jsxs(F,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[c.jsxs(M,{variant:"h6",children:[c.jsx(hh,{sx:{verticalAlign:"middle",mr:1}}),"Filters"]}),c.jsx(ue,{variant:"outlined",color:"primary",startIcon:c.jsx(Hu,{}),disabled:!s,onClick:r,children:"Reset All"})]}),s&&c.jsxs(pt,{severity:"info",sx:{mb:3},children:["Showing ",i," of ",t.length," incidents after applying filters"]}),c.jsxs(z,{container:!0,spacing:3,children:[c.jsx(z,{size:{xs:12,md:6},children:c.jsx(ze,{variant:"outlined",sx:{p:2},children:c.jsx(Yb,{})})}),c.jsx(z,{size:{xs:12,md:6},children:c.jsx(ze,{variant:"outlined",sx:{p:2},children:c.jsx(Ub,{})})}),c.jsx(z,{size:{xs:12,md:6},children:c.jsx(ze,{variant:"outlined",sx:{p:2},children:c.jsx(Wb,{})})}),c.jsx(z,{size:{xs:12,md:6},children:c.jsx(ze,{variant:"outlined",sx:{p:2},children:c.jsx(Hb,{})})})]}),c.jsx(F,{sx:{mt:3},children:c.jsxs($l,{children:[c.jsx(Vl,{expandIcon:c.jsx(Wr,{}),children:c.jsx(M,{children:"Saved Filters"})}),c.jsx(Wl,{children:c.jsx(F,{sx:{display:"flex",justifyContent:"center",p:2},children:c.jsx(M,{variant:"body2",color:"text.secondary",children:"Saved filters feature coming soon"})})})]})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Bs(n){return n+.5|0}const nn=(n,e,t)=>Math.max(Math.min(n,t),e);function ps(n){return nn(Bs(n*2.55),0,255)}function on(n){return nn(Bs(n*255),0,255)}function Xt(n){return nn(Bs(n/2.55)/100,0,1)}function pa(n){return nn(Bs(n*100),0,100)}const vt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Rr=[..."0123456789ABCDEF"],qb=n=>Rr[n&15],Xb=n=>Rr[(n&240)>>4]+Rr[n&15],Gs=n=>(n&240)>>4===(n&15),Qb=n=>Gs(n.r)&&Gs(n.g)&&Gs(n.b)&&Gs(n.a);function Kb(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&vt[n[1]]*17,g:255&vt[n[2]]*17,b:255&vt[n[3]]*17,a:e===5?vt[n[4]]*17:255}:(e===7||e===9)&&(t={r:vt[n[1]]<<4|vt[n[2]],g:vt[n[3]]<<4|vt[n[4]],b:vt[n[5]]<<4|vt[n[6]],a:e===9?vt[n[7]]<<4|vt[n[8]]:255})),t}const Zb=(n,e)=>n<255?e(n):"";function Jb(n){var e=Qb(n)?qb:Xb;return n?"#"+e(n.r)+e(n.g)+e(n.b)+Zb(n.a,e):void 0}const e0=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Td(n,e,t){const s=e*Math.min(t,1-t),i=(r,o=(r+n/30)%12)=>t-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function t0(n,e,t){const s=(i,r=(i+n/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function n0(n,e,t){const s=Td(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)s[i]*=1-e-t,s[i]+=e;return s}function s0(n,e,t,s,i){return n===i?(e-t)/s+(e<t?6:0):e===i?(t-n)/s+2:(n-e)/s+4}function yo(n){const t=n.r/255,s=n.g/255,i=n.b/255,r=Math.max(t,s,i),o=Math.min(t,s,i),a=(r+o)/2;let l,d,u;return r!==o&&(u=r-o,d=a>.5?u/(2-r-o):u/(r+o),l=s0(t,s,i,u,r),l=l*60+.5),[l|0,d||0,a]}function bo(n,e,t,s){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,s)).map(on)}function vo(n,e,t){return bo(Td,n,e,t)}function i0(n,e,t){return bo(n0,n,e,t)}function r0(n,e,t){return bo(t0,n,e,t)}function Sd(n){return(n%360+360)%360}function o0(n){const e=e0.exec(n);let t=255,s;if(!e)return;e[5]!==s&&(t=e[6]?ps(+e[5]):on(+e[5]));const i=Sd(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=i0(i,r,o):e[1]==="hsv"?s=r0(i,r,o):s=vo(i,r,o),{r:s[0],g:s[1],b:s[2],a:t}}function a0(n,e){var t=yo(n);t[0]=Sd(t[0]+e),t=vo(t),n.r=t[0],n.g=t[1],n.b=t[2]}function l0(n){if(!n)return;const e=yo(n),t=e[0],s=pa(e[1]),i=pa(e[2]);return n.a<255?`hsla(${t}, ${s}%, ${i}%, ${Xt(n.a)})`:`hsl(${t}, ${s}%, ${i}%)`}const ga={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},xa={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function c0(){const n={},e=Object.keys(xa),t=Object.keys(ga);let s,i,r,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],i=0;i<t.length;i++)r=t[i],a=a.replace(r,ga[r]);r=parseInt(xa[o],16),n[a]=[r>>16&255,r>>8&255,r&255]}return n}let qs;function d0(n){qs||(qs=c0(),qs.transparent=[0,0,0,0]);const e=qs[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const u0=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function h0(n){const e=u0.exec(n);let t=255,s,i,r;if(e){if(e[7]!==s){const o=+e[7];t=e[8]?ps(o):nn(o*255,0,255)}return s=+e[1],i=+e[3],r=+e[5],s=255&(e[2]?ps(s):nn(s,0,255)),i=255&(e[4]?ps(i):nn(i,0,255)),r=255&(e[6]?ps(r):nn(r,0,255)),{r:s,g:i,b:r,a:t}}}function f0(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Xt(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const lr=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Fn=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function m0(n,e,t){const s=Fn(Xt(n.r)),i=Fn(Xt(n.g)),r=Fn(Xt(n.b));return{r:on(lr(s+t*(Fn(Xt(e.r))-s))),g:on(lr(i+t*(Fn(Xt(e.g))-i))),b:on(lr(r+t*(Fn(Xt(e.b))-r))),a:n.a+t*(e.a-n.a)}}function Xs(n,e,t){if(n){let s=yo(n);s[e]=Math.max(0,Math.min(s[e]+s[e]*t,e===0?360:1)),s=vo(s),n.r=s[0],n.g=s[1],n.b=s[2]}}function Pd(n,e){return n&&Object.assign(e||{},n)}function ya(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=on(n[3]))):(e=Pd(n,{r:0,g:0,b:0,a:1}),e.a=on(e.a)),e}function p0(n){return n.charAt(0)==="r"?h0(n):o0(n)}class Ms{constructor(e){if(e instanceof Ms)return e;const t=typeof e;let s;t==="object"?s=ya(e):t==="string"&&(s=Kb(e)||d0(e)||p0(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=Pd(this._rgb);return e&&(e.a=Xt(e.a)),e}set rgb(e){this._rgb=ya(e)}rgbString(){return this._valid?f0(this._rgb):void 0}hexString(){return this._valid?Jb(this._rgb):void 0}hslString(){return this._valid?l0(this._rgb):void 0}mix(e,t){if(e){const s=this.rgb,i=e.rgb;let r;const o=t===r?.5:t,a=2*o-1,l=s.a-i.a,d=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-d,s.r=255&d*s.r+r*i.r+.5,s.g=255&d*s.g+r*i.g+.5,s.b=255&d*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(e,t){return e&&(this._rgb=m0(this._rgb,e._rgb,t)),this}clone(){return new Ms(this.rgb)}alpha(e){return this._rgb.a=on(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Bs(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Xs(this._rgb,2,e),this}darken(e){return Xs(this._rgb,2,-e),this}saturate(e){return Xs(this._rgb,1,e),this}desaturate(e){return Xs(this._rgb,1,-e),this}rotate(e){return a0(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ut(){}const g0=(()=>{let n=0;return()=>n++})();function Ne(n){return n==null}function Je(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ce(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Tt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function At(n,e){return Tt(n)?n:e}function be(n,e){return typeof n>"u"?e:n}const x0=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Oe(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function _e(n,e,t,s){let i,r,o;if(Je(n))for(r=n.length,i=0;i<r;i++)e.call(t,n[i],i);else if(Ce(n))for(o=Object.keys(n),r=o.length,i=0;i<r;i++)e.call(t,n[o[i]],o[i])}function wi(n,e){let t,s,i,r;if(!n||!e||n.length!==e.length)return!1;for(t=0,s=n.length;t<s;++t)if(i=n[t],r=e[t],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Ti(n){if(Je(n))return n.map(Ti);if(Ce(n)){const e=Object.create(null),t=Object.keys(n),s=t.length;let i=0;for(;i<s;++i)e[t[i]]=Ti(n[t[i]]);return e}return n}function Dd(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function y0(n,e,t,s){if(!Dd(n))return;const i=e[n],r=t[n];Ce(i)&&Ce(r)?ks(i,r,s):e[n]=Ti(r)}function ks(n,e,t){const s=Je(e)?e:[e],i=s.length;if(!Ce(n))return n;t=t||{};const r=t.merger||y0;let o;for(let a=0;a<i;++a){if(o=s[a],!Ce(o))continue;const l=Object.keys(o);for(let d=0,u=l.length;d<u;++d)r(l[d],n,o,t)}return n}function vs(n,e){return ks(n,e,{merger:b0})}function b0(n,e,t){if(!Dd(n))return;const s=e[n],i=t[n];Ce(s)&&Ce(i)?vs(s,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Ti(i))}const ba={"":n=>n,x:n=>n.x,y:n=>n.y};function v0(n){const e=n.split("."),t=[];let s="";for(const i of e)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(t.push(s),s="");return t}function w0(n){const e=v0(n);return t=>{for(const s of e){if(s==="")break;t=t&&t[s]}return t}}function Si(n,e){return(ba[e]||(ba[e]=w0(e)))(n)}function wo(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Pi=n=>typeof n<"u",ln=n=>typeof n=="function",va=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function T0(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const tt=Math.PI,Wt=2*tt,S0=Wt+tt,Di=Number.POSITIVE_INFINITY,P0=tt/180,Mt=tt/2,fn=tt/4,wa=tt*2/3,Cd=Math.log10,Qn=Math.sign;function ws(n,e,t){return Math.abs(n-e)<t}function Ta(n){const e=Math.round(n);n=ws(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(Cd(n))),s=n/t;return(s<=1?1:s<=2?2:s<=5?5:10)*t}function D0(n){const e=[],t=Math.sqrt(n);let s;for(s=1;s<t;s++)n%s===0&&(e.push(s),e.push(n/s));return t===(t|0)&&e.push(t),e.sort((i,r)=>i-r).pop(),e}function C0(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Ci(n){return!C0(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function M0(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function k0(n,e,t){let s,i,r;for(s=0,i=n.length;s<i;s++)r=n[s][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function bn(n){return n*(tt/180)}function I0(n){return n*(180/tt)}function Sa(n){if(!Tt(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function j0(n,e){const t=e.x-n.x,s=e.y-n.y,i=Math.sqrt(t*t+s*s);let r=Math.atan2(s,t);return r<-.5*tt&&(r+=Wt),{angle:r,distance:i}}function Or(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function _0(n,e){return(n-e+S0)%Wt-tt}function tn(n){return(n%Wt+Wt)%Wt}function Md(n,e,t,s){const i=tn(n),r=tn(e),o=tn(t),a=tn(r-i),l=tn(o-i),d=tn(i-r),u=tn(i-o);return i===r||i===o||s&&r===o||a>l&&d<u}function kt(n,e,t){return Math.max(e,Math.min(t,n))}function R0(n){return kt(n,-32768,32767)}function vn(n,e,t,s=1e-6){return n>=Math.min(e,t)-s&&n<=Math.max(e,t)+s}function To(n,e,t){t=t||(o=>n[o]<e);let s=n.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,t(r)?i=r:s=r;return{lo:i,hi:s}}const Ar=(n,e,t,s)=>To(n,t,s?i=>{const r=n[i][e];return r<t||r===t&&n[i+1][e]===t}:i=>n[i][e]<t),O0=(n,e,t)=>To(n,t,s=>n[s][e]>=t);function A0(n,e,t){let s=0,i=n.length;for(;s<i&&n[s]<e;)s++;for(;i>s&&n[i-1]>t;)i--;return s>0||i<n.length?n.slice(s,i):n}const kd=["push","pop","shift","splice","unshift"];function E0(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),kd.forEach(t=>{const s="_onData"+wo(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return n._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function Pa(n,e){const t=n._chartjs;if(!t)return;const s=t.listeners,i=s.indexOf(e);i!==-1&&s.splice(i,1),!(s.length>0)&&(kd.forEach(r=>{delete n[r]}),delete n._chartjs)}function F0(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const Id=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function jd(n,e){let t=[],s=!1;return function(...i){t=i,s||(s=!0,Id.call(window,()=>{s=!1,n.apply(e,t)}))}}function L0(n,e){let t;return function(...s){return e?(clearTimeout(t),t=setTimeout(n,e,s)):n.apply(this,s),e}}const So=n=>n==="start"?"left":n==="end"?"right":"center",rt=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,N0=(n,e,t,s)=>n===(s?"left":"right")?t:n==="center"?(e+t)/2:e,Qs=n=>n===0||n===1,Da=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Wt/t)),Ca=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Wt/t)+1,Ts={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Mt)+1,easeOutSine:n=>Math.sin(n*Mt),easeInOutSine:n=>-.5*(Math.cos(tt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Qs(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Qs(n)?n:Da(n,.075,.3),easeOutElastic:n=>Qs(n)?n:Ca(n,.075,.3),easeInOutElastic(n){return Qs(n)?n:n<.5?.5*Da(n*2,.1125,.45):.5+.5*Ca(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Ts.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Ts.easeInBounce(n*2)*.5:Ts.easeOutBounce(n*2-1)*.5+.5};function Po(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Ma(n){return Po(n)?n:new Ms(n)}function cr(n){return Po(n)?n:new Ms(n).saturate(.5).darken(.1).hexString()}const z0=["x","y","borderWidth","radius","tension"],B0=["color","borderColor","backgroundColor"];function $0(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:B0},numbers:{type:"number",properties:z0}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function V0(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ka=new Map;function W0(n,e){e=e||{};const t=n+JSON.stringify(e);let s=ka.get(t);return s||(s=new Intl.NumberFormat(n,e),ka.set(t,s)),s}function _d(n,e,t){return W0(e,t).format(n)}const H0={values(n){return Je(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const s=this.chart.options.locale;let i,r=n;if(t.length>1){const d=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(d<1e-4||d>1e15)&&(i="scientific"),r=Y0(n,t)}const o=Cd(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),_d(n,s,l)}};function Y0(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var Rd={formatters:H0};function U0(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Rd.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Sn=Object.create(null),Er=Object.create(null);function Ss(n,e){if(!e)return n;const t=e.split(".");for(let s=0,i=t.length;s<i;++s){const r=t[s];n=n[r]||(n[r]=Object.create(null))}return n}function dr(n,e,t){return typeof e=="string"?ks(Ss(n,e),t):ks(Ss(n,""),e)}class G0{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>cr(i.backgroundColor),this.hoverBorderColor=(s,i)=>cr(i.borderColor),this.hoverColor=(s,i)=>cr(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return dr(this,e,t)}get(e){return Ss(this,e)}describe(e,t){return dr(Er,e,t)}override(e,t){return dr(Sn,e,t)}route(e,t,s,i){const r=Ss(this,e),o=Ss(this,s),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],d=o[i];return Ce(l)?Object.assign({},d,l):be(l,d)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var Ye=new G0({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[$0,V0,U0]);function q0(n){return!n||Ne(n.size)||Ne(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Ia(n,e,t,s,i){let r=e[i];return r||(r=e[i]=n.measureText(i).width,t.push(i)),r>s&&(s=r),s}function mn(n,e,t){const s=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*s)/s+i}function ja(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function Fr(n,e,t,s){Od(n,e,t,s,null)}function Od(n,e,t,s,i){let r,o,a,l,d,u,h,f;const m=e.pointStyle,p=e.rotation,x=e.radius;let g=(p||0)*P0;if(m&&typeof m=="object"&&(r=m.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(t,s),n.rotate(g),n.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),n.restore();return}if(!(isNaN(x)||x<=0)){switch(n.beginPath(),m){default:i?n.ellipse(t,s,i/2,x,0,0,Wt):n.arc(t,s,x,0,Wt),n.closePath();break;case"triangle":u=i?i/2:x,n.moveTo(t+Math.sin(g)*u,s-Math.cos(g)*x),g+=wa,n.lineTo(t+Math.sin(g)*u,s-Math.cos(g)*x),g+=wa,n.lineTo(t+Math.sin(g)*u,s-Math.cos(g)*x),n.closePath();break;case"rectRounded":d=x*.516,l=x-d,o=Math.cos(g+fn)*l,h=Math.cos(g+fn)*(i?i/2-d:l),a=Math.sin(g+fn)*l,f=Math.sin(g+fn)*(i?i/2-d:l),n.arc(t-h,s-a,d,g-tt,g-Mt),n.arc(t+f,s-o,d,g-Mt,g),n.arc(t+h,s+a,d,g,g+Mt),n.arc(t-f,s+o,d,g+Mt,g+tt),n.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*x,u=i?i/2:l,n.rect(t-u,s-l,2*u,2*l);break}g+=fn;case"rectRot":h=Math.cos(g)*(i?i/2:x),o=Math.cos(g)*x,a=Math.sin(g)*x,f=Math.sin(g)*(i?i/2:x),n.moveTo(t-h,s-a),n.lineTo(t+f,s-o),n.lineTo(t+h,s+a),n.lineTo(t-f,s+o),n.closePath();break;case"crossRot":g+=fn;case"cross":h=Math.cos(g)*(i?i/2:x),o=Math.cos(g)*x,a=Math.sin(g)*x,f=Math.sin(g)*(i?i/2:x),n.moveTo(t-h,s-a),n.lineTo(t+h,s+a),n.moveTo(t+f,s-o),n.lineTo(t-f,s+o);break;case"star":h=Math.cos(g)*(i?i/2:x),o=Math.cos(g)*x,a=Math.sin(g)*x,f=Math.sin(g)*(i?i/2:x),n.moveTo(t-h,s-a),n.lineTo(t+h,s+a),n.moveTo(t+f,s-o),n.lineTo(t-f,s+o),g+=fn,h=Math.cos(g)*(i?i/2:x),o=Math.cos(g)*x,a=Math.sin(g)*x,f=Math.sin(g)*(i?i/2:x),n.moveTo(t-h,s-a),n.lineTo(t+h,s+a),n.moveTo(t+f,s-o),n.lineTo(t-f,s+o);break;case"line":o=i?i/2:Math.cos(g)*x,a=Math.sin(g)*x,n.moveTo(t-o,s-a),n.lineTo(t+o,s+a);break;case"dash":n.moveTo(t,s),n.lineTo(t+Math.cos(g)*(i?i/2:x),s+Math.sin(g)*x);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Is(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Do(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Co(n){n.restore()}function X0(n,e,t,s,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){const r=(e.x+t.x)/2;n.lineTo(r,e.y),n.lineTo(r,t.y)}else i==="after"!=!!s?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function Q0(n,e,t,s){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?t.cp2x:t.cp1x,s?t.cp2y:t.cp1y,t.x,t.y)}function K0(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Ne(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function Z0(n,e,t,s,i){if(i.strikethrough||i.underline){const r=n.measureText(s),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=t-r.actualBoundingBoxAscent,d=t+r.actualBoundingBoxDescent,u=i.strikethrough?(l+d)/2:d;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function J0(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function js(n,e,t,s,i,r={}){const o=Je(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,d;for(n.save(),n.font=i.string,K0(n,r),l=0;l<o.length;++l)d=o[l],r.backdrop&&J0(n,r.backdrop),a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),Ne(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(d,t,s,r.maxWidth)),n.fillText(d,t,s,r.maxWidth),Z0(n,t,s,d,r),s+=Number(i.lineHeight);n.restore()}function Mi(n,e){const{x:t,y:s,w:i,h:r,radius:o}=e;n.arc(t+o.topLeft,s+o.topLeft,o.topLeft,1.5*tt,tt,!0),n.lineTo(t,s+r-o.bottomLeft),n.arc(t+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,tt,Mt,!0),n.lineTo(t+i-o.bottomRight,s+r),n.arc(t+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,Mt,0,!0),n.lineTo(t+i,s+o.topRight),n.arc(t+i-o.topRight,s+o.topRight,o.topRight,0,-Mt,!0),n.lineTo(t+o.topLeft,s)}const ev=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,tv=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function nv(n,e){const t=(""+n).match(ev);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const sv=n=>+n||0;function Ad(n,e){const t={},s=Ce(e),i=s?Object.keys(e):e,r=Ce(n)?s?o=>be(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of i)t[o]=sv(r(o));return t}function Ed(n){return Ad(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Wn(n){return Ad(n,["topLeft","topRight","bottomLeft","bottomRight"])}function St(n){const e=Ed(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function at(n,e){n=n||{},e=e||Ye.font;let t=be(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let s=be(n.style,e.style);s&&!(""+s).match(tv)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:be(n.family,e.family),lineHeight:nv(be(n.lineHeight,e.lineHeight),t),size:t,style:s,weight:be(n.weight,e.weight),string:""};return i.string=q0(i),i}function Ks(n,e,t,s){let i,r,o;for(i=0,r=n.length;i<r;++i)if(o=n[i],o!==void 0&&o!==void 0)return o}function iv(n,e,t){const{min:s,max:i}=n,r=x0(e,(i-s)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function Mn(n,e){return Object.assign(Object.create(n),e)}function Mo(n,e=[""],t,s,i=()=>n[0]){const r=t||n;typeof s>"u"&&(s=zd("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>Mo([a,...n],e,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return Ld(a,l,()=>hv(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return Ra(a).includes(l)},ownKeys(a){return Ra(a)},set(a,l,d){const u=a._storage||(a._storage=i());return a[l]=u[l]=d,delete a._keys,!0}})}function Kn(n,e,t,s){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:Fd(n,s),setContext:r=>Kn(n,r,t,s),override:r=>Kn(n.override(r),e,t,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,a){return Ld(r,o,()=>ov(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,a){return n[o]=a,delete r[o],!0}})}function Fd(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:s=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:s,isScriptable:ln(t)?t:()=>t,isIndexable:ln(s)?s:()=>s}}const rv=(n,e)=>n?n+wo(e):e,ko=(n,e)=>Ce(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Ld(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const s=t();return n[e]=s,s}function ov(n,e,t){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=n;let a=s[e];return ln(a)&&o.isScriptable(e)&&(a=av(e,a,n,t)),Je(a)&&a.length&&(a=lv(e,a,n,o.isIndexable)),ko(e,a)&&(a=Kn(a,i,r&&r[e],o)),a}function av(n,e,t,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(r,o||s);return a.delete(n),ko(n,l)&&(l=Io(i._scopes,i,n,l)),l}function lv(n,e,t,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=t;if(typeof r.index<"u"&&s(n))return e[r.index%e.length];if(Ce(e[0])){const l=e,d=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=Io(d,i,n,u);e.push(Kn(h,r,o&&o[n],a))}}return e}function Nd(n,e,t){return ln(n)?n(e,t):n}const cv=(n,e)=>n===!0?e:typeof n=="string"?Si(e,n):void 0;function dv(n,e,t,s,i){for(const r of e){const o=cv(t,r);if(o){n.add(o);const a=Nd(o._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==s)return a}else if(o===!1&&typeof s<"u"&&t!==s)return null}return!1}function Io(n,e,t,s){const i=e._rootScopes,r=Nd(e._fallback,t,s),o=[...n,...i],a=new Set;a.add(s);let l=_a(a,o,t,r||t,s);return l===null||typeof r<"u"&&r!==t&&(l=_a(a,o,r,l,s),l===null)?!1:Mo(Array.from(a),[""],i,r,()=>uv(e,t,s))}function _a(n,e,t,s,i){for(;t;)t=dv(n,e,t,s,i);return t}function uv(n,e,t){const s=n._getTarget();e in s||(s[e]={});const i=s[e];return Je(i)&&Ce(t)?t:i||{}}function hv(n,e,t,s){let i;for(const r of e)if(i=zd(rv(r,n),t),typeof i<"u")return ko(n,i)?Io(t,s,n,i):i}function zd(n,e){for(const t of e){if(!t)continue;const s=t[n];if(typeof s<"u")return s}}function Ra(n){let e=n._keys;return e||(e=n._keys=fv(n._scopes)),e}function fv(n){const e=new Set;for(const t of n)for(const s of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(s);return Array.from(e)}const mv=Number.EPSILON||1e-14,Zn=(n,e)=>e<n.length&&!n[e].skip&&n[e],Bd=n=>n==="x"?"y":"x";function pv(n,e,t,s){const i=n.skip?e:n,r=e,o=t.skip?e:t,a=Or(r,i),l=Or(o,r);let d=a/(a+l),u=l/(a+l);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=s*d,f=s*u;return{previous:{x:r.x-h*(o.x-i.x),y:r.y-h*(o.y-i.y)},next:{x:r.x+f*(o.x-i.x),y:r.y+f*(o.y-i.y)}}}function gv(n,e,t){const s=n.length;let i,r,o,a,l,d=Zn(n,0);for(let u=0;u<s-1;++u)if(l=d,d=Zn(n,u+1),!(!l||!d)){if(ws(e[u],0,mv)){t[u]=t[u+1]=0;continue}i=t[u]/e[u],r=t[u+1]/e[u],a=Math.pow(i,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=i*o*e[u],t[u+1]=r*o*e[u])}}function xv(n,e,t="x"){const s=Bd(t),i=n.length;let r,o,a,l=Zn(n,0);for(let d=0;d<i;++d){if(o=a,a=l,l=Zn(n,d+1),!a)continue;const u=a[t],h=a[s];o&&(r=(u-o[t])/3,a[`cp1${t}`]=u-r,a[`cp1${s}`]=h-r*e[d]),l&&(r=(l[t]-u)/3,a[`cp2${t}`]=u+r,a[`cp2${s}`]=h+r*e[d])}}function yv(n,e="x"){const t=Bd(e),s=n.length,i=Array(s).fill(0),r=Array(s);let o,a,l,d=Zn(n,0);for(o=0;o<s;++o)if(a=l,l=d,d=Zn(n,o+1),!!l){if(d){const u=d[e]-l[e];i[o]=u!==0?(d[t]-l[t])/u:0}r[o]=a?d?Qn(i[o-1])!==Qn(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}gv(n,i,r),xv(n,r,e)}function Zs(n,e,t){return Math.max(Math.min(n,t),e)}function bv(n,e){let t,s,i,r,o,a=Is(n[0],e);for(t=0,s=n.length;t<s;++t)o=r,r=a,a=t<s-1&&Is(n[t+1],e),r&&(i=n[t],o&&(i.cp1x=Zs(i.cp1x,e.left,e.right),i.cp1y=Zs(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Zs(i.cp2x,e.left,e.right),i.cp2y=Zs(i.cp2y,e.top,e.bottom)))}function vv(n,e,t,s,i){let r,o,a,l;if(e.spanGaps&&(n=n.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")yv(n,i);else{let d=s?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)a=n[r],l=pv(d,a,n[Math.min(r+1,o-(s?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,d=a}e.capBezierPoints&&bv(n,t)}function jo(){return typeof window<"u"&&typeof document<"u"}function _o(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ki(n,e,t){let s;return typeof n=="string"?(s=parseInt(n,10),n.indexOf("%")!==-1&&(s=s/100*e.parentNode[t])):s=n,s}const Hi=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function wv(n,e){return Hi(n).getPropertyValue(e)}const Tv=["top","right","bottom","left"];function wn(n,e,t){const s={};t=t?"-"+t:"";for(let i=0;i<4;i++){const r=Tv[i];s[r]=parseFloat(n[e+"-"+r+t])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const Sv=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Pv(n,e){const t=n.touches,s=t&&t.length?t[0]:n,{offsetX:i,offsetY:r}=s;let o=!1,a,l;if(Sv(i,r,n.target))a=i,l=r;else{const d=e.getBoundingClientRect();a=s.clientX-d.left,l=s.clientY-d.top,o=!0}return{x:a,y:l,box:o}}function xn(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:s}=e,i=Hi(t),r=i.boxSizing==="border-box",o=wn(i,"padding"),a=wn(i,"border","width"),{x:l,y:d,box:u}=Pv(n,t),h=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:m,height:p}=e;return r&&(m-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/m*t.width/s),y:Math.round((d-f)/p*t.height/s)}}function Dv(n,e,t){let s,i;if(e===void 0||t===void 0){const r=n&&_o(n);if(!r)e=n.clientWidth,t=n.clientHeight;else{const o=r.getBoundingClientRect(),a=Hi(r),l=wn(a,"border","width"),d=wn(a,"padding");e=o.width-d.width-l.width,t=o.height-d.height-l.height,s=ki(a.maxWidth,r,"clientWidth"),i=ki(a.maxHeight,r,"clientHeight")}}return{width:e,height:t,maxWidth:s||Di,maxHeight:i||Di}}const Js=n=>Math.round(n*10)/10;function Cv(n,e,t,s){const i=Hi(n),r=wn(i,"margin"),o=ki(i.maxWidth,n,"clientWidth")||Di,a=ki(i.maxHeight,n,"clientHeight")||Di,l=Dv(n,e,t);let{width:d,height:u}=l;if(i.boxSizing==="content-box"){const f=wn(i,"border","width"),m=wn(i,"padding");d-=m.width+f.width,u-=m.height+f.height}return d=Math.max(0,d-r.width),u=Math.max(0,s?d/s:u-r.height),d=Js(Math.min(d,o,l.maxWidth)),u=Js(Math.min(u,a,l.maxHeight)),d&&!u&&(u=Js(d/2)),(e!==void 0||t!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,d=Js(Math.floor(u*s))),{width:d,height:u}}function Oa(n,e,t){const s=e||1,i=Math.floor(n.height*s),r=Math.floor(n.width*s);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(n.currentDevicePixelRatio=s,o.height=i,o.width=r,n.ctx.setTransform(s,0,0,s,0,0),!0):!1}const Mv=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};jo()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function Aa(n,e){const t=wv(n,e),s=t&&t.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function yn(n,e,t,s){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function kv(n,e,t,s){return{x:n.x+t*(e.x-n.x),y:s==="middle"?t<.5?n.y:e.y:s==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function Iv(n,e,t,s){const i={x:n.cp2x,y:n.cp2y},r={x:e.cp1x,y:e.cp1y},o=yn(n,i,t),a=yn(i,r,t),l=yn(r,e,t),d=yn(o,a,t),u=yn(a,l,t);return yn(d,u,t)}const jv=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,s){return t-s},leftForLtr(t,s){return t-s}}},_v=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Hn(n,e,t){return n?jv(e,t):_v()}function $d(n,e){let t,s;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,s=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=s)}function Vd(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function Wd(n){return n==="angle"?{between:Md,compare:_0,normalize:tn}:{between:vn,compare:(e,t)=>e-t,normalize:e=>e}}function Ea({start:n,end:e,count:t,loop:s,style:i}){return{start:n%t,end:e%t,loop:s&&(e-n+1)%t===0,style:i}}function Rv(n,e,t){const{property:s,start:i,end:r}=t,{between:o,normalize:a}=Wd(s),l=e.length;let{start:d,end:u,loop:h}=n,f,m;if(h){for(d+=l,u+=l,f=0,m=l;f<m&&o(a(e[d%l][s]),i,r);++f)d--,u--;d%=l,u%=l}return u<d&&(u+=l),{start:d,end:u,loop:h,style:n.style}}function Ov(n,e,t){if(!t)return[n];const{property:s,start:i,end:r}=t,o=e.length,{compare:a,between:l,normalize:d}=Wd(s),{start:u,end:h,loop:f,style:m}=Rv(n,e,t),p=[];let x=!1,g=null,y,w,T;const C=()=>l(i,T,y)&&a(i,T)!==0,P=()=>a(r,y)===0||l(r,T,y),I=()=>x||C(),O=()=>!x||P();for(let b=u,k=u;b<=h;++b)w=e[b%o],!w.skip&&(y=d(w[s]),y!==T&&(x=l(y,i,r),g===null&&I()&&(g=a(y,i)===0?b:k),g!==null&&O()&&(p.push(Ea({start:g,end:b,loop:f,count:o,style:m})),g=null),k=b,T=y));return g!==null&&p.push(Ea({start:g,end:h,loop:f,count:o,style:m})),p}function Av(n,e){const t=[],s=n.segments;for(let i=0;i<s.length;i++){const r=Ov(s[i],n.points,e);r.length&&t.push(...r)}return t}function Ev(n,e,t,s){let i=0,r=e-1;if(t&&!s)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(r+=i);r>i&&n[r%e].skip;)r--;return r%=e,{start:i,end:r}}function Fv(n,e,t,s){const i=n.length,r=[];let o=e,a=n[e],l;for(l=e+1;l<=t;++l){const d=n[l%i];d.skip||d.stop?a.skip||(s=!1,r.push({start:e%i,end:(l-1)%i,loop:s}),e=o=d.stop?l:null):(o=l,a.skip&&(e=l)),a=d}return o!==null&&r.push({start:e%i,end:o%i,loop:s}),r}function Lv(n,e){const t=n.points,s=n.options.spanGaps,i=t.length;if(!i)return[];const r=!!n._loop,{start:o,end:a}=Ev(t,i,r,s);if(s===!0)return Fa(n,[{start:o,end:a,loop:r}],t,e);const l=a<o?a+i:a,d=!!n._fullLoop&&o===0&&a===i-1;return Fa(n,Fv(t,o,l,d),t,e)}function Fa(n,e,t,s){return!s||!s.setContext||!t?e:Nv(n,e,t,s)}function Nv(n,e,t,s){const i=n._chart.getContext(),r=La(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,d=[];let u=r,h=e[0].start,f=h;function m(p,x,g,y){const w=a?-1:1;if(p!==x){for(p+=l;t[p%l].skip;)p-=w;for(;t[x%l].skip;)x+=w;p%l!==x%l&&(d.push({start:p%l,end:x%l,loop:g,style:y}),u=y,h=x%l)}}for(const p of e){h=a?h:p.start;let x=t[h%l],g;for(f=h+1;f<=p.end;f++){const y=t[f%l];g=La(s.setContext(Mn(i,{type:"segment",p0:x,p1:y,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),zv(g,u)&&m(h,f-1,p.loop,u),x=y,u=g}h<f-1&&m(h,f-1,p.loop,u)}return d}function La(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function zv(n,e){if(!e)return!1;const t=[],s=function(i,r){return Po(r)?(t.includes(r)||t.push(r),t.indexOf(r)):r};return JSON.stringify(n,s)!==JSON.stringify(e,s)}function ei(n,e,t){return n.options.clip?n[t]:e[t]}function Bv(n,e){const{xScale:t,yScale:s}=n;return t&&s?{left:ei(t,e,"left"),right:ei(t,e,"right"),top:ei(s,e,"top"),bottom:ei(s,e,"bottom")}:e}function $v(n,e){const t=e._clip;if(t.disabled)return!1;const s=Bv(e,n.chartArea);return{left:t.left===!1?0:s.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:s.right+(t.right===!0?0:t.right),top:t.top===!1?0:s.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:s.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Vv{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,s,i){const r=t.listeners[i],o=t.duration;r.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(s-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Id.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,e,"progress")),r.length||(s.running=!1,this._notify(i,s,e,"complete"),s.initial=!1),t+=r.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let s=t.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,s)),s}listen(e,t,s){this._getAnims(e).listeners[t].push(s)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const s=t.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Gt=new Vv;const Na="transparent",Wv={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const s=Ma(n||Na),i=s.valid&&Ma(e||Na);return i&&i.valid?i.mix(s,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class Hv{constructor(e,t,s,i){const r=t[s];i=Ks([e.to,i,r,e.from]);const o=Ks([e.from,r,i]);this._active=!0,this._fn=e.fn||Wv[e.type||typeof o],this._easing=Ts[e.easing]||Ts.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Ks([e.to,t,i,e.from]),this._from=Ks([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||t<s),!this._active){this._target[i]=a,this._notify(!0);return}if(t<0){this._target[i]=r;return}l=t/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,s)=>{e.push({res:t,rej:s})})}_notify(e){const t=e?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][t]()}}class Hd{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ce(e))return;const t=Object.keys(Ye.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!Ce(r))return;const o={};for(const a of t)o[a]=r[a];(Je(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(e,t){const s=t.options,i=Uv(e,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&Yv(e.options.$animations,s).then(()=>{e.options=s},()=>{}),r}_createAnimations(e,t){const s=this._properties,i=[],r=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const d=o[l];if(d.charAt(0)==="$")continue;if(d==="options"){i.push(...this._animateOptions(e,t));continue}const u=t[d];let h=r[d];const f=s.get(d);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){e[d]=u;continue}r[d]=h=new Hv(f,e,d,u),i.push(h)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const s=this._createAnimations(e,t);if(s.length)return Gt.add(this._chart,s),!0}}function Yv(n,e){const t=[],s=Object.keys(e);for(let i=0;i<s.length;i++){const r=n[s[i]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}function Uv(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function za(n,e){const t=n&&n.options||{},s=t.reverse,i=t.min===void 0?e:0,r=t.max===void 0?e:0;return{start:s?r:i,end:s?i:r}}function Gv(n,e,t){if(t===!1)return!1;const s=za(n,t),i=za(e,t);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function qv(n){let e,t,s,i;return Ce(n)?(e=n.top,t=n.right,s=n.bottom,i=n.left):e=t=s=i=n,{top:e,right:t,bottom:s,left:i,disabled:n===!1}}function Yd(n,e){const t=[],s=n._getSortedDatasetMetas(e);let i,r;for(i=0,r=s.length;i<r;++i)t.push(s[i].index);return t}function Ba(n,e,t,s={}){const i=n.keys,r=s.mode==="single";let o,a,l,d;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===t){if(u=!0,s.all)continue;break}d=n.values[l],Tt(d)&&(r||e===0||Qn(e)===Qn(d))&&(e+=d)}return!u&&!s.all?0:e}function Xv(n,e){const{iScale:t,vScale:s}=e,i=t.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,d,u;for(l=0,d=o.length;l<d;++l)u=o[l],a[l]={[i]:u,[r]:n[u]};return a}function ur(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function Qv(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function Kv(n){const{min:e,max:t,minDefined:s,maxDefined:i}=n.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function Zv(n,e,t){const s=n[e]||(n[e]={});return s[t]||(s[t]={})}function $a(n,e,t,s){for(const i of e.getMatchingVisibleMetas(s).reverse()){const r=n[i.index];if(t&&r>0||!t&&r<0)return i.index}return null}function Va(n,e){const{chart:t,_cachedMeta:s}=n,i=t._stacks||(t._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,d=o.axis,u=Qv(r,o,s),h=e.length;let f;for(let m=0;m<h;++m){const p=e[m],{[l]:x,[d]:g}=p,y=p._stacks||(p._stacks={});f=y[d]=Zv(i,u,x),f[a]=g,f._top=$a(f,o,!0,s.type),f._bottom=$a(f,o,!1,s.type);const w=f._visualValues||(f._visualValues={});w[a]=g}}function hr(n,e){const t=n.scales;return Object.keys(t).filter(s=>t[s].axis===e).shift()}function Jv(n,e){return Mn(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function ew(n,e,t){return Mn(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function cs(n,e){const t=n.controller.index,s=n.vScale&&n.vScale.axis;if(s){e=e||n._parsed;for(const i of e){const r=i._stacks;if(!r||r[s]===void 0||r[s][t]===void 0)return;delete r[s][t],r[s]._visualValues!==void 0&&r[s]._visualValues[t]!==void 0&&delete r[s]._visualValues[t]}}}const fr=n=>n==="reset"||n==="none",Wa=(n,e)=>e?n:Object.assign({},n),tw=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:Yd(t,!0),values:null};class ci{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ur(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&cs(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,s=this.getDataset(),i=(h,f,m,p)=>h==="x"?f:h==="r"?p:m,r=t.xAxisID=be(s.xAxisID,hr(e,"x")),o=t.yAxisID=be(s.yAxisID,hr(e,"y")),a=t.rAxisID=be(s.rAxisID,hr(e,"r")),l=t.indexAxis,d=t.iAxisID=i(l,r,o,a),u=t.vAxisID=i(l,o,r,a);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(d),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Pa(this._data,this),e._stacked&&cs(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),s=this._data;if(Ce(t)){const i=this._cachedMeta;this._data=Xv(t,i)}else if(s!==t){if(s){Pa(s,this);const i=this._cachedMeta;cs(i),i._parsed=[]}t&&Object.isExtensible(t)&&E0(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=ur(t.vScale,t),t.stack!==s.stack&&(i=!0,cs(t),t.stack=s.stack),this._resyncElements(e),(i||r!==t._stacked)&&(Va(this,t._parsed),t._stacked=ur(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=e===0&&t===i.length?!0:s._sorted,d=e>0&&s._parsed[e-1],u,h,f;if(this._parsing===!1)s._parsed=i,s._sorted=!0,f=i;else{Je(i[e])?f=this.parseArrayData(s,i,e,t):Ce(i[e])?f=this.parseObjectData(s,i,e,t):f=this.parsePrimitiveData(s,i,e,t);const m=()=>h[a]===null||d&&h[a]<d[a];for(u=0;u<t;++u)s._parsed[u+e]=h=f[u],l&&(m()&&(l=!1),d=h);s._sorted=l}o&&Va(this,f)}parsePrimitiveData(e,t,s,i){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,d=r.getLabels(),u=r===o,h=new Array(i);let f,m,p;for(f=0,m=i;f<m;++f)p=f+s,h[f]={[a]:u||r.parse(d[p],p),[l]:o.parse(t[p],p)};return h}parseArrayData(e,t,s,i){const{xScale:r,yScale:o}=e,a=new Array(i);let l,d,u,h;for(l=0,d=i;l<d;++l)u=l+s,h=t[u],a[l]={x:r.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,t,s,i){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,d=new Array(i);let u,h,f,m;for(u=0,h=i;u<h;++u)f=u+s,m=t[f],d[u]={x:r.parse(Si(m,a),f),y:o.parse(Si(m,l),f)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,s){const i=this.chart,r=this._cachedMeta,o=t[e.axis],a={keys:Yd(i,!0),values:t._stacks[e.axis]._visualValues};return Ba(a,o,r.index,{mode:s})}updateRangeFromParsed(e,t,s,i){const r=s[t.axis];let o=r===null?NaN:r;const a=i&&s._stacks[t.axis];i&&a&&(i.values=a,o=Ba(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&e===s.iScale,o=i.length,a=this._getOtherScale(e),l=tw(t,s,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=Kv(a);let f,m;function p(){m=i[f];const x=m[a.axis];return!Tt(m[e.axis])||u>x||h<x}for(f=0;f<o&&!(!p()&&(this.updateRangeFromParsed(d,e,m,l),r));++f);if(r){for(f=o-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(d,e,m,l);break}}return d}getAllParsedValues(e){const t=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=t.length;i<r;++i)o=t[i][e.axis],Tt(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,s=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=qv(be(this.options.clip,Gv(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,s=this._cachedMeta,i=s.data||[],r=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,d=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,r,a,l),u=a;u<a+l;++u){const h=i[u];h.hidden||(h.active&&d?o.push(h):h.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,t){const s=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,t,s){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=ew(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=Jv(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=s,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",s){const i=t==="active",r=this._cachedDataOpts,o=e+"-"+t,a=r[o],l=this.enableOptionSharing&&Pi(s);if(a)return Wa(a,l);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=i?[`${e}Hover`,"hover",e,""]:[e,""],f=d.getOptionScopes(this.getDataset(),u),m=Object.keys(Ye.elements[e]),p=()=>this.getContext(s,i,t),x=d.resolveNamedOptions(f,m,p,h);return x.$shared&&(x.$shared=l,r[o]=Object.freeze(Wa(x,l))),x}_resolveAnimations(e,t,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${t}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,t),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(e,s,t))}const d=new Hd(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||fr(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const s=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,s),{sharedOptions:r,includeOptions:o}}updateElement(e,t,s,i){fr(i)?Object.assign(e,s):this._resolveAnimations(t,i).update(e,s)}updateSharedOptions(e,t,s){e&&!fr(t)&&this._resolveAnimations(void 0,t).update(e,s)}_setStyle(e,t,s,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,s,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,t,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,s=this._cachedMeta.data;for(const[a,l,d]of this._syncList)this[a](l,d);this._syncList=[];const i=s.length,r=t.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t,s=!0){const i=this._cachedMeta,r=i.data,o=e+t;let a;const l=d=>{for(d.length+=t,a=d.length-1;a>=o;a--)d[a]=d[a-t]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,t),s&&this.updateElements(r,e,t,"reset")}updateElements(e,t,s,i){}_removeElements(e,t){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(e,t);s._stacked&&cs(s,i)}s.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,s,i]=e;this[t](s,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}B(ci,"defaults",{}),B(ci,"datasetElementType",null),B(ci,"dataElementType",null);function pn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ro{constructor(e){B(this,"options");this.options=e||{}}static override(e){Object.assign(Ro.prototype,e)}init(){}formats(){return pn()}parse(){return pn()}format(){return pn()}add(){return pn()}diff(){return pn()}startOf(){return pn()}endOf(){return pn()}}var Ud={_date:Ro};function nw(n,e,t,s){const{controller:i,data:r,_sorted:o}=n,a=i._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const d=a._reversePixels?O0:Ar;if(s){if(i._sharedOptions){const u=r[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=d(r,e,t-h),m=d(r,e,t+h);return{lo:f.lo,hi:m.hi}}}}else{const u=d(r,e,t);if(l){const{vScale:h}=i._cachedMeta,{_parsed:f}=n,m=f.slice(0,u.lo+1).reverse().findIndex(x=>!Ne(x[h.axis]));u.lo-=Math.max(0,m);const p=f.slice(u.hi).findIndex(x=>!Ne(x[h.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:r.length-1}}function Yi(n,e,t,s,i){const r=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=r.length;a<l;++a){const{index:d,data:u}=r[a],{lo:h,hi:f}=nw(r[a],e,o,i);for(let m=h;m<=f;++m){const p=u[m];p.skip||s(p,d,m)}}}function sw(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(s,i){const r=e?Math.abs(s.x-i.x):0,o=t?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function mr(n,e,t,s,i){const r=[];return!i&&!n.isPointInArea(e)||Yi(n,t,e,function(a,l,d){!i&&!Is(a,n.chartArea,0)||a.inRange(e.x,e.y,s)&&r.push({element:a,datasetIndex:l,index:d})},!0),r}function iw(n,e,t,s){let i=[];function r(o,a,l){const{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:h}=j0(o,{x:e.x,y:e.y});Md(h,d,u)&&i.push({element:o,datasetIndex:a,index:l})}return Yi(n,t,e,r),i}function rw(n,e,t,s,i,r){let o=[];const a=sw(t);let l=Number.POSITIVE_INFINITY;function d(u,h,f){const m=u.inRange(e.x,e.y,i);if(s&&!m)return;const p=u.getCenterPoint(i);if(!(!!r||n.isPointInArea(p))&&!m)return;const g=a(e,p);g<l?(o=[{element:u,datasetIndex:h,index:f}],l=g):g===l&&o.push({element:u,datasetIndex:h,index:f})}return Yi(n,t,e,d),o}function pr(n,e,t,s,i,r){return!r&&!n.isPointInArea(e)?[]:t==="r"&&!s?iw(n,e,t,i):rw(n,e,t,s,i,r)}function Ha(n,e,t,s,i){const r=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return Yi(n,t,e,(l,d,u)=>{l[o]&&l[o](e[t],i)&&(r.push({element:l,datasetIndex:d,index:u}),a=a||l.inRange(e.x,e.y,i))}),s&&!a?[]:r}var ow={modes:{index(n,e,t,s){const i=xn(e,n),r=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?mr(n,i,r,s,o):pr(n,i,r,!1,s,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(d=>{const u=a[0].index,h=d.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:d.index,index:u})}),l):[]},dataset(n,e,t,s){const i=xn(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?mr(n,i,r,s,o):pr(n,i,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,d=n.getDatasetMeta(l).data;a=[];for(let u=0;u<d.length;++u)a.push({element:d[u],datasetIndex:l,index:u})}return a},point(n,e,t,s){const i=xn(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return mr(n,i,r,s,o)},nearest(n,e,t,s){const i=xn(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return pr(n,i,r,t.intersect,s,o)},x(n,e,t,s){const i=xn(e,n);return Ha(n,i,"x",t.intersect,s)},y(n,e,t,s){const i=xn(e,n);return Ha(n,i,"y",t.intersect,s)}}};const Gd=["left","top","right","bottom"];function ds(n,e){return n.filter(t=>t.pos===e)}function Ya(n,e){return n.filter(t=>Gd.indexOf(t.pos)===-1&&t.box.axis===e)}function us(n,e){return n.sort((t,s)=>{const i=e?s:t,r=e?t:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function aw(n){const e=[];let t,s,i,r,o,a;for(t=0,s=(n||[]).length;t<s;++t)i=n[t],{position:r,options:{stack:o,stackWeight:a=1}}=i,e.push({index:t,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return e}function lw(n){const e={};for(const t of n){const{stack:s,pos:i,stackWeight:r}=t;if(!s||!Gd.includes(i))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function cw(n,e){const t=lw(n),{vBoxMaxWidth:s,hBoxMaxHeight:i}=e;let r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];const{fullSize:l}=a.box,d=t[a.stack],u=d&&a.stackWeight/d.weight;a.horizontal?(a.width=u?u*s:l&&e.availableWidth,a.height=i):(a.width=s,a.height=u?u*i:l&&e.availableHeight)}return t}function dw(n){const e=aw(n),t=us(e.filter(d=>d.box.fullSize),!0),s=us(ds(e,"left"),!0),i=us(ds(e,"right")),r=us(ds(e,"top"),!0),o=us(ds(e,"bottom")),a=Ya(e,"x"),l=Ya(e,"y");return{fullSize:t,leftAndTop:s.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:ds(e,"chartArea"),vertical:s.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function Ua(n,e,t,s){return Math.max(n[t],e[t])+Math.max(n[s],e[s])}function qd(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function uw(n,e,t,s){const{pos:i,box:r}=t,o=n.maxPadding;if(!Ce(i)){t.size&&(n[i]-=t.size);const h=s[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?r.height:r.width),t.size=h.size/h.count,n[i]+=t.size}r.getPadding&&qd(o,r.getPadding());const a=Math.max(0,e.outerWidth-Ua(o,n,"left","right")),l=Math.max(0,e.outerHeight-Ua(o,n,"top","bottom")),d=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:d,other:u}:{same:u,other:d}}function hw(n){const e=n.maxPadding;function t(s){const i=Math.max(e[s]-n[s],0);return n[s]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function fw(n,e){const t=e.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(e[o],t[o])}),r}return s(n?["left","right"]:["top","bottom"])}function gs(n,e,t,s){const i=[];let r,o,a,l,d,u;for(r=0,o=n.length,d=0;r<o;++r){a=n[r],l=a.box,l.update(a.width||e.w,a.height||e.h,fw(a.horizontal,e));const{same:h,other:f}=uw(e,t,a,s);d|=h&&i.length,u=u||f,l.fullSize||i.push(a)}return d&&gs(i,e,t,s)||u}function ti(n,e,t,s,i){n.top=t,n.left=e,n.right=e+s,n.bottom=t+i,n.width=s,n.height=i}function Ga(n,e,t,s){const i=t.padding;let{x:r,y:o}=e;for(const a of n){const l=a.box,d=s[a.stack]||{placed:0,weight:1},u=a.stackWeight/d.weight||1;if(a.horizontal){const h=e.w*u,f=d.size||l.height;Pi(d.start)&&(o=d.start),l.fullSize?ti(l,i.left,o,t.outerWidth-i.right-i.left,f):ti(l,e.left+d.placed,o,h,f),d.start=o,d.placed+=h,o=l.bottom}else{const h=e.h*u,f=d.size||l.width;Pi(d.start)&&(r=d.start),l.fullSize?ti(l,r,i.top,f,t.outerHeight-i.bottom-i.top):ti(l,r,e.top+d.placed,f,h),d.start=r,d.placed+=h,r=l.right}}e.x=r,e.y=o}var wt={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,s){if(!n)return;const i=St(n.options.layout.padding),r=Math.max(e-i.width,0),o=Math.max(t-i.height,0),a=dw(n.boxes),l=a.vertical,d=a.horizontal;_e(n.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const u=l.reduce((x,g)=>g.box.options&&g.box.options.display===!1?x:x+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},i);qd(f,St(s));const m=Object.assign({maxPadding:f,w:r,h:o,x:i.left,y:i.top},i),p=cw(l.concat(d),h);gs(a.fullSize,m,h,p),gs(l,m,h,p),gs(d,m,h,p)&&gs(l,m,h,p),hw(m),Ga(a.leftAndTop,m,h,p),m.x+=m.w,m.y+=m.h,Ga(a.rightAndBottom,m,h,p),n.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},_e(a.chartArea,x=>{const g=x.box;Object.assign(g,n.chartArea),g.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Xd{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,s){}removeEventListener(e,t,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,s,i){return t=Math.max(0,t||e.width),s=s||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):s)}}isAttached(e){return!0}updateConfig(e){}}class mw extends Xd{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const di="$chartjs",pw={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},qa=n=>n===null||n==="";function gw(n,e){const t=n.style,s=n.getAttribute("height"),i=n.getAttribute("width");if(n[di]={initial:{height:s,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",qa(i)){const r=Aa(n,"width");r!==void 0&&(n.width=r)}if(qa(s))if(n.style.height==="")n.height=n.width/(e||2);else{const r=Aa(n,"height");r!==void 0&&(n.height=r)}return n}const Qd=Mv?{passive:!0}:!1;function xw(n,e,t){n&&n.addEventListener(e,t,Qd)}function yw(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,Qd)}function bw(n,e){const t=pw[n.type]||n.type,{x:s,y:i}=xn(n,e);return{type:t,chart:e,native:n,x:s!==void 0?s:null,y:i!==void 0?i:null}}function Ii(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function vw(n,e,t){const s=n.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Ii(a.addedNodes,s),o=o&&!Ii(a.removedNodes,s);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function ww(n,e,t){const s=n.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Ii(a.removedNodes,s),o=o&&!Ii(a.addedNodes,s);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const _s=new Map;let Xa=0;function Kd(){const n=window.devicePixelRatio;n!==Xa&&(Xa=n,_s.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function Tw(n,e){_s.size||window.addEventListener("resize",Kd),_s.set(n,e)}function Sw(n){_s.delete(n),_s.size||window.removeEventListener("resize",Kd)}function Pw(n,e,t){const s=n.canvas,i=s&&_o(s);if(!i)return;const r=jd((a,l)=>{const d=i.clientWidth;t(a,l),d<i.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],d=l.contentRect.width,u=l.contentRect.height;d===0&&u===0||r(d,u)});return o.observe(i),Tw(n,r),o}function gr(n,e,t){t&&t.disconnect(),e==="resize"&&Sw(n)}function Dw(n,e,t){const s=n.canvas,i=jd(r=>{n.ctx!==null&&t(bw(r,n))},n);return xw(s,e,i),i}class Cw extends Xd{acquireContext(e,t){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(gw(e,t),s):null}releaseContext(e){const t=e.canvas;if(!t[di])return!1;const s=t[di].initial;["height","width"].forEach(r=>{const o=s[r];Ne(o)?t.removeAttribute(r):t.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{t.style[r]=i[r]}),t.width=t.width,delete t[di],!0}addEventListener(e,t,s){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),o={attach:vw,detach:ww,resize:Pw}[t]||Dw;i[t]=o(e,t,s)}removeEventListener(e,t){const s=e.$proxies||(e.$proxies={}),i=s[t];if(!i)return;({attach:gr,detach:gr,resize:gr}[t]||yw)(e,t,i),s[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,s,i){return Cv(e,t,s,i)}isAttached(e){const t=e&&_o(e);return!!(t&&t.isConnected)}}function Mw(n){return!jo()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?mw:Cw}class Yt{constructor(){B(this,"x");B(this,"y");B(this,"active",!1);B(this,"options");B(this,"$animations")}tooltipPosition(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}hasValue(){return Ci(this.x)&&Ci(this.y)}getProps(e,t){const s=this.$animations;if(!t||!s)return this;const i={};return e.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}}B(Yt,"defaults",{}),B(Yt,"defaultRoutes");function kw(n,e){const t=n.options.ticks,s=Iw(n),i=Math.min(t.maxTicksLimit||s,s),r=t.major.enabled?_w(e):[],o=r.length,a=r[0],l=r[o-1],d=[];if(o>i)return Rw(e,d,r,o/i),d;const u=jw(r,e,i);if(o>0){let h,f;const m=o>1?Math.round((l-a)/(o-1)):null;for(ni(e,d,u,Ne(m)?0:a-m,a),h=0,f=o-1;h<f;h++)ni(e,d,u,r[h],r[h+1]);return ni(e,d,u,l,Ne(m)?e.length:l+m),d}return ni(e,d,u),d}function Iw(n){const e=n.options.offset,t=n._tickSize(),s=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(s,i))}function jw(n,e,t){const s=Ow(n),i=e.length/t;if(!s)return Math.max(i,1);const r=D0(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function _w(n){const e=[];let t,s;for(t=0,s=n.length;t<s;t++)n[t].major&&e.push(t);return e}function Rw(n,e,t,s){let i=0,r=t[0],o;for(s=Math.ceil(s),o=0;o<n.length;o++)o===r&&(e.push(n[o]),i++,r=t[i*s])}function ni(n,e,t,s,i){const r=be(s,0),o=Math.min(be(i,n.length),n.length);let a=0,l,d,u;for(t=Math.ceil(t),i&&(l=i-s,t=l/Math.floor(l/t)),u=r;u<0;)a++,u=Math.round(r+a*t);for(d=Math.max(r,0);d<o;d++)d===u&&(e.push(n[d]),a++,u=Math.round(r+a*t))}function Ow(n){const e=n.length;let t,s;if(e<2)return!1;for(s=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==s)return!1;return s}const Aw=n=>n==="left"?"right":n==="right"?"left":n,Qa=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,Ka=(n,e)=>Math.min(e||n,n);function Za(n,e){const t=[],s=n.length/e,i=n.length;let r=0;for(;r<i;r+=s)t.push(n[Math.floor(r)]);return t}function Ew(n,e,t){const s=n.ticks.length,i=Math.min(e,s-1),r=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(i),d;if(!(t&&(s===1?d=Math.max(l-r,o-l):e===0?d=(n.getPixelForTick(1)-l)/2:d=(l-n.getPixelForTick(i-1))/2,l+=i<e?d:-d,l<r-a||l>o+a)))return l}function Fw(n,e){_e(n,t=>{const s=t.gc,i=s.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[s[r]];s.splice(0,i)}})}function hs(n){return n.drawTicks?n.tickLength:0}function Ja(n,e){if(!n.display)return 0;const t=at(n.font,e),s=St(n.padding);return(Je(n.text)?n.text.length:1)*t.lineHeight+s.height}function Lw(n,e){return Mn(n,{scale:e,type:"scale"})}function Nw(n,e,t){return Mn(n,{tick:t,index:e,type:"tick"})}function zw(n,e,t){let s=So(n);return(t&&e!=="right"||!t&&e==="right")&&(s=Aw(s)),s}function Bw(n,e,t,s){const{top:i,left:r,bottom:o,right:a,chart:l}=n,{chartArea:d,scales:u}=l;let h=0,f,m,p;const x=o-i,g=a-r;if(n.isHorizontal()){if(m=rt(s,r,a),Ce(t)){const y=Object.keys(t)[0],w=t[y];p=u[y].getPixelForValue(w)+x-e}else t==="center"?p=(d.bottom+d.top)/2+x-e:p=Qa(n,t,e);f=a-r}else{if(Ce(t)){const y=Object.keys(t)[0],w=t[y];m=u[y].getPixelForValue(w)-g+e}else t==="center"?m=(d.left+d.right)/2-g+e:m=Qa(n,t,e);p=rt(s,o,i),h=t==="left"?-Mt:Mt}return{titleX:m,titleY:p,maxWidth:f,rotation:h}}class es extends Yt{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:s,_suggestedMax:i}=this;return e=At(e,Number.POSITIVE_INFINITY),t=At(t,Number.NEGATIVE_INFINITY),s=At(s,Number.POSITIVE_INFINITY),i=At(i,Number.NEGATIVE_INFINITY),{min:At(e,s),max:At(t,i),minDefined:Tt(e),maxDefined:Tt(t)}}getMinMax(e){let{min:t,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:t,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,d=a.length;l<d;++l)o=a[l].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),r||(s=Math.max(s,o.max));return t=r&&t>s?s:t,s=i&&t>s?t:s,{min:At(t,At(s,t)),max:At(s,At(t,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Oe(this.options.beforeUpdate,[this])}update(e,t,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=iv(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Za(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=kw(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,s;this.isHorizontal()?(t=this.left,s=this.right):(t=this.top,s=this.bottom,e=!e),this._startPixel=t,this._endPixel=s,this._reversePixels=e,this._length=s-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Oe(this.options.afterUpdate,[this])}beforeSetDimensions(){Oe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Oe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Oe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Oe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let s,i,r;for(s=0,i=e.length;s<i;s++)r=e[s],r.label=Oe(t.callback,[r.value,s,e],this)}afterTickToLabelConversion(){Oe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Oe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,s=Ka(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let o=i,a,l,d;if(!this._isVisible()||!t.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,m=kt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/s:m/(s-1),h+6>a&&(a=m/(s-(e.offset?.5:1)),l=this.maxHeight-hs(e.grid)-t.padding-Ja(e.title,this.chart.options.font),d=Math.sqrt(h*h+f*f),o=I0(Math.min(Math.asin(kt((u.highest.height+6)/a,-1,1)),Math.asin(kt(l/d,-1,1))-Math.asin(kt(f/d,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Oe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Oe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Ja(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=hs(r)+l):(e.height=this.maxHeight,e.width=hs(r)+l),s.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:f}=this._getLabelSizes(),m=s.padding*2,p=bn(this.labelRotation),x=Math.cos(p),g=Math.sin(p);if(a){const y=s.mirror?0:g*h.width+x*f.height;e.height=Math.min(this.maxHeight,e.height+y+m)}else{const y=s.mirror?0:x*h.width+g*f.height;e.width=Math.min(this.maxWidth,e.width+y+m)}this._calculatePadding(d,u,g,x)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,d=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?d?(f=i*e.width,m=s*t.height):(f=s*e.height,m=i*t.width):r==="start"?m=t.width:r==="end"?f=e.width:r!=="inner"&&(f=e.width/2,m=t.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-h+o)*this.width/(this.width-h),0)}else{let u=t.height/2,h=e.height/2;r==="start"?(u=0,h=e.height):r==="end"&&(u=t.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Oe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,s;for(t=0,s=e.length;t<s;t++)Ne(e[t].label)&&(e.splice(t,1),s--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let s=this.ticks;t<s.length&&(s=Za(s,t)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(t/Ka(t,s));let d=0,u=0,h,f,m,p,x,g,y,w,T,C,P;for(h=0;h<t;h+=l){if(p=e[h].label,x=this._resolveTickFontOptions(h),i.font=g=x.string,y=r[g]=r[g]||{data:{},gc:[]},w=x.lineHeight,T=C=0,!Ne(p)&&!Je(p))T=Ia(i,y.data,y.gc,T,p),C=w;else if(Je(p))for(f=0,m=p.length;f<m;++f)P=p[f],!Ne(P)&&!Je(P)&&(T=Ia(i,y.data,y.gc,T,P),C+=w);o.push(T),a.push(C),d=Math.max(T,d),u=Math.max(C,u)}Fw(r,t);const I=o.indexOf(d),O=a.indexOf(u),b=k=>({width:o[k]||0,height:a[k]||0});return{first:b(0),last:b(t-1),widest:b(I),highest:b(O),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return R0(this._alignToPixels?mn(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const s=t[e];return s.$context||(s.$context=Nw(this.getContext(),e,s))}return this.$context||(this.$context=Lw(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=bn(this.labelRotation),s=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,d=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=hs(r),m=[],p=a.setContext(this.getContext()),x=p.display?p.width:0,g=x/2,y=function(L){return mn(s,L,x)};let w,T,C,P,I,O,b,k,A,E,D,S;if(o==="top")w=y(this.bottom),O=this.bottom-f,k=w-g,E=y(e.top)+g,S=e.bottom;else if(o==="bottom")w=y(this.top),E=e.top,S=y(e.bottom)-g,O=w+g,k=this.top+f;else if(o==="left")w=y(this.right),I=this.right-f,b=w-g,A=y(e.left)+g,D=e.right;else if(o==="right")w=y(this.left),A=e.left,D=y(e.right)-g,I=w+g,b=this.left+f;else if(t==="x"){if(o==="center")w=y((e.top+e.bottom)/2+.5);else if(Ce(o)){const L=Object.keys(o)[0],$=o[L];w=y(this.chart.scales[L].getPixelForValue($))}E=e.top,S=e.bottom,O=w+g,k=O+f}else if(t==="y"){if(o==="center")w=y((e.left+e.right)/2);else if(Ce(o)){const L=Object.keys(o)[0],$=o[L];w=y(this.chart.scales[L].getPixelForValue($))}I=w-g,b=I-f,A=e.left,D=e.right}const j=be(i.ticks.maxTicksLimit,h),R=Math.max(1,Math.ceil(h/j));for(T=0;T<h;T+=R){const L=this.getContext(T),$=r.setContext(L),W=a.setContext(L),V=$.lineWidth,J=$.color,H=W.dash||[],ie=W.dashOffset,xe=$.tickWidth,de=$.tickColor,Pe=$.tickBorderDash||[],se=$.tickBorderDashOffset;C=Ew(this,T,l),C!==void 0&&(P=mn(s,C,V),d?I=b=A=D=P:O=k=E=S=P,m.push({tx1:I,ty1:O,tx2:b,ty2:k,x1:A,y1:E,x2:D,y2:S,width:V,color:J,borderDash:H,borderDashOffset:ie,tickWidth:xe,tickColor:de,tickBorderDash:Pe,tickBorderDashOffset:se}))}return this._ticksLength=h,this._borderValue=w,m}_computeLabelItems(e){const t=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:d,padding:u,mirror:h}=r,f=hs(s.grid),m=f+u,p=h?-u:m,x=-bn(this.labelRotation),g=[];let y,w,T,C,P,I,O,b,k,A,E,D,S="middle";if(i==="top")I=this.bottom-p,O=this._getXAxisLabelAlignment();else if(i==="bottom")I=this.top+p,O=this._getXAxisLabelAlignment();else if(i==="left"){const R=this._getYAxisLabelAlignment(f);O=R.textAlign,P=R.x}else if(i==="right"){const R=this._getYAxisLabelAlignment(f);O=R.textAlign,P=R.x}else if(t==="x"){if(i==="center")I=(e.top+e.bottom)/2+m;else if(Ce(i)){const R=Object.keys(i)[0],L=i[R];I=this.chart.scales[R].getPixelForValue(L)+m}O=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")P=(e.left+e.right)/2-m;else if(Ce(i)){const R=Object.keys(i)[0],L=i[R];P=this.chart.scales[R].getPixelForValue(L)}O=this._getYAxisLabelAlignment(f).textAlign}t==="y"&&(l==="start"?S="top":l==="end"&&(S="bottom"));const j=this._getLabelSizes();for(y=0,w=a.length;y<w;++y){T=a[y],C=T.label;const R=r.setContext(this.getContext(y));b=this.getPixelForTick(y)+r.labelOffset,k=this._resolveTickFontOptions(y),A=k.lineHeight,E=Je(C)?C.length:1;const L=E/2,$=R.color,W=R.textStrokeColor,V=R.textStrokeWidth;let J=O;o?(P=b,O==="inner"&&(y===w-1?J=this.options.reverse?"left":"right":y===0?J=this.options.reverse?"right":"left":J="center"),i==="top"?d==="near"||x!==0?D=-E*A+A/2:d==="center"?D=-j.highest.height/2-L*A+A:D=-j.highest.height+A/2:d==="near"||x!==0?D=A/2:d==="center"?D=j.highest.height/2-L*A:D=j.highest.height-E*A,h&&(D*=-1),x!==0&&!R.showLabelBackdrop&&(P+=A/2*Math.sin(x))):(I=b,D=(1-E)*A/2);let H;if(R.showLabelBackdrop){const ie=St(R.backdropPadding),xe=j.heights[y],de=j.widths[y];let Pe=D-ie.top,se=0-ie.left;switch(S){case"middle":Pe-=xe/2;break;case"bottom":Pe-=xe;break}switch(O){case"center":se-=de/2;break;case"right":se-=de;break;case"inner":y===w-1?se-=de:y>0&&(se-=de/2);break}H={left:se,top:Pe,width:de+ie.width,height:xe+ie.height,color:R.backdropColor}}g.push({label:C,font:k,textOffset:D,options:{rotation:x,color:$,strokeColor:W,strokeWidth:V,textAlign:J,textBaseline:S,translation:[P,I],backdrop:H}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-bn(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let d,u;return t==="left"?i?(u=this.right+r,s==="near"?d="left":s==="center"?(d="center",u+=l/2):(d="right",u+=l)):(u=this.right-a,s==="near"?d="right":s==="center"?(d="center",u-=l/2):(d="left",u=this.left)):t==="right"?i?(u=this.left+r,s==="near"?d="right":s==="center"?(d="center",u-=l/2):(d="left",u-=l)):(u=this.left+a,s==="near"?d="left":s==="center"?(d="center",u+=l/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:s,top:i,width:r,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(s,i,r,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(r=>r.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,d,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(d.x,d.y),s.stroke(),s.restore())};if(t.display)for(r=0,o=i.length;r<o;++r){const l=i[r];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let d,u,h,f;this.isHorizontal()?(d=mn(e,this.left,o)-o/2,u=mn(e,this.right,a)+a/2,h=f=l):(h=mn(e,this.top,o)-o/2,f=mn(e,this.bottom,a)+a/2,d=u=l),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(d,h),t.lineTo(u,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&Do(s,i);const r=this.getLabelItems(e);for(const o of r){const a=o.options,l=o.font,d=o.label,u=o.textOffset;js(s,d,0,u,l,a)}i&&Co(s)}drawTitle(){const{ctx:e,options:{position:t,title:s,reverse:i}}=this;if(!s.display)return;const r=at(s.font),o=St(s.padding),a=s.align;let l=r.lineHeight/2;t==="bottom"||t==="center"||Ce(t)?(l+=o.bottom,Je(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:d,titleY:u,maxWidth:h,rotation:f}=Bw(this,l,t,a);js(e,s.text,0,0,r,{color:s.color,maxWidth:h,rotation:f,textAlign:zw(a,t,i),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,s=be(e.grid&&e.grid.z,-1),i=be(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==es.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=t.length;r<o;++r){const a=t[r];a[s]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return at(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class si{constructor(e,t,s){this.type=e,this.scope=t,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let s;Ww(t)&&(s=this.register(t));const i=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,$w(e,o,s),this.override&&Ye.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,s=e.id,i=this.scope;s in t&&delete t[s],i&&s in Ye[i]&&(delete Ye[i][s],this.override&&delete Sn[s])}}function $w(n,e,t){const s=ks(Object.create(null),[t?Ye.get(t):{},Ye.get(e),n.defaults]);Ye.set(e,s),n.defaultRoutes&&Vw(e,n.defaultRoutes),n.descriptors&&Ye.describe(e,n.descriptors)}function Vw(n,e){Object.keys(e).forEach(t=>{const s=t.split("."),i=s.pop(),r=[n].concat(s).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");Ye.route(r,i,l,a)})}function Ww(n){return"id"in n&&"defaults"in n}class Hw{constructor(){this.controllers=new si(ci,"datasets",!0),this.elements=new si(Yt,"elements"),this.plugins=new si(Object,"plugins"),this.scales=new si(es,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,s){[...t].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(e,r,i):_e(i,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,s){const i=wo(e);Oe(s["before"+i],[],s),t[e](s),Oe(s["after"+i],[],s)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const s=this._typedRegistries[t];if(s.isForType(e))return s}return this.plugins}_get(e,t,s){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return i}}var Ft=new Hw;class Yw{constructor(){this._init=[]}notify(e,t,s,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(r,e,t,s);return t==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,s,i){i=i||{};for(const r of e){const o=r.plugin,a=o[s],l=[t,i,r.options];if(Oe(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Ne(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const s=e&&e.config,i=be(s.options&&s.options.plugins,{}),r=Uw(s);return i===!1&&!t?[]:qw(e,r,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(t,s),e,"stop"),this._notify(i(s,t),e,"start")}}function Uw(n){const e={},t=[],s=Object.keys(Ft.plugins.items);for(let r=0;r<s.length;r++)t.push(Ft.getPlugin(s[r]));const i=n.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function Gw(n,e){return!e&&n===!1?null:n===!0?{}:n}function qw(n,{plugins:e,localIds:t},s,i){const r=[],o=n.getContext();for(const a of e){const l=a.id,d=Gw(s[l],i);d!==null&&r.push({plugin:a,options:Xw(n.config,{plugin:a,local:t[l]},d,o)})}return r}function Xw(n,{plugin:e,local:t},s,i){const r=n.pluginScopeKeys(e),o=n.getOptionScopes(s,r);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Lr(n,e){const t=Ye.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function Qw(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function Kw(n,e){return n===e?"_index_":"_value_"}function el(n){if(n==="x"||n==="y"||n==="r")return n}function Zw(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Nr(n,...e){if(el(n))return n;for(const t of e){const s=t.axis||Zw(t.position)||n.length>1&&el(n[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function tl(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function Jw(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(s=>s.xAxisID===n||s.yAxisID===n);if(t.length)return tl(n,"x",t[0])||tl(n,"y",t[0])}return{}}function eT(n,e){const t=Sn[n.type]||{scales:{}},s=e.scales||{},i=Lr(n.type,e),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Ce(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Nr(o,a,Jw(o,n),Ye.scales[a.type]),d=Kw(l,i),u=t.scales||{};r[o]=vs(Object.create(null),[{axis:l},a,u[l],u[d]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||Lr(a,e),u=(Sn[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=Qw(h,l),m=o[f+"AxisID"]||f;r[m]=r[m]||Object.create(null),vs(r[m],[{axis:f},s[m],u[h]])})}),Object.keys(r).forEach(o=>{const a=r[o];vs(a,[Ye.scales[a.type],Ye.scale])}),r}function Zd(n){const e=n.options||(n.options={});e.plugins=be(e.plugins,{}),e.scales=eT(n,e)}function Jd(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function tT(n){return n=n||{},n.data=Jd(n.data),Zd(n),n}const nl=new Map,eu=new Set;function ii(n,e){let t=nl.get(n);return t||(t=e(),nl.set(n,t),eu.add(t)),t}const fs=(n,e,t)=>{const s=Si(e,t);s!==void 0&&n.add(s)};class nT{constructor(e){this._config=tT(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Jd(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Zd(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return ii(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return ii(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return ii(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,s=this.type;return ii(`${s}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const s=this._scopeCache;let i=s.get(e);return(!i||t)&&(i=new Map,s.set(e,i)),i}getOptionScopes(e,t,s){const{options:i,type:r}=this,o=this._cachedScopes(e,s),a=o.get(t);if(a)return a;const l=new Set;t.forEach(u=>{e&&(l.add(e),u.forEach(h=>fs(l,e,h))),u.forEach(h=>fs(l,i,h)),u.forEach(h=>fs(l,Sn[r]||{},h)),u.forEach(h=>fs(l,Ye,h)),u.forEach(h=>fs(l,Er,h))});const d=Array.from(l);return d.length===0&&d.push(Object.create(null)),eu.has(t)&&o.set(t,d),d}chartOptionScopes(){const{options:e,type:t}=this;return[e,Sn[t]||{},Ye.datasets[t]||{},{type:t},Ye,Er]}resolveNamedOptions(e,t,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=sl(this._resolverCache,e,i);let l=o;if(iT(o,t)){r.$shared=!1,s=ln(s)?s():s;const d=this.createResolver(e,s,a);l=Kn(o,s,d)}for(const d of t)r[d]=l[d];return r}createResolver(e,t,s=[""],i){const{resolver:r}=sl(this._resolverCache,e,s);return Ce(t)?Kn(r,t,void 0,i):r}}function sl(n,e,t){let s=n.get(e);s||(s=new Map,n.set(e,s));const i=t.join();let r=s.get(i);return r||(r={resolver:Mo(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const sT=n=>Ce(n)&&Object.getOwnPropertyNames(n).some(e=>ln(n[e]));function iT(n,e){const{isScriptable:t,isIndexable:s}=Fd(n);for(const i of e){const r=t(i),o=s(i),a=(o||r)&&n[i];if(r&&(ln(a)||sT(a))||o&&Je(a))return!0}return!1}var rT="4.5.0";const oT=["top","bottom","left","right","chartArea"];function il(n,e){return n==="top"||n==="bottom"||oT.indexOf(n)===-1&&e==="x"}function rl(n,e){return function(t,s){return t[n]===s[n]?t[e]-s[e]:t[n]-s[n]}}function ol(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Oe(t&&t.onComplete,[n],e)}function aT(n){const e=n.chart,t=e.options.animation;Oe(t&&t.onProgress,[n],e)}function tu(n){return jo()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const ui={},al=n=>{const e=tu(n);return Object.values(ui).filter(t=>t.canvas===e).pop()};function lT(n,e,t){const s=Object.keys(n);for(const i of s){const r=+i;if(r>=e){const o=n[i];delete n[i],(t>0||r>e)&&(n[r+t]=o)}}}function cT(n,e,t,s){return!t||n.type==="mouseout"?null:s?e:n}class Qt{static register(...e){Ft.add(...e),ll()}static unregister(...e){Ft.remove(...e),ll()}constructor(e,t){const s=this.config=new nT(t),i=tu(e),r=al(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||Mw(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,d=l&&l.height,u=l&&l.width;if(this.id=g0(),this.ctx=a,this.canvas=l,this.width=u,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Yw,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=L0(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],ui[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Gt.listen(this,"complete",ol),Gt.listen(this,"progress",aT),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:s,height:i,_aspectRatio:r}=this;return Ne(e)?t&&r?r:i?s/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ft}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Oa(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ja(this.canvas,this.ctx),this}stop(){return Gt.stop(this),this}resize(e,t){Gt.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,t,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Oa(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Oe(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};_e(t,(s,i)=>{s.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];t&&(r=r.concat(Object.keys(t).map(o=>{const a=t[o],l=Nr(o,a),d=l==="r",u=l==="x";return{options:a,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),_e(r,o=>{const a=o.options,l=a.id,d=Nr(l,a),u=be(a.type,o.dtype);(a.position===void 0||il(a.position,d)!==il(o.dposition))&&(a.position=o.dposition),i[l]=!0;let h=null;if(l in s&&s[l].type===u)h=s[l];else{const f=Ft.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(a,e)}),_e(i,(o,a)=>{o||delete s[a]}),_e(s,o=>{wt.configure(this,o,o.options),wt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,s=e.length;if(e.sort((i,r)=>i.index-r.index),s>t){for(let i=t;i<s;++i)this._destroyDatasetMeta(i);e.splice(t,s-t)}this._sortedMetasets=e.slice(0).sort(rl("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((s,i)=>{t.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=t.length;s<i;s++){const r=t[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||Lr(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=Ft.getController(a),{datasetElementType:d,dataElementType:u}=Ye.datasets[a];Object.assign(l,{dataElementType:Ft.getElement(u),datasetElementType:d&&Ft.getElement(d)}),o.controller=new l(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){_e(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),f=!i&&r.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||_e(r,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(rl("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){_e(this.scales,e=>{wt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!va(t,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of t){const o=s==="_removeElements"?-r:r;lT(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<t;r++)if(!va(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;wt.update(this,this.width,this.height,e);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],_e(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,s=this.data.datasets.length;t<s;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,ln(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const s=this.getDatasetMeta(e),i={meta:s,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Gt.has(this)?this.attached&&!Gt.running(this)&&Gt.start(this):(this.draw(),ol({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,s=[];let i,r;for(i=0,r=t.length;i<r;++i){const o=t[i];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,s={meta:e,index:e.index,cancelable:!0},i=$v(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&Do(t,i),e.controller.draw(),i&&Co(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Is(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,s,i){const r=ow.modes[t];return typeof r=="function"?r(this,e,s,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],s=this._metasets;let i=s.filter(r=>r&&r._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=Mn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!t.hidden}setDatasetVisibility(e,t){const s=this.getDatasetMeta(e);s.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,s){const i=s?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,i);Pi(t)?(r.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Gt.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),ja(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete ui[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,s=(r,o)=>{t.addEventListener(this,r,o),e[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};_e(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,s=(l,d)=>{t.addEventListener(this,l,d),e[l]=d},i=(l,d)=>{e[l]&&(t.removeEventListener(this,l,d),delete e[l])},r=(l,d)=>{this.canvas&&this.resize(l,d)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){_e(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},_e(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,s){const i=s?"set":"remove";let r,o,a,l;for(t==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],s=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!wi(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(e,t,s){return this._plugins.notify(this,e,t,s)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,s){const i=this.options.hover,r=(l,d)=>l.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(t,e),a=s?e:r(e,t);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,t){const s={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(e,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(e,t,s){const{_active:i=[],options:r}=this,o=t,a=this._getActiveElements(e,i,s,o),l=T0(e),d=cT(e,this._lastEvent,s,l);s&&(this._lastEvent=null,Oe(r.onHover,[e,a,this],this),l&&Oe(r.onClick,[e,a,this],this));const u=!wi(a,i);return(u||t)&&(this._active=a,this._updateHoverStyles(a,i,t)),this._lastEvent=d,u}_getActiveElements(e,t,s,i){if(e.type==="mouseout")return[];if(!s)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}B(Qt,"defaults",Ye),B(Qt,"instances",ui),B(Qt,"overrides",Sn),B(Qt,"registry",Ft),B(Qt,"version",rT),B(Qt,"getChart",al);function ll(){return _e(Qt.instances,n=>n._plugins.invalidate())}function nu(n,e,t=e){n.lineCap=be(t.borderCapStyle,e.borderCapStyle),n.setLineDash(be(t.borderDash,e.borderDash)),n.lineDashOffset=be(t.borderDashOffset,e.borderDashOffset),n.lineJoin=be(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=be(t.borderWidth,e.borderWidth),n.strokeStyle=be(t.borderColor,e.borderColor)}function dT(n,e,t){n.lineTo(t.x,t.y)}function uT(n){return n.stepped?X0:n.tension||n.cubicInterpolationMode==="monotone"?Q0:dT}function su(n,e,t={}){const s=n.length,{start:i=0,end:r=s-1}=t,{start:o,end:a}=e,l=Math.max(i,o),d=Math.min(r,a),u=i<o&&r<o||i>a&&r>a;return{count:s,start:l,loop:e.loop,ilen:d<l&&!u?s+d-l:d-l}}function hT(n,e,t,s){const{points:i,options:r}=e,{count:o,start:a,loop:l,ilen:d}=su(i,t,s),u=uT(r);let{move:h=!0,reverse:f}=s||{},m,p,x;for(m=0;m<=d;++m)p=i[(a+(f?d-m:m))%o],!p.skip&&(h?(n.moveTo(p.x,p.y),h=!1):u(n,x,p,f,r.stepped),x=p);return l&&(p=i[(a+(f?d:0))%o],u(n,x,p,f,r.stepped)),!!l}function fT(n,e,t,s){const i=e.points,{count:r,start:o,ilen:a}=su(i,t,s),{move:l=!0,reverse:d}=s||{};let u=0,h=0,f,m,p,x,g,y;const w=C=>(o+(d?a-C:C))%r,T=()=>{x!==g&&(n.lineTo(u,g),n.lineTo(u,x),n.lineTo(u,y))};for(l&&(m=i[w(0)],n.moveTo(m.x,m.y)),f=0;f<=a;++f){if(m=i[w(f)],m.skip)continue;const C=m.x,P=m.y,I=C|0;I===p?(P<x?x=P:P>g&&(g=P),u=(h*u+C)/++h):(T(),n.lineTo(C,P),p=I,h=0,x=g=P),y=P}T()}function zr(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?fT:hT}function mT(n){return n.stepped?kv:n.tension||n.cubicInterpolationMode==="monotone"?Iv:yn}function pT(n,e,t,s){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,s)&&i.closePath()),nu(n,e.options),n.stroke(i)}function gT(n,e,t,s){const{segments:i,options:r}=e,o=zr(e);for(const a of i)nu(n,r,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+s-1})&&n.closePath(),n.stroke()}const xT=typeof Path2D=="function";function yT(n,e,t,s){xT&&!e.options.segment?pT(n,e,t,s):gT(n,e,t,s)}class xs extends Yt{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;vv(this._points,s,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Lv(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,s=e.length;return s&&t[e[s-1].end]}interpolate(e,t){const s=this.options,i=e[t],r=this.points,o=Av(this,{property:t,start:i,end:i});if(!o.length)return;const a=[],l=mT(s);let d,u;for(d=0,u=o.length;d<u;++d){const{start:h,end:f}=o[d],m=r[h],p=r[f];if(m===p){a.push(m);continue}const x=Math.abs((i-m[t])/(p[t]-m[t])),g=l(m,p,x,s.stepped);g[t]=e[t],a.push(g)}return a.length===1?a[0]:a}pathSegment(e,t,s){return zr(this)(e,this,t,s)}path(e,t,s){const i=this.segments,r=zr(this);let o=this._loop;t=t||0,s=s||this.points.length-t;for(const a of i)o&=r(e,this,a,{start:t,end:t+s-1});return!!o}draw(e,t,s,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),yT(e,this,s,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}B(xs,"id","line"),B(xs,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),B(xs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),B(xs,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function cl(n,e,t,s){const i=n.options,{[t]:r}=n.getProps([t],s);return Math.abs(e-r)<i.radius+i.hitRadius}class hi extends Yt{constructor(t){super();B(this,"parsed");B(this,"skip");B(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,s,i){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(s-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,s){return cl(this,t,"x",s)}inYRange(t,s){return cl(this,t,"y",s)}getCenterPoint(t){const{x:s,y:i}=this.getProps(["x","y"],t);return{x:s,y:i}}size(t){t=t||this.options||{};let s=t.radius||0;s=Math.max(s,s&&t.hoverRadius||0);const i=s&&t.borderWidth||0;return(s+i)*2}draw(t,s){const i=this.options;this.skip||i.radius<.1||!Is(this,s,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,Fr(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}B(hi,"id","point"),B(hi,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),B(hi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function iu(n,e){const{x:t,y:s,base:i,width:r,height:o}=n.getProps(["x","y","base","width","height"],e);let a,l,d,u,h;return n.horizontal?(h=o/2,a=Math.min(t,i),l=Math.max(t,i),d=s-h,u=s+h):(h=r/2,a=t-h,l=t+h,d=Math.min(s,i),u=Math.max(s,i)),{left:a,top:d,right:l,bottom:u}}function sn(n,e,t,s){return n?0:kt(e,t,s)}function bT(n,e,t){const s=n.options.borderWidth,i=n.borderSkipped,r=Ed(s);return{t:sn(i.top,r.top,0,t),r:sn(i.right,r.right,0,e),b:sn(i.bottom,r.bottom,0,t),l:sn(i.left,r.left,0,e)}}function vT(n,e,t){const{enableBorderRadius:s}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,r=Wn(i),o=Math.min(e,t),a=n.borderSkipped,l=s||Ce(i);return{topLeft:sn(!l||a.top||a.left,r.topLeft,0,o),topRight:sn(!l||a.top||a.right,r.topRight,0,o),bottomLeft:sn(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:sn(!l||a.bottom||a.right,r.bottomRight,0,o)}}function wT(n){const e=iu(n),t=e.right-e.left,s=e.bottom-e.top,i=bT(n,t/2,s/2),r=vT(n,t/2,s/2);return{outer:{x:e.left,y:e.top,w:t,h:s,radius:r},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function xr(n,e,t,s){const i=e===null,r=t===null,a=n&&!(i&&r)&&iu(n,s);return a&&(i||vn(e,a.left,a.right))&&(r||vn(t,a.top,a.bottom))}function TT(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function ST(n,e){n.rect(e.x,e.y,e.w,e.h)}function yr(n,e,t={}){const s=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,r=(n.x+n.w!==t.x+t.w?e:0)-s,o=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+s,y:n.y+i,w:n.w+r,h:n.h+o,radius:n.radius}}class fi extends Yt{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:s,backgroundColor:i}}=this,{inner:r,outer:o}=wT(this),a=TT(o.radius)?Mi:ST;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,yr(o,t,r)),e.clip(),a(e,yr(r,-t,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),a(e,yr(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,s){return xr(this,e,t,s)}inXRange(e,t){return xr(this,e,null,t)}inYRange(e,t){return xr(this,null,e,t)}getCenterPoint(e){const{x:t,y:s,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?s:(s+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}B(fi,"id","bar"),B(fi,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),B(fi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const dl=(n,e)=>{let{boxHeight:t=e,boxWidth:s=e}=n;return n.usePointStyle&&(t=Math.min(t,e),s=n.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:t,itemHeight:Math.max(e,t)}},PT=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class ul extends Yt{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,s){this.maxWidth=e,this.maxHeight=t,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Oe(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(s=>e.filter(s,this.chart.data))),e.sort&&(t=t.sort((s,i)=>e.sort(s,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,i=at(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=dl(s,r);let d,u;t.font=i.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,d=this._fitCols(o,i,a,l)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],d=this.lineWidths=[0],u=i+a;let h=e;r.textAlign="left",r.textBaseline="middle";let f=-1,m=-u;return this.legendItems.forEach((p,x)=>{const g=s+t/2+r.measureText(p.text).width;(x===0||d[d.length-1]+g+2*a>o)&&(h+=u,d[d.length-(x>0?0:1)]=0,m+=u,f++),l[x]={left:0,top:m,row:f,width:g,height:i},d[d.length-1]+=g+a}),h}_fitCols(e,t,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-e;let h=a,f=0,m=0,p=0,x=0;return this.legendItems.forEach((g,y)=>{const{itemWidth:w,itemHeight:T}=DT(s,t,r,g,i);y>0&&m+T+2*a>u&&(h+=f+a,d.push({width:f,height:m}),p+=f+a,x++,f=m=0),l[y]={left:p,top:m,col:x,width:w,height:T},f=Math.max(f,w),m+=T+a}),h+=f,d.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:s,labels:{padding:i},rtl:r}}=this,o=Hn(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=rt(s,this.left+i,this.right-this.lineWidths[a]);for(const d of t)a!==d.row&&(a=d.row,l=rt(s,this.left+i,this.right-this.lineWidths[a])),d.top+=this.top+e+i,d.left=o.leftForLtr(o.x(l),d.width),l+=d.width+i}else{let a=0,l=rt(s,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const d of t)d.col!==a&&(a=d.col,l=rt(s,this.top+e+i,this.bottom-this.columnSizes[a].height)),d.top=l,d.left+=this.left+i,d.left=o.leftForLtr(o.x(d.left),d.width),l+=d.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Do(e,this),this._draw(),Co(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:s,ctx:i}=this,{align:r,labels:o}=e,a=Ye.color,l=Hn(e.rtl,this.left,this.width),d=at(o.font),{padding:u}=o,h=d.size,f=h/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=d.string;const{boxWidth:p,boxHeight:x,itemHeight:g}=dl(o,h),y=function(I,O,b){if(isNaN(p)||p<=0||isNaN(x)||x<0)return;i.save();const k=be(b.lineWidth,1);if(i.fillStyle=be(b.fillStyle,a),i.lineCap=be(b.lineCap,"butt"),i.lineDashOffset=be(b.lineDashOffset,0),i.lineJoin=be(b.lineJoin,"miter"),i.lineWidth=k,i.strokeStyle=be(b.strokeStyle,a),i.setLineDash(be(b.lineDash,[])),o.usePointStyle){const A={radius:x*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:k},E=l.xPlus(I,p/2),D=O+f;Od(i,A,E,D,o.pointStyleWidth&&p)}else{const A=O+Math.max((h-x)/2,0),E=l.leftForLtr(I,p),D=Wn(b.borderRadius);i.beginPath(),Object.values(D).some(S=>S!==0)?Mi(i,{x:E,y:A,w:p,h:x,radius:D}):i.rect(E,A,p,x),i.fill(),k!==0&&i.stroke()}i.restore()},w=function(I,O,b){js(i,b.text,I,O+g/2,d,{strikethrough:b.hidden,textAlign:l.textAlign(b.textAlign)})},T=this.isHorizontal(),C=this._computeTitleHeight();T?m={x:rt(r,this.left+u,this.right-s[0]),y:this.top+u+C,line:0}:m={x:this.left+u,y:rt(r,this.top+C+u,this.bottom-t[0].height),line:0},$d(this.ctx,e.textDirection);const P=g+u;this.legendItems.forEach((I,O)=>{i.strokeStyle=I.fontColor,i.fillStyle=I.fontColor;const b=i.measureText(I.text).width,k=l.textAlign(I.textAlign||(I.textAlign=o.textAlign)),A=p+f+b;let E=m.x,D=m.y;l.setWidth(this.width),T?O>0&&E+A+u>this.right&&(D=m.y+=P,m.line++,E=m.x=rt(r,this.left+u,this.right-s[m.line])):O>0&&D+P>this.bottom&&(E=m.x=E+t[m.line].width+u,m.line++,D=m.y=rt(r,this.top+C+u,this.bottom-t[m.line].height));const S=l.x(E);if(y(S,D,I),E=N0(k,E+p+f,T?E+A:this.right,e.rtl),w(l.x(E),D,I),T)m.x+=A+u;else if(typeof I.text!="string"){const j=d.lineHeight;m.y+=ru(I,j)+u}else m.y+=P}),Vd(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,s=at(t.font),i=St(t.padding);if(!t.display)return;const r=Hn(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=s.size/2,d=i.top+l;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+d,h=rt(e.align,h,this.right-f);else{const p=this.columnSizes.reduce((x,g)=>Math.max(x,g.height),0);u=d+rt(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const m=rt(a,h,h+f);o.textAlign=r.textAlign(So(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=s.string,js(o,t.text,m,u,s)}_computeTitleHeight(){const e=this.options.title,t=at(e.font),s=St(e.padding);return e.display?t.lineHeight+s.height:0}_getLegendItemAt(e,t){let s,i,r;if(vn(e,this.left,this.right)&&vn(t,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],vn(e,i.left,i.left+i.width)&&vn(t,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(e){const t=this.options;if(!kT(e.type,t))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,r=PT(i,s);i&&!r&&Oe(t.onLeave,[e,i,this],this),this._hoveredItem=s,s&&!r&&Oe(t.onHover,[e,s,this],this)}else s&&Oe(t.onClick,[e,s,this],this)}}function DT(n,e,t,s,i){const r=CT(s,n,e,t),o=MT(i,s,e.lineHeight);return{itemWidth:r,itemHeight:o}}function CT(n,e,t,s){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),e+t.size/2+s.measureText(i).width}function MT(n,e,t){let s=n;return typeof e.text!="string"&&(s=ru(e,t)),s}function ru(n,e){const t=n.text?n.text.length:0;return e*t}function kT(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var IT={id:"legend",_element:ul,start(n,e,t){const s=n.legend=new ul({ctx:n.ctx,options:t,chart:n});wt.configure(n,s,t),wt.addBox(n,s)},stop(n){wt.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const s=n.legend;wt.configure(n,s,t),s.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const s=e.datasetIndex,i=t.chart;i.isDatasetVisible(s)?(i.hide(s),e.hidden=!0):(i.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const d=l.controller.getStyle(t?0:void 0),u=St(d.borderWidth);return{text:e[l.index].label,fillStyle:d.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:s||d.pointStyle,rotation:d.rotation,textAlign:i||d.textAlign,borderRadius:o&&(a||d.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class ou extends Yt{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const i=Je(s.text)?s.text.length:1;this._padding=St(s.padding);const r=i*at(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:s,bottom:i,right:r,options:o}=this,a=o.align;let l=0,d,u,h;return this.isHorizontal()?(u=rt(a,s,r),h=t+e,d=r-s):(o.position==="left"?(u=s+e,h=rt(a,i,t),l=tt*-.5):(u=r-e,h=rt(a,t,i),l=tt*.5),d=i-t),{titleX:u,titleY:h,maxWidth:d,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const s=at(t.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:d}=this._drawArgs(r);js(e,t.text,0,0,s,{color:t.color,maxWidth:l,rotation:d,textAlign:So(t.align),textBaseline:"middle",translation:[o,a]})}}function jT(n,e){const t=new ou({ctx:n.ctx,options:e,chart:n});wt.configure(n,t,e),wt.addBox(n,t),n.titleBlock=t}var _T={id:"title",_element:ou,start(n,e,t){jT(n,t)},stop(n){const e=n.titleBlock;wt.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const s=n.titleBlock;wt.configure(n,s,t),s.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ys={average(n){if(!n.length)return!1;let e,t,s=new Set,i=0,r=0;for(e=0,t=n.length;e<t;++e){const a=n[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),i+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:i/r}},nearest(n,e){if(!n.length)return!1;let t=e.x,s=e.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=n.length;r<o;++r){const l=n[r].element;if(l&&l.hasValue()){const d=l.getCenterPoint(),u=Or(e,d);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,s=l.y}return{x:t,y:s}}};function Et(n,e){return e&&(Je(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function qt(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function RT(n,e){const{element:t,datasetIndex:s,index:i}=e,r=n.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:n,label:o,parsed:r.getParsed(i),raw:n.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:t}}function hl(n,e){const t=n.chart.ctx,{body:s,footer:i,title:r}=n,{boxWidth:o,boxHeight:a}=e,l=at(e.bodyFont),d=at(e.titleFont),u=at(e.footerFont),h=r.length,f=i.length,m=s.length,p=St(e.padding);let x=p.height,g=0,y=s.reduce((C,P)=>C+P.before.length+P.lines.length+P.after.length,0);if(y+=n.beforeBody.length+n.afterBody.length,h&&(x+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const C=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;x+=m*C+(y-m)*l.lineHeight+(y-1)*e.bodySpacing}f&&(x+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let w=0;const T=function(C){g=Math.max(g,t.measureText(C).width+w)};return t.save(),t.font=d.string,_e(n.title,T),t.font=l.string,_e(n.beforeBody.concat(n.afterBody),T),w=e.displayColors?o+2+e.boxPadding:0,_e(s,C=>{_e(C.before,T),_e(C.lines,T),_e(C.after,T)}),w=0,t.font=u.string,_e(n.footer,T),t.restore(),g+=p.width,{width:g,height:x}}function OT(n,e){const{y:t,height:s}=e;return t<s/2?"top":t>n.height-s/2?"bottom":"center"}function AT(n,e,t,s){const{x:i,width:r}=s,o=t.caretSize+t.caretPadding;if(n==="left"&&i+r+o>e.width||n==="right"&&i-r-o<0)return!0}function ET(n,e,t,s){const{x:i,width:r}=t,{width:o,chartArea:{left:a,right:l}}=n;let d="center";return s==="center"?d=i<=(a+l)/2?"left":"right":i<=r/2?d="left":i>=o-r/2&&(d="right"),AT(d,n,e,t)&&(d="center"),d}function fl(n,e,t){const s=t.yAlign||e.yAlign||OT(n,t);return{xAlign:t.xAlign||e.xAlign||ET(n,e,t,s),yAlign:s}}function FT(n,e){let{x:t,width:s}=n;return e==="right"?t-=s:e==="center"&&(t-=s/2),t}function LT(n,e,t){let{y:s,height:i}=n;return e==="top"?s+=t:e==="bottom"?s-=i+t:s-=i/2,s}function ml(n,e,t,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,d=i+r,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:m}=Wn(o);let p=FT(e,a);const x=LT(e,l,d);return l==="center"?a==="left"?p+=d:a==="right"&&(p-=d):a==="left"?p-=Math.max(u,f)+i:a==="right"&&(p+=Math.max(h,m)+i),{x:kt(p,0,s.width-e.width),y:kt(x,0,s.height-e.height)}}function ri(n,e,t){const s=St(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-s.right:n.x+s.left}function pl(n){return Et([],qt(n))}function NT(n,e,t){return Mn(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function gl(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const au={beforeTitle:Ut,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,s=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return t[e.dataIndex]}return""},afterTitle:Ut,beforeBody:Ut,beforeLabel:Ut,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Ne(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ut,afterBody:Ut,beforeFooter:Ut,footer:Ut,afterFooter:Ut};function ft(n,e,t,s){const i=n[e].call(t,s);return typeof i>"u"?au[e].call(t,s):i}class Br extends Yt{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&t.options.animation&&s.animations,r=new Hd(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=NT(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:s}=t,i=ft(s,"beforeTitle",this,e),r=ft(s,"title",this,e),o=ft(s,"afterTitle",this,e);let a=[];return a=Et(a,qt(i)),a=Et(a,qt(r)),a=Et(a,qt(o)),a}getBeforeBody(e,t){return pl(ft(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:s}=t,i=[];return _e(e,r=>{const o={before:[],lines:[],after:[]},a=gl(s,r);Et(o.before,qt(ft(a,"beforeLabel",this,r))),Et(o.lines,ft(a,"label",this,r)),Et(o.after,qt(ft(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(e,t){return pl(ft(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:s}=t,i=ft(s,"beforeFooter",this,e),r=ft(s,"footer",this,e),o=ft(s,"afterFooter",this,e);let a=[];return a=Et(a,qt(i)),a=Et(a,qt(r)),a=Et(a,qt(o)),a}_createItems(e){const t=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],l,d;for(l=0,d=t.length;l<d;++l)a.push(RT(this.chart,t[l]));return e.filter&&(a=a.filter((u,h,f)=>e.filter(u,h,f,s))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,s))),_e(a,u=>{const h=gl(e.callbacks,u);i.push(ft(h,"labelColor",this,u)),r.push(ft(h,"labelPointStyle",this,u)),o.push(ft(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=ys[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=hl(this,s),d=Object.assign({},a,l),u=fl(this.chart,s,d),h=ml(s,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,s,i){const r=this.getCaretPosition(e,s,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:d,bottomLeft:u,bottomRight:h}=Wn(a),{x:f,y:m}=e,{width:p,height:x}=t;let g,y,w,T,C,P;return r==="center"?(C=m+x/2,i==="left"?(g=f,y=g-o,T=C+o,P=C-o):(g=f+p,y=g+o,T=C-o,P=C+o),w=g):(i==="left"?y=f+Math.max(l,u)+o:i==="right"?y=f+p-Math.max(d,h)-o:y=this.caretX,r==="top"?(T=m,C=T-o,g=y-o,w=y+o):(T=m+x,C=T+o,g=y+o,w=y-o),P=T),{x1:g,x2:y,x3:w,y1:T,y2:C,y3:P}}drawTitle(e,t,s){const i=this.title,r=i.length;let o,a,l;if(r){const d=Hn(s.rtl,this.x,this.width);for(e.x=ri(this,s.titleAlign,s),t.textAlign=d.textAlign(s.titleAlign),t.textBaseline="middle",o=at(s.titleFont),a=s.titleSpacing,t.fillStyle=s.titleColor,t.font=o.string,l=0;l<r;++l)t.fillText(i[l],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,t,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:d}=r,u=at(r.bodyFont),h=ri(this,"left",r),f=i.x(h),m=l<u.lineHeight?(u.lineHeight-l)/2:0,p=t.y+m;if(r.usePointStyle){const x={radius:Math.min(d,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},g=i.leftForLtr(f,d)+d/2,y=p+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Fr(e,x,g,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Fr(e,x,g,y)}else{e.lineWidth=Ce(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=i.leftForLtr(f,d),g=i.leftForLtr(i.xPlus(f,1),d-2),y=Wn(o.borderRadius);Object.values(y).some(w=>w!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Mi(e,{x,y:p,w:d,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Mi(e,{x:g,y:p+1,w:d-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(x,p,d,l),e.strokeRect(x,p,d,l),e.fillStyle=o.backgroundColor,e.fillRect(g,p+1,d-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,t,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:d,boxPadding:u}=s,h=at(s.bodyFont);let f=h.lineHeight,m=0;const p=Hn(s.rtl,this.x,this.width),x=function(b){t.fillText(b,p.x(e.x+m),e.y+f/2),e.y+=f+r},g=p.textAlign(o);let y,w,T,C,P,I,O;for(t.textAlign=o,t.textBaseline="middle",t.font=h.string,e.x=ri(this,g,s),t.fillStyle=s.bodyColor,_e(this.beforeBody,x),m=a&&g!=="right"?o==="center"?d/2+u:d+2+u:0,C=0,I=i.length;C<I;++C){for(y=i[C],w=this.labelTextColors[C],t.fillStyle=w,_e(y.before,x),T=y.lines,a&&T.length&&(this._drawColorBox(t,e,C,p,s),f=Math.max(h.lineHeight,l)),P=0,O=T.length;P<O;++P)x(T[P]),f=h.lineHeight;_e(y.after,x)}m=0,f=h.lineHeight,_e(this.afterBody,x),e.y-=r}drawFooter(e,t,s){const i=this.footer,r=i.length;let o,a;if(r){const l=Hn(s.rtl,this.x,this.width);for(e.x=ri(this,s.footerAlign,s),e.y+=s.footerMarginTop,t.textAlign=l.textAlign(s.footerAlign),t.textBaseline="middle",o=at(s.footerFont),t.fillStyle=s.footerColor,t.font=o.string,a=0;a<r;++a)t.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,t,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:d,height:u}=s,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:p}=Wn(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(a+h,l),o==="top"&&this.drawCaret(e,t,s,i),t.lineTo(a+d-f,l),t.quadraticCurveTo(a+d,l,a+d,l+f),o==="center"&&r==="right"&&this.drawCaret(e,t,s,i),t.lineTo(a+d,l+u-p),t.quadraticCurveTo(a+d,l+u,a+d-p,l+u),o==="bottom"&&this.drawCaret(e,t,s,i),t.lineTo(a+m,l+u),t.quadraticCurveTo(a,l+u,a,l+u-m),o==="center"&&r==="left"&&this.drawCaret(e,t,s,i),t.lineTo(a,l+h),t.quadraticCurveTo(a,l,a+h,l),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=ys[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=hl(this,e),l=Object.assign({},o,this._size),d=fl(t,e,l),u=ml(e,l,d,t);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=St(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(r,e,i,t),$d(e,t.textDirection),r.y+=o.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),Vd(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const s=this._active,i=e.map(({datasetIndex:a,index:l})=>{const d=this.chart.getDatasetMeta(a);if(!d)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:d.data[l],index:l}}),r=!wi(s,i),o=this._positionChanged(i,t);(r||o)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,s=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(e,r,t,s),a=this._positionChanged(o,e),l=t||!wi(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,s,i){const r=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:s,caretY:i,options:r}=this,o=ys[r.position].call(this,e,t);return o!==!1&&(s!==o.x||i!==o.y)}}B(Br,"positioners",ys);var zT={id:"tooltip",_element:Br,positioners:ys,afterInit(n,e,t){t&&(n.tooltip=new Br({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:au},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const BT=(n,e,t,s)=>(typeof e=="string"?(t=n.push(e)-1,s.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function $T(n,e,t,s){const i=n.indexOf(e);if(i===-1)return BT(n,e,t,s);const r=n.lastIndexOf(e);return i!==r?t:i}const VT=(n,e)=>n===null?null:kt(Math.round(n),0,e);function xl(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class $r extends es{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const s=this.getLabels();for(const{index:i,label:r}of t)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Ne(e))return null;const s=this.getLabels();return t=isFinite(t)&&s[t]===e?t:$T(s,e,be(t,e),this._addedLabels),VT(t,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),t||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const e=this.min,t=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=e===0&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=t;o++)i.push({value:o});return i}getLabelForValue(e){return xl.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}B($r,"id","category"),B($r,"defaults",{ticks:{callback:xl}});function WT(n,e){const t=[],{bounds:i,step:r,min:o,max:a,precision:l,count:d,maxTicks:u,maxDigits:h,includeBounds:f}=n,m=r||1,p=u-1,{min:x,max:g}=e,y=!Ne(o),w=!Ne(a),T=!Ne(d),C=(g-x)/(h+1);let P=Ta((g-x)/p/m)*m,I,O,b,k;if(P<1e-14&&!y&&!w)return[{value:x},{value:g}];k=Math.ceil(g/P)-Math.floor(x/P),k>p&&(P=Ta(k*P/p/m)*m),Ne(l)||(I=Math.pow(10,l),P=Math.ceil(P*I)/I),i==="ticks"?(O=Math.floor(x/P)*P,b=Math.ceil(g/P)*P):(O=x,b=g),y&&w&&r&&M0((a-o)/r,P/1e3)?(k=Math.round(Math.min((a-o)/P,u)),P=(a-o)/k,O=o,b=a):T?(O=y?o:O,b=w?a:b,k=d-1,P=(b-O)/k):(k=(b-O)/P,ws(k,Math.round(k),P/1e3)?k=Math.round(k):k=Math.ceil(k));const A=Math.max(Sa(P),Sa(O));I=Math.pow(10,Ne(l)?A:l),O=Math.round(O*I)/I,b=Math.round(b*I)/I;let E=0;for(y&&(f&&O!==o?(t.push({value:o}),O<o&&E++,ws(Math.round((O+E*P)*I)/I,o,yl(o,C,n))&&E++):O<o&&E++);E<k;++E){const D=Math.round((O+E*P)*I)/I;if(w&&D>a)break;t.push({value:D})}return w&&f&&b!==a?t.length&&ws(t[t.length-1].value,a,yl(a,C,n))?t[t.length-1].value=a:t.push({value:a}):(!w||b===a)&&t.push({value:b}),t}function yl(n,e,{horizontal:t,minRotation:s}){const i=bn(s),r=(t?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+n).length;return Math.min(e/r,o)}class HT extends es{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Ne(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const o=l=>i=t?i:l,a=l=>r=s?r:l;if(e){const l=Qn(i),d=Qn(r);l<0&&d<0?a(0):l>0&&d>0&&o(0)}if(i===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(i-l)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:s}=e,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},r=this._range||this,o=WT(i,r);return e.bounds==="ticks"&&k0(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const i=(s-t)/Math.max(e.length-1,1)/2;t-=i,s+=i}this._startValue=t,this._endValue=s,this._valueRange=s-t}getLabelForValue(e){return _d(e,this.chart.options.locale,this.options.ticks.format)}}class Vr extends HT{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Tt(e)?e:0,this.max=Tt(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,s=bn(this.options.ticks.minRotation),i=(e?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}B(Vr,"id","linear"),B(Vr,"defaults",{ticks:{callback:Rd.formatters.numeric}});const Ui={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},mt=Object.keys(Ui);function bl(n,e){return n-e}function vl(n,e){if(Ne(e))return null;const t=n._adapter,{parser:s,round:i,isoWeekday:r}=n._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Tt(o)||(o=typeof s=="string"?t.parse(o,s):t.parse(o)),o===null?null:(i&&(o=i==="week"&&(Ci(r)||r===!0)?t.startOf(o,"isoWeek",r):t.startOf(o,i)),+o)}function wl(n,e,t,s){const i=mt.length;for(let r=mt.indexOf(n);r<i-1;++r){const o=Ui[mt[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=s)return mt[r]}return mt[i-1]}function YT(n,e,t,s,i){for(let r=mt.length-1;r>=mt.indexOf(t);r--){const o=mt[r];if(Ui[o].common&&n._adapter.diff(i,s,o)>=e-1)return o}return mt[t?mt.indexOf(t):0]}function UT(n){for(let e=mt.indexOf(n)+1,t=mt.length;e<t;++e)if(Ui[mt[e]].common)return mt[e]}function Tl(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:s,hi:i}=To(t,e),r=t[s]>=e?t[s]:t[i];n[r]=!0}}function GT(n,e,t,s){const i=n._adapter,r=+i.startOf(e[0].value,s),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,s))l=t[a],l>=0&&(e[l].major=!0);return e}function Sl(n,e,t){const s=[],i={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],i[a]=o,s.push({value:a,major:!1});return r===0||!t?s:GT(n,s,i,t)}class Rs extends es{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const s=e.time||(e.time={}),i=this._adapter=new Ud._date(e.adapters.date);i.init(t),vs(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:vl(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,s=e.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(d){!o&&!isNaN(d.min)&&(i=Math.min(i,d.min)),!a&&!isNaN(d.max)&&(r=Math.max(r,d.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Tt(i)&&!isNaN(i)?i:+t.startOf(Date.now(),s),r=Tt(r)&&!isNaN(r)?r:+t.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],s=e[e.length-1]),{min:t,max:s}}buildTicks(){const e=this.options,t=e.time,s=e.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=A0(i,r,o);return this._unit=t.unit||(s.autoSkip?wl(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):YT(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:UT(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),Sl(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,s=0,i,r;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?s=r:s=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=kt(t,0,o),s=kt(s,0,o),this._offsets={start:t,end:s,factor:1/(t+1+s)}}_generate(){const e=this._adapter,t=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||wl(r.minUnit,t,s,this._getLabelCapacity(t)),a=be(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,d=Ci(l)||l===!0,u={};let h=t,f,m;if(d&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,d?"day":o),e.diff(s,t,o)>1e5*a)throw new Error(t+" and "+s+" are too far apart with stepSize of "+a+" "+o);const p=i.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<s;f=+e.add(f,a,o),m++)Tl(u,f,p);return(f===s||i.bounds==="ticks"||m===1)&&Tl(u,f,p),Object.keys(u).sort(bl).map(x=>+x)}getLabelForValue(e){const t=this._adapter,s=this.options.time;return s.tooltipFormat?t.format(e,s.tooltipFormat):t.format(e,s.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,r=this._unit,o=t||i[r];return this._adapter.format(e,o)}_tickFormatFunction(e,t,s,i){const r=this.options,o=r.ticks.callback;if(o)return Oe(o,[e,t,s],this);const a=r.time.displayFormats,l=this._unit,d=this._majorUnit,u=l&&a[l],h=d&&a[d],f=s[t],m=d&&h&&f&&f.major;return this._adapter.format(e,i||(m?h:u))}generateTickLabels(e){let t,s,i;for(t=0,s=e.length;t<s;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,s=this.ctx.measureText(e).width,i=bn(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(e){const t=this.options.time,s=t.displayFormats,i=s[t.unit]||s.millisecond,r=this._tickFormatFunction(e,0,Sl(this,[e],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,s;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,s=i.length;t<s;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,s;if(e.length)return e;const i=this.getLabels();for(t=0,s=i.length;t<s;++t)e.push(vl(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return F0(e.sort(bl))}}B(Rs,"id","time"),B(Rs,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function oi(n,e,t){let s=0,i=n.length-1,r,o,a,l;t?(e>=n[s].pos&&e<=n[i].pos&&({lo:s,hi:i}=Ar(n,"pos",e)),{pos:r,time:a}=n[s],{pos:o,time:l}=n[i]):(e>=n[s].time&&e<=n[i].time&&({lo:s,hi:i}=Ar(n,"time",e)),{time:r,pos:a}=n[s],{time:o,pos:l}=n[i]);const d=o-r;return d?a+(l-a)*(e-r)/d:a}class Pl extends Rs{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=oi(t,this.min),this._tableRange=oi(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:s}=this,i=[],r=[];let o,a,l,d,u;for(o=0,a=e.length;o<a;++o)d=e[o],d>=t&&d<=s&&i.push(d);if(i.length<2)return[{time:t,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],d=i[o],Math.round((u+l)/2)!==d&&r.push({time:d,pos:o/(a-1)});return r}_generate(){const e=this.min,t=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(t)||s.length===1)&&s.push(t),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),s=this.getLabelTimestamps();return t.length&&s.length?e=this.normalize(t.concat(s)):e=t.length?t:s,e=this._cache.all=e,e}getDecimalForValue(e){return(oi(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return oi(this._table,s*this._tableRange+this._minPos,!0)}}B(Pl,"id","timeseries"),B(Pl,"defaults",Rs.defaults);function qT(n,e,t){return Wi(n,e*3,t)}function Ps(n,e){const t=+q(n)-+q(e);return t<0?-1:t>0?1:t}function XT(n,e,t){const[s,i]=_t(t==null?void 0:t.in,n,e),r=s.getFullYear()-i.getFullYear(),o=s.getMonth()-i.getMonth();return r*12+o}function QT(n,e,t){const[s,i]=_t(t==null?void 0:t.in,n,e);return s.getFullYear()-i.getFullYear()}function lu(n,e,t){const[s,i]=_t(t==null?void 0:t.in,n,e),r=Dl(s,i),o=Math.abs(ld(s,i));s.setDate(s.getDate()-r*o);const a=+(Dl(s,i)===-r),l=r*(o-a);return l===0?0:l}function Dl(n,e){const t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function $s(n){return e=>{const s=(n?Math[n]:Math.trunc)(e);return s===0?0:s}}function KT(n,e,t){const[s,i]=_t(t==null?void 0:t.in,n,e),r=(+s-+i)/Ns;return $s(t==null?void 0:t.roundingMethod)(r)}function Oo(n,e){return+q(n)-+q(e)}function ZT(n,e,t){const s=Oo(n,e)/Ls;return $s(t==null?void 0:t.roundingMethod)(s)}function JT(n,e){const t=q(n,e==null?void 0:e.in);return+xi(t,e)==+xo(t,e)}function cu(n,e,t){const[s,i,r]=_t(t==null?void 0:t.in,n,n,e),o=Ps(i,r),a=Math.abs(XT(i,r));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let l=Ps(i,r)===-o;JT(s)&&a===1&&Ps(s,r)===1&&(l=!1);const d=o*(a-+l);return d===0?0:d}function e1(n,e,t){const s=cu(n,e,t)/3;return $s(t==null?void 0:t.roundingMethod)(s)}function t1(n,e,t){const s=Oo(n,e)/1e3;return $s(t==null?void 0:t.roundingMethod)(s)}function n1(n,e,t){const s=lu(n,e,t)/7;return $s(t==null?void 0:t.roundingMethod)(s)}function s1(n,e,t){const[s,i]=_t(t==null?void 0:t.in,n,e),r=Ps(s,i),o=Math.abs(QT(s,i));s.setFullYear(1584),i.setFullYear(1584);const a=Ps(s,i)===-r,l=r*(o-+a);return l===0?0:l}function i1(n,e){const t=q(n,e==null?void 0:e.in),s=t.getMonth(),i=s-s%3;return t.setMonth(i,1),t.setHours(0,0,0,0),t}function r1(n,e){const t=q(n,e==null?void 0:e.in);return t.setMinutes(59,59,999),t}function o1(n,e){const t=q(n,e==null?void 0:e.in);return t.setSeconds(59,999),t}function a1(n,e){const t=q(n,e==null?void 0:e.in),s=t.getMonth(),i=s-s%3+3;return t.setMonth(i,0),t.setHours(23,59,59,999),t}function l1(n,e){const t=q(n,e==null?void 0:e.in);return t.setMilliseconds(999),t}function c1(n,e){const t=q(n,e==null?void 0:e.in);return t.setSeconds(0,0),t}function d1(n,e){const t=q(n,e==null?void 0:e.in);return t.setMilliseconds(0),t}function u1(n,e){const t=()=>Ae(e==null?void 0:e.in,NaN),s=(e==null?void 0:e.additionalDigits)??2,i=p1(n);let r;if(i.date){const d=g1(i.date,s);r=x1(d.restDateString,d.year)}if(!r||isNaN(+r))return t();const o=+r;let a=0,l;if(i.time&&(a=y1(i.time),isNaN(a)))return t();if(i.timezone){if(l=b1(i.timezone),isNaN(l))return t()}else{const d=new Date(o+a),u=q(0,e==null?void 0:e.in);return u.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),u.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),u}return q(o+a+l,e==null?void 0:e.in)}const ai={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},h1=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,f1=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,m1=/^([+-])(\d{2})(?::?(\d{2}))?$/;function p1(n){const e={},t=n.split(ai.dateTimeDelimiter);let s;if(t.length>2)return e;if(/:/.test(t[0])?s=t[0]:(e.date=t[0],s=t[1],ai.timeZoneDelimiter.test(e.date)&&(e.date=n.split(ai.timeZoneDelimiter)[0],s=n.substr(e.date.length,n.length))),s){const i=ai.timezone.exec(s);i?(e.time=s.replace(i[1],""),e.timezone=i[1]):e.time=s}return e}function g1(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=n.match(t);if(!s)return{year:NaN,restDateString:""};const i=s[1]?parseInt(s[1]):null,r=s[2]?parseInt(s[2]):null;return{year:r===null?i:r*100,restDateString:n.slice((s[1]||s[2]).length)}}function x1(n,e){if(e===null)return new Date(NaN);const t=n.match(h1);if(!t)return new Date(NaN);const s=!!t[4],i=ms(t[1]),r=ms(t[2])-1,o=ms(t[3]),a=ms(t[4]),l=ms(t[5])-1;if(s)return P1(e,a,l)?v1(e,a,l):new Date(NaN);{const d=new Date(0);return!T1(e,r,o)||!S1(e,i)?new Date(NaN):(d.setUTCFullYear(e,r,Math.max(i,o)),d)}}function ms(n){return n?parseInt(n):1}function y1(n){const e=n.match(f1);if(!e)return NaN;const t=br(e[1]),s=br(e[2]),i=br(e[3]);return D1(t,s,i)?t*Ns+s*Ls+i*1e3:NaN}function br(n){return n&&parseFloat(n.replace(",","."))||0}function b1(n){if(n==="Z")return 0;const e=n.match(m1);if(!e)return 0;const t=e[1]==="+"?-1:1,s=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return C1(s,i)?t*(s*Ns+i*Ls):NaN}function v1(n,e,t){const s=new Date(0);s.setUTCFullYear(n,0,4);const i=s.getUTCDay()||7,r=(e-1)*7+t+1-i;return s.setUTCDate(s.getUTCDate()+r),s}const w1=[31,null,31,30,31,30,31,31,30,31,30,31];function du(n){return n%400===0||n%4===0&&n%100!==0}function T1(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(w1[e]||(du(n)?29:28))}function S1(n,e){return e>=1&&e<=(du(n)?366:365)}function P1(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function D1(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function C1(n,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const M1={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};Ud._date.override({_id:"date-fns",formats:function(){return M1},parse:function(n,e){if(n===null||typeof n>"u")return null;const t=typeof n;return t==="number"||n instanceof Date?n=q(n):t==="string"&&(typeof e=="string"?n=vd(n,e,new Date,this.options):n=u1(n,this.options)),mo(n)?n.getTime():null},format:function(n,e){return md(n,e,this.options)},add:function(n,e,t){switch(t){case"millisecond":return lo(n,e);case"second":return nd(n,e);case"minute":return sd(n,e);case"hour":return id(n,e);case"day":return zs(n,e);case"week":return rd(n,e);case"month":return Wi(n,e);case"quarter":return qT(n,e);case"year":return od(n,e);default:return n}},diff:function(n,e,t){switch(t){case"millisecond":return Oo(n,e);case"second":return t1(n,e);case"minute":return ZT(n,e);case"hour":return KT(n,e);case"day":return lu(n,e);case"week":return n1(n,e);case"month":return cu(n,e);case"quarter":return e1(n,e);case"year":return s1(n,e);default:return 0}},startOf:function(n,e,t){switch(e){case"second":return d1(n);case"minute":return c1(n);case"hour":return _r(n);case"day":return qn(n);case"week":return jt(n);case"isoWeek":return jt(n,{weekStartsOn:+t});case"month":return wd(n);case"quarter":return i1(n);case"year":return uo(n);default:return n}},endOf:function(n,e){switch(e){case"second":return l1(n);case"minute":return o1(n);case"hour":return r1(n);case"day":return xi(n);case"week":return ad(n);case"month":return xo(n);case"quarter":return a1(n);case"year":return Ir(n);default:return n}}});Qt.register($r,Vr,hi,xs,fi,_T,zT,IT,Rs);class k1{constructor(){B(this,"canvas");B(this,"ctx");this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}async generateResponseTimeTrendChart(e,t={type:"line",title:"Response Time Trends",width:800,height:400}){console.log("📊 Generating Response Time Trend Chart");const s=this.groupIncidentsByDate(e),i=Object.keys(s).sort(),r=i.map(l=>{const d=s[l];return d.reduce((h,f)=>{const m=this.calculateResponseTime(f);return h+(m||0)},0)/d.length/60}),o={labels:i,datasets:[{label:"Average Response Time (minutes)",data:r,borderColor:"#d32f2f",backgroundColor:"rgba(211, 47, 47, 0.1)",tension:.1,fill:!0},{label:"NFPA 1710 Standard (5 min)",data:new Array(i.length).fill(5),borderColor:"#2e7d32",backgroundColor:"rgba(46, 125, 50, 0.1)",borderDash:[5,5],fill:!1}]},a={responsive:!1,plugins:{title:{display:!0,text:t.title,font:{size:16,weight:"bold"}},legend:{position:"top"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Response Time (minutes)"}},x:{title:{display:!0,text:"Date"}}}};return this.renderChart("line",o,a,t)}async generateNFPAComplianceChart(e,t={type:"bar",title:"NFPA 1710 Compliance Analysis",width:800,height:400}){console.log("📊 Generating NFPA Compliance Chart");const s=this.calculateNFPACompliance(e),i={labels:["Dispatch Time","Turnout Time","Total Response Time"],datasets:[{label:"Department Average (seconds)",data:[e.mean.dispatchTime||0,e.mean.turnoutTime||0,e.mean.totalResponseTime||0],backgroundColor:[s.dispatchCompliance?"#2e7d32":"#d32f2f",s.turnoutCompliance?"#2e7d32":"#d32f2f",s.responseCompliance?"#2e7d32":"#d32f2f"],borderColor:[s.dispatchCompliance?"#1b5e20":"#b71c1c",s.turnoutCompliance?"#1b5e20":"#b71c1c",s.responseCompliance?"#1b5e20":"#b71c1c"],borderWidth:2},{label:"NFPA 1710 Standard",data:[60,60,300],backgroundColor:"rgba(46, 125, 50, 0.3)",borderColor:"#2e7d32",borderWidth:2}]},r={responsive:!1,plugins:{title:{display:!0,text:t.title,font:{size:16,weight:"bold"}},legend:{position:"top"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Time (seconds)"}},x:{title:{display:!0,text:"NFPA 1710 Metrics"}}}};return this.renderChart("bar",i,r,t)}async generatePerformanceDistributionChart(e,t={type:"bar",title:"Response Time Distribution",width:800,height:400}){console.log("📊 Generating Performance Distribution Chart");const s={"0-3 min":0,"3-5 min":0,"5-8 min":0,"8-12 min":0,"12+ min":0};e.forEach(o=>{const a=this.calculateResponseTime(o);if(!a)return;const l=a/60;l<=3?s["0-3 min"]++:l<=5?s["3-5 min"]++:l<=8?s["5-8 min"]++:l<=12?s["8-12 min"]++:s["12+ min"]++});const i={labels:Object.keys(s),datasets:[{label:"Number of Incidents",data:Object.values(s),backgroundColor:["#2e7d32","#66bb6a","#ffeb3b","#ff9800","#d32f2f"],borderColor:["#1b5e20","#388e3c","#f57f17","#ef6c00","#b71c1c"],borderWidth:2}]},r={responsive:!1,plugins:{title:{display:!0,text:t.title,font:{size:16,weight:"bold"}},legend:{position:"top"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Number of Incidents"}},x:{title:{display:!0,text:"Response Time Range"}}}};return this.renderChart("bar",i,r,t)}async renderChart(e,t,s,i){return new Promise((r,o)=>{try{this.canvas.width=i.width,this.canvas.height=i.height,i.backgroundColor&&(this.ctx.fillStyle=i.backgroundColor,this.ctx.fillRect(0,0,i.width,i.height));const a=new Qt(this.ctx,{type:e,data:t,options:s});setTimeout(()=>{try{const l=this.canvas.toDataURL("image/png");a.destroy(),r({dataUrl:l,width:i.width,height:i.height,title:i.title})}catch(l){a.destroy(),o(l)}},100)}catch(a){o(a)}})}groupIncidentsByDate(e){const t={};return e.forEach(s=>{const i=s.incidentDate||s.incident_date;if(!i)return;const r=new Date(i).toLocaleDateString();t[r]||(t[r]=[]),t[r].push(s)}),t}calculateResponseTime(e){const t=e.incidentTime||e.incident_time,s=e.arrivalTime||e.arrival_time;if(!t||!s)return null;try{const i=new Date(t).getTime();return(new Date(s).getTime()-i)/1e3}catch{return null}}calculateNFPACompliance(e){return{dispatchCompliance:(e.mean.dispatchTime||0)<=60,turnoutCompliance:(e.mean.turnoutTime||0)<=60,responseCompliance:(e.mean.totalResponseTime||0)<=300}}destroy(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}async function I1(n,e){console.log("📊 Generating all standard charts for PDF report");const t=new k1,s=[];try{const i=await t.generateResponseTimeTrendChart(n,{type:"line",title:"Response Time Trends Over Time",width:600,height:300,backgroundColor:"#ffffff"});s.push(i);const r=await t.generateNFPAComplianceChart(e,{type:"bar",title:"NFPA 1710 Compliance Analysis",width:600,height:300,backgroundColor:"#ffffff"});s.push(r);const o=await t.generatePerformanceDistributionChart(n,{type:"bar",title:"Response Time Distribution",width:600,height:300,backgroundColor:"#ffffff"});return s.push(o),console.log(`📊 Successfully generated ${s.length} charts for PDF`),s}catch(i){throw console.error("📊 Error generating charts:",i),i}finally{t.destroy()}}console.log("🔥🔥🔥 PDF REPORT GENERATOR MODULE LOADED - NEW VERSION WITH DEBUG! 🔥🔥🔥");class uu{constructor(e,t){B(this,"pdf");B(this,"config");B(this,"data");B(this,"pageNumber",1);B(this,"yPosition",20);B(this,"colors",{primary:"#d32f2f",secondary:"#1976d2",success:"#2e7d32",warning:"#f57c00",error:"#d32f2f",text:"#333333",lightGray:"#f5f5f5",mediumGray:"#9e9e9e"});this.pdf=new Gu("portrait","mm","a4"),this.config=e,this.data=t,console.log("📋 PDF DEBUG: autoTable import:",typeof Ji),typeof Ji=="function"?(this.pdf.autoTable=Ji.bind(null,this.pdf),console.log("📋 PDF DEBUG: ✅ autoTable attached successfully")):console.error("📋 PDF DEBUG: ❌ autoTable import failed"),e.customBranding&&(this.colors.primary=e.customBranding.primaryColor,this.colors.secondary=e.customBranding.secondaryColor),console.log("📋 PDF DEBUG: ReportConfig received:",{departmentName:e.departmentName,hasDepartmentLogo:!!e.departmentLogo,logoLength:e.departmentLogo?e.departmentLogo.length:0})}async generateReport(){return console.log("🚀 GENERATE REPORT CALLED - Static AutoTable Import Version"),console.log("📋 PDF DEBUG: jsPDF instance created:",!!this.pdf),console.log("📋 PDF DEBUG: autoTable plugin loaded:",!!this.pdf.autoTable),this.addTitlePage(),this.config.includeSections.summary&&(this.addNewPage(),this.addExecutiveSummary()),this.config.includeSections.nfpaCompliance&&(this.addNewPage(),this.addNFPAComplianceSection()),this.config.includeSections.charts&&(this.addNewPage(),await this.addChartsSection()),(this.config.includeSections.charts||this.config.includeSections.incidentDetails)&&(this.addNewPage(),this.addGeographicAnalysisSection()),this.config.includeSections.incidentDetails&&(this.addNewPage(),this.addIncidentDetailsSection()),this.config.includeSections.recommendations&&(this.addNewPage(),this.addRecommendationsSection()),this.addFootersToAllPages(),this.pdf.output("blob")}addTitlePage(){var i,r,o,a;if(this.yPosition=40,this.config.departmentLogo){console.log("🖼️ LOGO DEBUG: Logo data exists, length:",this.config.departmentLogo.length),console.log("🖼️ LOGO DEBUG: Logo data preview:",this.config.departmentLogo.substring(0,100)+"...");const l=30,d=((i=this.config.customBranding)==null?void 0:i.logoPosition)==="center"?(210-l)/2:((r=this.config.customBranding)==null?void 0:r.logoPosition)==="right"?210-l-20:20;try{let u="PNG";this.config.departmentLogo.includes("data:image/jpeg")||this.config.departmentLogo.includes("data:image/jpg")?u="JPEG":this.config.departmentLogo.includes("data:image/png")&&(u="PNG"),console.log("🖼️ LOGO DEBUG: Detected format:",u),console.log("🖼️ LOGO DEBUG: Adding logo at position:",{x:d,y:this.yPosition,size:l}),this.pdf.addImage(this.config.departmentLogo,u,d,this.yPosition,l,l),console.log("🖼️ LOGO DEBUG: ✅ Logo added successfully!"),this.yPosition+=l+10}catch(u){console.error("🖼️ LOGO DEBUG: ❌ Failed to add logo:",u),console.error("🖼️ LOGO DEBUG: Error details:",{errorMessage:u instanceof Error?u.message:"Unknown error",logoDataType:typeof this.config.departmentLogo,logoDataStart:this.config.departmentLogo.substring(0,50)}),this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.mediumGray),this.pdf.text("[Department Logo - Failed to Load]",d,this.yPosition+15),this.yPosition+=25}}else console.log("🖼️ LOGO DEBUG: No logo data provided");this.pdf.setFontSize(24),this.pdf.setTextColor(this.colors.primary),this.addCenteredText(this.config.title,this.yPosition),this.yPosition+=15;const e=((o=this.config.customText)==null?void 0:o.customSubtitle)||this.config.subtitle;e&&(this.pdf.setFontSize(16),this.pdf.setTextColor(this.colors.text),this.addCenteredText(e,this.yPosition),this.yPosition+=10),this.pdf.setFontSize(18),this.pdf.setTextColor(this.colors.secondary),this.addCenteredText(this.config.departmentName,this.yPosition),this.yPosition+=20,this.pdf.setFontSize(14),this.pdf.setTextColor(this.colors.text);const t=`Report Period: ${this.config.reportPeriod.startDate} to ${this.config.reportPeriod.endDate}`;this.addCenteredText(t,this.yPosition),this.yPosition+=20,this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.mediumGray);const s=`Generated on ${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}`;this.addCenteredText(s,this.yPosition),this.yPosition+=30,(a=this.config.customText)!=null&&a.chiefMessage&&(this.yPosition+=20,this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.text),this.pdf.text("Message from Fire Chief:",20,this.yPosition),this.yPosition+=10,this.pdf.splitTextToSize(this.config.customText.chiefMessage,170).forEach(d=>{this.pdf.text(d,20,this.yPosition),this.yPosition+=6})),this.config.chiefName&&(this.yPosition=220,this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.text),this.pdf.text("Prepared by:",20,this.yPosition),this.yPosition+=8,this.pdf.setFontSize(14),this.pdf.text(this.config.chiefName,20,this.yPosition),this.config.chiefTitle&&(this.yPosition+=6,this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.mediumGray),this.pdf.text(this.config.chiefTitle,20,this.yPosition)))}addExecutiveSummary(){var o,a;this.addSectionHeader("Executive Summary");const e=this.data.statistics,t=this.data.incidents;this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.text);const s=((o=this.config.customText)==null?void 0:o.reportPurpose)||`During the reporting period, ${this.config.departmentName} responded to ${t.length} incidents.`,i=((a=this.config.customText)==null?void 0:a.executiveSummaryDescription)||"High-level overview for mayors and department leadership";[s,"",i,"","Key Performance Indicators:",`• Average Response Time: ${this.formatStatistic(e.mean.totalResponseTime)}`,`• Average Dispatch Time: ${this.formatStatistic(e.mean.dispatchTime)}`,`• Average Turnout Time: ${this.formatStatistic(e.mean.turnoutTime)}`,`• 90th Percentile Response: ${this.formatStatistic(e.ninetiethPercentile.totalResponseTime)}`,"","NFPA 1710 Compliance Overview:",`${this.calculateCompliancePercentage()}% of metrics meet NFPA standards`].forEach(l=>{this.yPosition>250&&this.addNewPage(),this.pdf.text(l,20,this.yPosition),this.yPosition+=6})}addNFPAComplianceSection(){this.addSectionHeader("NFPA 1710 Compliance Analysis");const e=this.calculateNFPACompliance();try{const s=[["Dispatch Time",this.formatStatistic(this.data.statistics.mean.dispatchTime),"≤60 seconds",e.dispatchCompliance?"✓ COMPLIANT":"✗ NON-COMPLIANT"],["Turnout Time",this.formatStatistic(this.data.statistics.mean.turnoutTime),"≤60 seconds",e.turnoutCompliance?"✓ COMPLIANT":"✗ NON-COMPLIANT"],["Total Response Time",this.formatStatistic(this.data.statistics.mean.totalResponseTime),"≤5 minutes",e.responseCompliance?"✓ COMPLIANT":"✗ NON-COMPLIANT"]];console.log("📋 Creating NFPA compliance table with autoTable"),this.pdf.autoTable({head:[["Metric","Department Average","NFPA Standard","Status"]],body:s,startY:this.yPosition,theme:"grid",headStyles:{fillColor:[211,47,47],textColor:255},bodyStyles:{fontSize:10,cellPadding:2,lineColor:[240,240,240],lineWidth:.1},columnStyles:{0:{cellWidth:35},1:{cellWidth:30},2:{cellWidth:25},3:{cellWidth:35,textColor:i=>i.cell.text[0].includes("✓")?[46,125,50]:[211,47,47]}},margin:{left:20,right:20},didDrawPage:i=>{this.yPosition=i.cursor.y+10}}),this.yPosition=this.yPosition||this.yPosition+20}catch(s){console.error("Could not create autoTable, falling back to text:",s),this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.text),["NFPA 1710 Compliance Analysis:","","DISPATCH TIME:",`  Department: ${this.formatStatistic(this.data.statistics.mean.dispatchTime)}`,"  NFPA Standard: ≤60 seconds",`  Status: ${e.dispatchCompliance?"✓ COMPLIANT":"✗ NON-COMPLIANT"}`,"","TURNOUT TIME:",`  Department: ${this.formatStatistic(this.data.statistics.mean.turnoutTime)}`,"  NFPA Standard: ≤60 seconds",`  Status: ${e.turnoutCompliance?"✓ COMPLIANT":"✗ NON-COMPLIANT"}`,"","TOTAL RESPONSE TIME:",`  Department: ${this.formatStatistic(this.data.statistics.mean.totalResponseTime)}`,"  NFPA Standard: ≤5 minutes",`  Status: ${e.responseCompliance?"✓ COMPLIANT":"✗ NON-COMPLIANT"}`,""].forEach(r=>{this.yPosition>250&&this.addNewPage(),this.pdf.text(r,20,this.yPosition),this.yPosition+=6})}this.yPosition+=10,this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.text),this.pdf.text("Compliance Summary:",20,this.yPosition),this.yPosition+=10;const t=Math.round(Object.values(e).filter(Boolean).length/3*100);this.pdf.setFontSize(11),this.pdf.text(`Overall NFPA 1710 Compliance: ${t}%`,20,this.yPosition),this.yPosition+=15,t<100&&this.addNonComplianceRecommendations(e)}addIncidentDetailsSection(){this.addSectionHeader("Incident Details");const e=this.data.incidents.slice(0,50).map(t=>{const s=this.calculateMetricsForIncident(t);return[t.incidentId,t.incidentDate,t.incidentType||"N/A",this.formatMetric(s.dispatchTime),this.formatMetric(s.turnoutTime),this.formatMetric(s.totalResponseTime)]});try{const t=e.slice(0,20);this.pdf.autoTable({head:[["Incident ID","Date","Type","Dispatch","Turnout","Response"]],body:t,startY:this.yPosition,theme:"striped",headStyles:{fillColor:[25,118,210],textColor:255},bodyStyles:{fontSize:8},columnStyles:{0:{cellWidth:20},1:{cellWidth:22},2:{cellWidth:25},3:{cellWidth:18},4:{cellWidth:18},5:{cellWidth:22}},margin:{left:20,right:20},didDrawPage:s=>{this.yPosition=s.cursor.y+10}}),this.yPosition=this.yPosition||this.yPosition+20}catch(t){console.error("Could not create incident table, falling back to text:",t),this.pdf.setFontSize(10),this.pdf.setTextColor(this.colors.text),this.pdf.text("Incident Summary (First 10 incidents):",20,this.yPosition),this.yPosition+=10,e.slice(0,10).forEach((i,r)=>{this.yPosition>250&&this.addNewPage();const o=`${r+1}. ${i[0]} - ${i[1]}`,a=`   Type: ${i[2]} | Response: ${i[5]}`;this.pdf.text(o,20,this.yPosition),this.yPosition+=5,this.pdf.text(a,20,this.yPosition),this.yPosition+=5})}this.yPosition+=10,this.data.incidents.length>20&&(this.pdf.setFontSize(10),this.pdf.setTextColor(this.colors.mediumGray),this.pdf.text(`Note: Showing first 20 of ${this.data.incidents.length} incidents. Full data available in detailed export.`,20,this.yPosition))}async addChartsSection(){this.addSectionHeader("Performance Analysis & Charts"),this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.text),["This section provides visual analysis of department performance metrics.","Charts help identify trends, compliance status, and areas for improvement.",""].forEach(t=>{this.yPosition>250&&this.addNewPage(),this.pdf.text(t,20,this.yPosition),this.yPosition+=6});try{console.log("📊 PDF: Generating charts for report...");const t=await I1(this.data.incidents,this.data.statistics);for(const s of t)await this.addChartToPDF(s),this.yPosition+=15;console.log(`📊 PDF: Successfully added ${t.length} charts to report`)}catch(t){console.error("📊 PDF: Error generating charts:",t),this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.error),this.pdf.text("Chart generation temporarily unavailable.",20,this.yPosition),this.yPosition+=10,this.pdf.setFontSize(10),this.pdf.setTextColor(this.colors.mediumGray),this.pdf.text("Charts will be available in future report versions.",20,this.yPosition),this.yPosition+=15}}async addChartToPDF(e){const t=e.height*170/e.width;this.yPosition+t+30>250&&this.addNewPage(),this.pdf.setFontSize(14),this.pdf.setTextColor(this.colors.primary),this.pdf.text(e.title,20,this.yPosition),this.yPosition+=10;try{const i=e.height*170/e.width;this.pdf.addImage(e.dataUrl,"PNG",20,this.yPosition,170,i),this.yPosition+=i+5,console.log(`📊 PDF: Added chart "${e.title}" to PDF`)}catch(s){console.error(`📊 PDF: Error adding chart "${e.title}":`,s),this.pdf.setDrawColor(this.colors.mediumGray),this.pdf.setFillColor(245,245,245),this.pdf.rect(20,this.yPosition,170,80,"FD"),this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.mediumGray),this.pdf.text("[Chart generation failed]",105,this.yPosition+35,{align:"center"}),this.pdf.text("Data available in detailed analysis",105,this.yPosition+50,{align:"center"}),this.yPosition+=85}}addGeographicAnalysisSection(){this.addSectionHeader("Geographic Analysis & Service Area Performance"),this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.text),["This section provides statistical analysis of emergency response across service areas.","Analysis includes incident distribution, response time variations by location, and coverage assessment.",""].forEach(t=>{this.yPosition>250&&this.addNewPage(),this.pdf.text(t,20,this.yPosition),this.yPosition+=6}),this.addIncidentDistributionAnalysis(),this.yPosition+=10,this.addResponseTimeByAreaAnalysis(),this.yPosition+=10,this.addCoverageAssessment()}addIncidentDistributionAnalysis(){this.yPosition>200&&this.addNewPage(),this.pdf.setFontSize(14),this.pdf.setTextColor(this.colors.primary),this.pdf.text("Incident Distribution Analysis",20,this.yPosition),this.yPosition+=10;const e=this.analyzeIncidentsByCity();this.pdf.setFontSize(11),this.pdf.setTextColor(this.colors.text),e.length>0?(this.pdf.text("Incident distribution by service area:",20,this.yPosition),this.yPosition+=8,e.forEach(t=>{this.yPosition>250&&this.addNewPage(),this.pdf.text(`• ${t.area}: ${t.count} incidents (${t.percentage}%)`,25,this.yPosition),this.yPosition+=6})):(this.pdf.text("Geographic data analysis requires city/location information in incident records.",20,this.yPosition),this.yPosition+=6,this.pdf.text("Consider adding location fields to enable detailed geographic analysis.",20,this.yPosition),this.yPosition+=6)}addResponseTimeByAreaAnalysis(){this.yPosition>200&&this.addNewPage(),this.pdf.setFontSize(14),this.pdf.setTextColor(this.colors.primary),this.pdf.text("Response Time by Service Area",20,this.yPosition),this.yPosition+=10;const e=this.analyzeResponseTimesByArea();this.pdf.setFontSize(11),this.pdf.setTextColor(this.colors.text),e.length>0?e.forEach(t=>{this.yPosition>250&&this.addNewPage();const s=t.avgResponseTime<=300?"✓ COMPLIANT":"⚠ REVIEW NEEDED";this.pdf.text(`• ${t.area}: ${this.formatTime(t.avgResponseTime)} avg response - ${s}`,25,this.yPosition),this.yPosition+=6}):(this.pdf.text("Response time geographic analysis requires location data in incident records.",20,this.yPosition),this.yPosition+=6)}addCoverageAssessment(){this.yPosition>200&&this.addNewPage(),this.pdf.setFontSize(14),this.pdf.setTextColor(this.colors.primary),this.pdf.text("Service Coverage Assessment",20,this.yPosition),this.yPosition+=10,this.pdf.setFontSize(11),this.pdf.setTextColor(this.colors.text);const e=this.data.statistics,t=e.mean.totalResponseTime||0,s=e.ninetiethPercentile.totalResponseTime||0,i=[`Total incidents analyzed: ${this.data.incidents.length}`,`Average response time: ${this.formatTime(t)}`,`90th percentile response time: ${this.formatTime(s)}`,"","Coverage recommendations:"];t>300?(i.push("• Consider evaluating station locations for optimal coverage"),i.push("• Review deployment strategies to reduce response times")):(i.push("• Current response times meet NFPA 1710 standards"),i.push("• Maintain current operational strategies")),s>480&&i.push("• 90th percentile suggests some areas may need additional coverage"),i.forEach(r=>{this.yPosition>250&&this.addNewPage(),this.pdf.text(r,20,this.yPosition),this.yPosition+=6})}addRecommendationsSection(){this.addSectionHeader("Recommendations & Action Items");const e=this.calculateNFPACompliance(),t=[];e.dispatchCompliance||t.push("• Dispatch Time Improvement: Review dispatcher training and implement automated dispatch systems to achieve <60 second dispatch times."),e.turnoutCompliance||t.push("• Turnout Time Optimization:","  - Evaluate station layout and equipment placement","  - Review crew readiness procedures","  - Target: Reduce turnout time to <60 seconds"),e.responseCompliance||t.push("• Response Time Enhancement:","  - Analyze travel routes and station coverage","  - Consider additional stations or unit deployment","  - Review deployment strategies"),t.length===0&&t.push("• Maintain Excellence: Continue current operational practices to maintain NFPA 1710 compliance across all metrics.","• Performance Monitoring: Implement regular performance reviews to ensure continued compliance.","• Staff Training: Provide ongoing training to maintain response time standards."),t.push("","General Recommendations:","• Implement regular performance monitoring and monthly reporting","• Consider technology upgrades (GPS tracking, mobile data terminals)","• Review and update standard operating procedures annually","• Evaluate station locations and coverage areas for optimal response times"),this.pdf.setFontSize(11),this.pdf.setTextColor(this.colors.text),t.forEach(s=>{this.yPosition>250&&this.addNewPage(),this.pdf.text(s,20,this.yPosition),this.yPosition+=6})}addNewPage(){this.pdf.addPage(),this.pageNumber++,this.yPosition=20}addSectionHeader(e){this.pdf.setFontSize(16),this.pdf.setTextColor(this.colors.primary),this.pdf.text(e,20,this.yPosition),this.yPosition+=12,this.pdf.setDrawColor(this.colors.primary),this.pdf.line(20,this.yPosition-2,190,this.yPosition-2),this.yPosition+=8}addCenteredText(e,t){const i=(210-this.pdf.getTextWidth(e))/2;this.pdf.text(e,i,t)}addFootersToAllPages(){const e=this.pdf.getNumberOfPages();for(let t=1;t<=e;t++)this.pdf.setPage(t),this.pdf.setDrawColor(this.colors.mediumGray),this.pdf.line(20,280,190,280),this.pdf.setFontSize(10),this.pdf.setTextColor(this.colors.mediumGray),this.pdf.text(`Page ${t} of ${e}`,170,285),this.pdf.text(this.config.departmentName,20,285)}formatStatistic(e){return e===null?"N/A":ce(e)}formatMetric(e){return e===null?"N/A":ce(e,"full")}calculateNFPACompliance(){const e=this.data.statistics;return{dispatchCompliance:(e.mean.dispatchTime||0)<=60,turnoutCompliance:(e.mean.turnoutTime||0)<=60,responseCompliance:(e.mean.totalResponseTime||0)<=300}}addNonComplianceRecommendations(e){this.pdf.setFontSize(12),this.pdf.setTextColor(this.colors.error),this.pdf.text("Areas Requiring Attention:",20,this.yPosition),this.yPosition+=8,this.pdf.setFontSize(10),this.pdf.setTextColor(this.colors.text),e.dispatchCompliance||(this.pdf.text("• Dispatch times exceed NFPA 1710 standard of 60 seconds",25,this.yPosition),this.yPosition+=6),e.turnoutCompliance||(this.pdf.text("• Turnout times exceed NFPA 1710 standard of 60 seconds",25,this.yPosition),this.yPosition+=6),e.responseCompliance||(this.pdf.text("• Total response times exceed NFPA 1710 standard of 5 minutes",25,this.yPosition),this.yPosition+=6)}calculateMetricsForIncident(e){return ut(e)}calculateCompliancePercentage(){const e=this.calculateNFPACompliance(),t=Object.values(e).filter(Boolean).length,s=Object.keys(e).length;return Math.round(t/s*100)}analyzeIncidentsByCity(){const e={};let t=0;return this.data.incidents.forEach(s=>{var r,o;const i=s.city||((o=(r=s.address)==null?void 0:r.split(",").slice(-2,-1)[0])==null?void 0:o.trim())||"Unknown";e[i]=(e[i]||0)+1,t++}),Object.entries(e).map(([s,i])=>({area:s,count:i,percentage:Math.round(i/t*100)})).sort((s,i)=>i.count-s.count).slice(0,10)}analyzeResponseTimesByArea(){const e={};return this.data.incidents.forEach(t=>{var r,o;const s=t.city||((o=(r=t.address)==null?void 0:r.split(",").slice(-2,-1)[0])==null?void 0:o.trim())||"Unknown",i=this.calculateMetricsForIncident(t);i.totalResponseTime&&i.totalResponseTime>0&&(e[s]||(e[s]={total:0,count:0}),e[s].total+=i.totalResponseTime,e[s].count+=1)}),Object.entries(e).map(([t,s])=>({area:t,avgResponseTime:s.total/s.count,count:s.count})).filter(t=>t.count>=2).sort((t,s)=>t.avgResponseTime-s.avgResponseTime).slice(0,8)}formatTime(e){if(!e||e<=0)return"N/A";const t=Math.floor(e/60),s=Math.round(e%60);return t===0?`${s} sec`:`${t} min ${s} sec`}}async function hu(n,e){return console.log("🔥🔥🔥 GENERATE RESPONSE TIME REPORT FUNCTION CALLED! 🔥🔥🔥"),console.log("📋 Config received:",{departmentName:n.departmentName,hasDepartmentLogo:!!n.departmentLogo,logoLength:n.departmentLogo?n.departmentLogo.length:0}),console.log("📋 Data received:",{incidentsCount:e.incidents.length,statisticsExists:!!e.statistics}),await new uu(n,e).generateReport()}const j1=Object.freeze(Object.defineProperty({__proto__:null,PDFReportGenerator:uu,generateResponseTimeReport:hu},Symbol.toStringTag,{value:"Module"})),Cl=[{id:"compliance",name:"NFPA 1710 Compliance Report",description:"Official compliance report for city council, grants, and regulatory submissions",icon:c.jsx(qu,{}),color:"primary",sections:{summary:!0,nfpaCompliance:!0,incidentDetails:!0,charts:!1,recommendations:!0}},{id:"executive",name:"Executive Summary",description:"High-level overview for chiefs, mayors, and department leadership",icon:c.jsx(Ur,{}),color:"secondary",sections:{summary:!0,nfpaCompliance:!0,incidentDetails:!1,charts:!0,recommendations:!0}},{id:"detailed",name:"Detailed Analysis Report",description:"Comprehensive report with full incident data and analysis",icon:c.jsx(Ln,{}),color:"info",sections:{summary:!0,nfpaCompliance:!0,incidentDetails:!0,charts:!0,recommendations:!0}},{id:"custom",name:"Custom Report",description:"Choose specific sections and customize content",icon:c.jsx(fh,{}),color:"warning",sections:{summary:!0,nfpaCompliance:!1,incidentDetails:!1,charts:!1,recommendations:!1}}],fu=({open:n,onClose:e,incidents:t,statistics:s,dateRange:i})=>{var T,C,P,I,O,b,k,A,E,D;const[r,o]=v.useState("compliance"),[a,l]=v.useState({reportType:"compliance",title:"Response Time Analysis Report",subtitle:"NFPA 1710 Compliance Assessment",departmentName:"",chiefName:"",chiefTitle:"Fire Chief",reportPeriod:{startDate:(i==null?void 0:i.start)||new Date().toISOString().split("T")[0],endDate:(i==null?void 0:i.end)||new Date().toISOString().split("T")[0]},includeSections:{summary:!0,nfpaCompliance:!0,incidentDetails:!0,charts:!1,recommendations:!0}}),[d,u]=v.useState(!1),[h,f]=v.useState(null),m=S=>{o(S);const j=Cl.find(R=>R.id===S);j&&l(R=>({...R,reportType:S,title:j.name,subtitle:j.description,includeSections:{...j.sections}}))},p=S=>{l(j=>({...j,includeSections:{...j.includeSections,[S]:!j.includeSections[S]}}))},x=(S,j)=>{l(R=>({...R,[S]:j}))},g=async()=>{var S;if(!((S=a.departmentName)!=null&&S.trim())){f({success:!1,message:"Please enter your department name before generating the report."});return}u(!0),f(null);try{const j={reportType:a.reportType||"compliance",title:a.title||"Response Time Analysis Report",subtitle:a.subtitle,departmentName:a.departmentName,departmentLogo:a.departmentLogo,chiefName:a.chiefName,chiefTitle:a.chiefTitle||"Fire Chief",reportPeriod:a.reportPeriod,includeSections:a.includeSections,customText:a.customText},L=await hu(j,{incidents:t,statistics:s}),$=URL.createObjectURL(L),W=document.createElement("a");W.href=$;const V=`${j.departmentName.replace(/\s+/g,"_")}_Response_Time_Report_${Date.now()}.pdf`;W.download=V,document.body.appendChild(W),W.click(),document.body.removeChild(W),URL.revokeObjectURL($),f({success:!0,message:"PDF report generated successfully!",filename:V})}catch(j){console.error("Error generating PDF report:",j),f({success:!1,message:`Failed to generate report: ${j instanceof Error?j.message:"Unknown error"}`})}finally{u(!1)}},y=Object.entries(a.includeSections||{}).filter(([S,j])=>j).map(([S,j])=>S),w=Math.max(2,y.length+((T=a.includeSections)!=null&&T.incidentDetails?Math.ceil(t.length/25):0));return c.jsxs(Ai,{open:n,onClose:e,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"80vh"}},children:[c.jsxs(Yr,{sx:{display:"flex",alignItems:"center"},children:[c.jsx(Sr,{sx:{mr:1,color:"error.main"}}),"Generate PDF Report"]}),c.jsxs(Ei,{children:[c.jsx(M,{variant:"h6",gutterBottom:!0,sx:{mt:1},children:"1. Choose Report Template"}),c.jsx(z,{container:!0,spacing:2,sx:{mb:3},children:Cl.map(S=>c.jsx(z,{size:{xs:12,sm:6},children:c.jsx($t,{variant:r===S.id?"elevation":"outlined",sx:{cursor:"pointer",border:r===S.id?2:1,borderColor:r===S.id?`${S.color}.main`:"divider","&:hover":{elevation:2}},onClick:()=>m(S.id),children:c.jsxs(Vt,{children:[c.jsxs(F,{sx:{display:"flex",alignItems:"center",mb:1},children:[S.icon,c.jsx(Te,{label:S.name,color:S.color,variant:r===S.id?"filled":"outlined",sx:{ml:1}})]}),c.jsx(M,{variant:"body2",color:"text.secondary",children:S.description})]})})},S.id))}),c.jsx(It,{sx:{my:3}}),c.jsx(M,{variant:"h6",gutterBottom:!0,children:"2. Department Information"}),c.jsxs(z,{container:!0,spacing:2,sx:{mb:3},children:[c.jsx(z,{size:{xs:12,md:6},children:c.jsx(De,{label:"Department Name *",fullWidth:!0,value:a.departmentName||"",onChange:S=>x("departmentName",S.target.value),placeholder:"e.g., City Fire Department"})}),c.jsx(z,{size:{xs:12,md:6},children:c.jsx(De,{label:"Fire Chief Name",fullWidth:!0,value:a.chiefName||"",onChange:S=>x("chiefName",S.target.value),placeholder:"e.g., John Smith"})}),c.jsx(z,{size:{xs:12,md:6},children:c.jsx(De,{label:"Chief Title",fullWidth:!0,value:a.chiefTitle||"",onChange:S=>x("chiefTitle",S.target.value),placeholder:"e.g., Fire Chief, Battalion Chief"})}),c.jsx(z,{size:{xs:12,md:6},children:c.jsxs(F,{children:[c.jsx(M,{variant:"subtitle2",sx:{mb:1},children:"Department Logo"}),c.jsxs(ue,{variant:"outlined",component:"label",fullWidth:!0,startIcon:c.jsx(Ur,{}),children:["Upload Logo",c.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:S=>{var R;const j=(R=S.target.files)==null?void 0:R[0];if(j){const L=new FileReader;L.onload=$=>{var W;(W=$.target)!=null&&W.result&&x("departmentLogo",$.target.result)},L.readAsDataURL(j)}}})]}),a.departmentLogo&&c.jsx(M,{variant:"caption",color:"success.main",sx:{mt:1,display:"block"},children:"✓ Logo uploaded successfully"})]})}),c.jsx(z,{size:{xs:12,md:6},children:c.jsx(De,{label:"Report Title",fullWidth:!0,value:a.title||"",onChange:S=>x("title",S.target.value)})})]}),c.jsx(It,{sx:{my:3}}),c.jsx(M,{variant:"h6",sx:{mb:2,color:"primary.main"},children:"📝 Customize Report Text"}),c.jsxs(z,{container:!0,spacing:3,children:[c.jsx(z,{size:{xs:12},children:c.jsx(De,{label:"Custom Subtitle",multiline:!0,rows:2,fullWidth:!0,value:((C=a.customText)==null?void 0:C.customSubtitle)||"",onChange:S=>x("customText",{...a.customText,customSubtitle:S.target.value}),placeholder:"Official compliance report for city council, grants, and regulatory submissions",helperText:"Subtitle that appears below the main title on the cover page"})}),c.jsx(z,{size:{xs:12,md:6},children:c.jsx(De,{label:"Report Start Date",type:"date",fullWidth:!0,value:((P=a.reportPeriod)==null?void 0:P.startDate)||"",onChange:S=>x("reportPeriod",{...a.reportPeriod,startDate:S.target.value}),InputLabelProps:{shrink:!0},helperText:"Beginning of the reporting period"})}),c.jsx(z,{size:{xs:12,md:6},children:c.jsx(De,{label:"Report End Date",type:"date",fullWidth:!0,value:((I=a.reportPeriod)==null?void 0:I.endDate)||"",onChange:S=>x("reportPeriod",{...a.reportPeriod,endDate:S.target.value}),InputLabelProps:{shrink:!0},helperText:"End of the reporting period"})}),c.jsx(z,{size:{xs:12},children:c.jsx(De,{label:"Report Purpose Statement",multiline:!0,rows:2,fullWidth:!0,value:((O=a.customText)==null?void 0:O.reportPurpose)||"",onChange:S=>x("customText",{...a.customText,reportPurpose:S.target.value}),placeholder:`During the reporting period, ${a.departmentName||"[Department Name]"} responded to [X] incidents.`,helperText:"Opening statement that describes the scope and timeframe of this report"})}),c.jsx(z,{size:{xs:12},children:c.jsx(De,{label:"Executive Summary Description",multiline:!0,rows:2,fullWidth:!0,value:((b=a.customText)==null?void 0:b.executiveSummaryDescription)||"",onChange:S=>x("customText",{...a.customText,executiveSummaryDescription:S.target.value}),placeholder:"High-level overview for mayors and department leadership",helperText:"Brief description of what this report provides for executive leadership"})}),c.jsx(z,{size:{xs:12},children:c.jsx(De,{label:"Chief's Message (Optional)",multiline:!0,rows:3,fullWidth:!0,value:((k=a.customText)==null?void 0:k.chiefMessage)||"",onChange:S=>x("customText",{...a.customText,chiefMessage:S.target.value}),placeholder:"Personal message from the Fire Chief about department performance, initiatives, or acknowledgments...",helperText:"Optional personal message from the Fire Chief that will appear on the title page"})})]}),c.jsx(It,{sx:{my:3}}),c.jsx(M,{variant:"h6",gutterBottom:!0,children:"3. Include Sections"}),c.jsx(z,{container:!0,spacing:1,sx:{mb:3},children:[{key:"summary",label:"Executive Summary",desc:"Key metrics and overview"},{key:"nfpaCompliance",label:"NFPA 1710 Compliance",desc:"Compliance analysis and standards"},{key:"incidentDetails",label:"Incident Details",desc:"Detailed incident table"},{key:"charts",label:"Charts & Graphs",desc:"Visual data representation"},{key:"recommendations",label:"Recommendations",desc:"Action items and suggestions"}].map(S=>{var j;return c.jsx(z,{size:{xs:12,sm:6},children:c.jsx(Os,{control:c.jsx(Fi,{checked:((j=a.includeSections)==null?void 0:j[S.key])||!1,onChange:()=>p(S.key)}),label:c.jsxs(F,{children:[c.jsx(M,{variant:"body2",children:S.label}),c.jsx(M,{variant:"caption",color:"text.secondary",children:S.desc})]})})},S.key)})}),c.jsxs(pt,{severity:"info",sx:{mb:2},children:[c.jsx(M,{variant:"body2",gutterBottom:!0,children:c.jsx("strong",{children:"Report Preview:"})}),c.jsxs(Hl,{direction:"row",spacing:1,flexWrap:"wrap",children:[c.jsx(Te,{label:`${t.length} incidents`,size:"small"}),c.jsx(Te,{label:`${y.length} sections`,size:"small"}),c.jsx(Te,{label:`~${w} pages`,size:"small"}),c.jsx(Te,{label:`${(A=a.reportPeriod)==null?void 0:A.startDate} to ${(E=a.reportPeriod)==null?void 0:E.endDate}`,size:"small"})]})]}),h&&c.jsxs(pt,{severity:h.success?"success":"error",sx:{mb:2},icon:h.success?c.jsx(Yn,{}):void 0,children:[h.message,h.filename&&c.jsxs(M,{variant:"caption",display:"block",sx:{mt:1},children:["File: ",h.filename]})]})]}),c.jsxs(Oi,{sx:{p:3},children:[c.jsx(ue,{onClick:e,children:"Cancel"}),c.jsx(ue,{variant:"contained",startIcon:d?c.jsx(rn,{size:20}):c.jsx(Sr,{}),onClick:g,disabled:d||!((D=a.departmentName)!=null&&D.trim())||y.length===0,children:d?"Generating...":"Generate PDF Report"})]})]})},_1=[{id:"monthly_nfpa_compliance",name:"Monthly NFPA 1710 Compliance Report",description:"Official monthly compliance report with AI-powered recommendations",includeAI:!0,sections:["Executive Summary","NFPA 1710 Compliance Analysis","AI Performance Insights","Improvement Recommendations","Statistical Analysis"],targetAudience:["Fire Chief","City Manager","Mayor"]},{id:"grant_application",name:"Grant Application Data Package",description:"Comprehensive data package for grant applications with AI analysis",includeAI:!0,sections:["Executive Summary","Needs Assessment","AI Performance Analysis","Cost-Benefit Analysis","Implementation Plan"],targetAudience:["Grant Reviewers","FEMA","State Agencies"]},{id:"city_council_brief",name:"City Council Executive Brief",description:"Concise executive briefing with AI insights for council meetings",includeAI:!0,sections:["Performance Dashboard","AI Key Insights","Budget Impact Analysis","Council Recommendations"],targetAudience:["City Council","Mayor","Budget Director"]},{id:"annual_performance",name:"Annual Performance Report",description:"Comprehensive annual report with AI trend analysis",includeAI:!0,sections:["Year in Review","AI Performance Trends","Strategic Initiatives","Future Planning"],targetAudience:["Public","Media","City Leadership"]}],R1=({open:n,onClose:e})=>{const[t,s]=v.useState(0),[i,r]=v.useState(null),[o,a]=v.useState({name:"",chief:"",email:"",phone:"",city:"",state:""}),[l,d]=v.useState(!0),[u,h]=v.useState(null),[f,m]=v.useState(!1),{generateInsights:p,loading:x}=sc(),g=Se(D=>{var S,j;return((j=(S=D.analyzer)==null?void 0:S.rawData)==null?void 0:j.incidents)||[]}),y=Se(D=>{var S,j;return(j=(S=D.analyzer)==null?void 0:S.calculatedMetrics)==null?void 0:j.responseTimeStats}),w=["Select Report Template","Department Information","AI Analysis","Generate Report"];v.useEffect(()=>{n&&(s(0),r(null),h(null))},[n]);const T=()=>{s(D=>D+1)},C=()=>{s(D=>D-1)},P=D=>{r(D),d(D.includeAI)},I=async()=>{if(!g.length||!i)return;const D=await p(g);D&&h(D)},O=async()=>{if(!(!i||!o.name)){m(!0);try{await new Promise(S=>setTimeout(S,3e3)),console.log("Generated AI-enhanced report:",{template:i,department:o,statistics:y,aiInsights:l?u:null,responseTimeData:g}),e()}catch(D){console.error("Error generating report:",D)}finally{m(!1)}}},b=()=>c.jsxs(F,{children:[c.jsxs(M,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(Hr,{}),"Select Report Template"]}),c.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Choose a professional report template enhanced with AI insights"}),c.jsx(z,{container:!0,spacing:2,children:_1.map(D=>c.jsx(z,{size:{xs:12,md:6},children:c.jsx($t,{sx:{cursor:"pointer",border:(i==null?void 0:i.id)===D.id?2:1,borderColor:(i==null?void 0:i.id)===D.id?"primary.main":"grey.300"},onClick:()=>P(D),children:c.jsxs(Vt,{children:[c.jsxs(F,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[c.jsx(M,{variant:"h6",children:D.name}),D.includeAI&&c.jsx(Te,{icon:c.jsx(bs,{}),label:"AI Enhanced",color:"primary",size:"small"})]}),c.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:2},children:D.description}),c.jsxs(F,{sx:{mb:2},children:[c.jsx(M,{variant:"subtitle2",sx:{mb:1},children:"Sections:"}),D.sections.map(S=>c.jsx(Te,{label:S,size:"small",sx:{mr:.5,mb:.5}},S))]}),c.jsxs(F,{children:[c.jsx(M,{variant:"subtitle2",sx:{mb:1},children:"Target Audience:"}),D.targetAudience.map(S=>c.jsx(Te,{label:S,variant:"outlined",size:"small",sx:{mr:.5,mb:.5}},S))]})]})})},D.id))})]}),k=()=>c.jsxs(F,{children:[c.jsx(M,{variant:"h6",gutterBottom:!0,children:"Department Information"}),c.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Enter your department details for the report header"}),c.jsxs(z,{container:!0,spacing:2,children:[c.jsx(z,{size:{xs:12,md:6},children:c.jsx(De,{fullWidth:!0,label:"Department Name",value:o.name,onChange:D=>a(S=>({...S,name:D.target.value})),placeholder:"e.g., Houston Fire Department",required:!0})}),c.jsx(z,{size:{xs:12,md:6},children:c.jsx(De,{fullWidth:!0,label:"Fire Chief Name",value:o.chief,onChange:D=>a(S=>({...S,chief:D.target.value})),placeholder:"e.g., Chief John Smith"})}),c.jsx(z,{size:{xs:12,md:6},children:c.jsx(De,{fullWidth:!0,label:"Email",value:o.email,onChange:D=>a(S=>({...S,email:D.target.value})),placeholder:"chief@firedept.gov"})}),c.jsx(z,{size:{xs:12,md:6},children:c.jsx(De,{fullWidth:!0,label:"Phone",value:o.phone,onChange:D=>a(S=>({...S,phone:D.target.value})),placeholder:"(555) 123-4567"})}),c.jsx(z,{size:{xs:12,md:6},children:c.jsx(De,{fullWidth:!0,label:"City",value:o.city,onChange:D=>a(S=>({...S,city:D.target.value})),placeholder:"Houston"})}),c.jsx(z,{size:{xs:12,md:6},children:c.jsx(De,{fullWidth:!0,label:"State",value:o.state,onChange:D=>a(S=>({...S,state:D.target.value})),placeholder:"TX"})})]}),c.jsx(F,{sx:{mt:3},children:c.jsx(Os,{control:c.jsx(Xu,{checked:l,onChange:D=>d(D.target.checked),disabled:!(i!=null&&i.includeAI)}),label:"Include AI-powered insights and recommendations"})})]}),A=()=>c.jsxs(F,{children:[c.jsxs(M,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(bs,{}),"AI Analysis"]}),c.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Generate AI-powered insights for your report"}),!u&&c.jsxs(F,{sx:{textAlign:"center",py:4},children:[c.jsx(ue,{variant:"contained",onClick:I,disabled:x||!g.length,startIcon:x?c.jsx(rn,{size:20}):c.jsx(bs,{}),size:"large",children:x?"Generating AI Insights...":"Generate AI Insights"}),c.jsxs(M,{variant:"body2",color:"text.secondary",sx:{mt:2},children:[g.length," incidents will be analyzed"]})]}),u&&c.jsxs(ze,{sx:{p:3},children:[c.jsxs(F,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[c.jsx(Kl,{color:"primary"}),c.jsx(M,{variant:"h6",children:"AI Analysis Results"}),c.jsx(Te,{icon:u.success?c.jsx(Yn,{}):c.jsx(vr,{}),label:u.success?"Success":"Error",color:u.success?"success":"error",size:"small"}),c.jsx(Te,{label:u.source==="ai"?"AI Analysis":"Fallback Analysis",color:u.source==="ai"?"primary":"default",size:"small"})]}),u.success&&u.insight&&c.jsx(F,{sx:{maxHeight:300,overflow:"auto"},children:c.jsxs(M,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:[u.insight.substring(0,500),"..."]})}),c.jsx(ue,{variant:"outlined",onClick:I,disabled:x,sx:{mt:2},children:"Regenerate Analysis"})]})]}),E=()=>c.jsxs(F,{children:[c.jsx(M,{variant:"h6",gutterBottom:!0,children:"Generate Report"}),c.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Review your selections and generate the AI-enhanced report"}),c.jsx($t,{sx:{mb:3},children:c.jsxs(Vt,{children:[c.jsx(M,{variant:"h6",gutterBottom:!0,children:"Report Summary"}),c.jsxs(F,{sx:{mb:2},children:[c.jsxs(M,{variant:"body2",children:[c.jsx("strong",{children:"Template:"})," ",i==null?void 0:i.name]}),c.jsxs(M,{variant:"body2",children:[c.jsx("strong",{children:"Department:"})," ",o.name]}),c.jsxs(M,{variant:"body2",children:[c.jsx("strong",{children:"AI Enhanced:"})," ",l?"Yes":"No"]}),c.jsxs(M,{variant:"body2",children:[c.jsx("strong",{children:"Data Points:"})," ",g.length," incidents"]})]}),l&&u&&c.jsx(pt,{severity:"info",sx:{mb:2},children:"AI insights will be integrated throughout the report, providing data-driven recommendations and performance analysis."})]})}),c.jsx(F,{sx:{textAlign:"center"},children:c.jsx(ue,{variant:"contained",onClick:O,disabled:f||!i||!o.name,startIcon:f?c.jsx(rn,{size:20}):c.jsx(Gr,{}),size:"large",children:f?"Generating Report...":"Generate AI-Enhanced Report"})})]});return c.jsxs(Ai,{open:n,onClose:e,maxWidth:"lg",fullWidth:!0,children:[c.jsx(Yr,{children:"AI-Enhanced Report Generator"}),c.jsx(Ei,{children:c.jsxs(F,{sx:{py:2},children:[c.jsx(Ul,{activeStep:t,orientation:"horizontal",children:w.map(D=>c.jsx(Gl,{children:c.jsx(ql,{children:D})},D))}),c.jsxs(F,{sx:{mt:4},children:[t===0&&b(),t===1&&k(),t===2&&A(),t===3&&E()]})]})}),c.jsxs(Oi,{children:[c.jsx(ue,{onClick:e,children:"Cancel"}),c.jsx(ue,{disabled:t===0,onClick:C,children:"Back"}),c.jsx(ue,{variant:"contained",onClick:T,disabled:t===0&&!i||t===1&&!o.name||t===2&&l&&!u||t===3,children:t===w.length-1?"Generate":"Next"})]})]})},Ml=[{id:"excel",name:"Excel Workbook (.xlsx)",description:"Detailed spreadsheet with multiple tabs for incidents, statistics, and charts",icon:c.jsx(kh,{sx:{color:"#2E7D32"}})},{id:"csv",name:"CSV File (.csv)",description:"Simple comma-separated values file that can be opened in any spreadsheet application",icon:c.jsx(Rh,{sx:{color:"#1976D2"}})},{id:"pdf",name:"PDF Report (.pdf)",description:"Formatted report with tables, charts and statistics",icon:c.jsx(Sr,{sx:{color:"#D32F2F"}})},{id:"ai-enhanced",name:"AI-Enhanced Report (.pdf)",description:"Professional report with AI-powered insights and recommendations",icon:c.jsx(bs,{sx:{color:"#9C27B0"}})}],O1=[{id:"summary",name:"Summary Statistics",description:"Overall response time metrics and KPIs",icon:c.jsx(Ih,{})},{id:"incidents",name:"Incident Details",description:"Detailed table of all incidents and response times",icon:c.jsx(Ju,{})},{id:"map",name:"Geographic Analysis",description:"Map and location-based analysis (PDF only)",icon:c.jsx(eh,{})}],A1=()=>{var C;const{incidents:n}=Se(P=>P.analyzer.rawData),{responseTimeStats:e}=Se(P=>P.analyzer.calculatedMetrics),t=Se(P=>P.analyzer.filters),[s,i]=v.useState("excel"),[r,o]=v.useState(["summary","incidents"]),[a,l]=v.useState(!1),[d,u]=v.useState({success:!1,message:"",open:!1}),[h,f]=v.useState(!1),[m,p]=v.useState(!1),x=P=>{const I=[...r],O=I.indexOf(P);O===-1?I.push(P):I.splice(O,1),o(I)},g=async()=>{const P=await Pr(()=>import("./exceljs.min-B2rkC6B_.js").then(D=>D.e),__vite__mapDeps([0,1])),I=new P.Workbook;if(I.creator="FireEMS Response Time Analyzer",I.lastModifiedBy="FireEMS Response Time Analyzer",I.created=new Date,I.modified=new Date,I.title="Response Time Analysis Report",I.subject="Incident Response Times",r.includes("summary")&&e){const D=[["Response Time Statistics","","","",""],["Metric","Mean","Median","90th Percentile","Standard Deviation"],["Dispatch Time",e.mean.dispatchTime||"N/A",e.median.dispatchTime||"N/A",e.ninetiethPercentile.dispatchTime||"N/A",e.standardDeviation.dispatchTime||"N/A"],["Turnout Time",e.mean.turnoutTime||"N/A",e.median.turnoutTime||"N/A",e.ninetiethPercentile.turnoutTime||"N/A",e.standardDeviation.turnoutTime||"N/A"],["Travel Time",e.mean.travelTime||"N/A",e.median.travelTime||"N/A",e.ninetiethPercentile.travelTime||"N/A",e.standardDeviation.travelTime||"N/A"],["Total Response Time",e.mean.totalResponseTime||"N/A",e.median.totalResponseTime||"N/A",e.ninetiethPercentile.totalResponseTime||"N/A",e.standardDeviation.totalResponseTime||"N/A"],["","","","",""],["Report Generated:",new Date().toLocaleString(),"","",""],["Total Incidents:",n.length.toString(),"","",""]];(t.dateRange||t.incidentTypes||t.units||t.timeOfDay)&&(D.push(["","","","",""]),D.push(["Applied Filters:","","","",""]),t.dateRange&&D.push(["Date Range:",`${t.dateRange[0].toLocaleDateString()} to ${t.dateRange[1].toLocaleDateString()}`,"","",""]),t.incidentTypes&&D.push(["Incident Types:",t.incidentTypes.join(", "),"","",""]),t.units&&D.push(["Units:",t.units.join(", "),"","",""]),t.timeOfDay&&D.push(["Time of Day:",`${t.timeOfDay[0]}:00 to ${t.timeOfDay[1]}:00`,"","",""]));const S=I.addWorksheet("Summary Statistics");S.addRows(D),S.columns=[{width:20},{width:20},{width:20},{width:20},{width:20}],S.getRow(1).font={bold:!0,size:14},S.getRow(2).font={bold:!0}}if(r.includes("incidents")){const D=n.map(R=>{const L=ut(R);return{"Incident ID":R.incidentId,Date:R.incidentDate,Time:R.incidentTime||"",Type:R.incidentType||"","Responding Unit":R.respondingUnit||"",Address:R.address||"",Location:R.latitude&&R.longitude?`${R.latitude}, ${R.longitude}`:"","Dispatch Time (s)":L.dispatchTime||"","Turnout Time (s)":L.turnoutTime||"","Travel Time (s)":L.travelTime||"","Total Response Time (s)":L.totalResponseTime||"","Scene Time (s)":L.sceneTime||"","Total Incident Time (s)":L.totalIncidentTime||""}}),S=I.addWorksheet("Incident Details"),j=Object.keys(D[0]||{});S.addRow(j),D.forEach(R=>{S.addRow(Object.values(R))}),S.columns=[{width:15},{width:12},{width:10},{width:15},{width:15},{width:25},{width:20},{width:15},{width:15},{width:15},{width:20},{width:15},{width:20}],S.getRow(1).font={bold:!0}}const O=`response_time_analysis_${Date.now()}.xlsx`,b=await I.xlsx.writeBuffer(),k=new Blob([b],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),A=URL.createObjectURL(k),E=document.createElement("a");return E.href=A,E.download=O,E.click(),URL.revokeObjectURL(A),{success:!0,filename:O}},y=async()=>{const P=n.map(j=>{const R=ut(j);return{"Incident ID":j.incidentId,Date:j.incidentDate,Time:j.incidentTime||"",Type:j.incidentType||"","Responding Unit":j.respondingUnit||"",Address:j.address||"",Location:j.latitude&&j.longitude?`${j.latitude}, ${j.longitude}`:"","Dispatch Time (s)":R.dispatchTime||"","Turnout Time (s)":R.turnoutTime||"","Travel Time (s)":R.travelTime||"","Total Response Time (s)":R.totalResponseTime||"","Scene Time (s)":R.sceneTime||"","Total Incident Time (s)":R.totalIncidentTime||""}}),I=await Pr(()=>import("./exceljs.min-B2rkC6B_.js").then(j=>j.e),__vite__mapDeps([0,1])),O=new I.Workbook,b=O.addWorksheet("Incident Details"),k=Object.keys(P[0]||{});b.addRow(k),P.forEach(j=>{b.addRow(Object.values(j))});const A=await O.csv.writeBuffer(),E=new Blob([A],{type:"text/csv;charset=utf-8;"}),D=URL.createObjectURL(E),S=document.createElement("a");return S.href=D,S.setAttribute("download",`response_time_analysis_${Date.now()}.csv`),document.body.appendChild(S),S.click(),document.body.removeChild(S),{success:!0,filename:`response_time_analysis_${Date.now()}.csv`}},w=()=>(f(!0),{success:!0,filename:"Opening Report Generator..."}),T=async()=>{if(!n.length){u({success:!1,message:"No data to export",open:!0});return}l(!0);try{let P;switch(s){case"excel":P=await g();break;case"csv":P=await y();break;case"pdf":w();return;case"ai-enhanced":p(!0);return;default:throw new Error("Unsupported export format")}u({success:!0,message:`Data exported successfully as ${s.toUpperCase()} file: ${P.filename}`,open:!0})}catch(P){console.error("Export error:",P),u({success:!1,message:`Error exporting data: ${P instanceof Error?P.message:"Unknown error"}`,open:!0})}finally{l(!1)}};return c.jsxs(F,{sx:{p:3},children:[c.jsx(M,{variant:"h6",gutterBottom:!0,children:"Export Analysis Results"}),c.jsxs(z,{container:!0,spacing:3,children:[c.jsx(z,{size:{xs:12,md:6},children:c.jsxs(ze,{variant:"outlined",sx:{p:2,height:"100%"},children:[c.jsx(M,{variant:"subtitle1",gutterBottom:!0,children:"Export Format"}),c.jsx(Tr,{children:Ml.map(P=>c.jsx(ze,{variant:"outlined",sx:{mb:1,p:1,bgcolor:s===P.id?"action.selected":"background.paper",cursor:"pointer","&:hover":{bgcolor:"action.hover"}},onClick:()=>i(P.id),children:c.jsxs(wr,{children:[c.jsx(Qu,{children:P.icon}),c.jsx(Ku,{primary:P.name,secondary:P.description})]})},P.id))})]})}),c.jsx(z,{size:{xs:12,md:6},children:c.jsxs(ze,{variant:"outlined",sx:{p:2,height:"100%"},children:[c.jsx(M,{variant:"subtitle1",gutterBottom:!0,children:"Include In Export"}),c.jsx(Tr,{children:O1.map(P=>c.jsx(wr,{dense:!0,children:c.jsx(Os,{control:c.jsx(Fi,{checked:r.includes(P.id),onChange:()=>x(P.id),disabled:P.id==="map"&&s!=="pdf"}),label:c.jsxs(F,{children:[c.jsxs(F,{sx:{display:"flex",alignItems:"center"},children:[P.icon,c.jsx(M,{variant:"body1",sx:{ml:1},children:P.name})]}),c.jsx(M,{variant:"body2",color:"text.secondary",children:P.description})]}),sx:{width:"100%"}})},P.id))})]})})]}),c.jsxs(ze,{variant:"outlined",sx:{p:2,mt:3},children:[c.jsx(M,{variant:"subtitle1",gutterBottom:!0,children:"Export Summary"}),c.jsxs(z,{container:!0,spacing:2,children:[c.jsxs(z,{size:{xs:12,sm:4},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Total Records"}),c.jsxs(M,{variant:"body1",children:[n.length," incidents"]})]}),c.jsxs(z,{size:{xs:12,sm:4},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Format"}),c.jsx(M,{variant:"body1",children:((C=Ml.find(P=>P.id===s))==null?void 0:C.name)||s})]}),c.jsxs(z,{size:{xs:12,sm:4},children:[c.jsx(M,{variant:"body2",color:"text.secondary",children:"Estimated File Size"}),c.jsx(M,{variant:"body1",children:s==="excel"?`~${Math.ceil(n.length*.5)} KB`:s==="csv"?`~${Math.ceil(n.length*.3)} KB`:s==="pdf"?`~${Math.ceil(n.length*.7+(r.includes("map")?500:0))} KB`:"Unknown"})]})]}),c.jsx(F,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:c.jsx(ue,{variant:"contained",color:"primary",startIcon:a?c.jsx(rn,{size:20}):c.jsx(Gr,{}),onClick:T,disabled:a||!r.length,children:a?"Exporting...":"Export Data"})})]}),c.jsx(Zu,{open:d.open,autoHideDuration:6e3,onClose:()=>u({...d,open:!1}),children:c.jsx(pt,{onClose:()=>u({...d,open:!1}),severity:d.success?"success":"error",children:d.message})}),c.jsx(fu,{open:h,onClose:()=>f(!1),incidents:n||[],statistics:e||{mean:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},median:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},ninetiethPercentile:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},standardDeviation:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},min:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},max:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},count:0},dateRange:t!=null&&t.dateRange?{start:t.dateRange[0].toISOString().split("T")[0],end:t.dateRange[1].toISOString().split("T")[0]}:void 0}),c.jsx(R1,{open:m,onClose:()=>p(!1),incidents:n||[],statistics:e||{mean:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},median:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},ninetiethPercentile:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},standardDeviation:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},min:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},max:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},count:0},dateRange:t!=null&&t.dateRange?{start:t.dateRange[0].toISOString().split("T")[0],end:t.dateRange[1].toISOString().split("T")[0]}:void 0})]})},E1={id:"monthly_nfpa_1710_compliance",name:"Monthly NFPA 1710 Compliance Report",description:"Professional monthly compliance report documenting NFPA 1710 response time standards performance for regulatory review and city leadership.",category:"compliance",targetAudience:["Fire Chief","City Manager","Mayor","City Council","State Fire Marshal"],sections:[{id:"executive_summary",title:"Executive Summary",type:"summary",content:`
## Executive Summary

The {{departmentName}} responded to {{totalIncidents}} emergency incidents during {{reportPeriod}}, achieving an overall NFPA 1710 compliance rate of {{overallCompliance}}%.

### Key Performance Highlights:
- **Dispatch Time Compliance**: {{dispatchCompliance}}% (Goal: 90% ≤60 seconds)
- **Turnout Time Compliance**: {{turnoutCompliance}}% (Goal: 90% ≤60 seconds)
- **Total Response Time Compliance**: {{totalResponseCompliance}}% (Goal: 90% ≤5 minutes)
- **Average Response Time**: {{averageResponseTime}} minutes

### Compliance Status:
{{#if compliant}}
✅ **COMPLIANT** - Department meets NFPA 1710 standards
{{else}}
⚠️ **NON-COMPLIANT** - Areas for improvement identified
{{/if}}

### Recommendations:
{{#each recommendations}}
- {{this}}
{{/each}}
      `,required:!0,order:1},{id:"department_overview",title:"Department Overview",type:"narrative",content:`
## Department Overview

**{{departmentName}}** serves {{population}} residents across {{squareMiles}} square miles with {{stations}} fire stations, {{apparatus}} apparatus, and {{personnel}} personnel.

**Leadership**: {{chief}}, Fire Chief
**Jurisdiction**: {{jurisdiction}}
**Reporting Period**: {{reportPeriod}}

### Service Delivery Model:
The department operates under the NFPA 1710 standard for career fire departments, which establishes response time objectives for emergency incidents.
      `,required:!0,order:2},{id:"nfpa_compliance_metrics",title:"NFPA 1710 Compliance Metrics",type:"statistics",content:{type:"compliance_table",data:"nfpa1710"},required:!0,order:3},{id:"response_time_analysis",title:"Response Time Analysis",type:"chart",content:{type:"response_time_histogram",data:"responseTimeStats"},required:!0,order:4},{id:"incident_volume_analysis",title:"Incident Volume Analysis",type:"table",content:{type:"incident_breakdown",data:"incidentVolume"},required:!0,order:5},{id:"recommendations",title:"Performance Recommendations",type:"recommendations",content:`
## Performance Recommendations

Based on the analysis of {{reportPeriod}} response data, the following recommendations are provided:

### Operational Improvements:
{{#each operationalRecommendations}}
- {{this}}
{{/each}}

### Training Opportunities:
{{#each trainingRecommendations}}
- {{this}}
{{/each}}

### Resource Considerations:
{{#each resourceRecommendations}}
- {{this}}
{{/each}}

### Next Month's Focus:
{{nextMonthFocus}}
      `,required:!0,order:6}],metadata:{version:"1.0.0",lastUpdated:new Date().toISOString(),compatibleTools:["response-time-analyzer"],outputFormats:["pdf","word"],estimatedPages:8,professionalLevel:"executive"}},F1={id:"annual_department_performance",name:"Annual Department Performance Report",description:"Comprehensive annual report documenting department performance, trends, achievements, and strategic initiatives for city leadership and public transparency.",category:"performance",targetAudience:["City Council","Mayor","City Manager","Public","Media"],sections:[{id:"message_from_chief",title:"Message from the Fire Chief",type:"narrative",content:`
## Message from Fire Chief {{chief}}

Dear Community Members and City Leadership,

I am pleased to present the {{year}} Annual Performance Report for the {{departmentName}}. This report highlights our commitment to protecting and serving our community with the highest standards of emergency response.

Throughout {{year}}, our dedicated team of {{personnel}} firefighters and emergency medical professionals responded to {{totalIncidents}} emergency calls, maintaining our mission of preserving life, property, and the environment.

### Year {{year}} Achievements:
{{#each achievements}}
- {{this}}
{{/each}}

### Looking Forward to {{nextYear}}:
{{#each futureInitiatives}}
- {{this}}
{{/each}}

We remain committed to continuous improvement and serving our community with excellence.

Respectfully,

**{{chief}}**  
Fire Chief, {{departmentName}}
      `,required:!0,order:1},{id:"year_in_review",title:"Year in Review",type:"summary",content:`
## {{year}} Year in Review

### By the Numbers:
- **{{totalIncidents}}** Total Emergency Responses
- **{{averageResponseTime}}** Average Response Time
- **{{nfpaCompliance}}%** NFPA 1710 Compliance Rate
- **{{fireIncidents}}** Fire Incidents
- **{{emsIncidents}}** EMS Incidents
- **{{rescueIncidents}}** Rescue Incidents

### Major Incidents:
{{#each majorIncidents}}
- **{{date}}**: {{description}} - {{outcome}}
{{/each}}

### Community Impact:
- Lives Saved: {{livesSaved}}
- Property Saved: {{propertySaved}}
- Fire Loss: {{fireLoss}}
- EMS Transports: {{emsTransports}}
      `,required:!0,order:2},{id:"performance_trends",title:"Performance Trends",type:"chart",content:{type:"annual_trends",data:"yearOverYear"},required:!0,order:3},{id:"training_development",title:"Training & Professional Development",type:"narrative",content:`
## Training & Professional Development

### {{year}} Training Highlights:
{{#each trainingPrograms}}
- **{{name}}**: {{hours}} hours, {{participants}} personnel
{{/each}}

### Certifications Achieved:
{{#each certifications}}
- {{count}} personnel achieved {{certification}}
{{/each}}

### Continuing Education:
- Total Training Hours: {{totalTrainingHours}}
- Training Hours per Person: {{hoursPerPerson}}
- External Conference Attendance: {{conferenceAttendance}}
      `,required:!0,order:4},{id:"community_outreach",title:"Community Outreach & Education",type:"narrative",content:`
## Community Outreach & Education

### Fire Prevention Programs:
{{#each preventionPrograms}}
- **{{name}}**: {{participants}} participants
{{/each}}

### School Programs:
- Fire Safety Education: {{schoolVisits}} schools reached
- Students Educated: {{studentsEducated}}

### Community Events:
{{#each communityEvents}}
- {{name}}: {{attendance}} attendees
{{/each}}

### Public Education Impact:
- Smoke Alarm Installations: {{smokeAlarms}}
- Home Safety Inspections: {{homeInspections}}
- CPR Training Provided: {{cprTraining}} citizens
      `,required:!0,order:5},{id:"strategic_initiatives",title:"Strategic Initiatives & Future Planning",type:"narrative",content:`
## Strategic Initiatives & Future Planning

### {{year}} Initiative Outcomes:
{{#each completedInitiatives}}
- **{{name}}**: {{status}} - {{outcome}}
{{/each}}

### {{nextYear}} Strategic Priorities:
{{#each nextYearPriorities}}
1. **{{title}}**
   - Objective: {{objective}}
   - Timeline: {{timeline}}
   - Resources Required: {{resources}}
{{/each}}

### Long-term Vision ({{futureYear}}):
{{longTermVision}}

### Funding Requirements:
{{#each fundingNeeds}}
- {{item}}: \${{amount}} - {{justification}}
{{/each}}
      `,required:!0,order:6}],metadata:{version:"1.0.0",lastUpdated:new Date().toISOString(),compatibleTools:["response-time-analyzer","fire-map-pro"],outputFormats:["pdf","word"],estimatedPages:24,professionalLevel:"executive"}},L1={id:"grant_application_package",name:"Grant Application Data Package",description:"Comprehensive data package for federal and state grant applications including FEMA AFG, SAFER, and state funding programs.",category:"grant",targetAudience:["Grant Reviewers","FEMA","State Agencies","Foundation Officers"],sections:[{id:"executive_summary",title:"Project Executive Summary",type:"summary",content:`
## Project Executive Summary

**Applicant**: {{departmentName}}
**Grant Program**: {{grantProgram}}
**Request Amount**: \${{requestAmount}}
**Project Title**: {{projectTitle}}

### Community Profile:
The {{departmentName}} serves {{population}} residents across {{squareMiles}} square miles in {{jurisdiction}}. Our department operates {{stations}} fire stations with {{apparatus}} apparatus and {{personnel}} personnel.

### Project Need:
{{projectNeed}}

### Performance Data Supporting Need:
- Current Response Time: {{currentResponseTime}} minutes
- NFPA 1710 Compliance: {{nfpaCompliance}}%
- Annual Incident Volume: {{totalIncidents}} calls
- Service Gap: {{serviceGap}}

### Expected Outcomes:
{{#each expectedOutcomes}}
- {{this}}
{{/each}}

### Return on Investment:
This investment will improve emergency response capability for {{beneficiaries}} residents, reducing response times by {{timeReduction}} and improving NFPA compliance to {{targetCompliance}}%.
      `,required:!0,order:1},{id:"needs_assessment",title:"Needs Assessment & Data Analysis",type:"statistics",content:{type:"comprehensive_needs_analysis",data:"grantNeedsAnalysis"},required:!0,order:2},{id:"performance_metrics",title:"Current Performance Metrics",type:"table",content:{type:"grant_performance_table",data:"currentPerformance"},required:!0,order:3},{id:"cost_benefit_analysis",title:"Cost-Benefit Analysis",type:"narrative",content:`
## Cost-Benefit Analysis

### Project Costs:
{{#each projectCosts}}
- {{item}}: \${{cost}} - {{justification}}
{{/each}}

**Total Project Cost**: \${{totalCost}}
**Grant Request**: \${{grantRequest}}
**Local Match**: \${{localMatch}} ({{matchPercentage}}%)

### Quantified Benefits:
- **Lives Saved Annually**: {{livesSaved}}
- **Property Protection**: \${{propertyProtection}}
- **Reduced Fire Loss**: \${{reducedLoss}}
- **Improved Response Time**: {{timeImprovement}} minutes
- **Additional Coverage**: {{additionalCoverage}} residents

### Cost per Beneficiary:
\${{costPerBeneficiary}} per resident served

### Return on Investment:
For every $1 invested, the community receives \${{roi}} in benefits through improved emergency response capability and reduced losses.
      `,required:!0,order:4},{id:"implementation_plan",title:"Implementation Plan & Timeline",type:"narrative",content:`
## Implementation Plan & Timeline

### Project Timeline:
{{#each timeline}}
- **{{phase}}** ({{duration}}): {{activities}}
{{/each}}

### Key Milestones:
{{#each milestones}}
- {{date}}: {{milestone}}
{{/each}}

### Risk Management:
{{#each risks}}
- **Risk**: {{risk}}
- **Mitigation**: {{mitigation}}
- **Probability**: {{probability}}
{{/each}}

### Performance Metrics:
{{#each performanceMetrics}}
- {{metric}}: Current {{current}} → Target {{target}}
{{/each}}

### Sustainability Plan:
{{sustainabilityPlan}}
      `,required:!0,order:5}],metadata:{version:"1.0.0",lastUpdated:new Date().toISOString(),compatibleTools:["response-time-analyzer","fire-map-pro"],outputFormats:["pdf","word","excel"],estimatedPages:16,professionalLevel:"technical"}},N1={id:"city_council_executive_summary",name:"City Council Executive Summary",description:"Concise executive briefing for city council meetings highlighting key performance metrics and departmental needs.",category:"executive",targetAudience:["City Council","Mayor","City Manager","Budget Director"],sections:[{id:"performance_dashboard",title:"Performance Dashboard",type:"summary",content:`
# Fire Department Performance Summary
**{{reportPeriod}}** | **{{departmentName}}**

## Key Metrics

| Metric | Current | Goal | Status |
|--------|---------|------|--------|
| **Response Time** | {{averageResponseTime}} min | ≤5 min | {{responseStatus}} |
| **NFPA Compliance** | {{nfpaCompliance}}% | 90% | {{complianceStatus}} |
| **Total Incidents** | {{totalIncidents}} | - | {{trendIndicator}} |
| **Budget Utilization** | {{budgetUtilization}}% | <100% | {{budgetStatus}} |

## Performance Highlights
{{#each highlights}}
- {{this}}
{{/each}}

## Areas of Concern
{{#each concerns}}
- {{this}}
{{/each}}
      `,required:!0,order:1},{id:"budget_impact",title:"Budget Impact & Resource Needs",type:"narrative",content:`
## Budget Impact & Resource Needs

### Current Budget Performance:
- **Personnel Costs**: {{personnelCosts}}% of budget
- **Equipment/Maintenance**: {{equipmentCosts}}% of budget
- **Operations**: {{operationsCosts}}% of budget
- **Training**: {{trainingCosts}}% of budget

### Immediate Needs ({{currentFY}}):
{{#each immediateNeeds}}
- **{{item}}**: \${{cost}} - {{urgency}}
{{/each}}

### Future Budget Considerations ({{nextFY}}):
{{#each futureBudgetItems}}
- {{item}}: \${{estimatedCost}}
{{/each}}

### Cost Avoidance:
Through effective emergency response, the department prevented an estimated \${{costAvoidance}} in fire losses during {{reportPeriod}}.
      `,required:!0,order:2},{id:"council_recommendations",title:"Recommendations for Council Action",type:"recommendations",content:`
## Recommendations for Council Action

### Immediate Actions Required:
{{#each immediateActions}}
1. **{{action}}**
   - **Rationale**: {{rationale}}
   - **Cost**: {{cost}}
   - **Timeline**: {{timeline}}
   - **Impact**: {{impact}}
{{/each}}

### Future Considerations:
{{#each futureConsiderations}}
- {{consideration}}
{{/each}}

### Policy Implications:
{{#each policyImplications}}
- {{implication}}
{{/each}}

### Community Benefit:
{{communityBenefit}}
      `,required:!0,order:3}],metadata:{version:"1.0.0",lastUpdated:new Date().toISOString(),compatibleTools:["response-time-analyzer"],outputFormats:["pdf","word"],estimatedPages:4,professionalLevel:"executive"}},z1=[E1,F1,L1,N1];class B1{static generateReport(e,t){const s=Date.now();console.log(`📄 Generating report: "${e.name}" for ${t.departmentInfo.name}`);const i=e.sections.sort((u,h)=>u.order-h.order).map(u=>this.processSection(u,t,e)),r=Date.now()-s,o=this.calculateWordCount(i),a=this.calculateCompleteness(t),l=this.assessDataQuality(t),d={template:e,sections:i,metadata:{totalPages:Math.ceil(o/300),wordCount:o,processingTime:r,dataQuality:l,completeness:a},generatedAt:new Date().toISOString()};return console.log(`✅ Report generated: ${i.length} sections, ${o} words, ${r}ms`),d}static processSection(e,t,s){console.log(`🔧 Processing section: "${e.title}"`);let i;switch(e.type){case"summary":case"narrative":case"recommendations":i=this.processTextTemplate(e.content,t);break;case"statistics":i=this.processStatisticsSection(e.content,t);break;case"chart":i=this.processChartSection(e.content,t);break;case"table":i=this.processTableSection(e.content,t);break;default:i=e.content}return{id:e.id,title:e.title,type:e.type,processedContent:i,order:e.order}}static processTextTemplate(e,t){let s=e;const i=this.extractTemplateVariables(t);console.log("🔧 TEMPLATE PROCESSING - Available variables:",Object.keys(i)),console.log("🔧 TEMPLATE PROCESSING - propertySaved value:",i.propertySaved);for(const[r,o]of Object.entries(i)){const a=new RegExp(`{{${r}}}`,"g");o!=null?s=s.replace(a,String(o)):(console.error(`❌ TEMPLATE ERROR - Variable '${r}' is undefined or null`),s=s.replace(a,`[${r} not defined]`))}return s=this.processConditionals(s,t),s=this.processLoops(s,t),s}static extractTemplateVariables(e){const t=e.departmentInfo,s=e.complianceMetrics;return{departmentName:t.name,chief:t.chief,jurisdiction:t.jurisdiction,population:t.population.toLocaleString(),squareMiles:t.squareMiles,stations:t.stations,apparatus:t.apparatus,personnel:t.personnel,reportPeriod:e.reportPeriod.description,startDate:new Date(e.reportPeriod.startDate).toLocaleDateString(),endDate:new Date(e.reportPeriod.endDate).toLocaleDateString(),overallCompliance:Math.round(s.nfpa1710.totalResponseCompliance),dispatchCompliance:Math.round(s.nfpa1710.dispatchCompliance),turnoutCompliance:Math.round(s.nfpa1710.turnoutCompliance),travelCompliance:Math.round(s.nfpa1710.travelCompliance),totalResponseCompliance:Math.round(s.nfpa1710.totalResponseCompliance),nfpaCompliance:Math.round(s.nfpa1710.totalResponseCompliance),averageResponseTime:this.formatTime(s.averageResponseTime),totalIncidents:s.incidentVolume.total.toLocaleString(),fireIncidents:s.incidentVolume.fire.toLocaleString(),emsIncidents:s.incidentVolume.ems.toLocaleString(),rescueIncidents:s.incidentVolume.rescue.toLocaleString(),hazmatIncidents:s.incidentVolume.hazmat.toLocaleString(),responseStatus:this.getStatusIndicator(s.averageResponseTime,300),complianceStatus:this.getStatusIndicator(s.nfpa1710.totalResponseCompliance,90),compliant:s.nfpa1710.totalResponseCompliance>=90,year:new Date().getFullYear(),nextYear:new Date().getFullYear()+1,currentFY:`FY${new Date().getFullYear()}`,nextFY:`FY${new Date().getFullYear()+1}`,futureYear:new Date().getFullYear()+5,livesSaved:47,propertySaved:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(24e5),fireLoss:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(125e3),emsTransports:s.incidentVolume.ems,achievements:["Maintained 24/7 emergency response capability","Completed advanced rescue training","Upgraded communication systems"],futureInitiatives:["Implement new response protocols","Expand community education programs","Modernize equipment fleet"],majorIncidents:[{date:"January 15",description:"Structure fire - residential",outcome:"Fire contained, no injuries"},{date:"March 22",description:"Multi-vehicle accident",outcome:"All patients transported safely"}],trainingPrograms:[{name:"Advanced Life Support",hours:120,participants:25},{name:"Technical Rescue",hours:80,participants:15}],certifications:[{count:15,certification:"EMT-Paramedic"},{count:8,certification:"Fire Officer I"}],totalTrainingHours:2400,hoursPerPerson:80,conferenceAttendance:12,budgetUtilization:95,budgetStatus:"On Track",personnelCosts:75,equipmentCosts:15,operationsCosts:8,trainingCosts:2,costAvoidance:32e5,grantProgram:"SAFER Grant Program",requestAmount:85e4,projectTitle:"Emergency Response Enhancement Initiative",projectNeed:"Improved response times and enhanced emergency medical capability",serviceGap:"Extended response times in rural areas",expectedOutcomes:["Reduced response times by 2 minutes","Improved patient outcomes","Enhanced fire suppression capability"],beneficiaries:t.population,timeReduction:2,targetCompliance:95,trendIndicator:"↗️",recommendations:["Increase staffing during peak hours","Upgrade response equipment","Expand training programs"],operationalRecommendations:["Review deployment strategies","Optimize resource allocation"],trainingRecommendations:["Implement scenario-based training","Cross-train personnel"],resourceRecommendations:["Acquire new rescue equipment","Upgrade communication systems"],nextMonthFocus:"Focus on winter preparedness and equipment maintenance",schoolVisits:25,studentsEducated:1200,smokeAlarms:150,homeInspections:85,cprTraining:200,fundingNeeds:[{item:"Personnel Enhancement",amount:45e4,justification:"Additional firefighter/paramedic positions to improve response times"},{item:"Equipment Upgrade",amount:275e3,justification:"Modern rescue equipment and protective gear for enhanced safety"},{item:"Training Programs",amount:125e3,justification:"Advanced certification training and professional development"}],preventionPrograms:[{name:"Fire Safety Education",participants:1200},{name:"Business Inspections",participants:450}],communityEvents:[{name:"Fire Prevention Week",attendance:800},{name:"CPR Training Classes",attendance:200}],completedInitiatives:[{name:"Equipment Modernization",status:"Complete",outcome:"Improved response capabilities"}],nextYearPriorities:[{title:"Response Time Improvement",objective:"Reduce average response time by 30 seconds",timeline:"Q1-Q2 2024"}],projectCosts:[{item:"Training Equipment",cost:75e3,justification:"Enhanced training capabilities"}],timeline:[{phase:"Phase 1",duration:"3 months",activities:"Planning and procurement"}],milestones:[{date:"March 2024",milestone:"Equipment installation complete"}],risks:[{risk:"Budget constraints",mitigation:"Phased implementation",probability:"Low"}],performanceMetrics:[{metric:"Response Time",current:"6:30",target:"6:00"}],highlights:["Achieved 95% dispatch compliance","Zero lost-time injuries"],concerns:["Aging equipment requires replacement"],immediateNeeds:[{item:"Radio Upgrade",cost:125e3,urgency:"High"}],futureBudgetItems:[{item:"Station Renovation",estimatedCost:5e5}],immediateActions:[{action:"Implement new dispatch protocol",rationale:"Improve response times",cost:25e3}],futureConsiderations:["Expand to neighboring jurisdiction"],policyImplications:["Update mutual aid agreements"]}}static processConditionals(e,t){let s=e;const r=t.complianceMetrics.nfpa1710.totalResponseCompliance>=90;return s=s.replace(/{{#if compliant}}([\s\S]*?){{else}}([\s\S]*?){{\/if}}/g,r?"$1":"$2"),s=s.replace(/{{#if compliant}}([\s\S]*?){{\/if}}/g,r?"$1":""),s}static processLoops(e,t){let s=e;const i=this.generateRecommendations(t),r=i.filter(h=>h.type==="operational").map(h=>h.text),o=i.filter(h=>h.type==="training").map(h=>h.text),a=i.filter(h=>h.type==="resource").map(h=>h.text);s=this.processEachLoop(s,"recommendations",i.map(h=>h.text)),s=this.processEachLoop(s,"operationalRecommendations",r),s=this.processEachLoop(s,"trainingRecommendations",o),s=this.processEachLoop(s,"resourceRecommendations",a);const l=this.generateAchievements(t);s=this.processEachLoop(s,"achievements",l);const d=this.generateFutureInitiatives(t);s=this.processEachLoop(s,"futureInitiatives",d);const u=this.extractTemplateVariables(t);return u.fundingNeeds&&(s=this.processObjectLoop(s,"fundingNeeds",u.fundingNeeds)),u.majorIncidents&&(s=this.processObjectLoop(s,"majorIncidents",u.majorIncidents)),u.trainingPrograms&&(s=this.processObjectLoop(s,"trainingPrograms",u.trainingPrograms)),u.certifications&&(s=this.processObjectLoop(s,"certifications",u.certifications)),u.preventionPrograms&&(s=this.processObjectLoop(s,"preventionPrograms",u.preventionPrograms)),u.communityEvents&&(s=this.processObjectLoop(s,"communityEvents",u.communityEvents)),u.completedInitiatives&&(s=this.processObjectLoop(s,"completedInitiatives",u.completedInitiatives)),u.nextYearPriorities&&(s=this.processObjectLoop(s,"nextYearPriorities",u.nextYearPriorities)),u.projectCosts&&(s=this.processObjectLoop(s,"projectCosts",u.projectCosts)),u.timeline&&(s=this.processObjectLoop(s,"timeline",u.timeline)),u.milestones&&(s=this.processObjectLoop(s,"milestones",u.milestones)),u.risks&&(s=this.processObjectLoop(s,"risks",u.risks)),u.performanceMetrics&&(s=this.processObjectLoop(s,"performanceMetrics",u.performanceMetrics)),u.immediateNeeds&&(s=this.processObjectLoop(s,"immediateNeeds",u.immediateNeeds)),u.futureBudgetItems&&(s=this.processObjectLoop(s,"futureBudgetItems",u.futureBudgetItems)),u.immediateActions&&(s=this.processObjectLoop(s,"immediateActions",u.immediateActions)),s}static processEachLoop(e,t,s){const i=new RegExp(`{{#each ${t}}}([\\s\\S]*?){{/each}}`,"g");return e.replace(i,(r,o)=>s.map(a=>o.replace(/{{this}}/g,a)).join(`
`))}static processObjectLoop(e,t,s){const i=new RegExp(`{{#each ${t}}}([\\s\\S]*?){{/each}}`,"g");return e.replace(i,(r,o)=>s.map(a=>{let l=o;return Object.keys(a).forEach(d=>{const u=new RegExp(`{{${d}}}`,"g");l=l.replace(u,a[d])}),l}).join(`
`))}static generateRecommendations(e){const t=[],s=e.complianceMetrics.nfpa1710;return s.dispatchCompliance<90&&(t.push({type:"operational",text:`Improve dispatch protocols to achieve 90% compliance (currently ${Math.round(s.dispatchCompliance)}%)`}),t.push({type:"training",text:"Implement dispatcher training program focusing on call processing efficiency"})),s.turnoutCompliance<90&&(t.push({type:"operational",text:`Reduce turnout times through station readiness improvements (currently ${Math.round(s.turnoutCompliance)}% compliant)`}),t.push({type:"training",text:"Conduct regular turnout time drills and equipment placement optimization"})),s.travelCompliance<90&&(t.push({type:"resource",text:`Consider strategic apparatus placement to improve travel times (currently ${Math.round(s.travelCompliance)}% compliant)`}),t.push({type:"operational",text:"Analyze response patterns for optimal unit deployment strategies"})),s.totalResponseCompliance>=95&&t.push({type:"operational",text:"Maintain current excellent performance through continued focus on NFPA 1710 standards"}),t.length===0&&(t.push({type:"operational",text:"Continue monitoring performance trends and maintain current operational excellence"}),t.push({type:"training",text:"Pursue advanced training opportunities to enhance service capabilities"})),t}static generateAchievements(e){const t=[],s=e.complianceMetrics.nfpa1710;return s.totalResponseCompliance>=95&&t.push("Exceeded NFPA 1710 response time standards with 95%+ compliance"),s.dispatchCompliance>=95&&t.push("Achieved excellent dispatch time performance (95%+ compliance)"),t.push(`Successfully responded to ${e.complianceMetrics.incidentVolume.total.toLocaleString()} emergency incidents`),e.complianceMetrics.incidentVolume.total>1e3&&t.push("Maintained high service levels despite significant incident volume"),t}static generateFutureInitiatives(e){const t=[];return e.complianceMetrics.nfpa1710.totalResponseCompliance<90&&t.push("Implement response time improvement initiative to achieve NFPA 1710 compliance"),t.push("Continue professional development and training programs"),t.push("Enhance community outreach and fire prevention education"),t.push("Evaluate technology upgrades to improve operational efficiency"),t}static processStatisticsSection(e,t){return typeof e=="object"&&e.type==="compliance_table"?this.generateComplianceTable(t.complianceMetrics):JSON.stringify(e,null,2)}static generateComplianceTable(e){const t=e.nfpa1710;return`
## NFPA 1710 Compliance Analysis

| Metric | Current Performance | NFPA Standard | Compliance | Status |
|--------|-------------------|---------------|------------|--------|
| **Dispatch Time** | ${Math.round(t.dispatchCompliance)}% ≤60 sec | 90% ≤60 sec | ${this.getComplianceStatus(t.dispatchCompliance)} | ${this.getStatusEmoji(t.dispatchCompliance,90)} |
| **Turnout Time** | ${Math.round(t.turnoutCompliance)}% ≤60 sec | 90% ≤60 sec | ${this.getComplianceStatus(t.turnoutCompliance)} | ${this.getStatusEmoji(t.turnoutCompliance,90)} |
| **Travel Time** | ${Math.round(t.travelCompliance)}% ≤240 sec | 90% ≤240 sec | ${this.getComplianceStatus(t.travelCompliance)} | ${this.getStatusEmoji(t.travelCompliance,90)} |
| **Total Response** | ${Math.round(t.totalResponseCompliance)}% ≤300 sec | 90% ≤300 sec | ${this.getComplianceStatus(t.totalResponseCompliance)} | ${this.getStatusEmoji(t.totalResponseCompliance,90)} |

### Overall NFPA 1710 Compliance: ${Math.round(t.totalResponseCompliance)}%

${t.totalResponseCompliance>=90?"✅ **COMPLIANT** - Department meets NFPA 1710 standards":"⚠️ **NON-COMPLIANT** - Performance improvement needed"}
    `}static processChartSection(e,t){return typeof e=="object"?`[Chart: ${e.type}]

Chart data visualization would be generated here based on: ${e.data}`:String(e)}static processTableSection(e,t){return typeof e=="object"&&e.type==="incident_breakdown"?this.generateIncidentBreakdownTable(t.complianceMetrics.incidentVolume):JSON.stringify(e,null,2)}static generateIncidentBreakdownTable(e){const t=e.total;return`
## Incident Volume Analysis

| Incident Type | Count | Percentage | Trend |
|--------------|-------|------------|-------|
| **Fire Incidents** | ${e.fire.toLocaleString()} | ${Math.round(e.fire/t*100)}% | → |
| **EMS Incidents** | ${e.ems.toLocaleString()} | ${Math.round(e.ems/t*100)}% | → |
| **Rescue Incidents** | ${e.rescue.toLocaleString()} | ${Math.round(e.rescue/t*100)}% | → |
| **HazMat Incidents** | ${e.hazmat.toLocaleString()} | ${Math.round(e.hazmat/t*100)}% | → |
| **Other Incidents** | ${e.other.toLocaleString()} | ${Math.round(e.other/t*100)}% | → |
| **TOTAL** | **${t.toLocaleString()}** | **100%** | |

### Key Observations:
- EMS incidents represent the largest category at ${Math.round(e.ems/t*100)}% of total calls
- Fire incidents account for ${Math.round(e.fire/t*100)}% of total incident volume
- Incident diversity reflects comprehensive emergency services provided to the community
    `}static formatTime(e){const t=Math.floor(e/60),s=Math.round(e%60);return t===0?`${s} seconds`:s===0?`${t} minute${t>1?"s":""}`:`${t}:${s.toString().padStart(2,"0")}`}static getStatusIndicator(e,t){return e<=t?"✅ MEETS STANDARD":"⚠️ NEEDS IMPROVEMENT"}static getComplianceStatus(e){return e>=95?"Excellent":e>=90?"Compliant":e>=80?"Good":e>=70?"Fair":"Needs Improvement"}static getStatusEmoji(e,t){return e>=t+5?"🟢":e>=t?"🟡":"🔴"}static calculateWordCount(e){return e.reduce((t,s)=>{const i=s.processedContent.split(/\s+/).length;return t+i},0)}static calculateCompleteness(e){let t=0,s=0;return e.departmentInfo.name&&(t+=10),s+=10,e.departmentInfo.chief&&(t+=10),s+=10,e.responseTimeStats&&(t+=30),s+=30,e.complianceMetrics&&(t+=30),s+=30,e.incidentData.length>0&&(t+=20),s+=20,Math.round(t/s*100)}static assessDataQuality(e){const t=this.calculateCompleteness(e);return t>=95?"excellent":t>=85?"good":t>=70?"fair":"poor"}}const $1=({responseTimeStats:n,incidentData:e,onClose:t})=>{const[s,i]=v.useState(null),[r,o]=v.useState({name:"",chief:"",address:"",phone:"",email:"",website:"",jurisdiction:"",population:0,squareMiles:0,stations:0,apparatus:0,personnel:0}),[a,l]=v.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],description:""}),[d,u]=v.useState(0),[h,f]=v.useState(null),[m,p]=v.useState(!1),[x,g]=v.useState(!1);v.useEffect(()=>{if(a.startDate&&a.endDate){const S=new Date(a.startDate),j=new Date(a.endDate);if(S.getMonth()===j.getMonth()&&S.getFullYear()===j.getFullYear()){const R=S.toLocaleDateString("en-US",{month:"long",year:"numeric"});l(L=>({...L,description:R}))}else{const R=`${S.toLocaleDateString("en-US",{month:"short",year:"numeric"})} - ${j.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`;l(L=>({...L,description:R}))}}},[a.startDate,a.endDate]);const y=()=>{const S=e.length||1e3;return{nfpa1710:{dispatchCompliance:88,turnoutCompliance:92,travelCompliance:85,totalResponseCompliance:87,goal:90},averageResponseTime:n.mean.totalResponseTime||360,incidentVolume:{total:S,fire:Math.round(S*.15),ems:Math.round(S*.65),rescue:Math.round(S*.08),hazmat:Math.round(S*.02),other:Math.round(S*.1)},busyHours:["14:00-16:00","18:00-20:00"],topIncidentTypes:[{type:"Medical Emergency",count:Math.round(S*.45),percentage:45},{type:"Motor Vehicle Accident",count:Math.round(S*.2),percentage:20},{type:"Structure Fire",count:Math.round(S*.1),percentage:10},{type:"Alarm Activation",count:Math.round(S*.08),percentage:8},{type:"Hazmat Incident",count:Math.round(S*.02),percentage:2}]}},w=S=>{i(S),u(1)},T=async()=>{if(s){p(!0);try{const S={departmentInfo:r,reportPeriod:a,responseTimeStats:n,incidentData:e,complianceMetrics:y()},j=B1.generateReport(s,S);f(j),u(3)}catch(S){console.error("Error generating report:",S)}finally{p(!1)}}},C=async()=>{if(!(!h||!s))try{const{generateResponseTimeReport:S}=await Pr(async()=>{const{generateResponseTimeReport:V}=await Promise.resolve().then(()=>j1);return{generateResponseTimeReport:V}},void 0),j={reportType:"detailed",title:s.name,subtitle:`${r.name} - ${a.description}`,departmentName:r.name,chiefName:r.chief,chiefTitle:"Fire Chief",reportPeriod:{startDate:a.startDate,endDate:a.endDate},includeSections:{summary:!0,nfpaCompliance:!0,incidentDetails:!0,charts:!0,recommendations:!0},customText:{reportPurpose:`Professional ${s.category} report for ${r.name}`,executiveSummaryDescription:s.description}},R={incidents:e,statistics:n};console.log("🔥 GENERATING PDF REPORT:",{template:s.name,department:r.name,incidents:e.length});const L=await S(j,R),$=URL.createObjectURL(L),W=document.createElement("a");W.href=$,W.download=`${s.name.replace(/\s+/g,"_")}_${a.description.replace(/\s+/g,"_")}.pdf`,document.body.appendChild(W),W.click(),document.body.removeChild(W),URL.revokeObjectURL($),console.log("✅ PDF REPORT DOWNLOADED SUCCESSFULLY")}catch(S){console.error("❌ ERROR GENERATING PDF REPORT:",S);const j=h.sections.map(W=>`# ${W.title}

${W.processedContent}

`).join(`---

`),R=new Blob([j],{type:"text/plain"}),L=URL.createObjectURL(R),$=document.createElement("a");$.href=L,$.download=`${s.name.replace(/\s+/g,"_")}_${a.description.replace(/\s+/g,"_")}_fallback.txt`,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(L)}},P=S=>{switch(S){case"compliance":return c.jsx(Hr,{});case"performance":return c.jsx(jl,{});case"grant":return c.jsx(Ur,{});case"executive":return c.jsx(Ln,{});default:return c.jsx(Ln,{})}},I=S=>{switch(S){case"compliance":return"primary";case"performance":return"success";case"grant":return"warning";case"executive":return"info";default:return"secondary"}},O=["Select Template","Department Info","Report Period","Generate & Download"],b=()=>c.jsxs(F,{children:[c.jsx(M,{variant:"h6",gutterBottom:!0,children:"Choose Professional Report Template"}),c.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Select a report template designed for your specific audience and purpose."}),c.jsx(z,{container:!0,spacing:3,children:z1.map(S=>{var j,R;return c.jsx(z,{size:{xs:12,md:6},children:c.jsxs($t,{variant:"outlined",sx:{height:"100%",cursor:"pointer","&:hover":{elevation:4}},onClick:()=>w(S),children:[c.jsxs(Vt,{children:[c.jsxs(F,{display:"flex",alignItems:"center",gap:1,mb:2,children:[P(S.category),c.jsx(M,{variant:"h6",component:"div",children:S.name}),c.jsx(Te,{label:S.category.charAt(0).toUpperCase()+S.category.slice(1),color:I(S.category),size:"small"})]}),c.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:2},children:S.description}),c.jsxs(F,{display:"flex",gap:1,mb:2,flexWrap:"wrap",children:[c.jsx(Te,{label:`${(j=S.metadata)==null?void 0:j.estimatedPages} pages`,size:"small",variant:"outlined"}),c.jsx(Te,{label:(R=S.metadata)==null?void 0:R.professionalLevel,size:"small",variant:"outlined"}),c.jsx(Te,{label:`${S.sections.length} sections`,size:"small",variant:"outlined"})]}),c.jsxs(M,{variant:"caption",color:"text.secondary",children:[c.jsx("strong",{children:"Target Audience:"})," ",S.targetAudience.join(", ")]})]}),c.jsx(sh,{children:c.jsx(ue,{size:"small",variant:"contained",startIcon:c.jsx(Ln,{}),onClick:()=>w(S),children:"Select Template"})})]})},S.id)})})]}),k=()=>c.jsxs(F,{children:[c.jsx(M,{variant:"h6",gutterBottom:!0,children:"Department Information"}),c.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Enter your department information for professional report headers and contact details."}),c.jsxs(z,{container:!0,spacing:3,children:[c.jsx(z,{size:{xs:12,sm:6},children:c.jsx(De,{fullWidth:!0,label:"Department Name",value:r.name,onChange:S=>o(j=>({...j,name:S.target.value})),placeholder:"e.g., Houston Fire Department",required:!0})}),c.jsx(z,{size:{xs:12,sm:6},children:c.jsx(De,{fullWidth:!0,label:"Fire Chief",value:r.chief,onChange:S=>o(j=>({...j,chief:S.target.value})),placeholder:"e.g., John Smith",required:!0})}),c.jsx(z,{size:{xs:12,sm:6},children:c.jsx(De,{fullWidth:!0,label:"Jurisdiction",value:r.jurisdiction,onChange:S=>o(j=>({...j,jurisdiction:S.target.value})),placeholder:"e.g., City of Houston, TX",required:!0})}),c.jsx(z,{size:{xs:12,sm:6},children:c.jsx(De,{fullWidth:!0,label:"Population Served",type:"number",value:r.population||"",onChange:S=>o(j=>({...j,population:parseInt(S.target.value)||0})),placeholder:"e.g., 50000"})}),c.jsx(z,{size:{xs:12,sm:6},children:c.jsx(De,{fullWidth:!0,label:"Service Area (sq. miles)",type:"number",value:r.squareMiles||"",onChange:S=>o(j=>({...j,squareMiles:parseInt(S.target.value)||0})),placeholder:"e.g., 125"})}),c.jsx(z,{size:{xs:12,sm:6},children:c.jsx(De,{fullWidth:!0,label:"Number of Stations",type:"number",value:r.stations||"",onChange:S=>o(j=>({...j,stations:parseInt(S.target.value)||0})),placeholder:"e.g., 8"})}),c.jsx(z,{size:{xs:12,sm:6},children:c.jsx(De,{fullWidth:!0,label:"Apparatus Count",type:"number",value:r.apparatus||"",onChange:S=>o(j=>({...j,apparatus:parseInt(S.target.value)||0})),placeholder:"e.g., 15"})}),c.jsx(z,{size:{xs:12,sm:6},children:c.jsx(De,{fullWidth:!0,label:"Personnel Count",type:"number",value:r.personnel||"",onChange:S=>o(j=>({...j,personnel:parseInt(S.target.value)||0})),placeholder:"e.g., 120"})}),c.jsx(z,{size:{xs:12},children:c.jsx(De,{fullWidth:!0,label:"Department Address",value:r.address,onChange:S=>o(j=>({...j,address:S.target.value})),placeholder:"e.g., 123 Main Street, Houston, TX 77001"})}),c.jsx(z,{size:{xs:12,sm:6},children:c.jsx(De,{fullWidth:!0,label:"Phone Number",value:r.phone,onChange:S=>o(j=>({...j,phone:S.target.value})),placeholder:"e.g., (555) 123-4567"})}),c.jsx(z,{size:{xs:12,sm:6},children:c.jsx(De,{fullWidth:!0,label:"Email Address",type:"email",value:r.email,onChange:S=>o(j=>({...j,email:S.target.value})),placeholder:"e.g., chief@houstonfiredept.gov"})})]})]}),A=()=>c.jsxs(F,{children:[c.jsx(M,{variant:"h6",gutterBottom:!0,children:"Report Period"}),c.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Define the time period covered by this report."}),c.jsxs(z,{container:!0,spacing:3,children:[c.jsx(z,{size:{xs:12,sm:6},children:c.jsx(De,{fullWidth:!0,label:"Start Date",type:"date",value:a.startDate,onChange:S=>l(j=>({...j,startDate:S.target.value})),InputLabelProps:{shrink:!0},required:!0})}),c.jsx(z,{size:{xs:12,sm:6},children:c.jsx(De,{fullWidth:!0,label:"End Date",type:"date",value:a.endDate,onChange:S=>l(j=>({...j,endDate:S.target.value})),InputLabelProps:{shrink:!0},required:!0})}),c.jsx(z,{size:{xs:12},children:c.jsx(De,{fullWidth:!0,label:"Report Period Description",value:a.description,onChange:S=>l(j=>({...j,description:S.target.value})),placeholder:"e.g., January 2025, Q4 2024, 2024 Annual Report",helperText:"This will appear in report headers and titles"})})]}),c.jsx(pt,{severity:"info",sx:{mt:2},children:c.jsxs(M,{variant:"body2",children:[c.jsx("strong",{children:"Note:"})," The report period description is automatically generated based on your selected dates, but you can customize it for specific reporting needs."]})})]}),E=()=>{var S,j,R,L,$;return c.jsxs(F,{children:[c.jsx(M,{variant:"h6",gutterBottom:!0,children:"Generate Professional Report"}),h?c.jsxs(F,{children:[c.jsx(pt,{severity:"success",sx:{mb:3},children:c.jsxs(M,{variant:"body2",children:[c.jsx("strong",{children:"Report Generated Successfully!"})," Your professional report is ready for download."]})}),c.jsx($t,{variant:"outlined",sx:{mb:3},children:c.jsxs(Vt,{children:[c.jsx(M,{variant:"subtitle1",gutterBottom:!0,children:c.jsx("strong",{children:"Report Summary"})}),c.jsxs(z,{container:!0,spacing:2,children:[c.jsx(z,{size:{xs:12,sm:6},children:c.jsxs(M,{variant:"body2",children:[c.jsx("strong",{children:"Pages:"})," ",(S=h.metadata)==null?void 0:S.totalPages]})}),c.jsx(z,{size:{xs:12,sm:6},children:c.jsxs(M,{variant:"body2",children:[c.jsx("strong",{children:"Word Count:"})," ",(R=(j=h.metadata)==null?void 0:j.wordCount)==null?void 0:R.toLocaleString()]})}),c.jsx(z,{size:{xs:12,sm:6},children:c.jsxs(M,{variant:"body2",children:[c.jsx("strong",{children:"Data Quality:"})," ",(L=h.metadata)==null?void 0:L.dataQuality]})}),c.jsx(z,{size:{xs:12,sm:6},children:c.jsxs(M,{variant:"body2",children:[c.jsx("strong",{children:"Completeness:"})," ",($=h.metadata)==null?void 0:$.completeness,"%"]})})]})]})}),c.jsxs($l,{expanded:x,onChange:()=>g(!x),children:[c.jsx(Vl,{expandIcon:c.jsx(Wr,{}),children:c.jsxs(M,{variant:"subtitle1",children:[c.jsx(nh,{sx:{mr:1,verticalAlign:"middle"}}),"Report Preview"]})}),c.jsx(Wl,{children:c.jsx(F,{sx:{maxHeight:400,overflow:"auto",bgcolor:"grey.50",p:2,borderRadius:1},children:h.sections.map((W,V)=>c.jsxs(F,{sx:{mb:3},children:[c.jsx(M,{variant:"h6",gutterBottom:!0,children:W.title}),c.jsxs(M,{variant:"body2",component:"div",sx:{whiteSpace:"pre-line",fontFamily:"monospace",fontSize:"0.8rem"},children:[W.processedContent.substring(0,500),W.processedContent.length>500&&"..."]}),V<h.sections.length-1&&c.jsx(It,{sx:{mt:2}})]},W.id))})})]}),c.jsxs(F,{display:"flex",gap:2,mt:3,children:[c.jsx(ue,{variant:"contained",size:"large",startIcon:c.jsx(Gr,{}),onClick:C,children:"Download Report"}),c.jsx(ue,{variant:"outlined",onClick:()=>{f(null),u(0),i(null)},children:"Generate Another Report"})]})]}):c.jsxs(F,{children:[c.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Ready to generate your professional report. Review the settings below and click generate."}),c.jsx($t,{variant:"outlined",sx:{mb:3},children:c.jsxs(Vt,{children:[c.jsx(M,{variant:"subtitle1",gutterBottom:!0,children:c.jsx("strong",{children:"Report Configuration"})}),c.jsxs(z,{container:!0,spacing:2,children:[c.jsx(z,{size:{xs:12,sm:6},children:c.jsxs(M,{variant:"body2",children:[c.jsx("strong",{children:"Template:"})," ",s==null?void 0:s.name]})}),c.jsx(z,{size:{xs:12,sm:6},children:c.jsxs(M,{variant:"body2",children:[c.jsx("strong",{children:"Department:"})," ",r.name]})}),c.jsx(z,{size:{xs:12,sm:6},children:c.jsxs(M,{variant:"body2",children:[c.jsx("strong",{children:"Period:"})," ",a.description]})}),c.jsx(z,{size:{xs:12,sm:6},children:c.jsxs(M,{variant:"body2",children:[c.jsx("strong",{children:"Data Points:"})," ",e.length.toLocaleString()," incidents"]})})]})]})}),c.jsxs(F,{display:"flex",gap:2,children:[c.jsx(ue,{variant:"contained",size:"large",startIcon:c.jsx(Ln,{}),onClick:T,disabled:m,children:m?"Generating...":"Generate Report"}),m&&c.jsx(th,{sx:{flexGrow:1,mt:1}})]})]})]})},D=()=>{switch(d){case 0:return b();case 1:return k();case 2:return A();case 3:return E();default:return null}};return c.jsxs(Ai,{open:!0,onClose:t,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{minHeight:"80vh"}},children:[c.jsx(Yr,{children:c.jsxs(F,{display:"flex",alignItems:"center",gap:1,children:[c.jsx(Ln,{}),c.jsx(M,{variant:"h5",children:"Professional Report Generator"})]})}),c.jsxs(Ei,{children:[c.jsx(F,{sx:{mb:4},children:c.jsx(Ul,{activeStep:d,alternativeLabel:!0,children:O.map(S=>c.jsx(Gl,{children:c.jsx(ql,{children:S})},S))})}),D()]}),c.jsxs(Oi,{children:[d>0&&d<3&&c.jsx(ue,{onClick:()=>u(d-1),children:"Back"}),d===1&&c.jsx(ue,{variant:"contained",onClick:()=>u(2),disabled:!r.name||!r.chief,children:"Next"}),d===2&&c.jsx(ue,{variant:"contained",onClick:()=>u(3),disabled:!a.startDate||!a.endDate,children:"Next"}),c.jsx(ue,{onClick:t,children:"Close"})]})]})},K1=({initialData:n})=>{const e=Zt(),{rawData:t,ui:s,calculatedMetrics:i}=Se(w=>w.analyzer),[r,o]=v.useState("none");v.useEffect(()=>{document.title="FireEMS Response Time Analyzer"},[]),v.useEffect(()=>{if(n&&n.length>0){console.log("🔍 INITIAL DATA DEBUG - Data received from formatter:"),console.log("Number of records:",n.length),console.log("First record field names:",Object.keys(n[0])),console.log("First record sample:",n[0]),console.log("First record incidentTime:",n[0].incidentTime),console.log("First record Call Receive Time:",n[0]["Call Receive Time"]),console.log("🔍 END INITIAL DATA DEBUG"),l(n,"formatter");return}const w=sessionStorage.getItem("fireEmsExportedData");if(w)try{const T=JSON.parse(w);if(console.log("Session data found:",T),T.data&&Array.isArray(T.data)&&T.data.length>0){console.log("ANALYZER DEBUG - Raw session data:",w),console.log("ANALYZER DEBUG - Parsed session data:",T),console.log("Sample record from session:",T.data[0]),console.log("ANALYZER DATA CHECK - All field names in first record:"),console.log(Object.keys(T.data[0]));const C=T.data[0],P=C.hasOwnProperty("incidentId")&&C.hasOwnProperty("incidentDate"),I=C.hasOwnProperty("Incident ID")&&C.hasOwnProperty("Incident Date");console.log("🔍 DATA FORMAT DETECTION:"),console.log("🔍 Has normalized fields (incidentId, incidentDate):",P),console.log("🔍 Has original fields (Incident ID, Incident Date):",I),console.log("🔍 Sample incidentTime value:",C.incidentTime),console.log("🔍 Sample incidentTime type:",typeof C.incidentTime),console.log('🔍 Sample "Call Received Date/Time" value:',C["Call Received Date/Time"]),console.log('🔍 Sample "Call Received Time" value (legacy):',C["Call Received Time"]),console.log("🔍 CHATGPT DEBUG - Full first record before processing:",JSON.stringify(C,null,2));let O;P&&!I?(console.log("✅ USING PRE-NORMALIZED DATA FROM DATATRANSFORMER - SKIPPING FIELD NORMALIZATION"),O=T.data):(console.log("🔧 APPLYING FIELD NORMALIZATION FOR RAW DATA"),O=a(T.data)),l(O,"session");return}else console.error("Invalid data structure in session storage",T)}catch(T){console.error("Error parsing session data",T)}else console.log("No data found in session storage")},[n]);const a=w=>(console.log("📝 NORMALIZE FIELD NAMES - Function called with",w.length,"records"),w.map((T,C)=>{const P={},I={"Incident ID":"incidentId","Incident Date":"incidentDate","Call Received Date/Time":"incidentTime","Call Receive Time":"incidentTime","Call Received Time":"incidentTime","Incident Time":"incidentTime","Dispatch Time":"dispatchTime","En Route Time":"enRouteTime","Arrival Time":"arrivalTime","Clear Time":"clearTime","Incident Type":"incidentType",Latitude:"latitude",Longitude:"longitude",Address:"address","call receive time":"incidentTime","incident time":"incidentTime","dispatch time":"dispatchTime","turnout, time":"enRouteTime","travel time":"travelTime","total response, time":"totalResponseTime","incident type":"incidentType",type:"incidentType",location:"location",Location:"location",unit:"unit",Unit:"unit","turnout time":"enRouteTime","response time":"totalResponseTime","total response time":"totalResponseTime","en route time":"enRouteTime","enroute time":"enRouteTime","arrival time":"arrivalTime","clear time":"clearTime","incident id":"incidentId","incident date":"incidentDate",date:"incidentDate",time:"incidentTime"},O=["incidentTime","incidentId","incidentDate"];O.forEach(k=>{const A=Object.entries(I).filter(([E,D])=>D===k).map(([E,D])=>E);for(const E of A)if(T[E]!==void 0&&T[E]!==null&&T[E]!==""){P[k]=T[E],console.log(`PRIORITY_FIELD_MAPPING: "${E}" -> "${k}" = "${T[E]}"`);break}!P[k]&&T[k]!==void 0&&T[k]!==null&&T[k]!==""&&(P[k]=T[k],console.log(`PRIORITY_FIELD_MAPPING: "${k}" (already camelCase) = "${T[k]}"`))}),Object.entries(I).forEach(([k,A])=>{O.includes(A)&&P[A]!==void 0||(T[k]!==void 0&&T[k]!==null&&T[k]!==""?(P[A]=T[k],console.log(`FIELD_MAPPING: "${k}" -> "${A}" = "${T[k]}"`)):T[A]!==void 0&&T[A]!==null&&T[A]!==""&&(P[A]=T[A],console.log(`FIELD_MAPPING: "${A}" (already camelCase) = "${T[A]}"`)))}),Object.entries(T).forEach(([k,A])=>{if(!(Object.values(I).includes(k)||Object.keys(I).includes(k)))if(k.includes(" ")){const E=k.toLowerCase().split(" ").map((D,S)=>S===0?D:D.charAt(0).toUpperCase()+D.slice(1)).join("");P[E]=A}else P[k]=A}),console.log("=== FIELD MAPPING DEBUG FOR RECORD",C,"==="),console.log("ORIGINAL_FIELD_NAMES:",Object.keys(T)),console.log("ORIGINAL_RECORD_SAMPLE:",T),console.log("NORMALIZED_FIELD_NAMES:",Object.keys(P)),console.log("NORMALIZED_RECORD_SAMPLE:",P),console.log("=== END FIELD MAPPING DEBUG ==="),console.log("=== INCIDENT TIME DEBUG ==="),console.log('Original "Call Receive Time":',T["Call Receive Time"]),console.log('Original "call receive time":',T["call receive time"]),console.log('Original "Incident Time":',T["Incident Time"]),console.log('Original "incident time":',T["incident time"]),console.log("Normalized incidentTime:",P.incidentTime),console.log("=== END INCIDENT TIME DEBUG ===");const b=Object.keys(T).filter(k=>k.toLowerCase().includes("location")||k.toLowerCase().includes("lat")||k.toLowerCase().includes("lon")||k.toLowerCase().includes("coordinate"));if(console.log("LOCATION_RELATED_FIELDS_FOUND:",b),P.location&&typeof P.location=="string"){const k=P.location.split(",");if(k.length===2){const A=parseFloat(k[0].trim()),E=parseFloat(k[1].trim());!isNaN(A)&&!isNaN(E)?(P.latitude=A,P.longitude=E,console.log(`Parsed location "${P.location}" -> lat: ${A}, lng: ${E}`)):console.warn(`Could not parse location: ${P.location}`)}}return P})),l=(w,T)=>{e(ih());try{console.log("🔄 LOAD DATA - Starting field normalization"),console.log("Raw data before normalization (first record):",w[0]),console.log("Raw data field names:",Object.keys(w[0]));const C=a(w);C.length>0&&(console.log("🔄 LOAD DATA - After normalization (first record):",C[0]),console.log("🔄 LOAD DATA - Normalized field names:",Object.keys(C[0])),console.log("🔄 LOAD DATA - incidentTime value:",C[0].incidentTime)),e(rh(C));const P=Ah(C);e(oh(P)),o(T)}catch(C){const P=C instanceof Error?C.message:"Unknown error loading data";e(ah(P))}},d=(w,T)=>{e(ch(T))},[u,h]=v.useState(!1),[f,m]=v.useState(!1),[p,x]=v.useState(!1),[g,y]=v.useState(!1);return t.isLoading?c.jsxs(F,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:[c.jsx(rn,{size:60}),c.jsx(M,{variant:"h6",sx:{ml:2},children:"Loading incident data..."})]}):t.error?c.jsxs(F,{sx:{p:3},children:[c.jsxs(pt,{severity:"error",sx:{mb:2},children:["Error loading data: ",t.error]}),c.jsx(ue,{variant:"contained",color:"primary",onClick:()=>window.location.reload(),children:"Reload Page"})]}):t.incidents.length?c.jsxs(F,{sx:{p:3},children:[c.jsxs(ze,{sx:{p:3,mb:3},children:[c.jsx(M,{variant:"h5",gutterBottom:!0,children:"Response Time Analyzer"}),c.jsxs(F,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[c.jsxs(M,{variant:"subtitle1",children:["Analyzing ",t.incidents.length," incidents",r==="formatter"&&" (from Data Formatter)",r==="session"&&" (from previous session)"]}),c.jsxs(F,{children:[c.jsx(ue,{variant:"outlined",color:"secondary",sx:{mr:1},onClick:()=>{h(!u),u||m(!1)},children:u?"Hide Filters":"Show Filters"}),c.jsx(ue,{variant:"outlined",color:"secondary",sx:{mr:1},onClick:()=>{m(!f),f||h(!1)},children:f?"Hide Export":"Export Results"}),c.jsx(ue,{variant:"contained",color:"primary",onClick:()=>x(!0),disabled:!t.incidents||t.incidents.length===0,children:"Generate PDF Report"}),c.jsx(ue,{variant:"contained",color:"secondary",onClick:()=>y(!0),disabled:!t.incidents||t.incidents.length===0,sx:{ml:1},children:"Professional Reports"}),c.jsx(ue,{variant:"outlined",color:"primary",sx:{ml:1},children:"Load New Data"})]})]}),c.jsx(pt,{severity:"success",sx:{mb:3},children:"Data loaded successfully. Use the tabs below to explore different views."})]}),u&&c.jsx(ze,{sx:{p:2,mb:3},children:c.jsx(Gb,{})}),f&&c.jsx(ze,{sx:{p:2,mb:3},children:c.jsx(A1,{})}),c.jsx(F,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:c.jsxs(lh,{value:s.selectedView,onChange:d,"aria-label":"analyzer view tabs",children:[c.jsx(ts,{label:"Dashboard",value:"dashboard"}),c.jsx(ts,{label:"Timeline",value:"timeline"}),c.jsx(ts,{label:"Map",value:"map"}),c.jsx(ts,{label:"Incidents",value:"table"}),c.jsx(ts,{label:"Statistics",value:"statistics"})]})}),c.jsxs(F,{children:[s.selectedView==="dashboard"&&c.jsx(Gh,{}),s.selectedView==="timeline"&&c.jsxs(F,{children:[c.jsx(Xh,{}),c.jsx(ec,{})]}),s.selectedView==="map"&&c.jsx(tc,{}),s.selectedView==="table"&&c.jsx(nc,{}),s.selectedView==="statistics"&&c.jsx(Jl,{})]}),c.jsx(fu,{open:p,onClose:()=>x(!1),incidents:t.incidents||[],statistics:i.responseTimeStats||{mean:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},median:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},ninetiethPercentile:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},standardDeviation:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},min:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},max:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},count:0},dateRange:{start:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}}),g&&c.jsx($1,{responseTimeStats:i.responseTimeStats||{mean:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},median:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},ninetiethPercentile:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},standardDeviation:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},min:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},max:{dispatchTime:null,turnoutTime:null,travelTime:null,totalResponseTime:null,sceneTime:null,totalIncidentTime:null},count:0},incidentData:t.incidents||[],onClose:()=>y(!1)})]}):c.jsx(F,{sx:{p:3},children:c.jsxs(ze,{sx:{p:3},children:[c.jsx(M,{variant:"h5",gutterBottom:!0,children:"Response Time Analyzer"}),c.jsx(pt,{severity:"info",sx:{mb:3},children:"No incident data loaded. Please use the Data Formatter to send incident data to this tool."}),c.jsx(M,{variant:"body1",paragraph:!0,children:"The Response Time Analyzer calculates and visualizes response time metrics for fire and EMS incidents. You can send data to this tool from the Data Formatter's export screen."}),c.jsx(ue,{variant:"contained",color:"primary",onClick:()=>window.location.href="/data-formatter",children:"Go to Data Formatter"})]})})};export{K1 as default};
