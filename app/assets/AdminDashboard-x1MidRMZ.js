import{g as Je,a as Ye,r as x,u as Qe,j as e,s as Ke,c as Xe,b as Ze,B as t,C as ee,R as es,bn as ss,y as Se}from"./index-DFchxrk6.js";import{A as X,a as ae,M as We,T as K,F as oe,I as le,S as ce}from"./TextField-CNQ29mlJ.js";import{c as $,T as s,P as J}from"./Typography-BNmowV0V.js";import{T as De,E as ts,A as rs}from"./Edit-Zaq7onqP.js";import{R as Ae,T as ns}from"./TrendingUp-CmbB3eIZ.js";import{C as F,a as U}from"./CardContent-tdgfhas8.js";import{S as qe}from"./Settings-UzxL11qK.js";import{j as as,B as w,L as Pe}from"./List-C8QeWd9o.js";import{A as is}from"./Assessment-mResWv7t.js";import{G as j,C as L}from"./listItemTextClasses-HHiWuHTd.js";import{C as V}from"./CheckCircle-B1ICg0nJ.js";import{B as Y}from"./Business-C3krs4RM.js";import{T as os}from"./Timeline-C2RTTamB.js";import{L as Ce}from"./LinearProgress-C0FJLjO7.js";import{S as ls,a as cs}from"./Speed-D2b_-8Z1.js";import{A as Be}from"./Avatar-BzD5P2-N.js";import{e as je,T as fe,a as ge,b as G,c as m,d as ye}from"./TableRow-bKafxW7a.js";import{W as ds}from"./Warning-BELbsdoC.js";import{M as Oe,D as xs}from"./MoreVert-DUTl_vLy.js";import{M as T}from"./MenuItem-zSQDzR9r.js";import{a as Ee,b as ne,L as ve,c as hs}from"./ListItemText-JgovggnO.js";import{D as $e}from"./Delete-vuQM1V4H.js";import{D as de,a as xe,b as he,F as be,c as me}from"./FormControlLabel-C08SqP2L.js";import{S as ie,a as Me}from"./Save-LmbR8qFm.js";import{S as He}from"./Security-BJA5YUQM.js";import{D as Ie}from"./Divider-Bd1HvlcH.js";import{T as Ve,a as Q}from"./Tabs-PX1UZ3vm.js";import{C as Te}from"./Cancel-DZpL1Utf.js";import{E as Z}from"./Error-DIYDWWdG.js";import{B as ms}from"./Badge-DzJl6czE.js";import{L as Fe,A as us}from"./Launch-Y2yBKoy4.js";import{I as ps}from"./Info-DcIwiR5D.js";import{D as pe}from"./Description-BtkiEH12.js";import"./Popper-CVQKYmZe.js";function js(d){return Je("MuiListItemAvatar",d)}Ye("MuiListItemAvatar",["root","alignItemsFlexStart"]);const fs=d=>{const{alignItems:l,classes:n}=d;return Ze({root:["root",l==="flex-start"&&"alignItemsFlexStart"]},js,n)},gs=Ke("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(d,l)=>{const{ownerState:n}=d;return[l.root,n.alignItems==="flex-start"&&l.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),ys=x.forwardRef(function(l,n){const D=Qe({props:l,name:"MuiListItemAvatar"}),{className:h,...S}=D,z=x.useContext(as),v={...D,alignItems:z.alignItems},C=fs(v);return e.jsx(gs,{className:Xe(C.root,h),ownerState:v,ref:n,...S})}),vs=$(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-5h2zm4 0h-2v-3h2zm0-5h-2v-2h2zm4 5h-2V7h2z"})),bs=$(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12m8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8"})),_s=$(e.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96"})),ws=$(e.jsx("path",{d:"M12 7V3H2v18h14v-2h-4v-2h2v-2h-2v-2h2v-2h-2V9h8v6h2V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm14 12v2h-2v2h-2v-2h-2v-2h2v-2h2v2zm-6-8h-2v2h2zm0 4h-2v2h2z"})),Ss=$(e.jsx("path",{fillRule:"evenodd",d:"m9 17 3-2.94c-.39-.04-.68-.06-1-.06-2.67 0-8 1.34-8 4v2h9zm2-5c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m4.47 8.5L12 17l1.4-1.41 2.07 2.08 5.13-5.17 1.4 1.41z"})),Ue=$(e.jsx("path",{d:"M12 19c0-3.87 3.13-7 7-7 1.08 0 2.09.25 3 .68V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h8.08c-.05-.33-.08-.66-.08-1M4 6l8 5 8-5v2l-8 5-8-5zm13.34 16-3.54-3.54 1.41-1.41 2.12 2.12 4.24-4.24L23 16.34z"})),Ge=$(e.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"})),Cs=$(e.jsx("path",{d:"M7.58 4.08 6.15 2.65C3.75 4.48 2.17 7.3 2.03 10.5h2c.15-2.65 1.51-4.97 3.55-6.42m12.39 6.42h2c-.15-3.2-1.73-6.02-4.12-7.85l-1.42 1.43c2.02 1.45 3.39 3.77 3.54 6.42M18 11c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-6 11c.14 0 .27-.01.4-.04.65-.14 1.18-.58 1.44-1.18q.15-.36.15-.78h-4c.01 1.1.9 2 2.01 2"})),ze=$(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"})),Re=$(e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),re=$(e.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),Ne=$(e.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5z"})),Ds=$(e.jsx("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"})),zs=({userRole:d,onTabChange:l})=>{const[n,D]=x.useState(null),[h,S]=x.useState(null),[z,v]=x.useState(!0),[C,M]=x.useState(!1),[o,b]=x.useState(null),[_,f]=x.useState(!1);x.useEffect(()=>{I(),d==="super_admin"&&A()},[d]);const I=async()=>{try{v(!0);const r=await fetch("/admin/api/analytics/overview",{credentials:"include"});if(!r.ok)throw new Error("Failed to fetch analytics");const u=await r.json();if(u.success)D(u.analytics);else throw new Error(u.error||"Failed to load analytics")}catch(r){console.error("Error fetching analytics:",r),b(r instanceof Error?r.message:"Failed to load analytics")}finally{v(!1)}},A=async()=>{try{M(!0),await new Promise(u=>setTimeout(u,1e3));const r={...n,system_health:{status:"healthy",uptime_percentage:99.8,last_backup:new Date(Date.now()-864e5).toISOString(),performance_score:92},user_growth:{weekly_growth:12,monthly_growth:45,retention_rate:87},tool_usage:{most_used_tool:"Response Time Analyzer",total_sessions:1247,avg_session_duration:18.5},recent_activity:[{id:1,type:"user_created",description:"New user registered: john.doe@firestation.com",timestamp:new Date(Date.now()-36e5).toISOString(),user_email:"john.doe@firestation.com"},{id:2,type:"approval_processed",description:"Department approval: Metro Fire Department",timestamp:new Date(Date.now()-72e5).toISOString()},{id:3,type:"user_login",description:"Admin login: chief@rural-fire.org",timestamp:new Date(Date.now()-108e5).toISOString(),user_email:"chief@rural-fire.org"}],pending_items:{pending_approvals:3,pending_department_requests:2,pending_user_requests:5},top_departments:[{id:1,name:"Houston Fire Department",user_count:45,last_activity:new Date(Date.now()-18e5).toISOString(),status:"active"},{id:2,name:"Metro Fire & EMS",user_count:32,last_activity:new Date(Date.now()-36e5).toISOString(),status:"active"},{id:3,name:"Rural Fire District 7",user_count:18,last_activity:new Date(Date.now()-864e5).toISOString(),status:"active"}]};S(r)}catch(r){console.error("Error fetching extended analytics:",r)}finally{M(!1)}},R=async()=>{f(!0),await Promise.all([I(),d==="super_admin"?A():Promise.resolve()]),f(!1)},W=r=>{const u=new Date,a=new Date(r),p=Math.floor((u.getTime()-a.getTime())/1e3);return p<60?"Just now":p<3600?`${Math.floor(p/60)}m ago`:p<86400?`${Math.floor(p/3600)}h ago`:`${Math.floor(p/86400)}d ago`};if(z)return e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:e.jsx(ee,{})});if(o)return e.jsx(X,{severity:"error",sx:{mb:3},children:o});if(!n)return null;const N=n.total_users>0?Math.round(n.active_users/n.total_users*100):0,q=n.total_departments>0?Math.round(n.active_departments/n.total_departments*100):0;return e.jsxs(t,{children:[e.jsxs(t,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(t,{children:[e.jsx(s,{variant:"h5",gutterBottom:!0,children:d==="super_admin"?"Master Admin Dashboard":"Admin Overview"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:d==="super_admin"?"System-wide analytics and management":"Department analytics"})]}),e.jsx(De,{title:"Refresh Data",children:e.jsx(ae,{onClick:R,disabled:_,children:e.jsx(Ae,{sx:{color:_?"action.disabled":"primary.main"}})})})]}),d==="super_admin"&&e.jsx(F,{sx:{mb:3,bgcolor:"primary.50"},children:e.jsxs(U,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(qe,{color:"primary"}),"Quick Actions"]}),e.jsxs(t,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(w,{variant:"contained",startIcon:e.jsx(re,{}),size:"small",onClick:()=>{console.log("ðŸ”¥ Add User button clicked - navigating to User Management tab"),l==null||l(1)},children:"Add User"}),e.jsx(w,{variant:"contained",startIcon:e.jsx(ws,{}),size:"small",onClick:()=>{console.log("ðŸ”¥ Add Department button clicked - navigating to Department Settings tab"),l==null||l(2)},children:"Add Department"}),e.jsxs(w,{variant:"outlined",startIcon:e.jsx(Ge,{}),size:"small",color:"warning",onClick:()=>{console.log("ðŸ”¥ Pending Approvals button clicked - navigating to Pending Approvals tab"),l==null||l(4)},children:["Pending Approvals (",(h==null?void 0:h.pending_items.pending_approvals)||0,")"]}),e.jsx(w,{variant:"outlined",startIcon:e.jsx(is,{}),size:"small",onClick:()=>{console.log("ðŸ”¥ Detailed Reports button clicked - navigating to Notifications tab"),l==null||l(3)},children:"Detailed Reports"})]})]})}),e.jsxs(j,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(j,{size:{xs:12,sm:6,md:3},children:e.jsx(F,{children:e.jsx(U,{children:e.jsxs(t,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(t,{children:[e.jsx(s,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Total Users"}),e.jsx(s,{variant:"h4",children:n.total_users}),d==="super_admin"&&h&&e.jsxs(s,{variant:"body2",color:"success.main",children:["+",h.user_growth.monthly_growth," this month"]})]}),e.jsx(ze,{sx:{fontSize:40,color:"primary.main",opacity:.7}})]})})})}),e.jsx(j,{size:{xs:12,sm:6,md:3},children:e.jsx(F,{children:e.jsx(U,{children:e.jsxs(t,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(t,{children:[e.jsx(s,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Active Users"}),e.jsx(s,{variant:"h4",color:"success.main",children:n.active_users}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:[N,"% active"]})]}),e.jsx(V,{sx:{fontSize:40,color:"success.main",opacity:.7}})]})})})}),e.jsx(j,{size:{xs:12,sm:6,md:3},children:e.jsx(F,{children:e.jsx(U,{children:e.jsxs(t,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(t,{children:[e.jsx(s,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:d==="super_admin"?"Total Departments":"Your Department"}),e.jsx(s,{variant:"h4",children:n.total_departments}),n.active_departments<n.total_departments&&e.jsxs(s,{variant:"body2",color:"warning.main",children:[n.total_departments-n.active_departments," inactive"]})]}),e.jsx(Y,{sx:{fontSize:40,color:"info.main",opacity:.7}})]})})})}),e.jsx(j,{size:{xs:12,sm:6,md:3},children:e.jsx(F,{children:e.jsx(U,{children:e.jsxs(t,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(t,{children:[e.jsx(s,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:d==="super_admin"?"System Health":"New This Month"}),d==="super_admin"&&h?e.jsxs(e.Fragment,{children:[e.jsxs(s,{variant:"h4",color:h.system_health.status==="healthy"?"success.main":h.system_health.status==="warning"?"warning.main":"error.main",children:[h.system_health.performance_score,"%"]}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:[h.system_health.uptime_percentage,"% uptime"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(s,{variant:"h4",color:"secondary.main",children:n.recent_users_this_month}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"new users"})]})]}),d==="super_admin"?e.jsx(Ne,{sx:{fontSize:40,color:"success.main",opacity:.7}}):e.jsx(ns,{sx:{fontSize:40,color:"secondary.main",opacity:.7}})]})})})})]}),d==="super_admin"&&h&&e.jsxs(j,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(j,{size:{xs:12,md:4},children:e.jsx(F,{children:e.jsxs(U,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(vs,{color:"primary"}),"Tool Usage"]}),e.jsxs(t,{sx:{mb:2},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Most Used Tool"}),e.jsx(s,{variant:"h6",color:"primary.main",children:h.tool_usage.most_used_tool})]}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Total Sessions"}),e.jsx(s,{variant:"body2",fontWeight:"bold",children:h.tool_usage.total_sessions.toLocaleString()})]}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Avg Duration"}),e.jsxs(s,{variant:"body2",fontWeight:"bold",children:[h.tool_usage.avg_session_duration," min"]})]})]})})}),e.jsx(j,{size:{xs:12,md:4},children:e.jsx(F,{children:e.jsxs(U,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(os,{color:"primary"}),"User Growth"]}),e.jsxs(t,{sx:{mb:2},children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Weekly Growth"}),e.jsxs(s,{variant:"body2",fontWeight:"bold",color:"success.main",children:["+",h.user_growth.weekly_growth]})]}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Monthly Growth"}),e.jsxs(s,{variant:"body2",fontWeight:"bold",color:"success.main",children:["+",h.user_growth.monthly_growth]})]}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Retention Rate"}),e.jsxs(s,{variant:"body2",fontWeight:"bold",children:[h.user_growth.retention_rate,"%"]})]})]}),e.jsx(Ce,{variant:"determinate",value:h.user_growth.retention_rate,sx:{height:8,borderRadius:4},color:h.user_growth.retention_rate>80?"success":"warning"})]})})}),e.jsx(j,{size:{xs:12,md:4},children:e.jsx(F,{children:e.jsxs(U,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ls,{color:"primary"}),"System Performance"]}),e.jsxs(t,{sx:{mb:2},children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Uptime"}),e.jsxs(s,{variant:"body2",fontWeight:"bold",color:"success.main",children:[h.system_health.uptime_percentage,"%"]})]}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Performance Score"}),e.jsxs(s,{variant:"body2",fontWeight:"bold",children:[h.system_health.performance_score,"%"]})]}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Last Backup"}),e.jsx(s,{variant:"body2",fontWeight:"bold",children:W(h.system_health.last_backup)})]})]}),e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(V,{color:"success",fontSize:"small"}),e.jsx(s,{variant:"body2",color:"success.main",children:"System Operating Normally"})]})]})})})]}),e.jsxs(j,{container:!0,spacing:3,children:[e.jsx(j,{size:{xs:12,md:d==="super_admin"?6:12},children:e.jsx(F,{children:e.jsxs(U,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"User Activity"}),e.jsxs(t,{sx:{mb:2},children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:1},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Active Users"}),e.jsxs(s,{variant:"body2",fontWeight:"bold",children:[n.active_users," / ",n.total_users]})]}),e.jsx(Ce,{variant:"determinate",value:N,sx:{height:8,borderRadius:4},color:N>80?"success":N>60?"warning":"error"}),e.jsxs(s,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[N,"% of users are active"]})]}),e.jsxs(t,{display:"flex",gap:1,flexWrap:"wrap",children:[e.jsx(L,{size:"small",label:`${n.active_users} Active`,color:"success",variant:"outlined"}),n.total_users-n.active_users>0&&e.jsx(L,{size:"small",label:`${n.total_users-n.active_users} Inactive`,color:"default",variant:"outlined"}),n.recent_users_this_month>0&&e.jsx(L,{size:"small",label:`${n.recent_users_this_month} New This Month`,color:"primary",variant:"outlined"})]})]})})}),d==="super_admin"&&h&&e.jsx(j,{size:{xs:12,md:6},children:e.jsx(F,{children:e.jsxs(U,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(cs,{color:"primary"}),"Recent Activity"]}),e.jsx(t,{sx:{maxHeight:200,overflow:"auto"},children:h.recent_activity.map(r=>e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(Be,{sx:{width:32,height:32,bgcolor:r.type==="user_created"?"success.main":r.type==="approval_processed"?"warning.main":"info.main",fontSize:"0.75rem"},children:r.type==="user_created"?e.jsx(re,{fontSize:"small"}):r.type==="approval_processed"?e.jsx(V,{fontSize:"small"}):e.jsx(ze,{fontSize:"small"})}),e.jsxs(t,{sx:{flexGrow:1,minWidth:0},children:[e.jsx(s,{variant:"body2",noWrap:!0,children:r.description}),e.jsx(s,{variant:"caption",color:"text.secondary",children:W(r.timestamp)})]})]},r.id))})]})})}),d!=="super_admin"&&e.jsx(j,{size:{xs:12,md:6},children:e.jsx(F,{children:e.jsxs(U,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Department Status"}),e.jsxs(t,{sx:{mb:2},children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:1},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Active Departments"}),e.jsxs(s,{variant:"body2",fontWeight:"bold",children:[n.active_departments," / ",n.total_departments]})]}),e.jsx(Ce,{variant:"determinate",value:q,sx:{height:8,borderRadius:4},color:q>80?"success":q>60?"warning":"error"}),e.jsxs(s,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[q,"% of departments are active"]})]}),e.jsxs(t,{display:"flex",gap:1,flexWrap:"wrap",children:[e.jsx(L,{size:"small",label:`${n.active_departments} Active`,color:"success",variant:"outlined"}),n.total_departments-n.active_departments>0&&e.jsx(L,{size:"small",label:`${n.total_departments-n.active_departments} Inactive`,color:"warning",variant:"outlined"})]})]})})})]}),d==="super_admin"&&h&&e.jsx(F,{sx:{mt:3},children:e.jsxs(U,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Y,{color:"primary"}),"Top Departments"]}),e.jsx(je,{children:e.jsxs(fe,{size:"small",children:[e.jsx(ge,{children:e.jsxs(G,{children:[e.jsx(m,{children:"Department Name"}),e.jsx(m,{align:"right",children:"Users"}),e.jsx(m,{align:"right",children:"Last Activity"}),e.jsx(m,{align:"center",children:"Status"})]})}),e.jsx(ye,{children:h.top_departments.map(r=>e.jsxs(G,{children:[e.jsx(m,{component:"th",scope:"row",children:r.name}),e.jsx(m,{align:"right",children:r.user_count}),e.jsx(m,{align:"right",children:W(r.last_activity)}),e.jsx(m,{align:"center",children:e.jsx(L,{size:"small",label:r.status,color:r.status==="active"?"success":"default",variant:"outlined"})})]},r.id))})]})})]})}),e.jsx(F,{sx:{mt:3},children:e.jsxs(U,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_s,{color:"primary"}),"System Health"]}),e.jsxs(j,{container:!0,spacing:2,children:[e.jsx(j,{size:{xs:12,sm:4},children:e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(V,{color:"success"}),e.jsx(s,{variant:"body2",children:"User Management: Operational"})]})}),e.jsx(j,{size:{xs:12,sm:4},children:e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(V,{color:"success"}),e.jsx(s,{variant:"body2",children:"Department Management: Operational"})]})}),e.jsx(j,{size:{xs:12,sm:4},children:e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[n.recent_users_this_month>0?e.jsx(V,{color:"success"}):e.jsx(ds,{color:"warning"}),e.jsxs(s,{variant:"body2",children:["User Registration: ",n.recent_users_this_month>0?"Active":"Low Activity"]})]})}),d==="super_admin"&&h&&e.jsxs(e.Fragment,{children:[e.jsx(j,{size:{xs:12,sm:4},children:e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(V,{color:"success"}),e.jsx(s,{variant:"body2",children:"Approval Workflows: Active"})]})}),e.jsx(j,{size:{xs:12,sm:4},children:e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Ds,{color:"info"}),e.jsxs(s,{variant:"body2",children:["Database: ",h.system_health.performance_score,"% Performance"]})]})}),e.jsx(j,{size:{xs:12,sm:4},children:e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Ne,{color:"success"}),e.jsx(s,{variant:"body2",children:"Security: All Systems Normal"})]})})]})]})]})})]})},As=({open:d,user:l,onClose:n,onSave:D,userRole:h})=>{const[S,z]=x.useState({name:"",email:"",role:"",is_active:!0});x.useEffect(()=>{l&&z({name:l.name||"",email:l.email||"",role:l.role||"user",is_active:l.is_active??!0})},[l]);const v=()=>{l&&D(l.id,S)},C=o=>b=>{z(_=>({..._,[o]:b.target.value}))},M=o=>b=>{z(_=>({..._,[o]:b.target.checked}))};return e.jsxs(de,{open:d,onClose:n,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(xe,{children:["Edit User: ",l==null?void 0:l.email]}),e.jsx(he,{children:e.jsxs(t,{sx:{pt:2,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(K,{label:"Name",fullWidth:!0,value:S.name,onChange:C("name")}),e.jsx(K,{label:"Email",fullWidth:!0,value:S.email,onChange:C("email"),type:"email"}),e.jsxs(oe,{fullWidth:!0,children:[e.jsx(le,{children:"Role"}),e.jsxs(ce,{value:S.role,onChange:C("role"),label:"Role",children:[e.jsx(T,{value:"user",children:"User"}),e.jsx(T,{value:"admin",children:"Admin"}),e.jsx(T,{value:"manager",children:"Manager"}),h==="super_admin"&&e.jsx(T,{value:"super_admin",children:"Super Admin"})]})]}),e.jsx(be,{control:e.jsx(ie,{checked:S.is_active,onChange:M("is_active")}),label:"Active User"})]})}),e.jsxs(me,{children:[e.jsx(w,{onClick:n,children:"Cancel"}),e.jsx(w,{onClick:v,variant:"contained",children:"Save Changes"})]})]})},Is=({userRole:d})=>{const[l,n]=x.useState([]),[D,h]=x.useState(!0),[S,z]=x.useState(!1),[v,C]=x.useState(null),[M,o]=x.useState(null),[b,_]=x.useState({open:!1,user:null}),[f,I]=x.useState(!1),[A,R]=x.useState({name:"",email:"",role:"user",department_id:"",send_invite:!0}),[W,N]=x.useState([]),[q,r]=x.useState(null),[u,a]=x.useState(null);x.useEffect(()=>{p(),y()},[]);const p=async()=>{try{h(!0);const c=await fetch("/admin/api/users",{credentials:"include"});if(!c.ok)throw new Error("Failed to fetch users");const g=await c.json();if(g.success)n(g.users);else throw new Error(g.error||"Failed to load users")}catch(c){console.error("Error fetching users:",c),C(c instanceof Error?c.message:"Failed to load users")}finally{h(!1)}},y=async()=>{try{const c=await fetch("/admin/api/departments",{credentials:"include"});if(!c.ok)throw new Error("Failed to fetch departments");const g=await c.json();g.success&&N(g.departments.map(H=>({id:H.id,name:H.name})))}catch(c){console.error("Error fetching departments:",c)}},O=async()=>{try{z(!0);const g=await(await fetch("/admin/api/users",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...A,department_id:parseInt(A.department_id)||null})})).json();if(g.success)n(H=>[...H,g.user]),o("User created successfully"),C(null),R({name:"",email:"",role:"user",department_id:"",send_invite:!0}),I(!1),setTimeout(()=>{o(null)},3e3);else throw new Error(g.error||"Failed to create user")}catch(c){console.error("Error creating user:",c),C(c instanceof Error?c.message:"Failed to create user")}finally{z(!1)}},P=async(c,g)=>{try{const ue=await(await fetch(`/admin/api/users/${c}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(g)})).json();if(ue.success)n(_e=>_e.map(we=>we.id===c?{...we,...g}:we)),_({open:!1,user:null}),C(null);else throw new Error(ue.error||"Failed to update user")}catch(H){console.error("Error updating user:",H),C(H instanceof Error?H.message:"Failed to update user")}},i=async c=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{const H=await(await fetch(`/admin/api/users/${c}`,{method:"DELETE",credentials:"include"})).json();if(H.success)n(ue=>ue.filter(_e=>_e.id!==c)),C(null);else throw new Error(H.error||"Failed to delete user")}catch(g){console.error("Error deleting user:",g),C(g instanceof Error?g.message:"Failed to delete user")}},k=(c,g)=>{r(c.currentTarget),a(g)},E=()=>{r(null),a(null)},B=c=>{switch(c){case"super_admin":return"error";case"admin":return"warning";case"manager":return"info";default:return"default"}},ke=c=>c?new Date(c).toLocaleDateString():"Never";return D?e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:e.jsx(ee,{})}):e.jsxs(t,{children:[e.jsxs(t,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(s,{variant:"h5",children:"User Management"}),e.jsxs(t,{sx:{display:"flex",gap:1},children:[e.jsx(w,{variant:"outlined",startIcon:e.jsx(Ae,{}),onClick:p,children:"Refresh"}),d==="super_admin"&&e.jsx(w,{variant:"contained",startIcon:e.jsx(re,{}),onClick:()=>I(!0),children:"Add User"})]})]}),v&&e.jsx(X,{severity:"error",sx:{mb:3},children:v}),M&&e.jsx(X,{severity:"success",sx:{mb:3},children:M}),e.jsx(je,{component:J,children:e.jsxs(fe,{children:[e.jsx(ge,{children:e.jsxs(G,{children:[e.jsx(m,{children:"User"}),e.jsx(m,{children:"Department"}),e.jsx(m,{children:"Role"}),e.jsx(m,{children:"Status"}),e.jsx(m,{children:"Created"}),e.jsx(m,{children:"Last Login"}),e.jsx(m,{children:"Actions"})]})}),e.jsxs(ye,{children:[l.map(c=>e.jsxs(G,{children:[e.jsx(m,{children:e.jsxs(t,{children:[e.jsx(s,{variant:"body2",fontWeight:"bold",children:c.name}),e.jsx(s,{variant:"body2",color:"text.secondary",children:c.email})]})}),e.jsx(m,{children:e.jsx(s,{variant:"body2",children:c.department_name||"No Department"})}),e.jsx(m,{children:e.jsx(L,{label:c.role.replace("_"," ").toUpperCase(),color:B(c.role),size:"small"})}),e.jsx(m,{children:e.jsx(L,{label:c.is_active?"Active":"Inactive",color:c.is_active?"success":"default",size:"small",icon:c.is_active?e.jsx(V,{}):e.jsx(bs,{})})}),e.jsx(m,{children:e.jsx(s,{variant:"body2",children:ke(c.created_at)})}),e.jsx(m,{children:e.jsx(s,{variant:"body2",children:ke(c.last_login)})}),e.jsx(m,{children:e.jsx(ae,{onClick:g=>k(g,c),children:e.jsx(Oe,{})})})]},c.id)),l.length===0&&e.jsx(G,{children:e.jsx(m,{colSpan:7,align:"center",children:e.jsx(s,{variant:"body2",color:"text.secondary",sx:{py:4},children:"No users found"})})})]})]})}),e.jsxs(We,{anchorEl:q,open:!!q,onClose:E,children:[e.jsxs(T,{onClick:()=>{u&&_({open:!0,user:u}),E()},children:[e.jsx(Ee,{children:e.jsx(ts,{fontSize:"small"})}),e.jsx(ne,{children:"Edit User"})]}),e.jsxs(T,{onClick:()=>{u&&i(u.id),E()},children:[e.jsx(Ee,{children:e.jsx($e,{fontSize:"small"})}),e.jsx(ne,{children:"Delete User"})]})]}),e.jsx(As,{open:b.open,user:b.user,onClose:()=>_({open:!1,user:null}),onSave:P,userRole:d}),e.jsxs(de,{open:f,onClose:()=>I(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(xe,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(re,{color:"primary"}),"Create New User"]})}),e.jsx(he,{children:e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[e.jsx(K,{label:"Full Name",fullWidth:!0,value:A.name,onChange:c=>R(g=>({...g,name:c.target.value})),placeholder:"e.g., John Smith",required:!0}),e.jsx(K,{label:"Email Address",fullWidth:!0,type:"email",value:A.email,onChange:c=>R(g=>({...g,email:c.target.value})),placeholder:"e.g., john.smith@department.gov",required:!0,helperText:"User will receive login instructions at this email"}),e.jsxs(oe,{fullWidth:!0,children:[e.jsx(le,{children:"Department"}),e.jsxs(ce,{value:A.department_id,onChange:c=>R(g=>({...g,department_id:c.target.value})),label:"Department",children:[e.jsx(T,{value:"",children:"No Department"}),W.map(c=>e.jsx(T,{value:c.id.toString(),children:c.name},c.id))]})]}),e.jsxs(oe,{fullWidth:!0,children:[e.jsx(le,{children:"Role"}),e.jsxs(ce,{value:A.role,onChange:c=>R(g=>({...g,role:c.target.value})),label:"Role",children:[e.jsx(T,{value:"user",children:"User"}),e.jsx(T,{value:"admin",children:"Admin"}),e.jsx(T,{value:"manager",children:"Manager"}),d==="super_admin"&&e.jsx(T,{value:"super_admin",children:"Super Admin"})]})]}),e.jsx(be,{control:e.jsx(ie,{checked:A.send_invite,onChange:c=>R(g=>({...g,send_invite:c.target.checked}))}),label:"Send invitation email to user"})]})}),e.jsxs(me,{children:[e.jsx(w,{onClick:()=>I(!1),disabled:S,children:"Cancel"}),e.jsx(w,{variant:"contained",onClick:O,disabled:S||!A.name.trim()||!A.email.trim(),startIcon:e.jsx(re,{}),children:S?"Creating...":"Create User"})]})]})]})},ks=d=>({"data-formatter":{name:"Data Formatter",route:"/app/data-formatter",description:"Transform CAD exports into standardized formats"},"response-time-analyzer":{name:"Response Time Analyzer",route:"/app/response-time-analyzer",description:"NFPA 1710 compliance analysis and reporting"},"fire-map-pro":{name:"Fire Map Pro",route:"/app/fire-map-pro",description:"Advanced incident mapping and geographic analysis"},"water-supply-coverage":{name:"Water Supply Coverage",route:"/water-supply-coverage",description:"Rural water supply coverage analysis"},"iso-credit-calculator":{name:"ISO Credit Calculator",route:"/iso-credit-calculator",description:"Fire Suppression Rating Schedule assessment"},"station-coverage-optimizer":{name:"Station Coverage Optimizer",route:"/station-coverage-optimizer",description:"Optimize station locations and response coverage"},"admin-console":{name:"Admin Console",route:"/app/admin",description:"Department and user management"},"call-density-heatmap":{name:"Call Density Heatmap",description:"Legacy tool - Geographic incident density analysis"},"coverage-gap-finder":{name:"Coverage Gap Finder",description:"Legacy tool - Identify response coverage gaps"}})[d]||{name:d.replace(/-/g," ").replace(/\b\w/g,n=>n.toUpperCase()),description:"Unknown feature"},Es=({userRole:d})=>{const[l,n]=x.useState([]),[D,h]=x.useState(!0),[S,z]=x.useState(!1),[v,C]=x.useState(null),[M,o]=x.useState(null),[b,_]=x.useState(!1),[f,I]=x.useState({name:"",code:"",department_type:"combined"});x.useEffect(()=>{A()},[]);const A=async()=>{try{h(!0);const r=await fetch("/admin/api/departments",{credentials:"include"});if(!r.ok)throw new Error("Failed to fetch departments");const u=await r.json();if(u.success)n(u.departments);else throw new Error(u.error||"Failed to load departments")}catch(r){console.error("Error fetching departments:",r),C(r instanceof Error?r.message:"Failed to load departments")}finally{h(!1)}},R=async(r,u)=>{try{z(!0);const p=await(await fetch(`/admin/api/departments/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(u)})).json();if(p.success)n(y=>y.map(O=>O.id===r?{...O,...u}:O)),o("Department updated successfully"),C(null),setTimeout(()=>{o(null)},3e3);else throw new Error(p.error||"Failed to update department")}catch(a){console.error("Error updating department:",a),C(a instanceof Error?a.message:"Failed to update department")}finally{z(!1)}},W=async()=>{try{z(!0);const u=await(await fetch("/admin/api/departments",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(f)})).json();if(u.success)n(a=>[...a,u.department]),o("Department created successfully"),C(null),I({name:"",code:"",department_type:"combined"}),_(!1),setTimeout(()=>{o(null)},3e3);else throw new Error(u.error||"Failed to create department")}catch(r){console.error("Error creating department:",r),C(r instanceof Error?r.message:"Failed to create department")}finally{z(!1)}},N=r=>{switch(r){case"fire":return"error";case"ems":return"info";case"combined":return"warning";default:return"default"}},q=r=>new Date(r).toLocaleDateString();return D?e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:e.jsx(ee,{})}):e.jsxs(t,{children:[e.jsxs(t,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(s,{variant:"h5",children:"Department Settings"}),e.jsxs(t,{sx:{display:"flex",gap:2},children:[d==="super_admin"&&e.jsx(w,{variant:"contained",startIcon:e.jsx(rs,{}),onClick:()=>_(!0),children:"Add Department"}),e.jsx(w,{variant:"outlined",startIcon:e.jsx(Ae,{}),onClick:A,children:"Refresh"})]})]}),v&&e.jsx(X,{severity:"error",sx:{mb:3},children:v}),M&&e.jsx(X,{severity:"success",sx:{mb:3},children:M}),e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:3},children:[l.map(r=>e.jsx(F,{children:e.jsxs(U,{children:[e.jsxs(t,{sx:{mb:3},children:[e.jsxs(t,{display:"flex",alignItems:"center",gap:2,sx:{mb:2},children:[e.jsx(Y,{color:"primary"}),e.jsx(s,{variant:"h6",children:r.name}),e.jsx(L,{label:r.department_type.toUpperCase(),color:N(r.department_type),size:"small"}),e.jsx(L,{label:r.is_active?"Active":"Inactive",color:r.is_active?"success":"default",size:"small"})]}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:["Department Code: ",r.code," â€¢ Created: ",q(r.created_at)," â€¢ ",r.user_count," Users"]})]}),e.jsxs(t,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:3},children:[e.jsxs(t,{children:[e.jsxs(s,{variant:"subtitle1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(qe,{fontSize:"small"}),"Basic Settings"]}),e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(K,{label:"Department Name",fullWidth:!0,value:r.name,onChange:u=>{const a=u.target.value;n(p=>p.map(y=>y.id===r.id?{...y,name:a}:y))},size:"small"}),e.jsxs(oe,{fullWidth:!0,size:"small",children:[e.jsx(le,{children:"Department Type"}),e.jsxs(ce,{value:r.department_type,onChange:u=>{const a=u.target.value;n(p=>p.map(y=>y.id===r.id?{...y,department_type:a}:y))},label:"Department Type",children:[e.jsx(T,{value:"fire",children:"Fire"}),e.jsx(T,{value:"ems",children:"EMS"}),e.jsx(T,{value:"combined",children:"Combined Fire/EMS"})]})]}),d==="super_admin"&&e.jsx(be,{control:e.jsx(ie,{checked:r.is_active,onChange:u=>{const a=u.target.checked;n(p=>p.map(y=>y.id===r.id?{...y,is_active:a}:y))}}),label:"Department Active"})]})]}),e.jsxs(t,{children:[e.jsxs(s,{variant:"subtitle1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(He,{fontSize:"small"}),"Advanced Settings"]}),e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(be,{control:e.jsx(ie,{checked:r.api_enabled,onChange:u=>{const a=u.target.checked;n(p=>p.map(y=>y.id===r.id?{...y,api_enabled:a}:y))}}),label:"API Access Enabled"}),e.jsx(s,{variant:"subtitle2",gutterBottom:!0,children:"Available Features"}),e.jsx(J,{variant:"outlined",sx:{p:2},children:e.jsxs(Pe,{dense:!0,children:[Object.entries(r.features_enabled||{}).map(([u,a])=>{const p=ks(u);return e.jsxs(ve,{divider:!0,children:[e.jsx(ne,{primary:p.name,secondary:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(L,{size:"small",label:a?"Enabled":"Disabled",color:a?"success":"default",variant:a?"filled":"outlined"}),p.route&&e.jsx(s,{variant:"caption",color:"text.secondary",children:p.route})]})}),e.jsx(hs,{children:e.jsx(ie,{edge:"end",checked:a,onChange:y=>{const O={...r.features_enabled,[u]:y.target.checked};n(P=>P.map(i=>i.id===r.id?{...i,features_enabled:O}:i))}})})]},u)}),Object.keys(r.features_enabled||{}).length===0&&e.jsx(ve,{children:e.jsx(ne,{primary:"No features configured",secondary:"Contact administrator to enable features"})})]})})]})]})]}),e.jsx(Ie,{sx:{my:3}}),e.jsx(t,{display:"flex",justifyContent:"flex-end",children:e.jsx(w,{variant:"contained",startIcon:e.jsx(Me,{}),onClick:()=>R(r.id,{name:r.name,department_type:r.department_type,is_active:r.is_active,api_enabled:r.api_enabled,features_enabled:r.features_enabled}),disabled:S,children:S?"Saving...":"Save Changes"})})]})},r.id)),l.length===0&&e.jsxs(J,{sx:{p:4,textAlign:"center"},children:[e.jsx(Y,{sx:{fontSize:48,color:"text.secondary",mb:2}}),e.jsx(s,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Departments Found"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:d==="super_admin"?"Create a new department to get started.":"Contact your administrator to set up departments."})]})]}),e.jsxs(de,{open:b,onClose:()=>_(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(xe,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Y,{color:"primary"}),"Create New Department"]})}),e.jsx(he,{children:e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[e.jsx(K,{label:"Department Name",fullWidth:!0,value:f.name,onChange:r=>I(u=>({...u,name:r.target.value})),placeholder:"e.g., Springfield Fire Department",required:!0}),e.jsx(K,{label:"Department Code",fullWidth:!0,value:f.code,onChange:r=>I(u=>({...u,code:r.target.value})),placeholder:"e.g., SFD",required:!0,helperText:"Short unique identifier for the department"}),e.jsxs(oe,{fullWidth:!0,children:[e.jsx(le,{children:"Department Type"}),e.jsxs(ce,{value:f.department_type,onChange:r=>I(u=>({...u,department_type:r.target.value})),label:"Department Type",children:[e.jsx(T,{value:"fire",children:"Fire Department"}),e.jsx(T,{value:"ems",children:"EMS Service"}),e.jsx(T,{value:"combined",children:"Combined Fire/EMS"})]})]})]})}),e.jsxs(me,{children:[e.jsx(w,{onClick:()=>_(!1),disabled:S,children:"Cancel"}),e.jsx(w,{variant:"contained",onClick:W,disabled:S||!f.name.trim()||!f.code.trim(),startIcon:e.jsx(Me,{}),children:S?"Creating...":"Create Department"})]})]})]})};function Le(d){const{children:l,value:n,index:D,...h}=d;return e.jsx("div",{role:"tabpanel",hidden:n!==D,id:`approvals-tabpanel-${D}`,"aria-labelledby":`approvals-tab-${D}`,...h,children:n===D&&e.jsx(t,{sx:{pt:3},children:l})})}const Ms=()=>{const[d,l]=x.useState(0),[n,D]=x.useState([]),[h,S]=x.useState([]),[z,v]=x.useState(!0),[C,M]=x.useState(null),[o,b]=x.useState({open:!1,type:"department",action:"approve",request:null}),[_,f]=x.useState(""),[I,A]=x.useState(!1);x.useEffect(()=>{R()},[]);const R=async()=>{try{v(!0),M(null);const a=await fetch("/admin/api/department-requests?status=pending",{credentials:"include"});if(!a.ok)throw new Error("Failed to fetch department requests");const p=await a.json(),y=await fetch("/admin/api/user-requests?status=pending",{credentials:"include"});if(!y.ok)throw new Error("Failed to fetch user requests");const O=await y.json();D(p.requests||[]),S(O.requests||[])}catch(a){console.error("Error fetching pending requests:",a),M(a instanceof Error?a.message:"Failed to fetch requests")}finally{v(!1)}},W=(a,p)=>{l(p)},N=(a,p,y)=>{b({open:!0,type:a,action:p,request:y}),f("")},q=()=>{b({open:!1,type:"department",action:"approve",request:null}),f("")},r=async()=>{if(!o.request)return;const{type:a,action:p,request:y}=o,O=a==="department"?`/admin/api/department-requests/${y.id}/${p}`:`/admin/api/user-requests/${y.id}/${p}`;try{A(!0);const P=await fetch(O,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({review_notes:_})});if(!P.ok){const i=await P.json();throw new Error(i.error||`Failed to ${p} request`)}await R(),q()}catch(P){console.error(`Error ${o.action}ing request:`,P),M(P instanceof Error?P.message:`Failed to ${p} request`)}finally{A(!1)}},u=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return z?e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(ee,{size:60})}):e.jsxs(t,{children:[e.jsxs(t,{sx:{mb:3},children:[e.jsx(s,{variant:"h5",component:"h2",gutterBottom:!0,children:"Pending Approvals"}),e.jsx(s,{variant:"body1",color:"text.secondary",children:"Review and approve new department and user registration requests"})]}),C&&e.jsx(X,{severity:"error",sx:{mb:3},onClose:()=>M(null),children:C}),e.jsxs(j,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(j,{size:{xs:12,sm:6},children:e.jsx(F,{children:e.jsx(U,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Y,{color:"primary"}),e.jsxs(t,{children:[e.jsx(s,{variant:"h4",children:n.length}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Department Requests"})]})]})})})}),e.jsx(j,{size:{xs:12,sm:6},children:e.jsx(F,{children:e.jsx(U,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Re,{color:"primary"}),e.jsxs(t,{children:[e.jsx(s,{variant:"h4",children:h.length}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"User Requests"})]})]})})})})]}),e.jsx(J,{sx:{mb:3},children:e.jsxs(Ve,{value:d,onChange:W,"aria-label":"approval tabs",children:[e.jsx(Q,{icon:e.jsx(Y,{}),label:`Department Requests (${n.length})`}),e.jsx(Q,{icon:e.jsx(Re,{}),label:`User Requests (${h.length})`})]})}),e.jsx(Le,{value:d,index:0,children:e.jsx(je,{component:J,children:e.jsxs(fe,{children:[e.jsx(ge,{children:e.jsxs(G,{children:[e.jsx(m,{children:"Department"}),e.jsx(m,{children:"Contact"}),e.jsx(m,{children:"Type"}),e.jsx(m,{children:"Population"}),e.jsx(m,{children:"Stations"}),e.jsx(m,{children:"Requested"}),e.jsx(m,{children:"Actions"})]})}),e.jsx(ye,{children:n.length===0?e.jsx(G,{children:e.jsx(m,{colSpan:7,align:"center",sx:{py:4},children:e.jsx(s,{variant:"body1",color:"text.secondary",children:"No pending department requests"})})}):n.map(a=>{var p;return e.jsxs(G,{children:[e.jsxs(m,{children:[e.jsx(s,{variant:"subtitle2",children:a.department_name}),e.jsx(s,{variant:"body2",color:"text.secondary",children:a.department_code})]}),e.jsxs(m,{children:[e.jsx(s,{variant:"body2",children:a.contact_name}),e.jsx(s,{variant:"body2",color:"text.secondary",children:a.contact_email})]}),e.jsx(m,{children:e.jsx(L,{label:a.department_type,size:"small",variant:"outlined"})}),e.jsx(m,{children:((p=a.population_served)==null?void 0:p.toLocaleString())||"N/A"}),e.jsx(m,{children:a.number_of_stations||"N/A"}),e.jsx(m,{children:e.jsx(s,{variant:"body2",children:u(a.requested_at)})}),e.jsx(m,{children:e.jsxs(t,{sx:{display:"flex",gap:1},children:[e.jsx(w,{size:"small",startIcon:e.jsx(V,{}),color:"success",onClick:()=>N("department","approve",a),children:"Approve"}),e.jsx(w,{size:"small",startIcon:e.jsx(Te,{}),color:"error",onClick:()=>N("department","deny",a),children:"Deny"})]})})]},a.id)})})]})})}),e.jsx(Le,{value:d,index:1,children:e.jsx(je,{component:J,children:e.jsxs(fe,{children:[e.jsx(ge,{children:e.jsxs(G,{children:[e.jsx(m,{children:"User"}),e.jsx(m,{children:"Department"}),e.jsx(m,{children:"Requested Role"}),e.jsx(m,{children:"Experience"}),e.jsx(m,{children:"Requested"}),e.jsx(m,{children:"Actions"})]})}),e.jsx(ye,{children:h.length===0?e.jsx(G,{children:e.jsx(m,{colSpan:6,align:"center",sx:{py:4},children:e.jsx(s,{variant:"body1",color:"text.secondary",children:"No pending user requests"})})}):h.map(a=>e.jsxs(G,{children:[e.jsxs(m,{children:[e.jsx(s,{variant:"subtitle2",children:a.user_name}),e.jsx(s,{variant:"body2",color:"text.secondary",children:a.user_email})]}),e.jsx(m,{children:e.jsx(s,{variant:"body2",children:a.department_name})}),e.jsx(m,{children:e.jsx(L,{label:a.requested_role,size:"small",color:"primary",variant:"outlined"})}),e.jsxs(m,{children:[e.jsx(s,{variant:"body2",children:a.years_of_service?`${a.years_of_service} years`:"N/A"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:a.current_position||"N/A"})]}),e.jsx(m,{children:e.jsx(s,{variant:"body2",children:u(a.requested_at)})}),e.jsx(m,{children:e.jsxs(t,{sx:{display:"flex",gap:1},children:[e.jsx(w,{size:"small",startIcon:e.jsx(V,{}),color:"success",onClick:()=>N("user","approve",a),children:"Approve"}),e.jsx(w,{size:"small",startIcon:e.jsx(Te,{}),color:"error",onClick:()=>N("user","deny",a),children:"Deny"})]})})]},a.id))})]})})}),e.jsxs(de,{open:o.open,onClose:q,maxWidth:"md",fullWidth:!0,children:[e.jsxs(xe,{children:[o.action==="approve"?"Approve":"Deny"," "," ",o.type==="department"?"Department":"User"," Request"]}),e.jsx(he,{children:o.request&&e.jsxs(t,{sx:{pt:1},children:[e.jsxs(t,{sx:{mb:3},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Request Details"}),o.type==="department"?e.jsxs(j,{container:!0,spacing:2,children:[e.jsxs(j,{size:{xs:12,sm:6},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Department Name"}),e.jsx(s,{variant:"body1",children:o.request.department_name})]}),e.jsxs(j,{size:{xs:12,sm:6},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Type"}),e.jsx(s,{variant:"body1",children:o.request.department_type})]}),e.jsxs(j,{size:{xs:12,sm:6},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Contact Name"}),e.jsx(s,{variant:"body1",children:o.request.contact_name})]}),e.jsxs(j,{size:{xs:12,sm:6},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Contact Email"}),e.jsx(s,{variant:"body1",children:o.request.contact_email})]}),e.jsxs(j,{size:{xs:12},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Justification"}),e.jsx(s,{variant:"body1",children:o.request.justification||"N/A"})]})]}):e.jsxs(j,{container:!0,spacing:2,children:[e.jsxs(j,{size:{xs:12,sm:6},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"User Name"}),e.jsx(s,{variant:"body1",children:o.request.user_name})]}),e.jsxs(j,{size:{xs:12,sm:6},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Email"}),e.jsx(s,{variant:"body1",children:o.request.user_email})]}),e.jsxs(j,{size:{xs:12,sm:6},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Department"}),e.jsx(s,{variant:"body1",children:o.request.department_name})]}),e.jsxs(j,{size:{xs:12,sm:6},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Requested Role"}),e.jsx(s,{variant:"body1",children:o.request.requested_role})]}),e.jsxs(j,{size:{xs:12},children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Verification Info"}),e.jsx(s,{variant:"body1",children:o.request.verification_info||"N/A"})]})]})]}),e.jsx(Ie,{sx:{my:2}}),e.jsxs(t,{children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:["Review Notes ",o.action==="deny"&&e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(K,{fullWidth:!0,multiline:!0,rows:4,value:_,onChange:a=>f(a.target.value),placeholder:o.action==="approve"?"Optional notes about the approval...":"Please provide a reason for denial...",required:o.action==="deny"})]})]})}),e.jsxs(me,{children:[e.jsx(w,{onClick:q,disabled:I,children:"Cancel"}),e.jsx(w,{onClick:r,disabled:I||o.action==="deny"&&!_.trim(),color:o.action==="approve"?"success":"error",variant:"contained",children:I?e.jsx(ee,{size:20}):`${o.action==="approve"?"Approve":"Deny"} Request`})]})]})]})},Ts=()=>{const[d,l]=x.useState([]),[n,D]=x.useState(null),[h,S]=x.useState(!1),[z,v]=x.useState(null),[C,M]=x.useState(null),[o,b]=x.useState(null),[_,f]=x.useState(!1),[I,A]=x.useState("all");x.useEffect(()=>{R(),W();const i=setInterval(()=>{R(),W()},3e4);return()=>clearInterval(i)},[I]);const R=async()=>{try{S(!0);const i=new URLSearchParams({unread_only:I==="unread"?"true":"false",limit:"20"}),k=await fetch(`/notifications/api/notifications?${i}`,{credentials:"include"});if(!k.ok)throw new Z("Failed to fetch notifications");const E=await k.json();if(E.success)l(E.notifications);else throw new Z(E.error||"Failed to load notifications")}catch(i){console.error("Error fetching notifications:",i),v(i instanceof Z?i.message:"Failed to load notifications")}finally{S(!1)}},W=async()=>{try{const i=await fetch("/notifications/api/notifications/stats",{credentials:"include"});if(!i.ok)throw new Z("Failed to fetch notification stats");const k=await i.json();k.success&&D(k.stats)}catch(i){console.error("Error fetching notification stats:",i)}},N=async i=>{try{if(!(await fetch(`/notifications/api/notifications/${i}/read`,{method:"POST",credentials:"include"})).ok)throw new Z("Failed to mark notification as read");l(E=>E.map(B=>B.id===i?{...B,is_read:!0}:B)),W()}catch(k){console.error("Error marking notification as read:",k),v("Failed to mark notification as read")}},q=async()=>{try{if(!(await fetch("/notifications/api/notifications/mark-all-read",{method:"POST",credentials:"include"})).ok)throw new Z("Failed to mark all notifications as read");l(k=>k.map(E=>({...E,is_read:!0}))),W()}catch(i){console.error("Error marking all notifications as read:",i),v("Failed to mark all notifications as read")}},r=async i=>{try{if(!(await fetch(`/notifications/api/notifications/${i}`,{method:"DELETE",credentials:"include"})).ok)throw new Z("Failed to delete notification");l(E=>E.filter(B=>B.id!==i)),W()}catch(k){console.error("Error deleting notification:",k),v("Failed to delete notification")}},u=(i,k)=>{const E={fontSize:"small",color:k==="urgent"?"error":k==="high"?"warning":"primary"};switch(i){case"approval_request":return e.jsx(re,{...E});case"department_approved":return e.jsx(Y,{...E});case"user_approved":return e.jsx(V,{...E});case"system_alert":return e.jsx(He,{...E});default:return e.jsx(ps,{...E})}},a=i=>{switch(i){case"urgent":return"error";case"high":return"warning";case"normal":return"primary";case"low":return"default";default:return"default"}},p=i=>{const k=new Date,E=new Date(i),B=Math.floor((k.getTime()-E.getTime())/1e3);return B<60?"Just now":B<3600?`${Math.floor(B/60)}m ago`:B<86400?`${Math.floor(B/3600)}h ago`:`${Math.floor(B/86400)}d ago`},y=i=>{i.is_read||N(i.id),i.action_url?window.open(i.action_url,"_blank"):(b(i),f(!0))},O=(i,k)=>{i.stopPropagation(),M(i.currentTarget),b(k)},P=()=>{M(null),b(null)};return e.jsx(F,{children:e.jsxs(U,{children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ms,{badgeContent:(n==null?void 0:n.unread_count)||0,color:"error",children:e.jsx(Cs,{color:"primary"})}),e.jsx(s,{variant:"h6",children:"Notifications"})]}),e.jsxs(t,{sx:{display:"flex",gap:1},children:[e.jsxs(w,{size:"small",variant:I==="all"?"contained":"outlined",onClick:()=>A("all"),children:["All (",(n==null?void 0:n.total_count)||0,")"]}),e.jsxs(w,{size:"small",variant:I==="unread"?"contained":"outlined",onClick:()=>A("unread"),children:["Unread (",(n==null?void 0:n.unread_count)||0,")"]}),n&&n.unread_count>0&&e.jsx(De,{title:"Mark all as read",children:e.jsx(ae,{size:"small",onClick:q,children:e.jsx(Ue,{})})})]})]}),z&&e.jsx(X,{severity:"error",sx:{mb:2},onClose:()=>v(null),children:z}),h&&e.jsx(t,{sx:{display:"flex",justifyContent:"center",py:2},children:e.jsx(ee,{size:24})}),!h&&e.jsx(Pe,{sx:{maxHeight:400,overflow:"auto"},children:d.length===0?e.jsx(ve,{children:e.jsx(ne,{primary:"No notifications",secondary:I==="unread"?"All caught up!":"You have no notifications yet."})}):d.map((i,k)=>e.jsxs(es.Fragment,{children:[e.jsxs(ve,{sx:{cursor:"pointer",bgcolor:i.is_read?"transparent":"action.hover",borderRadius:1,mb:.5,"&:hover":{bgcolor:"action.selected"}},onClick:()=>y(i),children:[e.jsx(ys,{children:e.jsx(Be,{sx:{bgcolor:i.is_read?"grey.300":"primary.main"},children:u(i.type,i.priority)})}),e.jsx(ne,{primary:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(s,{variant:"subtitle2",sx:{fontWeight:i.is_read?"normal":"bold",flexGrow:1},children:i.title}),e.jsx(L,{size:"small",label:i.priority,color:a(i.priority),variant:"outlined"})]}),secondary:e.jsxs(t,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:i.message}),e.jsx(s,{variant:"caption",color:"text.secondary",children:p(i.created_at)})]})}),e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.action_url&&e.jsx(De,{title:"Open link",children:e.jsx(ae,{size:"small",children:e.jsx(Fe,{fontSize:"small"})})}),e.jsx(ae,{size:"small",onClick:E=>O(E,i),children:e.jsx(Oe,{fontSize:"small"})})]})]}),k<d.length-1&&e.jsx(Ie,{})]},i.id))}),e.jsxs(We,{anchorEl:C,open:!!C,onClose:P,children:[o&&!o.is_read&&e.jsxs(T,{onClick:()=>{N(o.id),P()},children:[e.jsx(Ue,{sx:{mr:1},fontSize:"small"}),"Mark as read"]}),e.jsxs(T,{onClick:()=>{o&&r(o.id),P()},children:[e.jsx($e,{sx:{mr:1},fontSize:"small"}),"Delete"]})]}),e.jsx(de,{open:_,onClose:()=>f(!1),maxWidth:"sm",fullWidth:!0,children:o&&e.jsxs(e.Fragment,{children:[e.jsx(xe,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[u(o.type,o.priority),o.title]})}),e.jsxs(he,{children:[e.jsx(s,{variant:"body1",paragraph:!0,children:o.message}),e.jsxs(t,{sx:{display:"flex",gap:1,mb:2},children:[e.jsx(L,{size:"small",label:o.type.replace("_"," ").toUpperCase(),variant:"outlined"}),e.jsx(L,{size:"small",label:o.priority.toUpperCase(),color:a(o.priority),variant:"outlined"})]}),e.jsx(s,{variant:"caption",color:"text.secondary",children:new Date(o.created_at).toLocaleString()})]}),e.jsxs(me,{children:[e.jsx(w,{onClick:()=>f(!1),children:"Close"}),o.action_url&&e.jsx(w,{variant:"contained",startIcon:e.jsx(Fe,{}),onClick:()=>{window.open(o.action_url,"_blank"),f(!1)},children:"Open Link"})]})]})})]})})};function se(d){const{children:l,value:n,index:D,...h}=d;return e.jsx("div",{role:"tabpanel",hidden:n!==D,id:`admin-tabpanel-${D}`,"aria-labelledby":`admin-tab-${D}`,...h,children:n===D&&e.jsx(t,{sx:{pt:3},children:l})})}function te(d){return{id:`admin-tab-${d}`,"aria-controls":`admin-tabpanel-${d}`}}const ut=()=>{const d=ss(),[l,n]=x.useState(0),[D,h]=x.useState(!0),[S,z]=x.useState(null),[v,C]=x.useState(null);x.useEffect(()=>{M()},[]);const M=async()=>{try{h(!0);const b=await fetch("/auth/api/me",{credentials:"include"});if(console.log("ðŸ” Admin access check - Response status:",b.status),!b.ok)throw new Error("Authentication required");const _=await b.json();console.log("ðŸ” Admin access check - Response data:",_);const f=_.user||_;if(console.log("ðŸ” Admin access check - Extracted user:",f),!f||f.role!=="admin"&&f.role!=="super_admin")throw console.error("ðŸ” Admin access denied - User role:",f==null?void 0:f.role),new Error("Admin access required");console.log("ðŸ” Admin access granted - User role:",f.role),C(f.role==="super_admin"?"super_admin":"admin")}catch(b){console.error("ðŸ” Admin access check failed:",b),b instanceof Error?b.message==="Authentication required"?(z("Please log in to access the admin console."),console.log("ðŸ” Redirecting to login due to authentication failure"),setTimeout(()=>d("/login"),2e3)):(z(b.message),console.log("ðŸ” Authorization error - user may be logged in but lacks admin privileges")):z("Access denied")}finally{h(!1)}},o=(b,_)=>{n(_)};return D?e.jsx(Se,{maxWidth:"lg",sx:{mt:4,mb:4},children:e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(ee,{size:60})})}):S?e.jsxs(Se,{maxWidth:"lg",sx:{mt:4,mb:4},children:[e.jsx(X,{severity:"error",sx:{mb:2},children:S}),S.includes("log in")&&e.jsxs(J,{sx:{p:3,mt:2},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Quick Admin Login"}),e.jsxs(t,{component:"form",onSubmit:async b=>{b.preventDefault();const _=new FormData(b.target),f=_.get("email"),I=_.get("password");try{const A=await fetch("/auth/api/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:f,password:I})});if(A.ok)z(null),M();else{const R=await A.json();z(R.message||"Login failed")}}catch{z("Login request failed")}},sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx("input",{type:"email",name:"email",placeholder:"Email",defaultValue:"admin@fireems.ai",style:{padding:"12px",border:"1px solid #ccc",borderRadius:"4px"}}),e.jsx("input",{type:"password",name:"password",placeholder:"Password",defaultValue:"admin123",style:{padding:"12px",border:"1px solid #ccc",borderRadius:"4px"}}),e.jsx(w,{type:"submit",variant:"contained",color:"primary",children:"Login to Admin Console"})]})]})]}):e.jsxs(Se,{maxWidth:"lg",sx:{mt:4,mb:4},children:[e.jsx(t,{sx:{mb:4},children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(us,{sx:{fontSize:40,color:"primary.main"}}),e.jsxs(t,{sx:{flexGrow:1},children:[e.jsx(s,{variant:"h4",component:"h1",gutterBottom:!0,children:"Admin Console"}),e.jsx(s,{variant:"subtitle1",color:"text.secondary",children:"Manage departments, users, and system settings"})]}),e.jsx(w,{variant:"outlined",onClick:()=>d("/"),sx:{mr:2},children:"Back to Tools"})]})}),e.jsx(J,{sx:{mb:3},children:e.jsxs(Ve,{value:l,onChange:o,"aria-label":"admin navigation tabs",variant:"fullWidth",children:[e.jsx(Q,{icon:e.jsx(xs,{}),label:"Overview",...te(0)}),e.jsx(Q,{icon:e.jsx(ze,{}),label:"User Management",...te(1)}),e.jsx(Q,{icon:e.jsx(Y,{}),label:"Department Settings",...te(2)}),e.jsx(Q,{icon:e.jsx(Ge,{}),label:"Notifications",...te(3)}),v==="super_admin"&&e.jsx(Q,{icon:e.jsx(Ss,{}),label:"Pending Approvals",...te(4)}),v==="super_admin"&&e.jsx(Q,{icon:e.jsx(pe,{}),label:"System Documentation",...te(5)})]})}),e.jsx(se,{value:l,index:0,children:e.jsx(zs,{userRole:v,onTabChange:n})}),e.jsx(se,{value:l,index:1,children:e.jsx(Is,{userRole:v})}),e.jsx(se,{value:l,index:2,children:e.jsx(Es,{userRole:v})}),e.jsx(se,{value:l,index:3,children:e.jsx(Ts,{})}),v==="super_admin"&&e.jsx(se,{value:l,index:4,children:e.jsx(Ms,{})}),v==="super_admin"&&e.jsx(se,{value:l,index:5,children:e.jsxs(J,{sx:{p:3},children:[e.jsxs(s,{variant:"h5",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1,mb:3},children:[e.jsx(pe,{}),"System Administration Documentation"]}),e.jsx(s,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Technical documentation for system administrators and product owners."}),e.jsxs(j,{container:!0,spacing:3,children:[e.jsx(j,{item:!0,xs:12,md:6,children:e.jsx(F,{children:e.jsxs(U,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"System Admin Guide"}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Complete guide for server setup, configuration, and maintenance."}),e.jsx(w,{variant:"contained",startIcon:e.jsx(pe,{}),onClick:()=>window.open("/docs/admin/SYSTEM_ADMIN_GUIDE","_blank"),children:"Read Guide"})]})})}),e.jsx(j,{item:!0,xs:12,md:6,children:e.jsx(F,{children:e.jsxs(U,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Troubleshooting Guide"}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Technical troubleshooting, debugging, and issue resolution."}),e.jsx(w,{variant:"contained",startIcon:e.jsx(pe,{}),onClick:()=>window.open("/docs/admin/TROUBLESHOOTING","_blank"),children:"Read Guide"})]})})})]})]})})]})};export{ut as default};
